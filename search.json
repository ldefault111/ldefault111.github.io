[{"title":"2022.5 jsdelivr似乎挂了的解决方案","url":"/posts/1a8c7bff/","content":"<p>发现打不开博客了，F12的报错百度了一下，发现是jsdelivr挂了。。。解决方案</p>\n<span id=\"more\"></span>\n<p>我的博客没怎么用到jsdelivr，所以将<code>custom_cdn_url</code>修改成<code>https://lib.baomitu.com/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;cdnjs_file&#125;</code>就可以了。</p>\n","categories":["博客搭建"],"tags":["Hexo"]},{"title":"Hexo+gitee搭建个人博客完整详细教程","url":"/posts/5e240c50/","content":"<p>闲来无事用Hexo+gitee搭了个博客，踩了不少坑，详细流程如下嘿嘿~</p>\n<span id=\"more\"></span>\n<h1 id=\"环境配置\">环境配置</h1>\n<h2 id=\"node-js-npm\">Node.js &amp; npm</h2>\n<p>Hexo基于Node.js，在官网<a href=\"https://nodejs.org/zh-cn/\">Node.js</a> 下载按默认配置安装即可！</p>\n<p>安装后可win+r输入cmd打开命令行，依次输入<code>node -v</code>，<code>npm -v</code>输出对应版本号说明Node.js和npm安装成功！</p>\n<p>在安装路径下…\\Nodejs\\node_modules\\npm可以找到文件npmrc，其为默认全局下载安装路径，可进行修改：prefix=路径。</p>\n<p>我在后续尝试中出现了环境变量问题，找博客最终做法如下：</p>\n<p>在\\Nodejs路径下创建<code>node_cache</code>和<code>node_global</code>两个文件夹，输入：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm config <span class=\"built_in\">set</span> prefix <span class=\"string\">&quot;node_global的路径&quot;</span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> cache <span class=\"string\">&quot;node_cache的路径&quot;</span></span><br></pre></td></tr></table></figure>\n<p>打开环境变量，新建变量NODE_PATH，地址为…\\node_global\\node_modules。</p>\n<p>为了以后方便，修改node_cache和node_global两个文件夹的访问修改权限。</p>\n<h2 id=\"git\">Git</h2>\n<p>Git是开源的分布式版本控制系统，在官网<a href=\"https://git-scm.com/\">Git</a> 找到Dowloads进行下载安装即可！</p>\n<p>安装后可win+r输入cmd打开命令行，输入<code>git --version</code>输出对应版本号说明Git安装成功！</p>\n<h2 id=\"gitee\">gitee</h2>\n<h3 id=\"注册账号\">注册账号</h3>\n<p>在<a href=\"https://gitee.com/\">gitee官网</a>注册账号。</p>\n<h3 id=\"创建仓库\">创建仓库</h3>\n<p>注册后，右上角新建仓库，若不想要博客出现二级域名，将仓库名称设为个人域名（即设为https://gitee.com/名称，中的这个名称）。</p>\n<p><img data-src=\"https://img-blog.csdnimg.cn/232cce473eaf4cdf850ffdcaf5dff656.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAZGVmYXVsdDExMQ==,size_15,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"></p>\n<p>进入刚建的仓库，选择服务-gitee pages，进行实名认证。</p>\n<p><img data-src=\"https://img-blog.csdnimg.cn/ceaac372bfb0428bb98b8e621983c16e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAZGVmYXVsdDExMQ==,size_18,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"></p>\n<h3 id=\"设置公钥\">设置公钥</h3>\n<p>打开git bash，依次输入下面三行指令，注意替换用户名和邮箱地址的字。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">&quot;用户名&quot;</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">&quot;邮箱地址&quot;</span></span><br><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">&#x27;邮箱地址&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>之后在C:/Users/xxx/.ssh中找到id_rsa.pub，在该路径下在git bash中输入<code>cat id_rsa.pub</code>或直接记事本打开，内容即为公钥，添加到个人设置-公钥管理中。</p>\n<p>继续输入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh -T git@gitee.com</span><br></pre></td></tr></table></figure>\n<p>点击yes，能看到“用户名！You’ve successfully authenticated！……”就配置成功了。</p>\n<h2 id=\"hexo配置\">hexo配置</h2>\n<h3 id=\"hexo安装\">hexo安装</h3>\n<p>打开命令行，输入<code>npm install hexo-cli -g</code>，不加<code>-g</code>会安装在命令行所在路径。</p>\n<h3 id=\"初始化\">初始化</h3>\n<p>打开你要存放网页资源文件的文件夹，右键选择git bash here，依次输入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo init</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<p>会出现如下文件夹：</p>\n<p><img data-src=\"https://img-blog.csdnimg.cn/5668a56368884e1c9795a2ad0eb1dd99.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAZGVmYXVsdDExMQ==,size_9,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"></p>\n<h3 id=\"信息修改\">信息修改</h3>\n<p>打开_config.yml进行修改。</p>\n<p><img data-src=\"https://img-blog.csdnimg.cn/b4750a606ba043eba9539625d2622570.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAZGVmYXVsdDExMQ==,size_9,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"></p>\n<h3 id=\"主题修改\">主题修改</h3>\n<p>如果不喜欢网页打开的主题，可在<a href=\"https://hexo.io/themes/\">官网</a>进行更换。</p>\n<p>先输入Ctrl+C断开服务，输入<code>git clone https themes/name</code>，其中https是你想要的主题的github网址，name是主题的名字。将下载的文件夹移入themes文件夹，记事本打开_config.yml，将theme: landscape改成theme: 你下载的。</p>\n<h3 id=\"预览\">预览</h3>\n<p>在git bash继续输入：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo s <span class=\"comment\">#其中加-p 80可以设置端口号，不加为默认4000</span></span><br></pre></td></tr></table></figure>\n<p>用浏览器访问<a href=\"http://localhost:80\">网页</a>就能看到初始界面（这是未修改过_config.yml的样子）：</p>\n<p><img data-src=\"https://img-blog.csdnimg.cn/a0e7b1dfc5f24b62a8f44cc87a7fc712.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAZGVmYXVsdDExMQ==,size_20,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"></p>\n<p>注：如果修改主题后出现报错：<code>err: Error: Cannot find module 'cheerio'</code>，输入<code>npm install cheerio</code>后再次输入<code>hexo g</code>即可。</p>\n<h1 id=\"部署\">部署</h1>\n<h2 id=\"hexo原理\">hexo原理</h2>\n<p>hexo将页面有关的md文件放在本地，写完文章后使用命令完成页面的生成，再将有改动的页面提交到gitee。</p>\n<h2 id=\"配置\">配置</h2>\n<p>打开_config.yml，配置deploy如下：</p>\n<p><img data-src=\"https://img-blog.csdnimg.cn/a21f22860a5747aa8a54d95fd9acf510.png\" alt=\"在这里插入图片描述\"></p>\n<h2 id=\"安装插件\">安装插件</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"部署到gitee\">部署到gitee</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure>\n<p>手动打开gitee仓库的gitee pages更新一下，便能在网站上看到了。</p>\n<p>以后每次更新了博客，使用命令<code>hexo g -d</code>部署到gitee再去gitee pages手动更新即可。</p>\n","categories":["博客搭建"],"tags":["Hexo","Node.js"]},{"title":"Hexo-Github迁移到阿里云ECS","url":"/posts/caa9058f/","content":"<p>Github pages访问还是有点慢，迁移到阿里云ECS，1G1核，Debian 11.4系统</p>\n<span id=\"more\"></span>\n<h1 id=\"引言-怎么又迁移了\">引言——怎么又迁移了</h1>\n<p>已经经过了gitee pages、github pages，现在又要移到服务器了…根本原因是速度，后面这个博客和域名打算用来干点其他事，买了服务器，不过主要还是自己看，后面不打算做SEO优化。</p>\n<h1 id=\"前置操作\">前置操作</h1>\n<ul>\n<li><a href=\"https://www.lyroch.site/posts/8128d504/\">Github-pages搭建hexo博客</a>：这里有套娃哈哈哈</li>\n<li>买个人域名（我是带个人域名的）</li>\n<li>买服务器，我的是阿里云ECS，1G1核，Debian 11.4系统</li>\n<li>（可选）<a href=\"https://www.lyroch.site/posts/9cf5d220/\">Vscode远程连接阿里云ECS服务器</a></li>\n</ul>\n<h1 id=\"服务器的博客环境\">服务器的博客环境</h1>\n<h2 id=\"安装git\">安装git</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get upgrade</span><br><span class=\"line\">sudo apt-get install git</span><br></pre></td></tr></table></figure>\n<p>之后运行<code>git --version</code>出现git的版本号即安装成功，配置git基本信息：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">&quot;your name&quot;</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">&quot;your email&quot;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"可选-服务器开启防火墙\">（可选）服务器开启防火墙</h2>\n<p>安装防火墙</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ufw</span><br><span class=\"line\">sudo ufw <span class=\"built_in\">enable</span></span><br></pre></td></tr></table></figure>\n<p>此时输入<code>sudo ufw status</code>输出activate即开启成功，常用命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo ufw status numbered <span class=\"comment\"># 查看规则</span></span><br><span class=\"line\">sudo ufw delete 序号\t\t<span class=\"comment\">#，删除前面命令显示的规则</span></span><br><span class=\"line\">sudo ufw allow 端口\t\t<span class=\"comment\"># 加入规则</span></span><br></pre></td></tr></table></figure>\n<p>对于服务器，我们需要输入以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo ufw allow 80/tcp\t<span class=\"comment\"># 开启http</span></span><br><span class=\"line\">sudo ufw allow 443/tcp\t<span class=\"comment\"># 开启https</span></span><br><span class=\"line\">sudo ufw allow ssh\t\t<span class=\"comment\"># 开启ssh连接</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"安装-nginx\">安装 nginx</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>\n<p>之后运行<code>nginx -v</code>出现版本号即安装成功，nginx的日志文件放在<code>/var/log/nginx</code>，程序在<code>/usr/sbin/nginx</code>，默认目录为<code>/var/www/html</code>，配置文件在<code>/etc/nginx/nginx.conf</code></p>\n<p>此时在浏览器输入服务器的公网ip，看到的应该是nginx的欢迎页面：</p>\n<img data-src=\"/posts/caa9058f/image-20221013231540932.png\" class=\"\" title=\"image-20221013231540932\">\n<h2 id=\"测试博客环境\">测试博客环境</h2>\n<p>将博客内容放进对应文件夹：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /var/www/html</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> 博客github</span><br></pre></td></tr></table></figure>\n<p>修改配置文件，将root后面的<code>/var/www/html</code>改成你刚刚clone的文件夹名，我的是.github.io的名字（如下）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">\tlisten 80 default_server;</span><br><span class=\"line\">\tlisten [::]:80 default_server;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\troot /var/www/html/ldefault111.github.io;\t</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>特别注意root后面那个分号，我第一次不小心删了调了半天。。。这时再次访问公网ip可以看到博客页面，说明环境配置成功了！</p>\n<p>nginx重启配置的命令：<code>nginx -s reload</code></p>\n<h1 id=\"服务器配置git仓库与自动部署\">服务器配置git仓库与自动部署</h1>\n<p>不愿每次更新完博客都登录服务器去git pull，所以我们在服务器建一个git仓库，并利用hooks自动将内容推到nginx的默认目录。</p>\n<h2 id=\"创建新用户\">创建新用户</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">adduser git</span><br></pre></td></tr></table></figure>\n<p>直接用root操作服务器不安全</p>\n<h2 id=\"密钥与ssh配置\">密钥与SSH配置</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">su git\t\t<span class=\"comment\"># 一定要切换用户不然后面文件权限会不对劲</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /home/git</span><br><span class=\"line\"><span class=\"comment\"># 创建文件（夹）</span></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> .ssh</span><br><span class=\"line\"><span class=\"built_in\">touch</span> .ssh/authorized_keys</span><br><span class=\"line\"><span class=\"comment\"># 修改权限</span></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> 700 .ssh</span><br><span class=\"line\"><span class=\"built_in\">chmod</span> 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure>\n<p>如果是部署hexo到github应该有在本机创建过公钥了，在本机的<code>C:\\Users\\你的名字\\.ssh</code>文件夹中有<code>id_isa.pub</code>，将内容复制下来：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /home/git/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>\n<p>将刚刚复制的内容贴进文件里，下面修改SSH的配置，如果担心改坏了可以先备份一份出来：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">su root\t\t<span class=\"comment\"># 切回root用户</span></span><br><span class=\"line\">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>\n<p>修改的内容列举如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 开启端口，我的原配置文件里下面这部分被注释掉的，打开注释就行</span></span><br><span class=\"line\">Port 22</span><br><span class=\"line\">AddressFamily any</span><br><span class=\"line\">ListenAddress 0.0.0.0</span><br><span class=\"line\">ListenAddress ::</span><br><span class=\"line\"><span class=\"comment\"># 配置允许SSH登录的用户，我的原配置文件里这个没有要自己添加</span></span><br><span class=\"line\">AllowUsers root git</span><br><span class=\"line\"><span class=\"comment\"># 修改公钥配置文件</span></span><br><span class=\"line\">AuthorizedKeysFile  .ssh/authorized_keys</span><br><span class=\"line\"><span class=\"comment\"># 允许root用户通过ssh登录</span></span><br><span class=\"line\">PermitRootLogin <span class=\"built_in\">yes</span></span><br><span class=\"line\"><span class=\"comment\"># 允许使用公钥对登录</span></span><br><span class=\"line\">PubkeyAuthentication <span class=\"built_in\">yes</span></span><br><span class=\"line\"><span class=\"comment\"># 允许密码登录</span></span><br><span class=\"line\">PasswordAuthentication <span class=\"built_in\">yes</span></span><br></pre></td></tr></table></figure>\n<p>保存后，输入<code>service sshd restart</code>重启sshd服务，没报错就成功了，报错应该是配置文件有问题，再检查一下</p>\n<h2 id=\"创建git远程仓库\">创建git远程仓库</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">su git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /home/git</span><br><span class=\"line\">git init --bare hexo.git\t<span class=\"comment\"># 要加--bare，否则会有.git文件，hooks的位置不一样和很多奇怪的问题</span></span><br><span class=\"line\"><span class=\"built_in\">chown</span> -R git:git hexo.git</span><br></pre></td></tr></table></figure>\n<p>在hooks文件夹里添加一个脚本：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">touch</span> /home/git/hexo/hooks/post-receive</span><br><span class=\"line\">vim /home/git/hexo/hooks/post-receive</span><br></pre></td></tr></table></figure>\n<p>文件中写入，注意第一个路径是nginx的默认路径：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">git --work-tree=/var/www/html/ldefault111.github.io --git-dir=/home/git/hexo.git checkout -f</span><br></pre></td></tr></table></figure>\n<p>网上的教程到这里就结束了，但是我在部署的时候出现了<code>remote:error: unable to unlink old ' filename_here' (permission denied)' </code>，查了半天发现可能是nginx默认路径的文件夹的权限问题，所以切到root用户进行修改，将文件夹的修改权限赋予用户git：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">su root</span><br><span class=\"line\"><span class=\"built_in\">chown</span> -R git:git /var/www/html/ldefault111.github.io</span><br></pre></td></tr></table></figure>\n<h1 id=\"配置hexo部署\">配置hexo部署</h1>\n<p>打开hexo站点配置文件，在deploy部分添加：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repository:</span> <span class=\"string\">git@你的公网ip:/home/git/hexo.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br><span class=\"line\">  <span class=\"attr\">ignore_hidden:</span> <span class=\"literal\">false</span> <span class=\"comment\"># 忽略隐藏文件及文件夹(目录)</span></span><br></pre></td></tr></table></figure>\n<p>之后进行<code>hexo deploy</code>就可以同时推送到服务器上的仓库，仓库收到推送后自动运行hooks里的脚本将内容更新到nginx的工作目录，网站内容就更新啦</p>\n<h1 id=\"配置域名解析\">配置域名解析</h1>\n<h2 id=\"域名解析到公网ip\">域名解析到公网ip</h2>\n<p>我的域名在阿里云，从控制台打开域名解析，添加记录：</p>\n<img data-src=\"/posts/caa9058f/image-20221013160617276.png\" class=\"\" title=\"image-20221013160617276\">\n<h1 id=\"可选-强制https\">（可选）强制https</h1>\n<h2 id=\"ssl模块安装\">SSL模块安装</h2>\n<p>先测试一下，输入<code>/usr/sbin/nginx -V</code>，注意是大写V，小写只给版本号，给出的<code>configure arguments: </code>如果有<code>--with-http_ssl_module</code>就说明已经有SSL模块了，如果没有就找教程先安装</p>\n<h2 id=\"获取免费ssl证书\">获取免费SSL证书</h2>\n<p>在阿里云的控制台找到数字证书管理服务，点开找到SSL证书，点立即购买，可以免费领取一年的：</p>\n<img data-src=\"/posts/caa9058f/image-20221013213148726.png\" class=\"\" title=\"image-20221013213148726\">\n<p>然后按照步骤进行配置就好，审核下来将证书下载到本地，上传到服务器里去（可以用SFTP，参考<a href=\"https://www.lyroch.site/posts/9cf5d220/\">Vscode远程连接阿里云ECS服务器</a>）</p>\n<h2 id=\"配置nginx\">配置nginx</h2>\n<p>打开配置文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>\n<p>将以下内容填入，其中ssl的两项是你之前下载的证书，放在服务器里的位置：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">\tserver &#123;</span><br><span class=\"line\">          \tlisten 443 ssl;</span><br><span class=\"line\">          \tserver_name www.lyroch.site;</span><br><span class=\"line\"> \t\t</span><br><span class=\"line\">         \tssl_certificate /root/ssl/8617822_www.lyroch.site.pem;</span><br><span class=\"line\">          \tssl_certificate_key /root/ssl/8617822_www.lyroch.site.key;</span><br><span class=\"line\">\t\t\tlocation / &#123;</span><br><span class=\"line\">\t\t\t\troot /var/www/html/ldefault111.github.io;</span><br><span class=\"line\">\t\t\t\tindex index.html index.htm;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">    \t&#125;</span><br><span class=\"line\">\t<span class=\"comment\"># Basic Settings</span></span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>保存退出后，重启nginx：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">nginx -t\t\t\t\t<span class=\"comment\"># 检查语法</span></span><br><span class=\"line\">service nginx restart</span><br></pre></td></tr></table></figure>\n<p>再打开域名就能看到了！</p>\n<h1 id=\"可选-修改ssh端口\">（可选）修改SSH端口</h1>\n<h1 id=\"参考博客\">参考博客</h1>\n<p><a href=\"https://www.jianshu.com/p/9c91a050a0dc\">如何在云服务器上使用git管理项目(git远程仓库、ssh配置、多密钥对配置</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/58654392\">Hexo 从 GitHub 到阿里云</a></p>\n","categories":["博客搭建"],"tags":["Hexo","CentOS","服务器"]},{"title":"Hexo-next主题添加Waline评论系统","url":"/posts/2b9d3709/","content":"<p>有了个人域名后选择了Waline评论系统~</p>\n<span id=\"more\"></span>\n<p>update 2023.2.3：2022下半年备案时担心交互式就关闭了评论，现在懒得开了，本文方法还是能用的。</p>\n<p>之前试过畅言，不喜欢那个界面，其他Next主题给的评论系统国内基本都不好用，最后选择了<a href=\"https://waline.js.org/\">Waline</a>，一款基于 Valine 衍生的简洁、安全的评论系统。</p>\n<h1 id=\"leancloud配置\">LeanCloud配置</h1>\n<p><a href=\"https://leancloud.app\">LeanCloud国际版</a>可以不用备案域名，注册后创建应用，开发板，随便起名。接下来进入控制台，设置，应用Keys，将AppID，AppKey，MasterKey记下来，后面会用到。</p>\n<p>在域名绑定处绑定自己的域名，在域名注册处解析。</p>\n<h1 id=\"waline配置\">Waline配置</h1>\n<p>按官网提示，进入<a href=\"https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample\">Vercel</a>进行配置。</p>\n<p><img data-src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA9EAAAJLCAYAAADguhXiAAAgAElEQVR4nOzdX0xT6b4//jeeKeM5uHPEZNLuC4ETTSw3lpNoYPSCcqGwtyQgF4dOskeZ7SSgydj6HYngXKgXChOZH607ESYZR8aZhLovAJOyBc5F6wWCgUTKTTuJRAYubGdOKDOnHJC65/ldlELbtVa7WiigvF9JM05pV5+11vM8a33W8y9LCCFAREREREREREnt2uoEEBEREREREb0tGEQTERERERERqcQgmoiIiIiIiEglBtFEREREREREKjGIJiIiIiIiIlKJQTQRERERERGRSgyiiYiIiIiIiFR6b6M2xOWmiYiIiIiIaDvJysra8G2mHEQzWCYiIiIiIqK3gVL8up7gWlUQnWrgzECbiIiIiIiItoKaADk6Zk01oM4SChFvskCYgTIRERERERG9TZIFzGoCatkgWi5AThQ0M6AmIiIiIiKi7ShRYCz3t6SBdnQQrSZ4Zgs1ERERERERbWeptjinEkyvBtHJgmUhBF6/fo1QKIR//vOf2LVrF0KhUPLUExEREREREW0xjUaD33//Hf/yL/+C7OxsZGdnJw2mZYNrERbzZvT/R/69sLAAAMjOzsZ7772H997bsNWxiIiIiIiIiDLuzZs3ePPmDV6/fo2srCzk5OQAiA2WkwbWv//+u2x37uh//+///i+ys7Pxb//2bxu7B0RERERERERbYGFhAaFQCH/4wx9W31MKpmP+HQmi5QJoIQQWFhag0WgYQBMREREREdE75f/+7/8QCoWQk5OzGignC6R3xW8kOoBeXl4GAAbQRERERERE9M6JxLrLy8sxsbCcyPu7ov8n/r/Ly8t4//33M5hkIiIiIiIioq2TnZ29Omm2UmwcbZfSh4QQ+Oc//8kJxIiIiIiIiOid9d577+HNmzeKAXT80GfFlmghBHbt2sUgmoiIiIiIiN5ZGo0Gu3btWo2DgSQt0fFvRL4ohMCbN28ynFwiIiIiIiKirRVpiY4OpKNFv/defOuz0peIiIiIiIiI3mXxsXBWVhaEEDGzdO+S+6DSe0RERERERETvomQxcOTv70W/wdZoIiIiIiIi2omUYuDoVmhAZkx0sg0QERERERERvWsSxcDRw6Dfk2uBZgBNREREREREO42a1mjZlmgG0kRERERERLSTqI2DZZe4IiIiIiIiItqJlGLiyPu7ot+IX+6KiIiIiIiIaCdQGxPviv8jg2ciIiIiIiLaqeLj4/iYmbNzExERERER0Y6nNgaOCaKjm66JiIiIiIiIdhI1MbFiSzQRERERERERxYqZWEzuv0RERERERETvOrUx8a5EfyQiIiIiIiLaqeJjZSEEu3MTERERERERqcUgmoiIiIiIiEgl2SCa3buJiIiIiIhop1ETC+9iwExEREREREQkLz5mll0nmoiIiIiIiGin4jrRRERERERERBuAQTQRERERERGRSgyiiYiIiIiIiFRiEE1ERERERESkEoNoIiIiIiIiIpUYRBMRERERERGpxCCaiIiIiIiISCUG0UREREREREQqMYgmIiIiIiIiUolBNBEREREREZFKDKKJiIiIiIiIVGIQTURERERERKQSg2giIiIiIiIilRhEExEREREREanEIJqIiIiIiIhIJQbRRERERERERCoxiCYiIiIiIiJSiUE0ERERERERkUoMoomIiIiIiIhUYhBNREREREREpBKDaCIiIiIiIiKVGEQTERERERERqcQgmoiIiIiIiEglBtFEREREREREKjGIJiIiIiIiIlKJQTQRERERERGRSgyiiYiIiIiIiFRiEE1ERERERESkEoNoIiIiIiIiIpUYRBMRERERERGpxCCaiIiIiIiISCUG0UREREREREQqMYgmIiIiIiIiUolBNBEREREREZFKDKKJiIiIiIiIVGIQTURERERERKQSg2giIiIiIiIilRhEExEREREREanEIJqIiIiIiIhIJQbRRERERERERCoxiCbaRua9fWitM8JorEOrfQLzW50g2gF8cHU2oNpoRHVDJwaml7Y6QURERETbWtbr16+FEAJCCPz+++8x/339+jU++OCDrU4j0Y6wNNoK44fNeBb1nrb+MbydFdi7Zamid9s07KYSfPTQH/VeMdqfj8JStGWJIiIiItp0v/zyC95//31kZWVh165dMf+N/jfAlmippXl4XXZ0NoVbZvS6rNUDl5WVhSydHkajEdUNTei0D2CCrTY709I8vKN96LJaUGc0oqQgLp9kFaDEaISxugFNnXYMjHoxnzCrzMPVFRtAA4D/604MTGdwP9Tw2VGdFb9/iV466I1G1Fk6YXd52Zq+nU30oTUmgAaAZ7hkH92S5BARERG9Dd7b6gRsF/PTA7C3WtH6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biIiorfeL7/8gvfffx9ZWVnYtWtXzH+j/w3s9O7cREREakx0SdcLP9uADeslT0RERG8NBtFEREQJLcFlb5WsF15vSnXiRSIiInoXMIgmIiJKZNqO1i/jlkHQXoHJyBCaiIhoJ2IQTUREpGRpFK2mTzAY93Z5awOMXNeKiIhoR2IQTUREBMA3YEWnaxrz8/OYn5/GRJ8V1foP0fws7oPF7WjlbGJEREQ71ntbnQAiIqJtYd6F8x9dwvlEn9HWottuQdFmpYmIiIi2HbZEExERqaEtR/tAF0xshCYiItrRGEQTEREloS29gscTA7AUcSA0ERHRTsfu3ERERACwtwClh7R48mN4Jm7toVKUGKthqjPBVKLb4sQRERHRdpH1+vVrIYSAEAK///57zH9fv36NDz74YKvTSERERERERJQxv/zyC95//31kZWVh165dMf+N/jfA7txEREREREREqjGIJiIiIiIiIlKJQTQRERERERGRSgyiiYiIiIiIiFRiEE1ERERERESkEoNoIiIiIiIiIpUYRBMRERERERGpxCCaiIiIiIiISCUG0UREREREREQqMYgmIiIiIiIiUolBNBEREREREZFKDKKJiIiIiIiIVGIQTURERERERKQSg2giIiIiIiIilRhEExEREREREanEIJqIiIiIiIhIJQbRRERERERERCoxiCYiIiIiIiJS6b1ffvkFQggIIfD777+v/lsIgT/84Q9bnT4iIiIiIiKijPuf//kfZGVlrb527dol+TcAvLd3715JEB39XyIiIiIiIqJ33b//+7/HBMxKQTS7cxMRERERERGpxCCaiIiIiIiISCUG0UREREREREQqMYgmIiIiIiIiUolBNBEREREREZFKDKKJiIiIiIiIVGIQTURERERERKQSg2giIiIiIiIilRhEExEREREREan03lYnINN++eWXrU4CERERERHRO+uDDz7Y6iRsqnc+iN5pJ5SIiIiIiIgyh925iYiIiIiIiFRiEE1ERERERESkEoNoIiIiIiIiIpUYRBMRERERERGpxCCaiIiIiIiISCUG0UREREREREQqMYgmIiIiIiIiUolBNBEREREREZFKDKKJiIiIiIiIVGIQTURERERERKQSg2giIiIiIiIilRhEExEREREREanEIJqIiIiIiIhIJQbRRERERERERCoxiCYiIiIiIiJSiUE0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gXA4/OjRo0c8evSIDz74YM3fzz333G6ncR/x0//iWUYjFXQ+uMHRPbammIjsPn//i5wdjVDR+YAbOTUSPvqOdDKWYeRdRNaTWO28HOe9W1sbiRVCD8/T3DtDQeNNXunYC8PDsv32eB0KPeR8cy8zBY3cfKVj95+dlx311ltvcfDgQQ4cOLDm7+SfQSPRe0rUO4I7sv70ERHZx6JeRoxGYu+t3C8isinzeB7MkPu77kXyb97zgBmgpHXzK8XL/qIges9YZHzIQ2zPLSgmInvF4vgQnthWFxQTEdl9Ud8IdxfYvnfdi2xW1MeIUSgzLCgmskJB9B4xP3KV/gCYKp206NaXiKSaH+Gq0UjgVCMhIo+z8BT9V8eIYKHx9OYWiBTZHmGm+q8yFgFL42k9Uikb0urcu8nXz/Hrk5gTqwZaGui9mPvqlCLypPHRf/w6k+bEqqsWGnov6nEPEXkMLeK+0MnQQtKq4s6b6FFo2U2L7gt0Di0kvS3CyU0VSsmCguhdFSUcDBIzFVBS20G308HhrS/UKiJPkGg4SDBmoqCklo5uJw41EiLyWDJDOEgwCCZLBY1dXXRU7bVVpWS/MRMmaBRKKhq76Oqo2sLramU/0ercIiIiIiIisq9pdW4RERERERGRbaAgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWnbE7MgZjh05xvmHizu/c18fR44c4UifL/UX9B05wpEjfaT+RkREREREJB0F0bID5pl2zxEjxox7ml0Io0VERERERPJCQfR2Cflx91/gVP/+GOMM+d30XzhF+sMtpdJRhgkTFY5Kinc6cSIiIiIiInny1G4n4Im18BDX6DQ0tOx2SnbEwkMX6x3u4abbvNq0s2kSERERERHJN41Ei4iIiIiIiGRJQbSIiIiIiIhIlvbRdO4QsxPjPHC78fmDLMUATFjK7NS3OTldlfqk7iLul07iCpTjvHcLR7oHeRfdvHTSRYAGel87hx3w9R2hcyzpM2OdHFn+98rnkvfjc9/j7tAU/uASRrIslNlraWxr5ejhwjQ79tF3pJOxxPYWp+i/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wQEWPJc57jPyKVrdxXCHPe3nEwrt57jZvcTZnkkmXe009hdgLTKONxoKshSDht5zW05fjjlCjaMek2eM0VGgpD3DgmJzTIwFiQFjd7203jia5rViIiIiIiLyJNgHI9GA7TS3b3fTWGGlgCWCwSChaBl1nQPcOWdfJ+ApxnHrPj3NlZRZTMSWggRDYcy2Jnru3Oa0bb3gtpSm3h4aKyyYYksEgyHChUUkv1mq0NbB7eFBupsrKbOaCQeDRtrMRVTUO+m9N8yVurTvsNomNk7fvk13YwXWAlgKBgmGopTVdTJw5xz29SLD0iZ6exqpSMqnwqIN3qMVV1x3heF7vTjrK7CaowSDQYLBEBRVUN95k9blOHwL6cuV/SiO+GGUN1VnWFCsjLoGKyaTlYbWGgXQIiIiIiJPsAPhcPjRo0ePePToER988MGav5977rndTqPILvLT/+JZRiMVdD64wVFFyCIiIiIiT5y33nqLgwcPcuDAgTV/J/8M+2UkWiRHUe8I7giYapvQotwiIiIiIqIgWiSjRcaHPMQyLigmIiIiIiL7jYJokQzmR67SHwBTpZOWnVgeXURERERE9rx9sDq3yCb4+jl+fRJzYoV0SwO9F+u0WJiIiIiIiAAKokVSRAkHg8RMBZTUdtDtdHB4Z94wJiIiIiIijwGtzi0iIiIiIiL7mlbnFhEREREREdkGCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLCqJFREREREREsqQgWkRERERERCRLT+12Anbau+++y7vvvst7773HoUOHiEaju50kERERERGRPctkMvHBBx/w1FNP8fTTT/P000/vdpJ21b4Kot955x0ePXrEoUOHMJvNHDp0iGeeeWa3kyUiIiIiIrKnvf/++7z//vv88Ic/JBqN8uyzz+52knbNvpnO/fbbb3PgwAE+/OEPLwfQIiIiIiIisrHEQOQzzzzDgQMHePvtt3c7SbtmXwTR77zzDgcPHtz30w5ERERERES26umnn+bgwYO88847u52UXfHEB9Hvvvsujx49UgAtIiIiIiKSJ08//TQffPAB77777m4nZcftiyBaU7dFRERERETya78u1PzEB9GJVbhFREREREQkfw4dOsR7772328nYcU98EH3w4EEF0SIiIiIiInn21FNPceDAgd1Oxo574oPoWCy220kQERERERF5Iu3HeOuJD6JFRERERERE8kVBtIiIiIiIiEiWFESLiIiIiIiIZElBtIiIiIiIiEiWFESLiIiIiIiIZElBtIiIiIiIiEiWFESLiIiIiIiIZElBtIiIiIiIiEiWFESLiIiIiDwMWVMAACAASURBVIiIZElBtIiIiIiIiEiWFESLiIiIiIiIZElBtIiIiIiIiEiWFESLiIiIiIiIZElBtIiIiIiIiEiWFESLiIiIiIiIZElBtIiIiIiIiEiWntrtBDypPJ//Mx6+9qd8+e8CmE0m/i4Q2O0kyRPAVv4Csdh7/INPlXPsfz/KL9RU53X7X/7Lv8f3hbdY+No7PPXUQd74ejiv25cn3/OfLOT99z6g5Kee5edqPobt54ryuv1X//pt/vgL3+OvvvZ9zKZD/PXXv5/X7Ytsh5/75DNEY+/zP/3UMxyv/hGO/uxHdjtJIiKyBQfC4fCjR48e8ejRIz744IM1fz/33HO7ncYteeutt/joRz+6o/v8l1f+Ff7AV3jzm9/iu9/97o7uW/YHy0c/yo//eDH/8B98isu/3Z2XbT64/RXe+HqYpbd+SOSd9/KyTdm/Cp41YXnuaUrLnuWf/R8/k5dtnvnDN/jS6z9g/q0o33nnA+BRXrYrsjMO8NyzByn5MTP/qOzD/LvTn9jtBImI5MV3v/vdxz5mBCNuPHjwIAcOHFjzd/LPoCA679pfOsdXvzrLN7+1uGP7lP3r4z/+45S/8NP8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\" alt=\"\"></p>\n<p>创建Github仓库，一步步来，仓库名称可以随便起。</p>\n<p>创建后，进行部署，之后配置三个环境变量<code>LEAN_ID</code>、<code>LEAN_KEY</code> 和 <code>LEAN_MASTER_KEY</code>，分别对应上一步记下来的AppID，AppKey，MasterKey，创建后点击左上角Deployment，右边三个点点进去进行重新部署。</p>\n<h1 id=\"next配置\">next配置</h1>\n<p>安装插件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install @waline/hexo-next</span><br></pre></td></tr></table></figure>\n<p>在next主题配置文件中加入以下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">waline:</span><br><span class=\"line\">  <span class=\"built_in\">enable</span>: <span class=\"literal\">true</span> <span class=\"comment\">#是否开启</span></span><br><span class=\"line\">  serverURL: xxx <span class=\"comment\">#前面部署的 Vercel 地址</span></span><br><span class=\"line\">  placeholder: 文明发言，友好交流~ <span class=\"comment\">#评论框的默认文字</span></span><br><span class=\"line\">  avatar: mm <span class=\"comment\"># 头像风格</span></span><br><span class=\"line\">  meta: [nick, mail, <span class=\"built_in\">link</span>] <span class=\"comment\"># 自定义评论框上面的三个输入框的内容</span></span><br><span class=\"line\">  pageSize: 10 <span class=\"comment\"># 评论数量多少时显示分页</span></span><br><span class=\"line\">  lang: zh-cn <span class=\"comment\"># 语言, 可选值: en, zh-cn</span></span><br><span class=\"line\">  visitor: <span class=\"literal\">false</span> <span class=\"comment\"># 文章阅读统计</span></span><br><span class=\"line\">  comment_count: <span class=\"literal\">true</span> <span class=\"comment\"># 如果为 false , 评论数量只会在当前评论页面显示, 主页则不显示</span></span><br><span class=\"line\">  requiredFields: [nick] <span class=\"comment\"># 设置用户评论时必填的信息，[nick,mail]: [nick] | [nick, mail]</span></span><br><span class=\"line\">  libUrl: <span class=\"comment\"># Set custom library cdn url</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"管理端\">管理端</h1>\n<p><code>hexo clean &amp;&amp; hexo s &amp;&amp; hexo deploy</code>后就能看到了~在<code>&lt;serverURL&gt;/ui/register</code>第一个注册的人被设定为管理员，可以管理评论内容。</p>\n<p>​</p>\n","categories":["博客搭建"],"tags":["Hexo","Github"]},{"title":"Hexo博客图片插入问题踩坑记","url":"/posts/50234315/","content":"<p>Hexo博客的图片插入问题很大，现在网上大部分搜出来装hexo-asset-image插件的做法是没必要的，本篇教程给出的方法能够成功插入图片，并能在写博客时实时看到图片。不想看其他错误方法直接跳到解决方法四。</p>\n<span id=\"more\"></span>\n<h1 id=\"问题\">问题</h1>\n<p>本地图片插入（像Typora，Marktext之类的）用的本地绝对路径或相对路径多多少少都出现了博客上看不见图片的情况。</p>\n<h1 id=\"解决方法一：网络图床-弃用\">解决方法一：网络图床（弃用）</h1>\n<p>使用PicGo搭配Typora、Marktext之类的md编辑器，可以很方便的将图片上传Gitee、Github、OSS等图床，教程网上随便搜。</p>\n<p>网络免费图床不稳定且管理不方便，像Gitee图床挂了，Github其实也是有要求不可以做图床的（访问还慢，jsdelivr挂了之后），收费图床还是存在管理问题，访问量太大的话费用也不低，最后还是想了想去折腾本地图片的插入。</p>\n<h1 id=\"解决方法二：hexo-asset-image-archived了-且没必要-弃用\">解决方法二：hexo-asset-image（archived了，且没必要，弃用）</h1>\n<p>网上大部分教程要npm安装hexo-asset-image，完全没必要，在Hexo的Github issues中我发现官方回复高版本的Hexo中已经内置了插入图片的方式，这个插件本身貌似也有问题</p>\n<h1 id=\"解决方法三：官方标签引用-无法实时预览-弃用\">解决方法三：官方标签引用（无法实时预览，弃用）</h1>\n<p>将Hexo的配置文件打开，更改以下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">post_asset_folder: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>这样每次使用<code>hexo new &quot;postname&quot;</code>生成新博客文件时都会在<code>_post</code>文件夹下创建一个同名<code>postname</code>文件夹。</p>\n<p>如果我们在上述文件夹放了一个图片<code>abc.jpg</code>，那么就可以在postname.md文件中直接用<code>![](abc.jpg)</code>来引用图片，或者用官方的标签<code>&#123;% asset_img abc.jpg description_of_abc %&#125;</code>，能够正确显示在网页上。（原理是这个图片在<code>hexo g</code>时被复制到了<code>public</code>文件夹，生成时的html标签是直接从<code>public</code>文件夹里引用的图片）</p>\n<p>但是这样做有一个问题，在写博客的时候，没法实时看到图片，因为<code>![](abc.jpg)</code>这种引用在markdown中没法定位到<code>postname/abc.jpg</code>的。</p>\n<h1 id=\"解决方案四：hexo-asset-img插件\">解决方案四：hexo-asset-img插件</h1>\n<p>有位大神做了插件<a href=\"https://github.com/yiyungent/hexo-asset-img\">hexo-asset-img</a>，直接<code>npm install hexo-asset-img --save</code>。</p>\n<p>这个插件是对解决方案三的改进，首先要将Hexo的配置文件打开，更改以下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">post_asset_folder: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>这样每次使用<code>hexo new &quot;postname&quot;</code>生成新博客文件时都会在<code>_post</code>文件夹下创建一个同名<code>postname</code>文件夹。</p>\n<p>如果我们在上述文件夹放了一个图片<code>abc.jpg</code>，与解决方案三不同的是，我们在md中可以正常使用<code>![abc](postname/abc.jpg)</code>来插入图片，写博客时就能看到图片，但如果生成博客就显示不出来图片。</p>\n<p>现在问题很简单，怎么能在生成时将<code>![abc](postname/abc.jpg)</code>转化成官方的标签格式<code>&#123;% asset_img abc.jpg description_of_abc %&#125;</code>，大神写的插件（上面安装那个）就是做了这件事。</p>\n<p>所以我们只要保证图片在同名文件夹中，在md中使用相对路径<code>![abc](postname/abc.jpg)</code>来插入图片就可以让图片成功出现在博客中！</p>\n<p>至于怎么保证图片在同名文件夹中，在Typora等md编辑器的偏好设置里，将图像设置成插入时复制到指定文件夹，或者自己每次将图存到该文件夹都可以，这就方法多了！</p>\n<p>注意：这个插件有个bug，如果图片描述是数字1，会在生成html时被转换成<code>width=&quot;1&quot;</code>，导致看不见图片，Github issues中我看到其他人已经提了，暂时插件没有解决，我们使用时就别用数字描述图片好了</p>\n<p>到此为止，终于可以好好写博客了。</p>\n","categories":["博客搭建"],"tags":["Hexo","Node.js"]},{"title":"IDEA+Maven内置Tomcat","url":"/posts/61517c91/","content":"<p>Tomcat配置有些麻烦，几个人一起用不如Maven来的快，浅浅研究一下怎么用Maven和它内置的Tomcat完成Web项目的搭建。</p>\n<span id=\"more\"></span>\n<p>前提：安装好IDEA与Git</p>\n<h1 id=\"创建maven工程\">创建Maven工程</h1>\n<h2 id=\"创建新工程\">创建新工程</h2>\n<img data-src=\"/posts/61517c91/image-20230114220424429.png\" class=\"\" title=\"image-20230114220424429\">\n<h2 id=\"选webapp\">选webapp</h2>\n<img data-src=\"/posts/61517c91/image-20230114220827815.png\" class=\"\" title=\"image-20230114220827815\">\n<h2 id=\"按需改名\">按需改名</h2>\n<img data-src=\"/posts/61517c91/image-20230114223449052.png\" class=\"\" title=\"image-20230114223449052\">\n<h2 id=\"设置maven\">设置Maven</h2>\n<p>如果想直接设置IDEA的maven配置省去每次修改，在File-Settings-Build, Excution, Deployment中做以下的同样修改：</p>\n<img data-src=\"/posts/61517c91/image-20230114225011738.png\" class=\"\" title=\"image-20230114225011738\">\n<p>我用的IDEA自带的Maven，settings.xml在<code>安装目录\\plugins\\maven\\lib\\maven3\\conf\\settings.xml</code>，貌似默认的是在<code>C:\\Users\\用户名\\.m2</code>中，其中<code>settings.xml</code>会指向下一个选项本地目录，不想放C盘的话可以勾Override改位置，也可以改上述settings.xml：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">settings</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- localRepository</span></span><br><span class=\"line\"><span class=\"comment\">   | The path to the local repository maven will use to store artifacts.</span></span><br><span class=\"line\"><span class=\"comment\">   |</span></span><br><span class=\"line\"><span class=\"comment\">   | Default: $&#123;user.home&#125;/.m2/repository</span></span><br><span class=\"line\"><span class=\"comment\">  </span></span><br><span class=\"line\"><span class=\"comment\">  --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">localRepository</span>&gt;</span>你想放的本地目录<span class=\"tag\">&lt;/<span class=\"name\">localRepository</span>&gt;</span></span><br><span class=\"line\">  ...（其他内容）</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/61517c91/image-20230114224129164.png\" class=\"\" title=\"image-20230114224129164\">\n<p>Finish创建完成。</p>\n<h1 id=\"创建资源文件\">创建资源文件</h1>\n<p>我是按网上教程来的第一步新建工程，但是出来结果跟网上不太一样，所以如果你的跟我目录结构一样可以继续往下看，不然可能不太一样。</p>\n<h2 id=\"创建java文件夹\">创建Java文件夹</h2>\n<p>右键项目名：</p>\n<img data-src=\"/posts/61517c91/image-20230114224319480.png\" class=\"\" title=\"image-20230114224319480\">\n<p>创建Directory：</p>\n<img data-src=\"/posts/61517c91/image-20230114224403137.png\" class=\"\" title=\"image-20230114224403137\">\n<p>把这几个全部添加上：</p>\n<img data-src=\"/posts/61517c91/image-20230114224416917.png\" class=\"\" title=\"image-20230114224416917\">\n<p>点这几个添加就不用另操作添加关联了，所以不要自己写文件名，到这一步，创建了一个普通的Java项目而不是Web项目。</p>\n<h2 id=\"创建web项目文件夹\">创建Web项目文件夹</h2>\n<p>在<code>src\\main</code>中添加文件夹webapp，点开File-Project Settings：</p>\n<img data-src=\"/posts/61517c91/20210225172724469.jpg\" class=\"\" width=\"20210225172724469\">\n<p>（图源<a href=\"https://blog.csdn.net/u012660464/article/details/114093066\">csdn博客</a>）</p>\n<p>修改路径：</p>\n<img data-src=\"/posts/61517c91/image-20230114225526433.png\" class=\"\" title=\"image-20230114225526433\">\n<p>Deployment Descriptors中的Path设成<code>你的webapp完整路径\\WEB-INF\\web.xml</code>，Web Resource Directory设成<code>你的webapp完整路径</code>，完成后webapp文件夹样式改变，可以创建index等文件写Web项目了：</p>\n<img data-src=\"/posts/61517c91/image-20230114225712941.png\" class=\"\" title=\"image-20230114225712941\">\n<h1 id=\"引入maven内置tomcat依赖\">引入maven内置Tomcat依赖</h1>\n<p>修改<code>pom.xml</code>，看注释：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.example<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>hjb<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--    引入war的packaging    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>war<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--    不写servlet可以不要下面这行    --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">servlet-api.version</span>&gt;</span>3.1.0<span class=\"tag\">&lt;/<span class=\"name\">servlet-api.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tomcat.version</span>&gt;</span>9.0.39<span class=\"tag\">&lt;/<span class=\"name\">tomcat.version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--    引入tomcat-embed-core和tomcat-embed-jasper    --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.tomcat.embed<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>tomcat-embed-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;tomcat.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.tomcat.embed<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>tomcat-embed-jasper<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;tomcat.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--    打包项目时war包的名字    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">finalName</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">finalName</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"配置run-debug\">配置run/debug</h1>\n<p>添加配置：</p>\n<img data-src=\"/posts/61517c91/image-20230114230233344.png\" class=\"\" title=\"image-20230114230233344\">\n<p>添加项目working directory（点后面小图标可以直接添加），command line输入<code>clean install tomcat7:run </code>就可以了。</p>\n<h1 id=\"maven依赖下载完成\">Maven依赖下载完成</h1>\n<p>右下角Import Changes，第一次配需要漫长的等待。</p>\n<img data-src=\"/posts/61517c91/image-20230114230511190.png\" class=\"\" title=\"image-20230114230511190\">\n<p>也可以在右侧点开Maven查看并import：</p>\n<img data-src=\"/posts/61517c91/image-20230114230653282.png\" class=\"\" title=\"image-20230114230653282\">\n<p>之后run，没有报错可以访问localhost:8080/项目名了。</p>\n<h1 id=\"补充-创建一个servlet\">（补充）创建一个Servlet</h1>\n<p>注意依赖要引入<code>&lt;servlet-api.version&gt;3.1.0&lt;/servlet-api.version&gt;</code>（见引入maven内置Tomcat依赖这节），在<code>src\\main\\java</code>中new一个package，package中new一个servlet：</p>\n<img data-src=\"/posts/61517c91/image-20230114230922909.png\" class=\"\" title=\"image-20230114230922909\">\n<p>注意使用servlet注解，可以省去<code>web.xml</code>中的配置：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hjbServlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(urlPatterns = &quot;/&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">hjbServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;---执行了doPost---&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;---执行了doGet---&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processData</span><span class=\"params\">(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response)</span> <span class=\"keyword\">throws</span> javax.servlet.ServletException, IOException &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;---处理数据---&quot;</span>);</span><br><span class=\"line\">        response.setContentType(<span class=\"string\">&quot;text/xml;charset=utf-8&quot;</span>);</span><br><span class=\"line\">        response.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">        response.setHeader(<span class=\"string\">&quot;Cache-Control&quot;</span>,<span class=\"string\">&quot;no-cache&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//String deviceId=request.getParameter(&quot;device_id&quot;);</span></span><br><span class=\"line\">        String test=<span class=\"string\">&quot;test&quot;</span>;</span><br><span class=\"line\">        response.setContentType(<span class=\"string\">&quot;text/html; charset=UTF-8&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            response.getWriter().print(test);</span><br><span class=\"line\">            response.getWriter().flush();</span><br><span class=\"line\">            response.getWriter().close();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span>(IOException e)&#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">service</span><span class=\"params\">(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response)</span> <span class=\"keyword\">throws</span> javax.servlet.ServletException, IOException &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;---执行了service---&quot;</span>);</span><br><span class=\"line\">        processData(request,response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["Web开发"],"tags":["Java","Web"]},{"title":"【VSCode】远程连接阿里云ECS","url":"/posts/9cf5d220/","content":"<p>利用VSCode插件远程连接阿里云ECS</p>\n<span id=\"more\"></span>\n<h1 id=\"安装插件\">安装插件</h1>\n<p>在VSCode侧边栏扩展(Ctrl+Shift+X)搜搜索并下载安装Remote-SSH插件：</p>\n<img data-src=\"/posts/9cf5d220/image-20221008152232639.png\" class=\"\" title=\"image-20221008152232639\">\n<h1 id=\"添加连接\">添加连接</h1>\n<p>在侧边栏远程资源管理器选择SSH Targets，点击+号添加新的连接（随意命名，我命名为aliyun）</p>\n<img data-src=\"/posts/9cf5d220/image-20221008152711231.png\" class=\"\" title=\"image-20221008152711231\">\n<p>在阿里云控制台找到ECS的公网IP，复制后，点击下图中前两个任意一个都可以，进行配置：</p>\n<img data-src=\"/posts/9cf5d220/image-20221008152937610.png\" class=\"\" title=\"image-20221008152937610\">\n<p>在HostName后粘贴公网IP</p>\n<img data-src=\"/posts/9cf5d220/image-20221008153048601.png\" class=\"\" title=\"image-20221008153048601\">\n<h1 id=\"安全组设置\">安全组设置</h1>\n<p>在阿里云控制台-网络与安全-安全组</p>\n<img data-src=\"/posts/9cf5d220/image-20221008153514244.png\" class=\"\" title=\"image-20221008153514244\">\n<p>选择最右侧操作一栏中的配置规则</p>\n<img data-src=\"/posts/9cf5d220/image-20221008153602716.png\" class=\"\" title=\"image-20221008153602716\">\n<p>点击快速添加</p>\n<img data-src=\"/posts/9cf5d220/image-20221008153629828.png\" class=\"\" title=\"image-20221008153629828\">\n<p>勾选SSH并确认</p>\n<img data-src=\"/posts/9cf5d220/image-20221008153654861.png\" class=\"\" title=\"image-20221008153654861\">\n<p>应该就可以连接成功了，除非你的密码不记得了，可以去阿里云控制台重置密码</p>\n<h1 id=\"更换操作系统连接注意\">更换操作系统连接注意</h1>\n<p>如果重新远程连接，ip地址没换会出现连接错误，是因为RemoteSSH连接ip会记录公钥，在<code>C:/Users/xxx/.ssh/known_hosts</code>里，需要手动将里面你服务器ip对应的内容删掉，就可以重新连接了</p>\n<h1 id=\"可选-安装sftp插件\">（可选）安装SFTP插件</h1>\n<p>SFTP插件用于本机和服务器之间互传文件，本质是本机和服务器共享一个文件夹。在本机安装vscode插件：</p>\n<img data-src=\"/posts/9cf5d220/image-20221013213309283.png\" class=\"\" title=\"image-20221013213309283\">\n<p>vscode打开需要同步的本地文件夹，输入<code>Ctrl+Shift+P</code>，输入sftp，并点击：</p>\n<img data-src=\"/posts/9cf5d220/image-20221013235451092.png\" class=\"\" title=\"image-20221013235451092\">\n<p>打开了一个json文件，配置示例如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;随便起&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;公网ip&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sftp&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">22</span><span class=\"punctuation\">,</span>\t</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;登录名，比如root&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;登录的密码&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;privateKeyPath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;这一步好多教程都缺了，这里输入的是私钥的地址，一般是C:/Users/xxx/.ssh/id_rsa&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">    <span class=\"attr\">&quot;remotePath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;服务器中的路径，比如/root/ssl&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">    <span class=\"attr\">&quot;uploadOnSave&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;watcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;files&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;autoUpload&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;autoDelete&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>在工作区右键就可以上传下载同步文件了：</p>\n<img data-src=\"/posts/9cf5d220/image-20221013235727299.png\" class=\"\" title=\"image-20221013235727299\">\n<h1 id=\"可选-服务器安装tmux\">（可选）服务器安装tmux</h1>\n<p>为了能在断开远程连接时服务器仍能自己跑程序，需要一个tmux（Terminal MultipleXer），意思是“终端复用器“</p>\n<h2 id=\"安装\">安装</h2>\n<p>我是debian系的所以：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install tmux</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建新窗口\">创建新窗口</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tmux new -s 名称</span><br></pre></td></tr></table></figure>\n<p>之后会出现一个和普通linux命令行基本一样的窗口</p>\n<p>可以在这个窗口继续创建新窗口，快捷键<code>Ctrl+b</code>+<code>c</code>，可在最底下看到序号0，或者其他数字：</p>\n<img data-src=\"/posts/9cf5d220/image-20230113210040085.png\" class=\"\" title=\"image-20230113210040085\">\n<p>在对话中切换的快捷键是<code>Ctrl+b</code>+<code>数字</code></p>\n<h2 id=\"退出窗口保持运行\">退出窗口保持运行</h2>\n<p>快捷键：<code>Ctrl+b</code>+<code>d</code>，原命令行显示detached就可以放心断开远程连接了：</p>\n<img data-src=\"/posts/9cf5d220/image-20230113210143983.png\" class=\"\" title=\"image-20230113210143983\">\n<h2 id=\"查看现存所有窗口\">查看现存所有窗口</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tmux <span class=\"built_in\">ls</span></span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/9cf5d220/image-20230113210231333.png\" class=\"\" title=\"image-20230113210231333\">\n<h2 id=\"进入指定窗口\">进入指定窗口</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tmux a -t 对话名称</span><br></pre></td></tr></table></figure>\n<h2 id=\"杀死窗口\">杀死窗口</h2>\n<p>在窗口内输入<code>exit</code>或<code>tmux kill-window -t 名称</code></p>\n","categories":["工具"],"tags":["VSCode"]},{"title":"【WSL】激活安装、迁移盘、重装系统","url":"/posts/973e27dc/","content":"<p>Windows Subsystem for Linux，简称WSL，是微软提供的可以运行在windows系统的“虚拟机”，可以让我们摆脱笨重的VMWare</p>\n<span id=\"more\"></span>\n<h1 id=\"什么是wsl\">什么是WSL</h1>\n<p><a href=\"https://docs.microsoft.com/zh-cn/windows/wsl/\">官方文档</a>：WSl是适用于 Linux 的 Windows 子系统，可让开发人员按原样运行 GNU/Linux 环境，包括大多数命令行工具、实用工具和应用程序</p>\n<p>WSL占用较少的资源且提供基本同样的体验，可以对windows文件系统的文件直接读写（VMWare需要借助工具），剪贴板也是公用的。</p>\n<h1 id=\"启动与安装\">启动与安装</h1>\n<h2 id=\"激活wsl\">激活WSL</h2>\n<p>打开Windows PowerShell（管理员）（可以<code>Win+X</code>找到），执行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</span><br></pre></td></tr></table></figure>\n<p>之后重启电脑，WSL就成功激活了</p>\n<h2 id=\"安装发行版操作系统\">安装发行版操作系统</h2>\n<p>打开Microsoft Store，查找想要的操作系统，比如搜索Ubuntu，如下图：</p>\n<img data-src=\"/posts/973e27dc/ubuntu.jpg\" class=\"\" title=\"ubuntu\">\n<p>选择自己想要的发行版操作系统安装，安装后打开，依提示设置用户名、密码即可开始使用</p>\n<h2 id=\"换源\">换源</h2>\n<p>官方软件源有时访问很慢，我们更换成清华源，依次执行以下命令（备份原本的安装源、编辑新的安装源）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak </span><br><span class=\"line\">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure>\n<p>在打开的vim编辑器里，将内容清空（可以在指令模式下输入<code>:%d</code>快速清空），以<strong>Ubuntu 20.04.4 LTS</strong>为例（其他版本在<a href=\"https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/\">清华源官网</a>可查，输入以下内容（wsl的好处已经体现了，剪贴板互通可以直接复制）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\"># 预发布软件源，不建议启用</span><br><span class=\"line\"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure>\n<h2 id=\"更新\">更新</h2>\n<p>依次输入以下代码进行软件更新：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get upgrade</span><br></pre></td></tr></table></figure>\n<h1 id=\"wsl迁移\">WSL迁移</h1>\n<p>从Microsoft Store安装的话直接安装在了C盘，但是随着使用可能C盘空间会爆炸，考虑迁移到其他盘。</p>\n<h2 id=\"关闭wsl并查看列表\">关闭WSL并查看列表</h2>\n<p>在管理员Powershell，使用<code>wsl --shutdown</code>关闭，输入<code>wsl --list --all -v</code>查看当前所有的子系统，我只安装了一个Ubuntu20.04，效果如图：</p>\n<img data-src=\"/posts/973e27dc/wsl.jpg\" class=\"\" title=\"wsl\">\n<h2 id=\"导出备份\">导出备份</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wsl --<span class=\"built_in\">export</span> 子系统 备份包的存放路径</span><br></pre></td></tr></table></figure>\n<p>子系统就是列表的NAME，选择你需要迁移的子系统；备份包的存放路径注意要写成…/xxx.tar的形式，xxx是你给备份包的命名，这里网上很多教程没有指明必须要有.tar后缀</p>\n<h2 id=\"注销子系统\">注销子系统</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wsl --unregister 子系统</span><br></pre></td></tr></table></figure>\n<p>此时如果再使用<code>wsl --list --all -v</code>就会发现已经没有了刚刚注销的子系统</p>\n<h2 id=\"导入备份\">导入备份</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wsl --import 子系统 子系统新路径 备份包的存放路径</span><br></pre></td></tr></table></figure>\n<p>子系统新路径即为你打算迁移该子系统的位置</p>\n<h2 id=\"设置登录默认用户\">设置登录默认用户</h2>\n<p>此时能够打开子系统就成功迁移了，但是会发现用户登录默认是root，为了将其改为我们刚打开系统设置的用户，在powershell里输入：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">子系统 config --default-user 你要的默认登录用户名</span><br></pre></td></tr></table></figure>\n<p><strong>注意这里的子系统</strong>，在网上看到了写Ubuntu-20.04的，写ubuntu的，我这里都报错，必须要用Ubuntu2004作为子系统名</p>\n<h1 id=\"重装系统\">重装系统</h1>\n<p>网上大多数都说从开始菜单，找到发行版（比如Ubuntu20.04），右键应用设置重置就可以了，然而我试了没有用，搜到另一个方法。在管理员PowerShell里输入<code>wsl -l</code>查看发行版名称，利用<code>wsl --unregister 子系统</code>注销，此时如果再次输入<code>wsl -l</code>就可以发现刚刚注销的发行版已经没有了，但是装的应用并没有删除，直接打开应用就重装了。</p>\n<p>如果之前切换过盘符，当初导出的压缩包并没有删除，注销后进行重新import就可以了。</p>\n<h1 id=\"文件互访\">文件互访</h1>\n<p>Windows的所有资源挂载在WSL Linux的<code>/mnt/Windows完整路径</code>下，Windows资源管理器输入<code>\\\\wsl$</code>可以直接访问Linux文件</p>\n","categories":["工具"],"tags":["虚拟机"]},{"title":"Hexo博客提交百度站点收录及推送","url":"/posts/839a4db8/","content":"<p>将Hexo的博客提交到百度站点收录，并设置推送的详细过程</p>\n<span id=\"more\"></span>\n<h1 id=\"站点验证\">站点验证</h1>\n<p>访问<a href=\"https://ziyuan.baidu.com/site/index#/\">百度站长平台</a>，用户中心-站点管理-添加站点，填入信息，选择文件验证，下载它给的html文件。</p>\n<p>踩坑：记得把html文件记事本打开，修改为</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">layout: false</span><br><span class=\"line\">---</span><br><span class=\"line\">xxxxx（原来的文件内容）</span><br></pre></td></tr></table></figure>\n<p>再添加到source文件夹里，提交验证就可以了。</p>\n<p>补：后来发现next主题配置里有。。。</p>\n<h1 id=\"推送插件\">推送插件</h1>\n<p>安装插件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-baidu-url-submit</span><br><span class=\"line\">npm install hexo-generator-sitemap    </span><br><span class=\"line\">npm install hexo-generator-baidu-sitemap</span><br></pre></td></tr></table></figure>\n<h1 id=\"主动推送\">主动推送</h1>\n<p>在hexo配置里添加如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">baidu_url_submit:</span><br><span class=\"line\">  count: 1 <span class=\"comment\"># 提交的链接个数</span></span><br><span class=\"line\">  host: 你的域名</span><br><span class=\"line\">  token: 你的token</span><br><span class=\"line\">  path: baidu_urls.txt   <span class=\"comment\"># 文本文档的地址， 新链接会保存在此文本文档里</span></span><br></pre></td></tr></table></figure>\n<p>其中你的token在站点管理 - 资源提交 - 普通收录 - API提交下接口调用地址的最后token=xxxxxx</p>\n<p><img data-src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxkAAAKnCAYAAADqVIBOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAO+iSURBVHhe7P0PVBz5gR/6ftE4rbUj7D2L3gUptoW1c9C9NgTOMut99Gyu0OQ8xCZCWQFxAnNioTxbfURAxxlkX8PYAuQd8PMKxUew6CD7rZDzBFlHoF2hjRHn2ELZneauLRIIGufC884i20FNAn6eQfEs2BLv96v6VXd1d1V3dVMNDfp+5tSI/lddXV1d9fvW709lrAsgIkoDS0tL2Lt3r7pFRERE29Uu9S8REREREZErGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiIiIiIlcxZBARERERkasYMoiIiIiIyFUMGURERERE5CqGDCIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrtkXIWF1dVX8REREREVG6S+uQsTIzAF/pS3j55ZfxUqkPAzMr6hEiIiIiIkpXaRsyVia7UHfqEiafqDueTOLSqTp0TTJoEBERERGls7QMGVrA8A3ikbod8giDPgYNIqLtb1X8R0REO1XGuqD+TgtRAePAMbzRUoKJjtdxJ3Qnavr60VScqW4T0U6wtLSEvXv3qluUrlZXlvB4/hFm5/yY9E9gcnIOjwpacbu7AvvVc+KZH6pDdedD7DlQDK/3MEpKClCQl4t9ezOxWz1nY5bg72rHZNlFNBa4M8ettYTxtrO4OqduKnmnL6Ot1Po3M9tfAd9IJg4dKkZ+cT68eYdwIHcf9mbuhPVBROkurUKGVcC42N2GUnnUWhhHW+O5bR80VhdmMbmcCW+BzaF4ZQZD/eNYkH/vL0VdVQES/oQr85icW9b+9OzLR8H+BA8oKwuYX81C7l6b162uYOnxPOZmxQHuaAGSLRKuzNzF+Mpe7N/tQdaBPPv3o+cGQ8Y2sDqDrtpTGIyqavag7OJddJQ62GPN9qPq1R6L2mqxZ6+5hoGmgg0FjZXZIbT5OnFfNrf1lKD1ZjcqIna5qwszePh4Td1KpSzkFecmvh+PsoSRxnK0T6ibSknrKLorrH4z8xiqrUZnRCiB5ySu+RtRoG66aXVlBZuxRi15MsHsRJRe0iZkRAeMSlzua4HXvO9c8qPDdxbD2zForIhlrz6H4WWxC/aU4eLdDlgei5dG0FjeDu04UtKK0e6KxAvxM1146dSg9qf9Acje/FAtquWRaU8eXusbQO0h9YBmFv0Vr6Lnsfzbg8q+e2gpTm7PPtPlxalBdUg6/AbudR114UBM2xlDxvawKvYxtWIfE50zxH77nthvx9wliH1IldiHWCSMAzV96G8q3sB+YAF3286h/c5ceGH3QA2uDTTBXKGxNNKI8sgSe0qI934g3lvdSl6CIWNhCHXHO/FQ3QyqvIw3W7wu1RaZWS/fphHh9IEIp0SUPtKiT4ajgCHt9aKl7zIqD6jb4hXbpo9GZjFKD6u/18bQdXVmU9ojT/acRW1tbYypDeNL6smaJcyMq1Nfa/nYn7WClRXztB/FVcYXsIbhgTEshD2upuCHk1X8Vu9bi3NDoWKA5+F1+Cyeo00DM+pZRLRZ5FnpqN+1mtZya9BYmaWeabI2jM4eP5YsXqNPS5jsarEMGMh/DW0n88QBwep1+hR3n7m6jIczEQFDejQIX/s4nqfefAsTI9EBQyjzbqyWiIjIqS2vyYg6I3agBn39TYhZObEyia46n6m6/gBqrg2gKd3b3c72o+LVHjzGHuSXNaG5tQKHIhfZ5ZqM+ErQOtqN4Ikw0/t7KpvR9LgTnUmcmQqdXXPh7BbPUD03WJORLmbQ9dIpON2LbI6IfZUN21oWeMR+6abYL+ntptKuJmNmALWdd9QNJe80LreVqmNAIjUZCxiqO47OqJRRhov3bGrRN4w1GUQUbktrMqwChqzSjtv6KbMYTQPXUGOu0ThVi66Z9BurZKbrJbz0kpq0gCE9wcOxdrz6svFYlzikW5hoR7nxWjU1joRVO8TlycpDXl6sKSusacLSxJgecMQBuaqiRPzfRcXNuHHvHu45mW40o1i9jIjIqd0FTehoCB4cTNbELrUR/bPqZmaWxf4wD1naTm8PDlg8Zjsd2KPNcmMeY25uLnxaTrLuZWECI1bVGIcPxz++EhG5ZMtqMiIDhifvJPquNYa1mY1rdQbdp3y4PmdUjqdfjYYMGfErFUxnusw1GRYc9bEw1WQk1ifDdCZqXwNujNQhdyXJjnzBTnjmeZagsizPWXvrlTmMDU/ooYxnqJ4brMlIF9u3JkM3j6G6aosz+cKBk7g2YH2sMR+X9uRXoqm5ERWHYu2xVjB79youdQ6Grulk5snDseYONFfkxm+iZNpvB4XVZjuvyZCjSr2qd5wLk1VciWP5SaSMgio0aiOwxLKCmaF+jGujlqTSY0xeH4tuCsbjBFHa2ZKQ4UrAMKR50JgZqEVkDXi0Y2gWz4sKGRaF8v2ldagq0O9ZmRlCv9Ue/fEkro/pu+B9JZUoy7M+qJjnpTF3FAwe3BYw3j1kXdNio6CqUR8RTONCFToPHs8Nhox0sd1DhjAv9mfVFh2fZbOpN26i+2hEoXlB7Hurxb437KyKB3nHmtHaVIHIrLE02Y/2lquYkIN5RNmD4oYutNYUw/Hgfq6FDPPgHC5Jq32wzbbJ4wRR2tn0kBEVMPIbcK2vLrpvQiJWxU7Vdwo9D9O0RmN1BSvLC5hHbnA42ZmBJowse1HszUdx8aFQv4sE+mRstE1x5MEp7OxX8L0TL2zUXHsg1r26YT4wyuZSF8ucjaO/MIZzr3ZiUv7Ng8dzgyEjTS1NovtcE+aqBsQ+I/IX7KzQZ12ra9VfYVU8txa+yQK0XmxDZBZIhHEtjqA9h9Hc14Yqi9qJlZl+nGvsiVEj0YqmikNiRzmCrvZO3Ame2DKToaQJzQ1VKEh0M3YpZKz6O3Dk7HByNdB2GDKIKAmbHDJm0O09hetq7+dKwDBEBo0UjgWekKW7IjS8roWGfQ03MFInx4Ndwl1xsHhdO1jkofnmAKpy5d/CVoWM1Ul0HPFh2DgyBd/bxZoMNpeiOBgy0s+Svwtnzw1CL1PvweE3BtAVVvJ3N2QsiP1atdhhaG8nC/etF9GWdNIwhsv1IP9kNy42FtvuT3VLmOx/HU09k7DMGh4P1taMnWS4PcUN6GiugjfX0R4umishw67D9wYlsg+26sDuqlUszD2K/n54nCBKO5vc8TsXBaV6V2JPSTMG4gaMVcx018L7khe13XGGfN19CHV9A2guUfMvLRDvlgb25qJ4n/7n48k5cZiQlvF4XvtDLGgx8vathoZpXF4LnYESB7Nl4345xVgB8kDz4MGDuNNoa4l6Rbilsf5QwAiTiVyvF94EJttj7OMJDF+/jutOJiNgENEWWcX8UCOOnzUChvQE919vTNkgG7Kmu9EIGNLaHO68Xo3aDr/adybqEGo6LuKNG3fRHzdgSHtRXNeH8dE+NBRHd+a2ChievDK81jeKcXE8SzpguGR1sh9dbgeMhFl0YHd1sggYRJSWtqBPhixQr8GTmelgrG5TzYfjmolE5r8ZVuHveBlnh+Xflbj8Zgu8a+NoOXIOY/Kusou4VzOJI9Gn+KJFnKkx12REVpnbsX6NxRkyNpeiLcCajHSzIH6/1eL3G1m4NjdJdakmw7JPhODJR8O1PtS5UuVtEmeQDfdYNQmzsOGaDPtajD0H8mL3DVmex1xk3xJPFvJy1bVQjjVjoNbhPtjqc2wGHieI0s4WDGG7G5lGAFiZx8zkDOZtR+krQOPtPjSfbEbf7RgBI2w+pvmnhd3ILTAGY53AnKzBWBDLq9+B4hKHzYfiWFtbDtV4xJiWLav692J/jGqffVZDNsaYVMVNtIVxDPX3o9/JNDQuDplEtLX2o+Jin2m4cMMjDMr+C25VaCyNo2UzA8YOtOq3qcXwlKGtfwADA/ZTa43FhRWPteKa8RynAYOIyGTLhrANO+uS34zb/VXOznBHcWs+KTTTDe+p61oTgJI3RtGx+xKOnJP1GPvQcGMEdWuhMz95NW+gqdR0JlccfLteH4R2De4YNRnJMNd+LIz4UD1RgtMrPeiRszSdQZNX/rWKJnbCa5Gsz74lhGeonhusyUhTEbUMnvyT6L7YiGLtq3KnJkN2vG709SA4focnDyf7rqExVQN47KSajLLH6KoW34FlG9Ma9In3t7/u0ArGW45AOySZhPoQJoh9MohI2cKQYT4wOdwJW3JrPilk6vztOXkN1zJb1ChOqvnUXOjgEtXsyXwgTGHIwMwI7u4rwVq7Ooi51lxKHBBmHuKxTUpZFYWXnvY7WC5rRmtV9Fjyq6sLWMksxVHzULu0YzFkpAE5Gp7F73VlsgunzonCY1kr+l4rRVbwxzqD7iNnobUINau8jHuNof3VTPcR1WzUTOwD74VqqVeXx3HJ146x5Swcu3gNTZZXjvMgU78IT7iVGQz1x6kBNV/vwTJk5KPsZHFUbezK3BiGJ8JL8PllJ4P97YLMA1YEpTpk3EbDcqM4pgQvaxshYnCRKGIf7xX7+IjvvOziPXSk5tLgG+Qs1BLR1mPI2BSmviXFNajxDGJQK8i/IQ4gR7HXdHBJJGTYFQYcWV3FauZe7A07VpsOYm6FDBGwOi7NoaCmCmXivgljpKr9pag75sHQqVfRo1XTRAw7LMKFf7AT7VcnsOf0DQwlc0aNth2GjK3n7AKiWyis4G3ipGbCvA+1fL71McTqhE74yRQlgXlGSTJk5JWUYHViIjgsvJWYgWF+CLXVnXpteZCqZU/L3S5DBtF2sQV9Mp5Heajqu4Hb997Eg74yeLTezKJYXZyJ5ckZLNj2SYltdrAOvs4RzCxD64fiWV3GvH8M/ZMr2u3MTA9WFvwY6WxEy7i6zyOvytqC6uPHcWkiwTeWZybv3bOcbjRbV8Yv3B/E8Nh1tJ/yYXBWXqlVjR41Po9VOSJYRzPytWc+wqCvE/6FecwurAK7M7E2NwnZF/FRTw9G2EGDiCgpY3770RmXZsYjAoZUgjwnwzOuLmBmchKTmzqJY6Z6+zALMxbPnYzR55OIUo01GSm2urKEx/OPsDA/i8n5ecxP3MfE3LKpj0MJWltz0d6uf4Li5hu4WGbqVWI3ytLKOFqOnsOYnNGBBtwYKsNDo2/KPnF7pA6HzFd+Ne5b9aNDNm0Ivk4+zxCnJiPGmSLzmb7QGb7I/jJ5GDTmZTpDJ8fFrx3MRcflJngfy/4rg8iVV9mtWkHnqUvaFXs9ZRdxt6PUlU7ylL5Yk7H1nu+ajD04kLc/euAQi9GXrEdsWsZ82P5dSm1Nhmwu1YzO0LVFrHjEMvitlsG6PwaKW3G7ryJ+/0Yn63yLWdY4EdGmYE1GSq1isrsc1ad8ONt+CdevD+N+1AEo3GTnqzhy5EhoMgJGhNmhbj1gwIOyxioRFPajpEKvE8DjIUzMyj8OoazOuO8qhuRQMLu9qDqthop5dBXXxxM4zTPShtraWsvpbE/0Uq7ODKJfJgThcE3E0LXzc3ikTq3tr+jG+IAIGHtXMDk2JtbPGubudGJorQKNlfp1T9bGunA1RWPzExHpnuCR1bUZIod3FZ48snhenP17anjEPrQDHWX6vtLS2hDGrK6oujoDf2TAEPaViACl/iYiShZDRkrtRtZ+6wFdPVl5yDtciZOvVaHAYvTAmFbGcf2qaoF74DROqra2+0sqVNOjx7h6Rz+i7C+rwWHtrzUMD4xDRopDVaeD9431j8XuKGn25JHFQVVNUQdhERhGRvQOkJ5K1GrLuA95xrUAHw/C9/JLeOkl83QEPmN4FPG5qoozUVzXhPw9xah54yJOp2qUGSIKKmiyvpBn2kxWtRiaTGSZh9POilHo3nEyUdp6Efo5mXwUF0d+9jUMjUxGNZlanRyP7rAvQktpMfvAEdHGbWnI8AT3g4M4FVbYTGQydQALzTBtZO0rQF5xGWpONuONvmu4OXoPb4oDpf/uAAa6WtBYWxp2hex9JSJ4nDwZmipLIkY6WcXs0NWIWgxlfzEq8uQfHmROzkCrzMj0okwkij0HDqPSu1f29xb3laKuRs11bgDj2hMdyC8LXzbTVFkSGaYy4W0Zx72bl/FaaxWKtXywF2WnaxA15H4kOXRlW43+ufZXoX+8D01HD7GpFBHZ21uKNtO1Hy432A/aak82lzIFlRiBRTaXinpeXpbY+26R3V40dpShuLkNfQ1VUcuxNiz29WEV1ysYH4qOGMAxlGjHESKijdnCPhnAbH9VjGH3EnegYZuOQmQaVzzv9GW0RVwno+3sVb1jnumqq0uTA7g0tBunO6pg7p8n+4Agc290m+JIS36MzO1HqTfXVHhfwnjbWVyVb5Z3GpfbSkUsmBHv2Qlt6WJc9XVpvA1ntRfKp4nPE6sN7OoCZh8+jh7nXPJkiYN8bsSoV/S8YJ+MdGTaB2y6Y2geqE2qn53lEN87cHSpqBEJNTOWw9LmN99Gf5VqCLUwhLrjnVqftzCVl/Fmizf+MUSSHb/FvjzsbVb86D53XZtv3rFWNFRY9HGJMDvgw6X76oYhrwZvNMljUByr8xhqH8G+5kZ4Lc5EZeUVh53II6LNs6UhQ3YMHu9oQdvwQ+sCp2N7kF/Zho6WUrYjJdrGGDLSkc2QoZsi+cE8nu+QIU/iVajrMZl4KtF3r0WrWbZ8HB5U9t1Di171nDhZ4D9Xi87gpds9IitcxOUmb8ywYDnYgF0H/zALGGmqRfv9J/DkN+BaXx14cXii9LHFIYOIKIQhIx09TyEjXUeXWsHsSBfaO+9gLqJ2wi5k2NVU5DffRH/ZLJqOvI7IygNzCEmcKPA3VosQFLGAgievBhfl6IE2P23rEc3y0Xyz3/4igiuT6PY14rpphXjE+rop1hdPNhKlB3b8JiIi0qTZ6FJra3g02Q9f6RG82h4dMGLaX4YafYSPMA87u9DS2RMdMIR9p43+c8nwICs317JPytrcIM4er0P/TCIXrXiIzqYuWA0quDo/hKYKX1jAkNYm2lHdOOJ8MBMiSinWZBBR2mBNRjqyqck4/Br6at3rA7c03oXXByMvC7fZNRmp4PAzTHbhJV/i9UW2NRnC6kwXqk8N6qP8xXUYb9zrwtEN9l9YuNuGxtfv2FyBfA/KLt5Eh6nf4crsCLpa2nHHpnump6QZAxerkKvCT+z5C3LgkL5raORohERbjjUZRESUuP0FKC4udm/KS3Qs71TYutGlZmfG1V/u2V1wEqeNYcPj2FdTBzUa+obsP9qGgRsNyLdYEZ6SJjSogLEy70e/rxRHXrUPGNLaRCdqzw1hfmUBd9tqUR0jYOw53IwbdwcYMIjSBEMGERGRpiJsGNxYw+FWtEU/b+ByA5IZOFfWOLREdcJ2w15UNDTEHzYcJTh9ssDZiFIO7D5Uh/6bF3HM9MZax+yLFchamER/41EcrT6LnklnQ77IoFF95DhevzNn3RzNk4djb9zGeFcVDnEkKaK0wZBBRESJGzxlcd2i5Keopk3b0fIy5tWfiZifHLdv/mPw7MGeZKpJDtWgxbguko385ibYtLhK3v5StPX3oUYGjQM16GjKw8S5ozhy3IeeCff6ruwpbkDf7QG0HWV3b6J0w5BBRESUsFkM1DWho7sb3XLqaMTRUz0O+z+EO1RWh3z1dxRPFkoa+nD73gCakqkmwQpWV2OlkzwU58UOIUnLLMbJpkrkPR7CuVNnEwsX+w7gQMxQtQeHm29gpK8OxezGRZSWGDKIiIgSlovcvPsYvn4d1+U0PAGLQaiAknzELcLvP4bTlZElao92Mbsbd++iu64Y+3cnUY0hr1vRVI2zw7HqSeZw/VQtOvxL6rYbVjDvH0BLrRflZ4cxt5ZEvUVuHbr6auybeu05hIJ97HtBlM4YMoiIaGdZncWdoUl1w2RmJqnmTNZ2o8Bbpv6240FljYOrVot5eatOB8OIJ+8YWm/cxUBbRdJ9DFbnR9BWW43O+076PTzC8NnjqO3yY0NRQ14BfKgDdaVHUH32EsbijLm7J79SfM57EFnC0p6CJvTbBY0nk+g5W42jRxvR758XsYaI0g1DBhERJU4OB/vggWvTaKvDYZDiWRgXhetX0fPQooD78BJqG4cw61KJNDO3GHnq7yieLJQ1D6DJ6/Bs+6Ey1OXrTYDuDrShIukezCuYHWrC0erYozZFW8Pc4Fkcr23DSIIraHVhBiNdjTh65DhOdQ7jYZxc48krw2t9oxjvb9E+Z6w6msziJtvRqqS15QktbBzxHkVj1whmFiwurEFEW4LXySCitMHrZKQjm+tkmK854QLL61okeJ2M1dl++E71wCpfhNmTj8rGJtQdK7C4anciljA7+QiRZeo9+/KQuz8z8dGaVkUBebfdq5Yw0liOyFVkvk6Gds2J9k7ciVOD4PF4sBazCZMHWSWn0dFcg+JYK2hpEt3tLRh02tdiTzEaulpRU2y+qvoq/B0v4+ywumkIXu1cWbiLtsbXHQUnT1Y+So9VoaqiBPm5e10bNYuIEsOQQURpgyEjHdmEjPwynCx2r8PwytwYhiciu00nEDLmB1BbfQmRl/OLTRSm80pwuCQXh/K8EOXRGMRzD+QiK1aJdWUBc4/tT+Nn5RUjN+khVmOEjJLHGOrpRJfdEK8mB45dRHdzHibPVYt5xXu2DBtVaDh9EhUFVitnFv1Vr6InXsFfhrqmZjRWHELUx18V21e12L4iv/rIkCHJPiYtdQ6bgAkHTuLaQCN42QyircGQQURpgyEjHdmEjE2RSE2GWE6vWE6LcvOePXvw5InDgmmqeCrRd68FxUkXeG1CxmuvIavnEu7ErUrwIK/mIi43eVXBfQHjbY0456BqoKT1NrorrIeIXRlvwdFzY9bhRo6MdboDrXXF4usZx9xaRO3OqliGq50YtKp6sgoZirzq97n2O2J+6g4rnhK03uyGzWIT0SZgnwwiItoBCnDsdHTNyoHKy7g5fhOXK+Nfki6VPFUVGwgYMWSWoamjTESIWGRfjwFcCwYMaT9K2/pxrSE/5ms9orDfHKOknll6EqejVu0e5FeGRsaS77kXkzjn88Fnns62WwcMwZOXaxkwJO2q4ndvoPVYns2ye1DS3MyAQbTFGDKIiGhHOFRaF9YRWxaQu1tkwXovvC1DuP3GMeTFLo2nyD6cPuZe/5VImaWvobXE5oPtOYzmGyPoqsq16JuQiYK6ftzuO2nTsboEzc0VIo7EcghVjaGQo10cb3Qc/S0RI2PlleCY+jM+D455bbvU6zIPaVdd94/24bWy8LDhKetABxMG0ZZjcykiShtsLpWObJpL7TmAvI31mg63PI+5qAtNJNbxWzYBGqo7js6H4s8D4rUD4rWRi7i6gMmhHnRfH8dDywtbpEBeM24OVCFX3UxOnI7f80Ooq+6E/Og6/TobF9uOxgkJysoshtp8Yf0d8ptvol+Ek/hmMdA4iMyGphijYlkvvxVPyRu43X3UtibD0so8/CNXcfU6UHezA6VJ930hIrcwZBBR2mDISEc2ISMNR5eSVu424Uj7mqP2+KsrC5ifE+FmdhLzy+IOUVCdeJjMNbtj21dzEV0bPrMeb3QpOUrTEZwdXtOus9HcGqvAb29psh+vN/VgMqsBN4bqcEjd74bZ/gq82hN7/e453Iz+DhHIUtG0jIg2FUMGEaUNhox0tIL5yTnIMniYrDwUJz9UUhR5rYWHjyNrFrKQV5wbPSJRLCt+3J0vxtEdN6TQCmaG+jG+oG4q+0vrUFWg1tCCHyOP81BRvNHf0AoWljzYv9fddbg62Y1TXQ+RW5yPfWHNs/Yjz5uHQwfykOvyexLR1mHIIKK0wZBBRES0M7DjNxERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVGeuC+jvtrS7MYGywH4NjE5hbXhP3eJCVV4LDVbWoO1aM/bv15xHR9rS0tIS9e/eqW0RERLRdbZOQsQR/11mcG5yDjBaWPHmouXgZTV4WUIi2K4YMIiKinWEbNJdawEjjcZyNFTCktTkMnj2OxpEFdQcREREREW2FtA8Zs/2NaJ8w4sUeFDdcxs3RN/HgwQMxvYnRm5fRULxHPb6GifZG9M+qm0REREREtOnSO2Ss3MXVnkfqxgFUXr6JvjovcvcanS92Y2+uF3V9N3G5cp+67xF6rt7FirpFRERERESbK61DxsrkfdxXf3sqm2L0t9gLb1MzKj3q5v37mEyrlLGKpQWrBVqCf2gE/slJTE7OJxyMVlfVHy5aXVnBijalYOZWVhcwe3cS8+omEREREW1/ad3xe6bbi1PX9aZSlZffRIs31vBRq/B3vIyzw/JvD05e86OxQHtgyy2MNKK6fRK5NRdxuckrIpEy24+KV3vwWPx54OQ19NXlIvYAWR5kZspnrIqX+nDqKlDTfRGNxXKOCxjvHsKM9rzEFFQ1onS//GsJI43laJ8Qf5a0YrS7Qi3rDAZqO3FH+zuePJy+3IbSuH135zHk86Frclnra3P4jXvoOpqpP0TPLXb8JiIi2hnSO2R0vYRTg/rfNdceoClOaEj0+Ztifgh11Z14qG7iwDFc7JOFcFOB3rEaXHvQhDwRTk6JcDKn3edB/sluXGz04PpLp6A+fkJC68o+ZHQ5nncJWke7UeGgnDjbX4FXe2TEEvY14MZIHQ7pt+g5xZBBRES0MzBkbIKV2SG0+Tpx/4m4IQrvt0XhXZTmUS1K8zFHzIqihwz5sVZm+tHo68FDOQNPHhr6GrB86qweBPLLcLLY6KMinjs3huEJWZgXgeRYDYqz9PsNTmoygiHj8Gvoq42OAkvjXXh9UMaeUMgwfx8b5zy80PbFkEFERLQzbMsrfq/ODsBX+hK8tf2Y2aSuAxuReagKXSPX0FB8GK3NFcia6UKjETAONODavXu4d28UFyu1pwuVuKzdJ6bbb6BM3Xug4ZgWMKTMgjr032zF4T0HUNN3DXUFpqZGBTVobGxU02kc3bes35/fhLY24/7QVLp/BTND3ejuvooxo3PE/BiudndjaIZd6ImIiIgoMduyJiPR+9PFyuwIujonUdJWg7X+dnTeWcXpG0OokxUDK+NoOXoOY3ryQOXlPrR492JlZgAt53owsXJMBI8W2HdLMdU21FzDg5pldA/JHhqPMXl9TGuulVVciWP54f0e9pfWoapg1bbpVknrKLorHifVXGphXIYUdbfJ8vIKsrLs+l+sYW3NA4/RiT9oP0rrqmDOUuTMr5ZmMffeR/Dxj3xA3ZO+WJNBRES0MzBkbIaVWYx0yVChX1Awv/k2+qv2hwpUS350nT2HwTlz4yl5TZAuvFFXrDVZkqM96Z2+pVXxWc9iKK8ZzRVGZ/GIkFE2hpeMlRGDHiJk6y2HISOB5lJWFkaaUNv5GFXdfWgsjkwM8nPV4pS/AK1dzajIjd0NnuL71cJf4Nt3/iue4P048EoVjr6Y3kGDIYOIiGhnSIvmUqsz3aj1yuZP3WHNn7Jy89Vf+ciN6EewPaxi4W4bao++inYVMKT5yTksiX8z1x6L8NGIo8fPBgPGgZpWNJfI0/hPMNnjQ3lpHVq6RzCzsBwcVnZh5Bx8g5O4016N2rZxxL7G+T6UVJ7EyZOmqbJE3Gu2FxXd8uKGo2gtUXfJPhkPHoiAEVHgW34Iv98fNU3Ox2tWtYKZ/jpUt9/Hk7U5XPfVocMv14JBBIx+ETAGHwGP7qC9uhZtI/PiXkraohEwpPfw6HtDuPujX2i3iIiIiFJpy0OGDBinfNchy9hrc9dxqrYrGDT2V3Xj5rU+XLvZjSqtY/J2sxuZonAdrKDYU4yGvpvo2HcV1S+9hJePn0L74ASWtcc9yDvZh/6mClRdHEDzYXUV8ycPMXa9HWdfPY4jR2q1q5ln5RUjTzUnenTnHKpbxrXQYm0/SqvqUFdnmqpKxb1JejiG69evR016x3Ibq/MYEp/rVM/DYNA6UNmE02HXPdmNgrpuvHHsgLr9SAtRR5uGMM+kkTgRMAb+zAgYBgYNIiIi2hxbGjLMASPo0aApaGQit6AYBbnbtyF+ZmktKj0iQNRcxuh4H+qKc+GtqQl24JbhIqukBm/cuIuBxmLxiYXduajqGsdo32soy1dhQzp8GlWHxMOHjE7f4j5PCZobStUoULrw/gyT6Hz1iAgopunVTnFvHGtreDw/A6OCYl9eHvIcTVn6Z1DkyFpNR6vRqQ2tJXlQ0nwD/S2m64UE7cfRtn7cbD4M41M/ud+J6qNNGGLScC4yYHiykBXcjGTQ+FOM/4RBg4iIiFJny/pkWAYME0/eSfRda0SBRbP87dYnQ15BO3NlUnXE1j2euI6x5XyUlRVjX1Qn53BrK2vI9ZYiP78Yh8wl8wU/7q4U4+ghuZJCfTK0fhS511WfDNlcqgx5YSX/OYwNT2gXAdT7XOzF6sqSCBUTGGhpx7CpUqKm702czrP5kmLxZCLz8QBqqy+p63kInjzUXOxA2Xwnzk1U4kb30fCgsTSCxuo7KO5qRdnqIM6dGwxuH56SN3A78vkUbdGPP/mzh3hH3YRnHw5/qgKH8BOM/+l3MBdMHnuQ93u/j9I06wzOPhlEREQ7w5aEjHgBw2AXNLZdx29ppstRR2xrDq4RIUenOnIOY+LP8JBh8VpZmC9vh345jNgdv2taWzHfrj83EUZ40a92Ll6ddwytF09jd08tzo3Jkq5HPOemeI7RcGsJdxuP4/UJuVF4UHbxNlpz76OlrhP3s2pwbaDJMnCSiV3AMHLEL9I/aDBkEBER7Qyb31xKFIY7TQFDBomaY/rf0rGGBuSrM/uyj4avcxxOr9SQd+w1FO+RXR9ew7E8dWca8mRZNTOKng6YWkpFW4W/oxR1LQPwyzZNqys262kC7eUv4aWXTJMKGGZRlSn7SnCytQ81Gwxq+yta0fHaG7g50Iaj+/ejpKYKeq+LNUx0dmJE9VpfGGkXIUdtFAdO42TpXuzOrULXwDVc62PAiGvxrzD0HXPA+HB4wJA+8BGU/v7vIS+4XT3B3Hf+FH+x8Ct1m4iIiMgdmx8yPJnBAq0nvwHXrjWizNSUJ7O4Dn3XQkEjEbsP1aJv/AHG+2qhtSBKU8UNlzEwMKCmPjRXlaCkRE4n0XrNuH8AbRXqBZbmMHnnCR6OXcLZq5NYWV6GcR290FC3Tu3F/pJilJ1sQKURznLLUFNRjP25Feh+cA/X3mjF5Ws3MfqmHIXqAUZDw1ChdVS/zzyFRqXai9Lao8GO5rsLTqPtpOrcvSYCUHUjukUACV6cUESQk201CA6Su78ABTyxHZsWMKbVAAKCFjD+UXjAMFgEjf9659sMGkREROSqzQ8Zu4vRcvsG+vpu4HZ/nWUY0Do2G89pKw3rSLzjrM5gpFON0jTxBLud5oOFeTxUhcrikjx4lhe0PhaSdqG7gia8OXob91Sh/1qNehA1uCbvG72Ga7dDYaCgtg8djcdQYDlU8AIme9px9lQ1zt4xooxhHmNX5dXCTdPQTIzap90oaOxGqzZMryCCxvVLd/BIuyGbUHWjkdUWziUSMAwMGkRERJRiWzO61N5DKC4+FOrEaxoOaVVdCyLqOUGrMJ4iC6VJVHiklfk7VzGs/s4qyY24foW9lbkJNULUPpTk7ce8uK0rQZ6ciQgvPb7jOFrbhrthIzOtYmbIh9LyU/B1jsS5xoayNIdJlWDyc3P1P4IeY2I4fDjb6+Pxrm+xH6WnT8O4CkpQfgOayrblWMVb4+cz+NNEA4bBLmgsqptEREREG7ClQ9gacgtK1V/AnfHJ2AXU1UmM31F/oxQFpjLv6kw/6kpfQqlvALOxS7mbL7cKfX192nRau9L1EmYGmlDX+VB/XFi+7sPLL5WiqqkDAyOT8NSMYvTePdy714GyiLQ1Nym7eEsiVOTO4+GYUY+Ri/17RZDoaYO8rt3a/DKwx1wzsBuHisvEs2QlQjtahiJrJqItTYwF+3AMd3RhMqyawuJif6XGVcgjrC5h3j+AlrpSHDnVg9AnVx5eQvWRo2jsGsHk/FKcoEIr83P478kEDIMMGp86hv/NFDR+8tf2V1whIiIiciotQkZm8WEcVn+vDXeiK+xK0GZL8Hd1YtgoWB0+DK28rsyNiYLrE1FUmryEO8FxU9PDKrJwIMsjPsI8RrpO4ai3HKcu3RfFukhP8Oj+MC61+/Dq8XIcr25EZ/84HoYVumcxM67+LClG3mM/hozPW5aPPdoVwWUDJHlNimYcFQHFWGWSRwSe5ga9X8TDzq5g52vtWeYnamZx56qpm/ijQfgqfOiZEOFFk4uy041obDRNVQVaE7fVlQXMTvoxMtCBptqj8L5cjuqzlzAmvyTDnmJUVhYHr4uBtWVMDLbDV12Ol71HUSsCV/fACPyTM1hg6giTWVSFfyITQjIBw/C+/fgHKmi8/8Ar+P2wCyQSERERJWfLrpMRaba/Cq/26C3z5dCaxQ0daD5WjNy98pz4qiibT+JOZwt6Jo0C6gE03BhCXbCHsHjW7ADO+i5h9lAz+vuqtLP1W21ppBHlVmPDBonP+lofLtfmYnl2HOPXB3F9/GGoCYxZcStu91Vg//wQaqs7tetP5DVfQ8OsD2dV8jrc/Ab2D7yu1WJ4yo6hbH5OPG8Z83PLen7wnMQ1fyMKVmfQVX0KgyvFaOjuQN7IUTEPbRa6klaMdlfgyVAdqrXaFg8qm5uw3N2J4HX1Yii7eA+vrbbg+OtGh+5I6juu8kK71uLSJPpfbzJ9vxE8lbh8rwVedtfY0TiELRER0c6QNiFDdi4eaawODWMaU+Q1FtKYUZg3XeBO48lCSVUDTp+ssBg9aRULUYFjH2qu3URTwW4s3G1ErSi8PxHr4eQ1P+o8Q2g51YkJVKJPFMSLMY+hrnHkNR3DwrlyiKcG7au5hptNBVpzppX5Wazm6v1eFkZ8ON4eug74gdduYqhqBf2nfOiR4w0faMANETgOrcxiRASNruGHFrUwhjw03xxAVa5YjrpqmFqEiY9dgqqG06gpK8B+i8CwujCDscGr6BmaMAUt8X2/cRvdskqGdjSGDCIiop0hjUKGJJtDncW5wTmbs9+CdtXoy2jaRs06FkaaxGcC8ktycSjPi/yCPOTuz7TutxBlBfOT4xjyZ+J0o3mkLRlE5mSHFr2wvjCO/plc1B0Nr7+ZGahF52Q+SnIzkZVbirKKAovO9ML8OLpH5BXJ9yOvtBjeglz1XitiHp2YLGhFXdioT6tYWRHf0uoy5h+pWpKgLOQV669fnRlA1xhQUFKMYjHP/QkMr7u6MIuHMw/hX96HqlpvcBhc2rkYMoiIiHaGNAsZOv1sdj8GxyYwp53O9iArrwRlNXW2Z8CJaPtjyKBETPX6MHywHRfKc9Q9hin0ng+g8kI5Ih+RAqPn0fp2Jfrqi9Q9RETktrQMGUT0fGLISDeisO67gunCMzYFcv3xwAmrgn6kAEbPt+LWRoZJzj6B9mBwCIiQ0Ysr02KGkcs31QvflemI5yuBUZxvvYVFZONE+wXEXewoap2oW9YKcaavHowwRPQ8Y8ggorTBkJFmVGG98EwfrE/6JxEyYFHwl7T3CtgW/GWtxZVA9Gu1WgmZXCIDhREmwgKICghW4UNjHyCyg59RPccmeGnLOc2QQUSUFkPYEhFRuhGhYFivDfAGzsPn81lMeoF88VarxWNyOo/RgD63VMkpv4AzhUChN6JIn1OO+hPZyBZ/6osgQ45cXhEALAOGiQwQ6rpGfX1nxCuIiChRrMkgorTBmow0ErcWQ9r6mowoRlMph8I/n1UtReRnZE0GEZETrMkgIqIIoVqMym1aUpbhIVQbYTG1n9BqOYiIKDUYMoiIKNzUcFQHbXmGPro5VKzmUr2Y0l+6M01fsfjMshZDPU5E9JxjcykiShtsLpUOVHMg+aepg7R1MyDr5lJ6Z+yciOeq5lJujC4VHCFKMTddctTMS1DzyGFzKSKilGBNBhERKapztChAy87UKSGDglXzJe0N5bCyFo+JKWx5cspxQbu/HSdS0eYprJZCBS4iIkoIQwYRESkBvC07ZsesAjAJBMQrdiBZSxEMOBxdiogoGQwZRESkFKE+5uhN07hi6n/gU02WIvtkaNet2GLTV0zLaTWZm1slYqcGKyIilzFkEBFRXEX1oaZLkWf55YXqzPe3p6QNU2K00aUimmDpN1VzLY4uRUSUUgwZRETkiDbCVK9pzKgpv9ZfIScnvO5DXiCvL6rjcwBvy6oD8Vz7mhIXFNVrgUK2+AoEYtQ5qH4dTluGGQLiM2s1IBxdiogoJoYMIiJyIICcg4V64fr8qNZkaMovS9SFiLzYdkw2hXP9AnqLuNVq8ZiYnBXep9BrCkEBPdXIXOMafZ721+FIWYd5IqJthiGDiIgcEIX18nq9mdHiLbQaBf9Cr7OhWlWtR2TTquCUyOhSVuSQtL5hHAxePXAKWgbKPhiz5kQOt2uEpiC70aXEe8hrFMomV9v1IoVERJuFIYOIiJzLKUelucA/7RfF+fiMpkuRTatcIUNBqx/e9gswLtcx1auHg8LKWB3ZlcW3w0NG2OhS+nShHBjt1TuLO5onEdFzjiGDiIgckNfQCDVd0mskZMfv8BGnzF02QqYwrI04lWDTqrhUPw8x3zN9RsDQl1OvZTkTt8+F1vwpWNtRhHoZKqJeZLqQoIN5EhERQwYREcWiNUOSAUIUsuU1NIJn9mWxXBXK1SRHlQofOvY8RgNyFsOqqVSls6ZVUQJy5NhoWhMs4+raRgjSw4AWgqzSQFithZpvzM7opoAhR6ZykjDiNNEiInoeZKwL6m8ioi21tLSEvXv3qlu0M6hCes4Z60K/YaoXvisBnNCaPJkK9kGyv0aoOVS0gJhFL64EvGi3vdbHFHqjruAdf74yJLW+7bVYfqv5ycqOxEetIiLaaRgyiChtMGQQERHtDGwuRURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyNgUAYye98HXO6VuWwiM4rzPh1hPISIiIiLaDhgytiMZSM6PiugSX2D0PHy+XiSaXaxfp8KSw/cmIiIioucTQ8Y2FJjyY3HxFnpHN7moH5iCfxHI9hYhR90Vl6qh8SUxnd/sz0dERERErshYF9TflDKyBqAVt3LOoK++SN0XQRbGW28h50wf7J5iJmsaWm8tolB7vpq/CACJyj7Rjgvl0ZFBn38OzvTVw1icqV4frkxn40T7BVi8xD1qXYg3slw22rmWlpawd+9edYtIkfuEXqD+QrnNCQ59H/h2pbP9JxERpR5DxqYwh4BCveA+1QvflWnt0Xisg8AUen1XMG3MT90bySosWNEDRGhe0a9T71cYIyi5hSHjucWQQZaM/WX2CbRbBQ3j8c3YPxE99/TyQCDeMVr9LvWToeq+ZLg1HxNZ5hk+mC5ljFjrM6LsJdeF37tt9nNsLpVSeh+GYLOfwkIRCaZxRfZpKKpHX19faGo/gWz5FPEjirzPWhHqzxSKFxxEzia0KgqMDoslF6avWDZtMk/hndf1dWD1PNtJBIwkKmWIaKcS+0u5u8PiLQxHdTATB2EjgMQ88MqDdeL90xLBvmzbiCysxfxO5PYivrcER2PRt4HtM4iLLGwn02/TVrCJdGp/axszBb/YZSze6kXqWmXr289Gm31P9cqTyaKo59X3bVNywUU5LOb2JbdtuydotcIxXmzzWm27tv292P9WWJORUnLFXwHOtOPgsGouVRnQztIvRp5xU2fvw5pLJXhGX6+NUDccMJ8ViF2ToX8Ou1oT7bUBmzOMyWBNxnOLNRlp6J3v4itf+DZ+uWm/R3PN7waZaz7U2dCw2g7jPsdiNxeNrgEWktmfqdckswosa743MD+z6DPJG/iuImql9HXn4uml4PzV8SvimGscL+2aDItnWL4uNmN9xG5hEMntz27/mSIFEJgSn/OK2DYivo/Y9HVjPvNu/gz6+8v7hsV9sgbiDHBFLywbwpYx4d+hNeefW1LfbwKfO+73FLatRK8jezbPNX63YcsYfxsztm2rmh/jM1iuq+B+Ino/FwiIbUWUY63mq89T7uKi940MGamkvrAcc8gQ30xgVCT8ovrwLyP43A2GjIjCvv7lRxz01A/aacjICf6wrA6waoNHIjuoOBL83LRzMGSkl18uvY3/OHAZ337rvQQP4KkRvT9LcP+j9n0JfRZTAcjqoG1mtb/V963p3ZdNX26jj5+60xG1/mP1N4zi/jEj9vKrwqRFWIj93di/zlYKj136Z7QuyMVirJuNCl+30YViq23f+O3Ee21clvPZOG2Z/V73yi5hEvmcVs81woTFfkeuD/9BtFeK5baZdaztxdgmwudrvF+cgBxVVlW/E+3BaAwZqaT9MALiS64HeuPsiKO+uNB95h1W5A7DfLBMSchoP4hhsQyL2dnIXlwMXz6NzUFGvYdrEjqbRNsVQ0aaUPsec9Fk80OGPHj54TXtu6L3ZxYFVrnstp3EjQNpdMEych9oXgd2hRvb/WZw+dQBeDP2XxbHC6eM40rihTib/X9MFt/ZBsVe/ljfgXrM8mx2jNdZ/D4Sl0jwTH6dRW+TyTPWcxSx/s54/bjioKxhrNdUhwz9t6lubERCv121zahb9vTvvmgq3vpMbAsL30cb+zqr0CCX04+D7ZVi+5PPj/Xc2KzKnbLplPH9MmSkUOjHXYlAvB2x1Y8o1kHD4jGrL9tyB5NAyDhxIoBbWtLPwbDVjmEDBzbjtdHBhZ5XDBlp4pcBPJz6Cd6Tf899F9/8j3+z+SFjSuwfhkVBThxnjX1V9P4sovBlnNzIFvuyevEcq8WV+53et1EZ9ngAgYC4EXHQj1eoiRcy9NvOCgrh72Uc9NXNBCTzPRnLGe/zRkt+OWVBKtECs53Yyx8jLAj2r40fMpI9dunvKQ+bDkPGBo6z+nuFlwFivr+j94oOClbvY1muiXqtWs/6gxuUQCF5A+vUEZv56/uMyIAZsU7Ua+XPKur3rB5ztu1NYWoqBzkySNgFmlhsf6Pyd9+Lt8UD06iM+n3IPknGcjNkpJC2MUHuoHL0HXHckCFrPUwbXqwfgcVj+sar/emI+Ycf72Apac+J7Hthtdwm2nzsqiPj/Fi0174dvQHTzsWQkYZUQWHTQ4YS2o/KpqaR+yVzyCgSx9FW+L2JLGfiBRzn+01j3tYFH8v96UbEOl7EoS/3BkLGtq3JkFSBqbJevNa0NGp9RvWflOIcu+LRl1d+VRHHTSMkJ8nq8xvbpHbCMNFCZlCcQrFgfAchYrvXumLIkKGajJseDu1PYn8/+m/M+rOZRf4W49rA78URm/nryxlrfQbUfkO3sZARX+L7IWNZz6BShJeiyDM5Yvnk4D2S/M44ulQKFdX32f5owkZTkpO2Y1nErVbTfeKLkr/JxVut2m1HoxTI5KlGp2o/YYxNJX94plGrtGFaElfkFa8LG91F7JyHxXJne63PGEpyVJicW2gVy283oMG033okA7nDyg4ExCZNRM8ru/1otByUX+hLrsAgCzimfaS+i9zYfjM4Ip/YT4rdWASr+0gjC9rGMdBuijU6TsLkdnMhPGCYZB9MYnvaIFk4M2+PcScH22ZO+YXg8/WygSzoRsxHTmpUS1m4Dd1vfRIxmvk3Yy7s679N/f4z4lnO2AYMsY1s74v1ytoF9WekQA4OFsrvxvl62jTab1MOZiT3s0VRAUOW22S5VZZB5TY2fcXHmozNEf9sj/Fj0n+kDpJ4vBRunH3MztaaG2RnL2LR0fubRS5LxBko4z3slsHM6rnqM0SOZBAMGE7mSzsKazLSUCK/cxdEnxHdGLnc9egNm2fos1ifRdX3hxH7P7UezAWeyOfpy56z7fqyGes83tniaOpzJPN12TXFsFjPIdbrLfbyxz5TbivWMTbqbLKD9WD6vPry2tdkJPw9xHhdcJs0bcu27y/FK1tozGfe9edYvY/1ckW/1or+24o84y+oeWaL77NezNR+DnE4+pwm6n3jMrYzm/lb7lss14nabtWt+PR1FdnPI95+W1seBzUZtt+HYPz+jGUIPT7Fmoz0oI/ZnF1YKL6iaVic2E+I/MKDP2yvfp9X1kJo17iwGrvafFZNbiTmWhCzHJRXivks3kLv6JReiyGCSGWMDThIXhek/QRwa9ji/Rdxq1cff9nYWBkwiJ5P5jOubkxyPxKcp921hyKu/6OXJaZxxXSfowKGEpjyq2EnK/VCZWS1RUDs88UxOeoseeT1k6wmq2sq2U0JlVQ3QBasrN7fcmqH5eEl3QTe1loSaO3ZnTK1JNh2nzdtyMK1URC3ChjyRLr4XW8kYCQj7LepahmstnvjN5fM9mNBloXC5m/7+9fXVdx9XRJkuSz6+5DBWt83ak3iTcsQUsSQkRbEAUnkcngrK+EVW4VV8yGnZNqMPqMjD7LyByJ3dvqBM6y2WR3w9B9M5EYSQfzQZABZvHVFO2tTeMacxuPIKccFLb3LjfN88CI4cgztQhFcZJMqBgwi2nQRhYWNNpfSDvTamcEiaK1MxT49LGZoBRCxz7dpoqOdKEry4n3aa11tTvR80oNhNragtdQmiWiebUytejNtR94e1i+8F9zerIO5bDYTeo/YZ+eNi89FzUtO8krXsgwhawni/j5ChWDLSX1Oozm65WT3HlqZTewh1AXyrFhvP/GbSWq/X9cvZKgHN6vPqH1Fqvxl9bj8avXgElnWMzWBi1ELwpCx5cQPQdYIFOpDiWk1BfGu5mhF/ujEBqGnTbuqVn2jMNrKBds0aoV/saE4Oesl3qdXqxZLjv4Dkp0zzdcJKUJ9sJ2mw5oRItrx5EkTqwNf3CnJAnoqPBd92SJqgmJPSTav2mSBt8VCxvqOtgntc1jSWy0EQ7QxxT0DHmrGszgdgFfOI1h2sA7m4WfdY/c10PpgmeYR1n8k+D454j/5+4hVGDf3A7GY1OeMqikwTzaFZ+2q29knUCkXR5W9In+n+nqP0fciyLQ+ReDphTwhnMDJW0dkGcvi84nJ8oSKaYosFia6T2bI2GLywnzamO3a1irIg4v40qevxEmyqipOo9r+aaNgONg4tVQqfmCQG3QCRyItIGjpP9SkSjtD4eSArn6IRrVadE2F/BHY1LQQ0XPM/gBoNSVQ4eCS0BlXvV1yhKJKrbnM9LDaT04Na4XsbK99cw/ZxEIrbIkPE3ZCyGx6OFgbLAUDhqwJFoUjdwspcWzX5lLypJllB2K9CbMsIW5Fxgg/8+9giteUL/tg2OfQz0zbtFpQJx2tWhPoBUzZXkkPCtknQicLrc92W9ELvHFbK8imUeKzaSNMRi5rjpjHBaO8EGoVsSnENqOfF1YBRJXFwkO/qrGIWO9B6n59fcprARnrc7NbcajtXOzDhhNaiU73yWcYMraU+BHpB4Xwq38X1csNTvx4bKvqQh2QFmUfh0RqIgzqNY5eYgQEdQALb/snfujaGQXxY7FcXlVN1yp+SPJMRMzORerMgwhAAbWTZdggopRLqk8G+7KlknVB28VaEHkcbX0bXov1ZYwMFqs5TCo56m9jnmyTtXkbtW8yYz+Fn+w0ahmsyg2WZ7jVbybqu4x1YFfhQh8aX7yferPo+Rvbgmz2tXlBw+hvZZwXNk4Mh4V+o89VjBMJkr4+YwezqOZcqplX9O8j8XUQGgFPvc9GClzqe4ucBUPGVjGCQuEZ67P6sipPtpOLLLibXmfbx8LE+dkFa0bthfi1azuX6GUNVUka1fvGhmqc9ZAjJlidNdF+rOrvMEZoEilYfDj9B7SRjZ+ItrGIwn6cKSoLOJFMnwz2ZUupmAXtRE6oWdCOTUb7fnVfyBSGVZIJ1j45Zdm2PQ2ah2k1MkaTGdVcybKTupxCNU2JbKd6gTl0Rj56vqEQbh3eVB+K4A84vM+IvNtuvn1ncjYpaOjbRrAWQymqlE2vFuGf0hdAL9vY97lKRNRnVs287Dp+OybKknK/IWakv17u3+TJlg01NY3uw8SQsQW0grsRFOx2lvLAYgQN09kErS1g8HXRZ/4TnmwK70Y4Kdf+dVC1KQTbUoplk59RGxbN/FpVI2K8t7GB2x8vjJ2iPk8ieh6lU3Mp00E0kRpk2SxnAyVN7ZiRRn3ZQmeVVQE6mT4Z5gL5pp1E0guywwdFwc3me9M7HmejsFAU5axO9MViW3AXU8xa/BRRQTi8UC+3G6MFQkTBXDsbLb8f/TeX+GFXzFv8ABdv9UYX+I3fgO0xP1YfCmM7t2HUJqSYtm2YajH036XYfoOdyGWNowqplv15ArDtIrOJgmVQub0aX4asNZXrWftdJlErYtOjnSFjs6n0qKXTeL9g7SAW3u5QK8hHvi545j+JKfG9iCNaSIncqVotZ4ren4g24J2HGP7GN/ANOY3+VLvr3R98W78tpvs/0e7SyYLJhs5+bSJzXzYntEKXKghrJ4bkAB3qMYe0A/oO68sWPKHk1mQ+DmiFnWQKuHEE5EhIvRArzPakmXZyTCt71aO+/oJ+5t1R0FAF5K0IErGoUcyiR8jSl1driWceYcpoorSB1g96gV/WQpiaWsntWPsNiPAS94vVg2Dsi+2ppl+mDb5IfF8pzdniM2gtHU3hWO+krbZhmXLE5hLoVU3tImo7wmxRXx9jvQXLoFHbq7E/0WuRnO9PApjSqnX115kxZGwKtQOSPy61A3VerW2k+xT/gIiIDO/9FFMPHuCBnP5mWd31ln5bTG/pd2kCOQf1s1/pHjRkYJAlSEE/4yjJg6raN5sE20qr/XVwSqTkawQE44Cu9uE7ty+b0eY/+ixo8Iyv60NzOjClDzcKeMV3bX8clctofFfG8Vl+V9oZ8u2wfUeJN4pZqFlYiCgkhoZBS5r8/ZwplMFXfN/BgCFDduzwoteQyZqUbLFVB+zXt1jEgzIABmvQNmG7sjhJGlaOk/uKC168PS3WqV1tjdoWt6Kvj9F8XbsoZeSyhzECqDwZEr1eg/tGdVt+Gb2qdrLwjAwoUN+JDIo5vOI3EaUPXvF7u5IHGr0pQbwrxyZCHhhVLkhM5HKogGEUII35hl9PaOP0gmoOTpwI4FZEgdVO8DOqZrDGbbvXGoVh+2VX34X8U87T6w+GKzeEva8puEn6Y7KzcfjQnbIphXZRsmCBU1GfeWPkmW+9YBp9NWL1WOSV1cMYr7df55HfkfE5oq/k7oyxnYRf9VmIWJ+JsvpuIrcT828q+vOath0tFNiFMv159lftNs9Hks2v7AJGaP1Lltu1zWfRhK0zfZkjr3q9UU5+x6HPYf6s4Z9NY7XNq+1JLLzpfSLXoQOm/V7oe4617pMUuZ1a7PeN/RRDBhGlDYaMbcwoQLpScNTpB8rEDpLaa2R/MNNBT94n2+HbF6gS5OJnNNMOzLJplPmAHVkwl1L0/o4FCxmxCqLxGAWwBOcRWcBRLAugcRgFofgFMbmsw8i5oJ6TaMiwWGbLgqt6XsKfxeJ12u8A+nYS+pyJrKdYhX/rkGF+n7BtI8b2YrwmfH04LJybae8REE+rF8sZsV43g3r/5LflyG0wXpCzo9adFqxzguvRWVCyE72vdLodMWQQUdpgyNjmkjnQEm26UCE24QJ9KqlCZ8LLlOzrEhUWeFWhOOy+eIExIjxsdVjegbTQJq8tYl6vVicqnNrgd8SQQURpgyGDiIhoZ2DHbyIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiIiLaEabQ6zuP0YC6SQkJjJ6Hz+fDea5AVzBkEBERRZGFtc0rbEz1+uA7P4qNvJtRQNKnzShoBjB63ng/09Q7pR5PRiLrfft9R2Im2jqyXUXxHo9nyo9pLOJW7waX023a50r38DOF4VuLQPYJ1JfnqPueY2pbTPx7C/0uM9YFdS8R0ZZaWlrC3r171S3aGr/E0ux/xHfv+vHg7QDefe9X4r734f3ZH8FvV3wGr/72Jn8/79zHV78wgL+Rf3/iM+g5+9v4O9oDZvKgdkUUriK874PI/kgRKj7zKfz23tCrZGHxStSTs3Gi/QJCZQt9noET7bhgKnDIgnyrLIjEIwoq7RfK4ayoElr+7Ij3sxUYxfnWW6I4GSGh97UgCxbRK8dG5DqzFnedFZ5BX32RumG93q2l+XdkRa3fwjN9CH5ks3iPO2Bs346XM4HvPPvEGXj9V2C3eu3fUwbSVtxCxDp3+N4bWucOOd5ubEX+HtRnTmaWUdvmBuYVxcHv1vhewn6bToV+lwwZRJQ2GDLSQagwhfe9Hx/8gCic/+JdvCuzhvBhceD4cooP9mbv3P8qvjCgRQzhE/hMz1n8dlTKMJZZhKEPfiAYQn7x7rvQF/v9yKv9IpoO68v9k/vfwOjcewi89RZ++h6Q9bGX8LGsLJR8qhL5H9KeIsQqwObgTF89rA+9NoWpuNRnSDIkaAXLgMVrnRTiEilIqPmlrtBnvd6tba/vSKPWX9Ihw8n3mYDo71H/jGLloR7yveSfduvRLOK7sAvBESLfP/53lyJqeUXp28F255QRDAoT+DxJbGPBbSKR94kh0W0sav8R2hYYMogobTBkpIOH+JOut3DoUxX4xEeMAvsvseS/gj+4/hbeQx5qv9aEw8HCeCq9g/tf/QIG/iYbH/7wIn76U3k8syp8qQNz1EH2lwiI5f6qttz2ZxljzdOVAqzLBUOr5Y0XMqw/o1rWnK0OGcb3F08itU3p9x1pYn4fQrzHU05fp2LluRIycuw+h2Wh3uJ72RRq+9tIeLRk7GNSGDKCYS76PbTfwduVCdVEaPsRONgfBH8vVp8ttC0wZBBR2mDISGfGATNGAcptv/TjcsN1vCUPuJVvo1Ue1CzPuqsDs82ZPKP5yAdf+T/wh//soLrX+vPoBVSr8696Abdoyu7xCK4XWGLb3iHDxOaMsv4dxvsO0u07Cm1jG2axrMZ2najY353+WxI/JNdCRmVAfh/yKzUFRMvvOWIem0LtO1KyLaQ4ZMQIGFJwX+bos6n3dVCrGWu+kftPhgwiShsMGenNKNRsVsj4pf8yGq6/pYeDyoAeOGKcObMLGcEDX9gBNF5osi7w6PNypymOXJ9+r/W6lO/TK4p5doWtyIO5JVkIUOFsJ4WM0N3p/R1ZildTEe9xE32dJF6AjS7Eh34LscV6L7t5q9+mbeFVPa5uWUvkMyZG21b83uB2YOzjEmJbiDfWa+LfUdyQobaTuAHCeF6MfhjGviS4zcnXiHUS/X2FtpPY22doW+DoUkRE5MASAsv6X3/nffq/qfVL/ODBW+LfD+Kl3z4o3vS38dIn5P1zmHoo/93ejMLMtN9qGKEApvyLWLzVajtSU075BfT19elT+wlRhBBkgcO4T05xCtCWZCFfG1HGZlIlMG3ZrB6X00ZHYLKVg5yEP1DyNvodbTsyCPSdEUV6vRDZd0b7SxSQjb8TFxgd1gPE9JWo7SRstWnvbdp21ZTk2zqm/Y6Cv5MAAnLDDfsdyfUhC+jhy6VP7Tih/fA2l9wuHQUMqahefXeLuNUaPWqZnJee6UOhQVsF8vsyP1kGD58K5uKz2weMcAwZREQU3zvT+MFP5R+fQNEh7Z7U+uUPoGWM94v301o4/R18ovBj4t/3MPUgkZTxDt76gX6K9mOfkK93wzSuRBSYQlP8M8JG4VUryFkerXNQfkE8JgsH8mAfp9AemPLH7WDrWE45LkQVpkyTKvXJmgzLx+VkLvhohROr9RQxuV5QT6/vKHVifc7IKV6NgctEYO0VKzpyW2nXSuaF8FqtVrW9bEluC0xB5Ebx1Yowq98j7svBwUJZQO+F7SKZn59ixnapWbyF1qjv2GKStRJiveubavi6LaqX30l4DUeOCCYX1HZ9flR8h3Ie4k2130KCJy4YMoiIKI5f4Ac3RiAzxvtLjlqM7uS+X049gMwYyCuCkWk+dKhIO2P/nnjMUcz45TuY/ZPL+La24C/hmDfJ3ura2X1zIUOd3bWcYp3dlM0NZCFBnhltx8HhGAUXrZkDcEbWUsjChG0hVj+jrnsbw+fT7FoE8kxqcN3oZ8ktz1oHT6O+rQWmnESrLNL6O0qlWJ8zclLrf4Nk85rowmxkgJlCr+wvUFiIHHNtj1hnetOcWM2HsnFws0rtZmrbyza/udgOy+vl9iLC3JYFyRA9FNhMRo1m5O9L/baKtM+RjYAIU3HlHNTmtXjrltbsSc7Hae2FGUMGERHFFBjtwjen39MK6p95dVOqMTA1oUUMFJpPd+YUwaunDDyY1e8K9xb6P/95fF6bPod/1fAFXPqeSBjv+zBOfPGzyE8iHOnNYYB61aZab6YUq4CkznBHnfGT7ZSN9tkXUC5u+xenMWyZCERBd1gW2QLiP1mzIAqH2llLiwKvcfZVEvObXpRnXdP0omfaheIivtMIAb29SkQhUzVjsZH231GK6AXOWJ8zUpFYR32x+5CIFR1wVMiPbEIUHmC0ZlKyOU99vXhP8ZjRXEqvHkqqwJpq+rYnto6ogCuDhgySfkyFbQoBvG389mJKl9omud1fEN9/jN+fESBFQJSd9uV3q20vwRpJ5/sW+btkx28iShvs+J1+fvGwH3/QPYFliIJ6+5ctOw66T3V+xCdwsucsvKZw8PaffB7/r++9i/eXvIav1xmBx3h+uPe9Pxsf+e1yvHrMi49EVWLYd2I0OkJKwQ7O2lnrxA//+uuhv1dEB2v9fSJG3ZHUe4V3rlafUZ6ltJhHdvYiFrWOzDkY1taF6ugZ0OcV+Rl1ah1sUsdvramHMQKW6uAdOcSp3hxEFvLNhWfjuwrdv52+ozDqddbfhxDvcU1o201KVFv+0HbQfnBYfF7VaV77jvzwBrcjfaSpHLt1YitiecPeP2KdaZ8/EJy39fbgHvN25Iqw7z56u41PrQ8n/S0iqd/UYqztz5J5/xm5rObHYjAtrwwj+l0cwpaI0ghDRpoRB62viIPWT5GFksYvoS7/A+qBFHNSWHx/CV77ep1qSmUcCBM5mIcKPuYCnVao0caJhzbP6NFyIunvHf95VkKFu+QKJqECyYmcW7gVHMLWNF+vP0ahNfz9U1rgigwVxndsVSiLGvUp/P7ANvmOUluATUDE7yk6IBqfUWxHAbEdBT+r8Tn1ZxkF0MRCRmgbNb5TY73o26R63PhsmxwyQsK3seDHktutrCUL2x4N8bYrZ9tJuOj15ViiIcN4vnFCIuLN4q/70PZh7F/ka4rqzwTXC0PGZgs8xRe+DXzx7Av4DXVXuGcYvbyOHx1+AQ1uNJ4k2kYYMtLIkh+X/+A63nrvg3jpTDs+W7RJAUPQD26yJuKDkBccj6RfyfuDeOX/+EPol71QB2YXQkaIdQFCLyCZh0eNV9CIQx3oxVFee314AUw9x44qPMrnev1inaXxdTK0z2UaKlTSv2dTASdiXYTYFAC3w3e0ZULbtxT7+zI/17rAqX/vidVk6OvJ7nn6d4IzZ4AroZAR+d1tWsiwK6AHxHL2yn2LVaE/3nZlrFe3Qkb4d5qseNutsf+N/bzQskQ/L7Re2Cdjs4kv5PvvAJWXn+Jn6q4w0+v4qnj85vQzdQcR0SbbwoAhD1B+7aTrx/Cp9j/EH/5h9HS25P3i8Xfx4AdvyyduqoBshJ19MOLgr/oFBNtVq8lJR1E5mtOZQu31vb16p1hx1HZQeBUHedknwNFzt9oUhsXnKqwMLzQVVcqOqovwq4bu+ihZ2fAWWRXYnEuf78iGLLBbvq8snLnQn0YWmH2t8HtDozo5CleygB0x0lBiZMFTH71IFlR7UYkT2frQqVHr3eeHVyxX2my7Vp2+pZwi1F9Q/W0ih7zS+q9sJtWXSH2nUZNdx++IyXqdy21P/27kdWH054n7bLdTGTD0fjmxvkOGjM1W+AJ6D4h/RZAYCNVeKs/Qc1v88yFg+NOxvhrxvK88xQ/VrVT42Z8/RWnUe8haFnG/XUAiou3vnR+ogCGbSG12wBAeTmFO/vuxEhTZDAZ1qKQIWsx48ANsbsxQAchiyEp5pjjyYJ7ocI/T02Lm8gymk5LX1LB+kK9Ml1KavSl5Jlh8LmNR5dlqraApzxyL24u3hsWa1YMIsr2IzhhOO9hKafQdWZCFb63pkii0DkeWWbVrSqhCuU340V4fLKjbTMH1ahGqIidzwdnonG01yWV2SF5XRHZKN4JN1HqXw6NaUiOlWQTEVLPv9C2JoCEL8NPDlgEw4ZHQ0ooeDH2+YRxUHfmDm7YcqCEyXMmALGtatFrj+IGUzaVSSm/6JGsmNkwGD6OJ1bQo6MswciAD40YYMe5LwBc/+4LtBiJDRuV/Anq//AI+ru7Tmnp9Q/z7Wxn42j92mE/Va76vbibik4m8D+0IbC6VBlRzGLzv/figVVslTRFO/uGryJd/yucPH7So2k/Ow/7PoXviPXys9mv44mG7IWdn0f+5S5gQQeiVL3Xgn31Er5532lzqJ/e/gdG59xB46y389D0g62Mv4WNZIlR9qhL5wbfU52luCmE0k5FCTQSin+ecufmDCAxnvPBfEQVEy6YS4eSymK82rTVxSMfmUkYzFHVTCnuttv0AJ3ICuDVt1wRJfb/yDG3Yg+n9HYUJWw+xtlPz+5k/QwIimnfF52A70L73eM2lItezPl9ZoxK2HKZ5hb2b43Wk05v12DTvSpB5u0la1DZhfJduNZeKw1h/Ub+T5BnrpfCMHM5Z3y7j//ZD2wFLcCm1C+UiGIyLgnrkNPxb+jNkIV6/LwNflAc3GSZMzwtO5j4cheL2cfHvo3V84c9Vsyp5n9XrzJN8jVJ93D5g2PnhmB4WXilOYLPJeQFfs1qWWNNnRcBQLyeiLfKr9/Duu+/aTO/gV+ppgZyDelMCJ81O4prFgylR6sfHUGJXjaE5JB6XdRnLmPb/RL8rActvPcCDB3rA0G7/jbw9FbxtSRzA5YXFxNFWOxMbeVGrROlnpPWDtixIas1UivQL4bV7/fpFtmK8gRymNZECs1ze6DPUocKsU7HP+FqwuLhf2HLL62hc8OJtETDkurUsGzkY+laTZt+RThY0xfNU4Vk/qx+rwKmaxKiz/dr35spvaxOo5kPJndkX66lXhTdtOFw57Gus4YBVjZVlzVfiwq6g73RS35G+bYgp0VCwDeSU12vXlJm+In4Hsl+K+JyJ7HdYk7EpZPOmdbwiCtBGrUB0TYGq9RB/BWssYnYSD9WSRNZI/PBbT1H/yDRvU22CDBdWHcojX2O1fPIz3DTXnqRKMjUmtCOwJmO72sDZt3RlPhtcNKXOsJrOSKoz+sjORvaiKD7GPbsnhJ2pdXAG1ngPId4Z7dTUZBhnYtVNg4tnSkPvYT7ba/G+Vu+Z5t9R+NnxRM5mG9TvSvs7gTP2Mb9zKzbfcxT1GWzmr39ecw2HPt/4NRmxtgGbz23+7h2tFPfFr0lxul4tRO5LTduZG5zWRmjvmOh+3fTdMGRshmlRaL6vd/g2CvlxQ4bR/OlD4jmfEs+x+nZVCKkLe/wZfhYQBfNJff4Gu3BhiBcyjNtOhL9X8k3G2Fzq+cOQsY0ZhTNXC6Cbz6pgKI62tiPcxG1mIdeHGkY2oYJiBL1Ao/9tVXhMTcjYBNryhYYsdWL7fEf6+n270mlh35qcr+yMazuPsGCkJPQ7dLAdRAQD82c1Cy+8xipkq+/KWHabgqz+PtHfSXSgSTGrdRx3WzE+v/V2aW0LT9hEfEbnITUk9FvTPzNDxibSCvLQawJih4wMfF/8/b3fTKSQrWoa1C0nzGEgdsgIzTu0vCHaa39uqoHZKNZkPLcYMra5JAqMRLRT6YVs25oMbfTa+DUuWsHVavhjq1BNCQkLiykINgwZWyRuTYZ2XyKsmzNFhgeNqiVxGjJyTLUY0Z3FN7rcFhgynlsMGURERDsDQ0YKJdLEyAnZfOiLWA+bZ6hJUYpCxmeBftmf40Pivd4BPhrV7EqFjF+P6KuRxGhXMW1GXxDacgwZREREOwNDxnYVdbY/Nc2lvvhbwFf/Wm/CNSDm/+PI2oWN1Dqo10YHF3peMWQQERHtDDw1vNPIM/4iKBiTduE/QYaH4P2moWzj+eg/Fs/XmkHtwitiXt//6/XwC/Etxh7WVoaVZC/ep732W7zyOREREdF2w5CxSWRNgbyCdsJTGl1d++OytuEd85XKn2H0vvhHNqWy6ylUnIHeXwcqxWfpsRiJQro5HR0kjJqUT/58PaVXNiciIiIi9zFkbLKwGoU4k1ELsZnqVbix7EtSqF8w8OZ9FXym9aFpP/mbGbYdvn8jZxc+/mnxeY6L191+Grp4oNmj9bBL9QcDhmyCddbUl4SIiIiItgWGjJ1GFNjNNSGyn4VkhAdtiuqQ/Qw//rn6U5AjSBlXJA+3C+WHxT8iWHxVhAWtFkOoc9IXQ16R/LPi3/9kXTPx1W/rwSUsYCTax4OIiIiI0gI7fm8So2N1wj5kMzSsXcfvZEaXUvP6vum1RmE/7HWK8Zhk7jzunD4iFURg+Z5Yjo8ezwBuhzqtM2A8v9jxm4iIaGdgSW6TpVNzqRez1R85L+Br8j2dDBErAslXrZpSOSQDSqkIQ/JCg+XG+4vNsOHLGahWtxzVjBARERFR2mJpbrtSozo5JmsvzM2lDohCfoKXddQCgqzxEH8bTapkPwtHndNlbYl470o5HK4INNE1FXrQkH0+ZNMuu07iRERERJT+2Fxqk1g2W4pDe83PLZpLRVzoLpF5OhXWXMpoTiXuj27KpC7G947407JpV+j6HVFXC1fzjbpOhun9kmuORdsVm0sRERHtDAwZm8S1PhkqYBiFfWO+bhfGjZChXYxP/Oukn0TwM6q+HcZtu9ca72G/7KYLDEb0NaGdiSGDiIhoZ2DI2CRGgXujNRnyvv6s6NqERK/2HZSiwrsWILQrhZsCkqmGIojhgUwYMoiIiHYGhgwiShsMGURERDsDTyETEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiItohAqPn4fP50Dul7khKAKPnfTg/GlC3LQRGcX7D70NEOxlDBhERpZgstJ5HrDKr2VSvTxSUnT9/8+iFb9/5UfFXOgpgyr8o/i2Et0i/J1k5OdlYvNVqGyICU34sIhsHc9QdREQReMVvIkobvOJ3uphCr+8KptWtxGXjRPsFlBsFUHnWu/WWKJQW4kxfPeKVf2XIuDIdMY9NJN/f7+1DfdSCypDRils4gfYL5YhcNFmL0Pp2JfqiXyhnCt+V5NZo4RmrZbFgrOfCM9bLkJAAAoEcETbUzTCx1wMRkcSQQURpgyEjXeghI3CiHReiSvkOCtq3EB0QjAJwdvyC6daGjFDAyo76/PafXf/cshbBZrlVyIiepz1jnpEhQ18/6saGyeDnhd9hqNSWJcfNMENEOxVDBhGlDYaMdJGCkCEZZ/PjBI2trsmQgqEhrCBt/dmDz431uVwMGZaSmH+y4occZzVWRLSzsU8GERFZkm3yZSfi8EkUsuUJ+8VbaI16zKcXtu0U1eNMoQgP9fYBI13klF9A+4lsYPoKfLa9m2XoUJ9ZhpEYwSm1xHIMy1J/ISo3GDBksDF/Xnk7rAN4YBTaW2lBog99wemMuEev/eljwCAigSGDiIgs6QVGc0FSTu2QZW/trH3UY316wTyGovqtq51IlAwaZ0TJufBgjijGWwgE8Lb4R9Y0bGWzocBorxb8sk9Ubqhwb9ScZIvPpceMAALiA8qwqQcNEWZ6Zd8a9Zh5pYgb6dkZnoi2CkMGERGRjaL6PtSLVGSZi3KKUH/BYafsVAmMolfVHlnXPFlPkcPTyiZQRtOsCxfKVVjJ0UJhn0ha+rxlLVY2Tpw5gWwRNd62SBU51j3Fieg5xD4ZRJQ22CcjXbg4ulRwZKkQvY+B6t9gfsCRVPbVSHaZIlh1iE5Jn4zQ8jqfr0V/G+078sMba72K5T8fqFSviZ6Hvqw57ItBREEMGUSUNhgy0oVdIVIrzdqMrKR39i6aCv0dVWBVBe14HZnToeN3clQ426SQYe6AvaGQESRDSy8Q1qRNPn8YB8O+CxVuTB3gtWUJxOj4TkTPHTaXIiKiCEWo7+sThVCIwqTevKYX9Xq/C1MhUhaC5WOtfi/a1Rls2Y+hr2+7hYPNk0iTJi3U2ZDrXgsYhYVah2tXaH1MFnGrNXQl78DoMKajmkbloMibLT6MH1Pa/VPwi2XJ9hYxYBBREGsyiChtsCYjjagz77EEz57L5jbaCfA4Z7FZk+FKTYZxvz6vgP6e6jGnYi2HUUOSLQIMpsUfVs9VzeDkY/UigtrWXhHRc4s1GUREFK1I1VwEJzWqlNYnQr/PKHjKK0N7c+SQtr2imE0ppTp6y+BhLvjL0BD+fdlN+lCzsRTV69/1oggY8uKJsuN7lJxyVIoZyZoZrcalsJIBg4jCsCaDiNIGazLSjTozr/0dqlkwzqRbi1EDsR1qMiw6qids0zp+S7H6WFhx9nzzd2z7/sHaru1Y60REqcaaDCIiCicL2lq/AHMzHL2tvuwr0OuXt0M1GmFTuxf+1vOIGCF1+8gpx4XIz+R4il9LsC2I8KA3xzqhfZ7pK6E+GmaB4IUyFuHXO2cQEQUxZBARUbg4Be0LlTFOWYvX1p8AbvWOOro4mzxjbntBbXLMeYfyOP03ZMCUtROFZ3ChXHyXKjhNX4kIjiqIoPCE3rRKvL/19yhrToz33sbhk4gSxpBBRET2tFqNOIVDVfNhFDK1EabiDmWqFz7tm10lwKh5eY7Tiit9MuR6lE3Fwpp7FaG+/QSys0MXJJTBUGsmpT2vHOUX9D4c0TUecqhb1RFevPeZwkXH4ZOItj+GDCIiiibb28uCu9Y/IXZzmMCUX+vDIAuZ2mvOxy5IBobl0LfyjLre5CpW/wwnjPcv9G5wRs8z+X1HBQxF1mxdqEdRjgwNejDUQk3weTnWQSMwBb/4YrIP6vEk56Cs8jCGvSWinY4dv4kobbDj99YzX+BNsur0qz+n0OLqzuaO4lL4c8ydieMPoeq8M7H98iQo2JF5g6wK6huYt6sdv9VyhM1T1WDkxHwfYz3H/l7CO6ur7UGtD9e+JyLaFhgyiChtMGRstYAoCPaKgmBOeEHQooAcu+CrF0iHD5oLvtFXibaTWMgIL8hurRjLotbhpo8uZRVusjfzytxqnWh/Ow+ORLT9MWQQUdpgyKCEOTwLT0REm4shg4jSBkMGERHRzsCO30RERERE5CqGDCIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUNGugiM4rzPh/OjAXUHEREREdH2xJCxqQIYPe+DT4QJn68XU+pe7f7eW1hENrxFOeo+t0yh11F4kc8zL1N8gdHz6rOEpt5EZkBEREREO1LGuqD+JrdN9cJ3ZVrd0BWe6UN9kfwrgEAgBzkiU8jCeuutRe1xW9kn0H6hHDKCxH1+4Rn06W8iyPBwBYET7bhQHiPAGMtq8drwTxCSHWueFp/dTvaJM/D6r8DuI8V8H9pRlpaWsHfvXnWLiIiItiuGjM2iCt2hkKGo+20L0vEej8thyJAcvpcecoAT7RfgbJH0ZYD87JDvIf+sh3k1WEtg2WlHYMggIiLaGdhcaivFLdSLQrZ4XDwB9QkVsmXh3GjCpNdELN5qDWvWpE/nEdaKqqgeZwrlc3vD7yciIiIiSgBDxlaRHb1FgJA1GxfKofXVCO83IftvyIBQiDOqmZRzRajv60OfnNpPIFvcI4OMdltNMkxYKaoUz8/OSfD9iIiIiIhC2Fxqs9g1l9IEEJiStRa3sKj1vcjBsFYDIQKGo2ZFMcgwo7dtCqstmer14cp0dowmT3pTJWe9KiJo/TpyREhqte1nERLrM7K51POGzaWIiIh2BoaMFIrdQduicK0CgfYKLWwkWoNhIWbISC7EOOuTIWtiRMjIkYED1n0ytOAVq38GQ8bzhiGDiIhoZ2BzqRTKKb8Q1TxJ1mTo90UWrEWBWgUM7Tl2AUMWzKP6VlhMCYwlK0OD+bW8VgcRERERbQRDxqaYgt+u3ZG6CJ/soI1CPYlM+2MEhKL6YHDp6zsD7RWyeVLwPjUZbbICb2vBJUeOlWsjGIZU/42tEBl09CnJ5lpEREREtKUYMjbDlD9YWA4Mi8L0+VEEtKZAoiDd+jYqtWDQjoMB+axsnKh02IBJzbfQa//8QEDWSmTjYFjGCIj71Z9xqeU0TXoTsEXcag2/X/9cFsSbBaKWwYrsI2IKSkaIIiJygzqpE1Zbq2qHrSp/9ZMfEaPw7STqs7P2mmQT6vCLBCdH/81sfD60MzBkbIIp/zSys1UdgdeLwsVbaD0fUOFCbzYVGO1VnaQtCu9qijwQyPnKvhtaJlEHz8gDZeBtrR5Du+jfRkSOThU+teNEjCqQgAhDi8Yy5BwUUcJpyNFHyWJ/DKLnnezjJfaDds1ArcKDFaua3SKxTxb/WNUgO9t/qmWzO8li0Ar0SQYWo8Y7gWawTmjHELFH9halah+rTlKp5XZeAA1/na0E16l8f0eBSs433vfpgF5wt5s2I7zK9bhdCvyp+B3p29FmhWjt+3Zhu4mWXr+jeLT3VBNDRsrJplKFqKzUd+I5OeWi4HxGCxq9xjcqDiC9ImHYFeTbtRJ8xIFAvGZYHB8KK1XfDXXwDD9QqsJ89kHr/h1297sqIA5kYskKvXoflJwieLNVkJLXACGiNPNLLM1+F39y+Sv4/Of+VfBg8a8+/xX0fncW76hnbUd6obpQ7Ev127ocHJS72Gl/xEFb7T+NfdcGBXIOincW+77exAsh+oma2LXWiVPNeLPF50vmQKAVTEKFCWNyJQc5qKWX9Jp6pyfR9GORds2oWAVBGejksUkco4dtP4sqvMWZrsCiKXNwcnox2w3Q1uM0rgQLkKogb7Ws2uFYPtf6ce17NcJujElv6WA/H/OUzLaykd+RQS+kWy9T2JRQYFC/J3PZzont9DuyWdbISQ7yY2znHF0qxeTG3Pp2Jfq8fpshbOXO6gqm7UaTkj9q2SFcGxY29EJtvn5v2GuihqVVr40cWUo8oI/8hIj3tHy+vnyxR3iymp+6T+5vtGZQFjtUucGq0aVy5OeJO2IV7XQcXSodqH2S/PN978cHP/B3xB+/wLvv/kreA3xY/M6/bLGvcou2X9De3RWhi53a7PcEbX+q9j9FU/JvbcdlK3w/Hj1ffX6x5xFOH+lP3w8m8ro45HGjMhAatdANxrFI+54Cpn22vt3IAkZo3ahtSb1GXy85MUYU1Dkb/VCtd20Ew1hzCxf6bqzmbxy3Yg3vHpu+7PKv5EZvdJ1RhrA7DivO1nl8Tr/jaO79jkLva11+ib+M9vuK2NT2nsjooNvpdxS1rPExZKSU3DCGcVB+IQH9wBnv4BTO2OFZ/3DCN0IhIiToG6JVwd3mfVMRMmJtuI5Chj6ftysjPivtSAwZ6eAh/uSr0zj46gkUfeQDkBFD+uXSfVz5gwG89Z4sZ2727zHO/sT2hIpJsLBlpgpeiH69doAOOCks2OxPJbmP83vtl7kXqI8zf6Og5eo6N9ZFIoWhSLaFozPAFeP4FKdwZFo/xueMpfBMOw4Oi3Udt9wZu2ClfbfyOV7xHNOT9EKZCwHDCGJR5LaifelJzT9p8vseFm8rWz7kqO9EPeRIAtuJ0wJwtFT8jqzLL/GX0WJZtO3dvZMfwd/zdvodRS1rfAwZKaR92bIWQ25JagMNHSjURmwECG2nLzuBh75QY4cVeXCJPPhFb1Rynl745UZpuXNQG2zkY+rAYz7QBp+rbsUUNj/j82k3YtA/f7yQkejZKtqeGDLSm7FPCtUObJbw/UDkPtB63xVO209G1P6GhB/Ejdta4SRn2PrAalvoCBVSA+I5veI5ORH78ODnEfvH2OHBZl+9QcYxw+q99e84onBhJarAoS8rTpxA4JYRYNSFZa0KR8Z3Jh6rF48FP5vDgow+L6tjRqQEjmG24q0P4/uMEVDU59UOibYhZOs4/t41To/vFiI/ewp+R9FlIoM+Tye1lRqXf3eWts3vSHA4TzOGjBSa6j2PQKX6MtQPKfhD0G7rZ/HlTeNHZFRp5gzrB/Oog4B5R6WEHfDlfIfFBpMTwK1pu7Nfaqcb8WO3LkDoz926mgwn7087BUNGOvsF/F3/GtfngE98pgdnf9uo49hsav+VUAFA3x/5vQ73I9q+SR1MtVroWAdWq/1fSFiBIOy++LUT5gKAcUxwyn7esdffhkOGeN/KgLHclXi71apwpE6CRRY4hVCA1AtWdvv+0PM2WAjUPodVU2aHjGOyxWcxGN/3phRak5RUyLDZ5q3FKxOk4ndkXX6wmlc4559Prje/1/r95fv0oj72Pmc7/Y7UbyUR7PidQkWxqkS1612ENvAccfuCNkqT3ila/7FbbLg55eJ55s5jEaMvyfle8OJtETDEL8/6hxfVGUj+oOR7ioBzohCLt3pNoww4GeEpB+UXxLKkYucZCIilE+/grGcfEaXAL3/xE/zgG3+gBQzZJ+NTWxYw5IF7WN9/GYNeODE1DFlrXBlzPxaij9yXZIfoCDnllSgUezGtb6UkCqVyoA/b/bMh+LxK7ThSVB++37eajIu+ysKs3UjoU72iUCJPZtW7sb82j4Yo56vLKfKKdxCPDfvVPeG071AWuKNWgN55Nlscm2Ivm9PnpZYs7PlkwJA3pq+EdX41T3pBUXxHqThG2tCWzbQMcoSlyPvMk152jNFh25WeyMlL+neUQnowk2NGWK0b00ADcdfddvodyRPh0fseu4k1GZsl7tkSdXZJ/LWxpggqgYf14zDu027oTMnX+KEYy6anZP3Ha3dmJj6L97SkltNm/ejLYlXDQTsRazLSTNiZq/fhg5+owJnPlOPgB9RdqWBRW7sRcp8izwgO59RHtUPOPnEGXv+V4H36/ifi7GfUmcZIEWc9kzjbJ0Xu9/X9sl6zHX/fZ9rfxtpvOzjrrr9vIjUZ9UCveO+wM9T68vhlEWlRLJR6P31/HuMMcthxIPIstNNjiuL0+BX2nuo+B4LHSSX89aFl3fymhZGsz+ZvTILfhZnt96Lm6ervyPqzR353tmLUPEWWm2wZn8NuXtvpdxRcVuflMYaMzRL2pav7JGMDFFzZGSWxEcgDT+9UEerDXpD8TkT/HNBf77C5lHyG8aONtPU7adosDBlp5if38Y3ROeC9AN56+5c4WFKB2srfxt4tqcjQD5ZiLxq/AGzLpsBl3j8jtE+2Fvn+EYUjdW8YVbiPblNuLVQIchAyTKEs9r7S2KfHnqfjkBGk5mu5r1ffmcPCUfh723xXgvY8N5pKSXbH5mQZx/SIQqVc5uGDW3Ess1+PyXOwzUeJtZ1I7v+Owj67KGwb/V715tnJNpdSj2m/IxkMhpFzwWY+Rhmn/SCG5W80RmiJvX7S5HekfZ7EypdsLrVF5EaiVY0NH0S7qlZyZQegNcNKIGBI8todUS9QTaBM1V5OJ/1zqNfH2hNENBmzaw6w+TtlItJ85DA++9nP4rNnv4yvd7yKD05/E69/vhdTv1CPbxp5AJYBQz+wx9irbJy2XzLtg7Q2SPJ9jfvs318etK2aRkwNyxCQjYNOdmXypI/jsztivfTqAUMWkmPtK0MXfDXIwofRRCM06fnKutmM+aJmdp81PjlvqwuJqesMxL0uiWoyk5PjrGC0aeQ2KtaJcUwPK7jJBc7Wm86kwcXxguUPR9PmL68rvyMTvckSUK9+uznlF2L+joPll6jCt/zNyIAhC/CinCW32cVpDFteF0NsD/JiZnJ7Fc+8oK6P1hqxPnf674g1GUSUNliTkd7euf9VfGHgb5D1ypfQ8c8+ou5NNXWGbwPXLgixOasX62x2zLN36gyjumV9Nlw9x7aZiFnoue0Hh9Eat6moWjexaowl9fmys2Wzi9jz1M5uOqjJ0J4nLzZXn6O+H/VAsKYntG6MGpbgGVh1ZjfsjLRaxli09ZuTwNlsUy2PG2xrO5ye4TV9xs2roY/e5vXvIX4zZPttwfhNqpuJsPwduP07Mj6jvoDBde1gG7Oiv966dYbtujR+c2Hfc/Rn2Ba/IyX4vtpyOdsGGDKIKG0wZKQ54wD2sVp87YuH8SF1d+okW5gJLxjphSV1I4wKLpbXMVK0zxxdgAwVLlRbatW0QixwsHCTCFmAqHy7Ndh8QZ+PnL8aWUY9LyFa8wzT8JfaRWFjF4aTDhmmwldwHqoQJN4wvHAk560CgPFYtOjCscZJQdFhQdR4Dzm38MKgQxsNMTGbz7glej3aFowj2G8L6nfpQnOplP2OtG1TzNJqG4pis605YvW5jP3Wzvodhb2v021AhgwionTwP/7H/1B/UVr6/h+tnz59ev105/j6z9VdKfP4O+tflu+lTV9e/85jdX8c//mP5PP/aP0/q9vh/vP6H4n5fTlyZv9Z/1x/ZPUi7bFY7/94/TtfFu/55e+Iv8I9/s6XbV5r/xqD/WvN1HwsF1ynzcd4n7ifJd76C9Gep72veRkiPlfEetU/k2ne2ndstzw231UM+rLbfI9WjOX7o/jrJZL2XrbfX/zvV77+y2JBE3jLJEWvR/170NdV/MlqW4j/+aLF21bt55n878h6G4raDpPY1sKofZXxemP9OtkOt9PvKHybj7fudeyTQUREDvwSUz+QY9gC78/JSWkthjxjpg0NKs+kBcdl3Qzy7Jy5PbqYtLN95iEmxeSkDfVUr3YmNvtEfdTZYqN/RELD8CZJa3+e8rPlhvC27AGt0XeMNvTakOyxz6ZL2vYQb72L9a19VWKbcVSJIc/wyhdkn0BlfT3OFIrvuHdUbAHOaH0I1eeUZ5xjbxL6dmXu0yJff0Es6OZ8L1bM/Yysp7g/Pa2Pgel3EXOSZ/bV6xKRgt9R4G3xouyDUa/R+8xELPd5B9uE3I7FypKv7+3Vl9f5dmglHX9HyfXhYMggIqKgwGgXuv5kCj/5xS/VPdIvseS/gv7p98Tf2SgvP6TfnQJ6lbx+gS1nTV6SNyUKBOGHW4sBL6I6fovJwXJN4SBOZJsKLkZhJVhoat9AIWQ70K8TEO96I7KAHlbokc0/tAKe3oxJK7hBdcaXK0ysv6iCn3yNCgzR1wywYjSTKsQZVZArqm/HCYhCs5NCZZAeHuRbW18rQRGlsxyvXgh1VGhNGbG8CQSpuOT6Nn4TcSd5HTD1ugS4/ztSHaMtCstyXlHLnWBAn55OZDt0Il1+RwHo2SyRtcGQQUREYd7B3Peu4A/+dQN8/+rz+PznP4/P/asGvH79LbyH9+HDkWcUrQ5WG6CP/OK8M2KytPbOcqFdK3GFKyoqDwWW9hPINs76yoN44Zkk2n6nKe1Ch+Lf4MXoVHBT9zu60JcohM8Ez7LKUYDkejsjIoAs74S3JZfz1kfpMWoPZMFZH3XI2QUGTQEjrL28DJgqaFiO2hNBK8QZ7e5Vwc1OThGKymUBzxhh6LzpgrfRtAJjnOck7O1hbXn9B43vI6J2zmLSzmhvMbd/R8bFPOX2Grv2ySlV+6mtLLENnlHLmOg+Md1/R9pFnLPhTfAKpQwZREQUlPMP63HmxEv4WPYH8X68i3fffRfv/ep9+OCHC/Gp1zrw5YiDeiDnoH6w2tIztImRZ/X0DtaikCk+jnaFb2F6ODWfISAO0LL8EKQKEhsv5OhnFzebFtDkKpOfw+/VC4DBSXVGlU/IPmExPLpZqAlGgQqX8c4cFxXVa4Wn9hPZ4u1lYUxvhlN4Jn5zEb3wLgKGKJxaD2Gq12SdKdSH8DU3bzILa85nOR87Rdqya02zRAHf+vtXZ9pduuK8YVGeYQ8raLrQXGqTbfh3JLZL4yrhsoZSbj8b+Q3q25Ox/cl1JrZBEYouiHXX7vXrYSjGG2yf35EIIHI43sLKuL+xSBxdiojSBkeX2q7U2WFZzZ5g84K4ZE2JdiROhM2oLvKgLQuH5se1+csRl9ToNg5GhAmnPrssuISdzTbOmOsiR64KFjBsllVvNhY9AlDodQZZWIxfwNYEP+sGRqyK+pyR7GoKLD6T+j7EHRZnpPX5xBzxJ/h9xl4H8da1peC8ZRnPtAxqe4z8Po1mfiGxl8nu+429TpKgltf8GWzfO4K23kwXa4v+jBsUti2l4HdkXpfaxfisfvvixdnZyNbHdo6/zk3bhaPfnvEeQuSyx5ZGv6PgfsP8mKzB0YNJLAwZRJQ2GDK2MeNAFbcQmiDLA5w9vdBhU5jU5gXTYxYH4LBChA35GbXhYI2ij3FwNh94HRRABKcFPlckuC4Tpz6/7bCWFgUT22DqoHCkCc0zskmI/nllIXID4de0PUTNPwXc3h6034M2RGro12D3HqECe0hiBeMkGN+Rxp3fUdGU/NvYyPR9gdiYbPcL+mvNG2WEsN+7s+WxYl6/sddrev2OrLah+MuoY8ggorTBkLHNpbwQ6zK5vPIKzckWQCmFnBaOdJsa1lJIK9CZag+INmZrf0cMGUSUNhgyiIiIdgZ2/CYiIiIiIlcxZBARERERkasYMoiIiIiIyFUMGURERERE5CqGDCIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiIiIiIlcxZBARERERkasYMoiIiIiIyFUMGURERERE5CqGjO0qMIrzPh/OjwbUHcJUL3zivt4pddskMHpePHYe5qcTEREREaUCQ8Z2FXgbi+KfnJwc/bZU5EWh+GfaH50yAm9rzxbP129bm0JvZHBJoaleH3znR8HcQ0RERLSzZKwL6m9yXQCj51txS5bvNywbJ9ovoFyFBFlAvzJdiDN99SjS7xKM97O5P+cM+upD90aTIeMKAifaccF4I0HWgrQ6+RDZJ9B+oVxEGSf095oWf2VHvB89v5aWlrB37151i4iIiLYrhoxNZV2ID5LNna4EwsKENRUaEF2o1wMBtHkUTcUPB4Vn+hDKHbFCRk5EcDGzX57YVNBIKJzQTsaQQUREtDMwZGymeCHCaciQ/TFEkgiPD6qmA/pj4kYwKGi1HgEnBXkXQ4b2WWQ9hTvCwxDtVAwZREREOwNDxiaKW9h3GDK0Qr/fazMfVTtQaDSNMgWHnGHL+ds3h9KDi5MaEQ1rJGiDGDKIiIh2BoaMTaMK/+pWONWHwi5kaPdD1STotQZ+r02Tq0jmeQbihRgXazJsyKDl91rXSsj36UW9s89FOxJDBhER0c7A0aU2SWB0WO970NeHPtN0Rg4HlX3QvmAum0bJZkeF4jlyGKapYa1jd6XDgviUX7w224uiNCi3653VrUe/kkFlyr+IxVut8FmNwUtERERE2wZDxqaYwvCtRVHWL4oIE1OQGUCOK2udAabQK/teyHBSX64NPxsIBFB4phKB8z7tmhjGdH50CqOm+/Ryuj7/6PdNxjSumN4vfGqNO4KWETBk3wrrEa5yUH5BPCZT1/QVDm1LREREtI0xZGwCrRYDFrUPIjDIgnShCAHRjOZVhThjaoKUU34B9UWyQH5GuyaGHP5V1ohcKC8KFdINU36teZZWOyDDgNYRexG3Wo1w0CvexYZ2sT/z47JJV6gGJnxqx4ls9bQosimVDBiyf0c7Dg7HeE+jWVj7CWQv3kIrgwYRERHRtsSQkWqisN57axGFZ6L7MwRECBCPIDpjmAKGbT8IB4rqw8OA3jZLFPaN+6znrTdZAurV4zLY2D1Xp2ohovpjyM8haznk57iAcnHbvziNYcuL/YkwMixDkAxe5bjQJ0KUDBqxghARERERpSWGjJQSBedevblTZZEscJuvpq03oUKhN6LwLmsaXAgYCZKdrn1asFG1IzIwyJqFYJMo55P+GWUNhpifHOXK+Bw55ag/kS1CTC+icobW10S+d73qlF4kQo6srZnGFfbRICIiItpWOLpUKmnXs/DDK0dz0s7Qqz4W6mG9VsE00pPWXEgW8+0DhtG3IZqalzaClIgoVteVMI80Zapy0OYJOeQtLEeXiqbXtMR/nhU1ElXY1cfVfVFXKqfnDUeXIiIi2hlYk5FKObLZjyrQy87d2m1T/4XCSouhZGVYiCxoy0K43pm7qN5o6hTeJ6PPeJ8kaPO07Iyt02s53Gq2lIPy+hPInr4SrNUJjPZqtRhWTcqIiIiIaPthyNgyhTgTo2BvxXroVzt6MAlryhTV8VtMDpoiBd6W7Ziih9kNdig3T046a8uwdaZQe31vb69+ob/CM7yiNxEREdEOwZCxyaZ6ZbMgq9qKWALQy/n2VRVTorAeHhdUZ2yj07ecojp+iyluyd5+mN1QLYppSvCK39PTYubaEL1MGEREREQ7BUPGJgpdKyLBpk1qqNsceaEMC9p89b7WrtOH3xWmr6hrb2yUqmHRalVE4DnD4WqJiIiIdhqGjE1ivhid7Un7nIOi2L2ItyNK21PDsrO41VC3epOlK4ETaL9Qr13VW7vCtzA97EKhXQ2/K5syyVqQ6SvGRf6SI9eBceE+7aJ8sh9Jkeyn0od2rx+tDptvEREREVF64+hSKWdc80KN/hSnBsMII+EsXquNXKWHj+CITMHRo+QwUUmM1qTmKWaAC0VTNvMXC5edjexFkRScjC4VXE7JwToIjrAVJ5DRjsTRpYiIiHYGhoyUUkOzQtY0JNZXIS6tMA5TiLAYVjasgG+j8AzaDw7rna/1O7R5ipmJsGMdUuRoU6HnW5A1H15/qEmUg3BlxRy4GDieDwwZREREOwNDxk4hQ8fwQffDDNEmYsggIiLaGRgyiChtMGQQERHtDOz4TURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiIiIiIlcxZBARERERkasYMoiIiIiIyFUMGURERERE5CqGDCIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURECVrH2q/Un0RERBYYMoiIKMza9FPcnHymbll46xk+3fkUn/vzGM+J5afP8P0frasbKbL0FF/92lN8ZijJZdyIJ88w+sdPUdn7FE/UXbQNLIyju7sbQzMr6g4rCxhpqoWv5a74y4kljLfVorZtXPyVblaxsrKCpfkZTE7OWi/f/DgGRvyYj7VKTGYG0vWz0lbIWBfU30REW2ppaQl79+5Vt2hL/OoZBi6t4+oq8NFs4PynduHFX89QD0rr+NG3n+Ezs8Br/+IFHM9Vdztlmn+5NwNf/IfqXNffPsMP3xIBR7+VlJxP7ELOr6kbgaf4wjeA7x/IwPinzefTRAC4vI6vvqNuxvMhYPjsC/gNddMZ8Rm/pn/G42W78NrvmNcfpYuFu23onKvCxcYC7JZ3zHThpVODKGkdRXeFvh9aGGlCy2QZOtqOYr+8Y2UcLUfOYazsIu51lCJTe1YsSxhpLEc7WjHaXQE1V4x3D2FG+zsB+0tRV1UQ/p6rC5h5+Njyd7O6MIvJ+WV1awXzEw/xWP65PI+55chXeFDZdw8txdqaCJofqkV1ZxZaR7uhVklMM10v4dS8+bPS84whg4jSBkNGmhBB4Ht/LArii3qh//TxDNQWqoL6k6e49G+A2+LPj4ryiEe/N67XvvACPq7+XvvRU3xpUAQA8ffHD2XgayLI7DFCgf6UpHzxsy+gPEfdiBcynogAIALSHnWvlR/Ni9eLJyQeMvTaoE+LlRQQ6+ib4rO/qO6ndLEqCsS1ODX4WISKmyJUiAgRETJWxe1acftxSStuikKzFjLEfV5xX0HrbfTJ18RlFTJm0PXSKYifQGLEckQV3pdG0Fjejgl1Mz4PsvJykaX9vQ/5Jbl6aNmfB2+xF8W55gizgvGWIzg334ybA1UIO58wM4DazjvqRsjqwhwerWUhL1d/B7O805fRVsr9+/OEIYOI0gZDRjpZR+C7z/AlP1B9ahfKPyzPxq/jx3/2DJ/+L8BviMKzueAdWBX5Q/z7YviJUPxY3C+DSu+XQyFD89On+OoAMCoef1EEjd7/fR1fkqHg7wF3KqPP/P94bB31syIYvJKB059Qd4bJgOfXxaRuxQ0Z4q/Y4cHqeWKdvCWmv9VuxLGO0bvin0KI4OOgJuNDQNGL5uWk1JtFf9Wr6HlUop+pf2wKGWWP0FXtw6CnBtcGmlCgtuvZ/gq82pOJ5psDqHJUixcjZFiFBktW81CMkHH4NfTVHhJ37MG+vP3htR2eTGRG/C6dEcvpPYXx0zcwUifnbaIFsnGUVJYhz/RmjyevY2y5BJVleaZleIzJ62PINNUQ0fOBIYOI0gZDRhr6lThEvE8VkkUw+MI1UXCPbEKkCvQ/FmHh330qVFB+8t2nqBQh5Tci7g9aeoqeYREcal/AR5/YhQLpGQY61nFV/PXNlli1As/w40ngZ/LPn6+jR7z3j7KArxvNlbSCvAg2MjyIoHD+H2bECBnr+MvvAjd/zfxZE2xqlQjLz00pN38X/bMFqDsaUZNR9gQjnf3A6TaEKizmMVRbjc65w3itrxYRxW4lC3nF+7Ay8xCPtRZJSxjveh2DqMEbTaVaQMjK82DoiMsho+YaHjQVqDtdomptoppiyfcqGxPraj6qGZV1cyk9VM0zZDx3GDKIKG0wZKSntR+JwrsobH9vYB0Dq6Lc9U93ofZ/Nc7Oh/pofFSEiW8Fw0SoX8L5My/glXhfq23Ng/DWU/xzEUZe9GbgD4w+HJaeoecr67ipbkXR5q1CRlJ9Mtax9iRFI2uJILdnj4MaD3LFyvwk5ozuCobZAfgu3UdezRtoCmvWI4NDLjJn+1Hxao/er8FWDa49OIl5GQps2jDVXBNJ/VT6hwyt1uZqFo7VFKvmVY8xcX0M8yevwV8qQ8Ycmm9cRJmp1dhM9xGcfdSMGxfL9OZlmhl0HzmLxwwZzx2GDCJKGwwZ6UZvMvUFvwgaooD+9U+KAvxfZ6DhH4cK+rLvwWduAz9Wt4+XZeC135GPi2Dypnj+z8Vt0/Px82f4kbjvxdyIAnVEyPjZnz9F5X9Sj8Xxyd/KwNe09xAB4OdikncG1vGlfw9MmZtfaQX5dT1kiKDwzX+ZAaMLhxXZL+XS++I1q1KePMPUI6DoE3YhSDz+5+v4jcMv4KOxOoLQptDOuDvuFCGDQwPWOo7AN5yH1250m2o3hJluHDk7jOLmG7hYJsJIJrDgpCZDPpyIWH0y3A4Zq5PoOOLDnSoRKIz5aiHrKkpkB3FPj1brkwhzh3p6PjBkEFHaYMhIIxGdv1/7pxk4/r+aC9Dr+NmbIoB8D/iRuPXFfyEK8rf1GoLf/fsZ+OI/2RXdqdpuZCnJJmR88gDwoijoW3oCDIjlC4UMk5T0ybAhAsZtGUjEZ7cbTSpw9yk+/X2xLnfrI3a9EhmyaHOtrmDF1A5oRQSFRhEURE4UYeEa3jici93BfgweZK6OqQ7Wqv+GaTe16u/Ay+K1JW+IQvTRyP1XjD4Z+yL7LthZwdzYMCZyY4SM/DKcLN6n7kxCQRUaS0PJaeVuE468PoeGGyMwumPo/VFKcPnNFnjnZMfvh6jpaEapqY+3dU3GHIZ8XZhnx+/nDkMGEaUNhow0Mf8UX/223il7z4eAr4lC+seDw9iuY+2n67g5vI5+UajWAkjNLhx/UT4ugknvOi4si2KZKKA1HM1AeeGusBGo5MhSFwaBvxR/yyFyv/YvX0CODBE2ISNsxKhI009RettpyJCHOn0ZjeZSkZ3UI/1MfP6fRfY/iWQKGHtEYeub9eLzqIfChWqFZK1PdVkGGrQaH9pqcijbxtfvAAcO4NGjR9gn/l1GAZq7mlGRKzeSVfg7ROF5WG7t+8IK3tLCiA/H2ydRc+0BoisTEu34bd00anVlRfzWRNiJ7MFthAx1M2nmmpBVsXzVYvmymnG7aRXnOu/gWHMr1lpeRU/JZbzZ4tWH/LXAIWzJjHs4IiJS1vFjUbj/9L/VA4YcXvbfiQK2FjB+Lpv7iIBw6RnKrq3jqihUy5DwzUYjYEi78Ep9Br75W+Ix8fpLt9dR9hXxmoGnmJrXL4rnefEF/MEZUcgWpZQfLwKfvvw02NTKypp43yd2k9Mr3QVEELj6DFen1W3pBfH5PiwCSoxJLGpsYhmuilAlA4a2LmwDhpSBnH+4C72V4n3FrZtj6/jCnz2L7lRLm2gBd9tqUS0DRuVl9InCs7TfW4Ey3EF7dS3a7i6IMvdVdIqA4RHhYx8eY+5x+JXpHs9Niv+XIG8DFQnx7M7MjA4YZjIkPHiANy+LDUzIb76t3Y49vYm+Sv0UwOF801BZu/NQUrIHZXWyNkJ83rk5PF7LRdnFN3CxogBz8oJ7tdZT24h4/WQPzlo8pk9tGOeV+p4bO6omY3V2AGd9lzB76DX0Xa7FoRi/RyJKP6zJ2Grr+OG3nqH+kcWZ9ifP0HN5HTefikLy3wMaynaJQroRLiyIAvj3/8M6vvrX+mhPn/xkBr52NHx+t78lQs3Lu9BQKObjSp8ME2N+4k/ZbEvmkd/VOo5n6MPQitsf/0R4LUs4NVyt+MvqeWE1MmJ9fL0yA9//K+AV8Rmt5/kMN6+uY8/vZOCVD63jgghywdf+Swd9PshVS5P9eL2pB5NP9uBwcz86qnKxO2J0qaGWOnTeX0P+ax2omhyB53QF7r96DjMN5iFd1YhT8ydxzd+I6F4R5pqJMqzNzMNTsIbrts2lVNMoEVqsm1IVoKqxNNQUKbJPhupLMZzVgBsjdTYjYCkrd9F05HXc91Si714Lwq7DJ5uT7RbBRq0Tcy3Nwri8Krr+d+L2o7SuCgXx24jRDrCjQoa5I5d1tSURpTOGjHTwDIFABnJyRGH8zae4LRupK09+LgrXosT+G3Z9JCKJwHD6d4AfvyVeU2jRR8NMhQKowGCEDNkX5BW76gERAo59LzJk6M25bt9ex9VlvTnXi1kiFFWKULRnAyNDBUd/Cm/2JGt7vv4pERhEALvwjn3zrrW/eopjY+IP2RFdhAqP6TohWjOr06rZGG0CEQzqRDBYOYbWjiZUHFIlXnWBudBF45bg7x9DZk2tuk6GChQwXZwu3hXAV8VrzorXzHjgWVsT22MlLr9ZgYmXk+j4rZGd0JtCYSaq47e8yGC1KAsto/LyPbR47c+2zvZX4dWeRzggQtNQ5HUwDBYhg8ipnVWTMdMPX2MP5lmTQbQtMWSklx9+66lWq5G0qE7XMYhC9+euAZ6IkJFQnwzZfOmP1zHwP9XjUnAZNniNC9U3Y8/8U3zp3+o1JKGRtESIUFf4/pkRIrR7Dc9w+9I6LonlChv+d+kpLv0xMCUCXa9YRg46tYmWFrC0d7/qN6D3uTh3vwwdN9oQq2/yTJdXFODz0Hy7H1X7xSuNTt/mkZNWF+C/04+hofuYmFtWTeI8yMovxbGqKlSVeTAoQ4bliFAxhqu1oobVzWy+iQHj6oALQ6g73omHBxpwY8imNmNBhJPjIpx4ROi51wLbLGIXMhbG0Z1odUZE53La+djxm4jSBkNGejFCRsyCvpWoTtfRfvbdp+j5uSh0/+MXkPNr4g4jMKhmVUmNLvW3otD+h8D3RCD4g8NAv5jfVHAZ1mNe4+KHw+v4wn+LUXNiuo7F2ltP8Ze7d+GVYF8U6Rm+p2ozqv/RLjQUhx772d2n+OcylVgFENm35NcZMDbXCuYn5xC8TMbCXXS0D+NR8UlcPO2Nqo3IyitGrrpzdbIDR3zDyGu+jf6qTIy3iHAylh8MHTrVsVv8tSe/BLnLE3gYNjLUpHjc507IMDfxCg55ZdRmPEa+CB/9UZcmXxDvUa1dx6PkjdsWI2KZ2IUMdf+eA3nYH/eE7ioW5h7hieXnpZ3Meu+/TawuTOLu3UksrKo7iIhoc8hQ8BVRqP+rZM5TreNHIrx874fAj/5Wv+eJ6gz60Zzww9L3xfMG/tpmEgEjzK9loFqEhDtnX0BRtjx3bJYBzx5RmP91ETy+vY7PDazrhXtjUkHGY77PPJkulOf5xAsRAUMSoaNSBB7x183/8Ax/aXRulc2i5NC14s/zxyNrOAQ5b/UnbZZ5DPl88BmTDBjy7snrOGe+X01D89qLNLuLK1AlvsSH/YOYmR1Dv2wCl1+BkrAT9PtQ9kYfbt57gPH+VkSV8ZcWxBIAeUZy2YClBX3h9mWZ57UbBQ1tqNknlrOzCV0z5kKSDCCNImCswVPSitZYAcOBirYBDAyEpr6OJjQ1X8Q1030DA22oUM+n58u2DRmrM904Ve3D66/7UN05jvCxHtLY6gJmJicxKaZ5m4Ve8I/Arz1nFjEHYZAds1bk5G7KWp2fxEyM5CaH0luYnYRfBjx1XzxL8wti1xbLKhZm9PUSa90QUXr4mewRLXhEwT5xImTI1/9d4EVR6JcC6rSy7D8heT4M1P4m0Nv4Asa/LCcRIOQDsmZCuy2mf6E/53fFc3W78NGwa3lY+6EIJz/6VWQI0VmPZuUwSH14F177LX2+F771VHzGZ+gZMJpW7cLvbqw8R64pQMO9e7gnphuv5YvbHpS03tRuh6ZRXK6RG2M+ctU2qSvAsdMHgMeDaDnXj4finsM15mtCSHtRcDRU+xHl8TzkeFS5WVmiwP8SXnrJPJXrVwqfaEd52P1iahyJKhMsi3mJuIJDkdUJu4vR0FGDAyI+DfrOYUQdrBdGzsE3KCLVgRr0XTwav6YkQXNDIphdndw+ZTJKqfQKGUt+dNV64a1tw90YpVctYPiuY267jP23NIn+lgHMyr9XJnE17OzIKvxdjeifNHYd85joacdZ+ZzGO3is7rUy03MER46IqWVM7XhWMDPUje7uBKbxyBW9gvFuH04dfxmldR3wR6WcWQzWHsHxV304+7pc7jgBR352XynKq6txztjLWVrB5FXrM0dElH6MZkeeZDorB9Yx9RTI+bBxxe1neugQclRg2FP4Ak7/7xl4IgrqlgJPMTCZgbraF3C8MIFDmXhvefFAz94MyxGdLv37dRzrjpye4Yfq8djE5/nHu/B1UQZd+5/AZ76xjptiF/lREYwaLC7QR1tHGxJWFPWv94iYUNKM1gp5pW45TKyalu/j6uAy9tU04Vh4gsChqkaUiST5+LE4Qh9owOmjidVILMw/xBr2IW+f8bp8lJ08iZO2U5l4hpUlzE3KUkI+9lkMn7u7oAndrSXwrE2gvbpRHPMbUS0SzJqnBK3dTaoze4JWF7BgmyCWxGdTfxIJ6RMy5MVffGcxKJLD2twdvF5di+7J6C05MmB48k6ir9liRId0IT5X9ykfesYuoaVrJups/qq/C+cGJ9AjCtYD8se5NIPxOf0xHCtBnvrTmVXMj1/H9esJTJPBVqm62SH03Nf/XNvvRcFe2XY1VMMwOfkEmcXGaZ01DPcPqloX8zQfOovxZB7j4jXyuRPtncGzKUS0na1r17iQPhp2lteZtUf62f1PisK35ufr+L7skC3m9aJ+j/AMo7KfhCj0j/5U3RW0jh+OAVd/uI4v/blNCLHx5C39vX9DhCSr81TV3gx8/R9FTx9Vjzvx0U8CRepveT2OWhGWrGpNaGstzfixIL+YCXEcbhnApFGDL8sjTZ146KlEc0NB9IXnPJnIMrb7/VkJlj9WMDch6zFKURDskV2AmsZGNNpONaHRpMxWHmJC1nqUFCDPJjDsr+jGTRE0IILG9esiYMgrlt/sRkVEcHJkyY+O2uPoD2t+ZbI6hxm5PLm5rteQ0PaUJiFjASPnfJA1eEFrc7juq0DT0HywYL462w9fZMC41phcGt8suwtwurlSO8A8GhnEhLlqYmUWQ1fvaAe6AyfbtHabKw8nglfuPFywH2tacyjTZPPbjnL4NfT19dlMb6DGMr2sYPz6VVV7UiJ2rjK8RbRdFVPnHVMwmejRa13CpiGtvakmt0rM54C6MYH2FtNjRLQ9/fQZbv43/c+vfuMpvvDHT/H9Hzm9sNw6fqRV64qC+G/qIeOJKHN9T/wrQ4feP2EdgT/XL3L38b+fgfJgcyhDBj7+qQzUin3/9//TOq6+5bRfyDP8pQgZUuCRdUB58RO7UFQcPTnqN6Eu+lf574EpcbPoQ+I49VSso3/7DJ+TzaecNruiTbHX24L+8Xu40VoG+C/BJ2vwfS1oqj2Fwcd5ONnXFD3qkhyS9lyjeFx8tx5xZJ9oR6PFCURbK5MYk/04yooTPIkYbcU/Aq1LSGmxbaFeXg+kvcsoVUgT6GrvDwUqh1bnRtBUfRbDYr3s3i1/6fuQl5cn/m9YxUxPF4bln4ON8HXdxazpPPE+8dxUXqyQ0lMahIwF3G2q1Toh6Q6IDdc45/ME9ztrcarLj3k5PO2pHjyMETDkxfh8pS+JncQAZhP7/aTOyjwe7j6Esnw5HncVMhdCI1oszD/BodOtqCkpQ21xpjhAr8A/IncZuvvt1XpzKNPUMrakXQhHNnUaNEaPmx/DVa3pk1EFIuwvQHFxse2UZ3X2cXYI3WP6Cs5vbkruTIeFQzVtOKlyhmdtBrPsqU+0LXz803rfh9DIUuv42aQ+1KzWz+DjwCt/V/wtAscXBvWre39JFKannmTga7LPhOXIUuuYkjUTLwAf1UpGz/A9dSXucuPif//XM3zhPwFropB+/p/YHKZ+bRdO1+odrQdEWPihg6t/r02vo18EF8/fA74m9kkyoNQPPMPPkr12hkYEov/rKQYuP0XZN0QwkjU84rj0xX+aga+f3YXhfyo+l7g99Qj4TPcz1F9NJJBR6mXiUIUIG3dvorkkSwTeMdyXJzz37UPW2nJ4eNACRi06VafpmzdbUSKKK48GT6G2wx+7D6WyND6kBYMyETI21gJjAWODstlBCaoORx+sV2bvoks2VfbJCw56kFdzGbdv96GheI/4jD0iUB3B0cYujMzE6S+pNtThznbcx2G03hxAkyivoKBW69RdK6tYVmYx0ibKaoOPcKCyFW80HMLs4Ot49UgpfP1ycJ4C1MoO4NqT6XmyxUPYylEO9A1TdwCVl/sgr+zv7zqLc4NzljtiuxqMtLwYnxrmLb4aXLuXj3559U11jxU5TN3pufLg5wxT04rW+Xa905isyai1u9bnEsa7XodYvXJFqSHlxM5TXpxI9mIzxtYWoaNjMlccyI2zJCsYbzmKc1oQKUHr7VCV68rCEjz790ZXKyurk/3oWihBY8Uhmx2rGrZPnXDhhX/c86ulWcy99xF8/CMfUPekLw5hm4Z+JYLFvAgGb61jVDY1eqrfXe7NwBf/oQoAP3+G739XFOBngR+qxz0iRPyu2AXVied89NdN/REihrcNDe+agTv/clfYReq+eGoXyoNXFX+Gnq+s46Z6nSH4ehFI/t1Z05Wzf/QUnxH7yR//ZgbGasXz5RXLe/U+EvqQvM/wl1fXcUGEArlHk6+TVya3G8L2iewzkrtLH25Xhq0freP7/nUMiMOXvCifJD9z3eEMHH85subjGX4k1k+PX6/hMMgRsMo/kYEiMeWY1xFtohXM+4fQ1X4VE8siPOSfRFPZYwz1jGmtJjxZJ9F9uxHFK350nT2nNen2lDRj4GIVcuUBT15vorod8jypfG33RfFc8y5MvK7j6FkMF7di9OJ+XK/2YVAe72/qfSLM5Za4RLAxhrVdGW/B0XMirlRexj1RaNKOvXJgmbFBXO0Z0j6L5Mk7huZW0wUHhdDVztUdnizklx5D1bEyFBfsR1ZmpjqW69cPOTss5nWgEpf7WuA1fbbVhRkRdK6iZ2gCy2se5Df0obuuQD/Gy/6YrzehR76JJw/HmprRUFXAZlTPmS0MGauYHzqH2k7ZRlDSR3foDp4+l4+3oK7zvhwKPShWE6m0DBmmC9aszY9jUDtFossvO4niYPVhAQr29+OcVsoHjl0cRZN2jf8FjJ17FZ2yCafcmTR5Md9js1MyhwynVMhYGGnEce2FWai5fAOnC5ZFof9VXJKLk9+Mm/1V2OfvwJGzw+L7Mn1XKzPoP9codiTiddcGxDq3+GIsyBGq9O/dYPqcgrxSaWPk9+fJRKaz2ZPyq4W/wLfv/FfxG3o/DrxShaMvpnfQYMjYerKm4qYICz/+qcgDv9LK6mHkdStOH9+FFy0Lxet48qNnGP0e0C8K78a+e8/fBc5/+gV8Uny1T777FMdEYfsVEVLOF67jS1eAvxTPCQaKeREyvi1ec3QXGsTjfzmwrnW6Xvs5cHsZ+Ojfz8A3w2o3RGH/j0Uh/ncyUPub69p1Mm6rRyTtfQ6L0CIChrwQX+TVwX82/QwD98VrxGPh+6QIYt/zrS+IUDTwDBf+Wg8kBtkvpfblDJTH7YD+DD9+U4SxvxKf+X+Gv1/4clFqLWH27n3cuT+CkbGH+na6pxgNXa2oKd6vF7BX5uEf6sT1zNfQmjuGlsbrWkuKPYdbMdBVET6alAgaTbXtuC9n5MlH88BF7Okqx+umY/G+hmvoQBtO9TzSThYa17TQyy2y43exqelRpMeYvD6Gh0bIWBpHy/FzGFsT73WzH8cwgs62How9NC78JxYjqwSnRbio8ubanNgLD1cGrYZGvIfx+WTZoLo/F30DqqP46jzudnXj+v0JzKnX7cmvRFNzY1iQMSzNDKGnswt3ZGIT67i57zKqeKXk58aWhQxtw5WjHKjbB0Rhd0AUdiM3vSV/F86eG9TPKMTpg5GWIUOzgtmRLrR33gkbEaum9Q1geS9qaorFD3oGXdWyHah6LLj8oYv6FLfeRp+pDVPw8wbPbphqA/YcQJ5pSLvl+Tlo+wNPFvLM4/Eda8ZAbR78HS9D5AcLB3BShIfGrLHQ2Zqyi7jbYXS2Ny7qoz2Ai3c7UKo9IEe66kf44FUFqGos1T+r+kyJCL/YEMW1+BcY+DMZMAzpHzQYMtLA3z5Dz6V13FTh4qNiN1L0m6KwXpiBj7+4y3kHZjGfH8rajWkRWER4+Nan9deu/fQpRsfE7uKVF1Ceu44f/9kzXH1fBv4grIAtD0syxIjAIpblq+oK3rIwL8PKi7YdJMTzZW2F2uhzcoAG8fycnz/DbRFWbu4RAUUtR5RfiYD0RISORyJAWDWf+pBYD+Lzy+tefOGaCF8iONWKdfK7IlzkJDOM7xOxfu6vY1S831+K9/umuRaGUmwW/VWvoueRB1klVWg4XYOyAhUuoqxitt8nwsEc8sxn6iOtzGDgXCOG8rsx0FiAuYFaiEO+Zl/xSTQ2HEXu8gga29fQ1FcF49IZ+nG8BtceiEK8ui+aOmaaajJkGap9rQl92kU4jFYGHuSXVaGqpgYVBc73oyvzkxgfGkD/2G403jSO4fa0k5Kdcyg5dho1tWXwxr3ehyoDjRXjoinA0M63JSFjdaYLtaJ0HGwkVdOH/qYY7ROXZuGfe4LcYlEYtwkYUjqGjKXJAVzq6sGYli48KKk8huXhYZh6T4i781BW4sHYfb0WQwoWqFfG0XLknNaGs/Lym2gx9UKLGTLCrqxput+0kzKTVa9HZNVrBC38NQA9siOc/MIOiJ2hcUbDMD+EuupObbxwT8kbuN0tx94Ob/6kM3akDBkpFxUwDOkdNBgy0oQoAD8RhXzzBeiSJw4xvxLzSWaoW1cZwWWj5OcR/4hgRNvX6tICVjL3Y2+MMkXIKpYW1rB3f7zC9FZaFf/ttglKRFtj8+tmRaG50xcKGLJqrjtWwJD2HoLXGztgpKdVPLprBIwDOPbGTXSfLpCjNGoq3+jDyXwP5Eha5oAhTcypNTQ/g3HtD4uL7RjW1rC8IILYrGnoqoWZsGFl54ze5stzYffLSV54L7OkGaPyAkSjN9Ase7JJIlC0NWThjk8FDMHzZBKdp47Ca75AkAoY0tpEO9rvxuv+loXiqHHAK1FiqiuWTcnCHz+JUq0BLMUVGTA8WcgKnvl9D4++96cY/8kv1G0iC/LK2K4EDCkdAobk5udhwNjudu91GjCk3WkeMCQGDEo/m1+TsTqJjiM+yH5EVmfF5QhRZ32XMHvoNfRdrkUiTffSsrnUbD+q2udR19GM0oUu+HruY16U+D0H8nC6TY7MIKsRuzGRVYHMq6cwgnw8fCiK7PsacGOkDruHalHdqfXQRt+DJhSLv1ZXFsQ8ZnCn+3UMmrNJMn0yBHMNQagZ2wGxDvU+FjNdXrFe5RfmkKcEb9zuxlF1Qjr0vcSqEmbHb1cs+vEnf/YQ8pIDGs8+HP5UBQ7hJxj/0+9gLpg89iDv934fpWnWGZw1GURERDvD5tdk7C5Gy+0buHy5D7cjm90Ic3cuaSMePJm8hDthbYq2qf3HRFhqQmnWMsaHhjEnAsZaVg06+vpQkSuvfSGeUtqIquICVLXdRFtHlRYk8HgIE7PzmBxRKyE4pvYSxlqO41VfRMAwGFlA9smQ41KrKctohCz7ZJju1x5TJ2hkM7ZGLWDI/NeGBvXl5JXWIK+4DMeCVQ15qLl8G/duNOvLKsig8uBGAw7IUSSaG8JGoKBNYhcwZI74wEdQ+vu/h7xgjcYTzH2HNRpERESUGlszlMW2bf6UuJmr5Sgvl9e4OI52Y2za5UGc1e4zTT0z2lUyc/cXoExLE48x1NmGfhUkDh82mpTtxX6jx5hhXxma+25itGE/5tToTHmNXdoY1vp0GQ1GGihuwOXg/frUVioSwdJdnAs2Y9uH/avjuNrRhNq6AcwXN2KgrwMNZcYby6CyH5kiuYR1oDxUh4F7Yn62w9RSyiz+FYa+Yw4YHw4FDINN0PiLhQ1dJICIiIgoytaEjKQtYbytVgSUWrSNO7nsTRrYJ2sLDoTGTDfXMBwIDZEiLxyqy0VJVb721+OHD9XVtw+jzBsqtmfl16D5jRt4o1LdkVuCw8W52LuyFLyadtbqLIbkBfq06SrGjAeMC/epKTT601qoFkS868TwdVwfvo+5zMxgH5LlZWMmIgzZ1FTsdhocV1bAS/K5RAsY0/roYZIWMP5ReMAwWASN/3rn2wwaRERE5KqtCRlytCi/vAqkuu3U0gSG7sxhbW0Od4YmRORIfwW1AxhorVAF9X2o6TZqEK6h2WsU30vQXBPqgLC/rEbEihBPZW3YkHK5R5tQdfRQdE3Qo4fQuzR4kJe1hvHrIiho0zAmjD7hjycwHLz/OiaNDuF7C1Ca50GWDD/FZahRna1fqzKG61vB4zk1k7wY427Pxv9W5LDEtUevBjuL0wYkEjAMDBpERESUYpsfMmTH7+Ov4uxZH6o7x0WxdKebRX9Lj2qG9BhD586hY8iPyaFz8GlDNskL2zXDPDLr6vzDYI2EtG93WKMkW7Mz+jhUQCkKTE2qokZqqiyxuOhPLqoG/LgrA1BfB5oaG9EoptrSXH3EihU/RowRbotzg2N8h5vH0Kvl8B5tRP+M1Tc7gx5fKcrPyuuezGNhm1RGpa2fz+BPEw0YBrugsahuEhEREW3A5oeMlQU8VoWiteXnocnMIdT138TlhhKt8/Xa8gSGO8/CZ1zpvKwVraYL7Mmz/KdMQ/xKjwZ9ONU9GSeQzePhmFHTUAzz9fYKavTAEJxOl0WFBHkxnsnJu3oTq64W+GprUXvUi5de8qJ7ZhWTV3tgdCkpK9a7oEdZ1b9P+RknLaupHor3UMMbeVawFn0RB0rAyvwc/nsyAcMgg8anjuF/MwWNn/w1kx8RERFt3Dbrk7E9rUI2Q5KjMx1Q95iMvY5y71G03Z3FZHcdjmtn+fWHPHv2qI7Va5i77sPRum5MBsuAq9rIVIa12XH0q4Go8qtKwkLEwkz4dTEmJ+dgtJIyzA/54PO9jk7ZjGpwDJNzc5jTTpHnYq7/FBqNS5Hvq0FNSXRjqeWVx1ianAg119pvVM2sYDnizTz5J9F3ux/ahUopaZlFVfgnMiEkEzAM79uPf6CCxvsPvILf57BgRERE5AKGjJRahb/Di5ePHMerZ9tx/b6qn9hTjIbmBpQY48pmZWGu81X4rj8M9r2WFym8OX4XfSfzVNCQNQTiUVG+nx+qxUsvvYyzd9QD4lUTd66qTuL5qCgJv2j//UsyQJim10WQUY8Z9uWVqL+kPTigdU7PEu89h4n7c2q5DqCmoyE07PDuzGDfjLlLp7RmUPoyHEOwsmNlBuNGKy4x38PNN3C3vxHFLMu6Ivsf1OJ0XZIBwyCDRu1p/IujL2IjsyEiIiIyMGSk1G54q04H+z94skpQ03oNo+N9qKuqQ/fdu7jRWomGtmu41l0jivC6A8cu4mZ3BfaL1xc0isca8kVh34NKEUyKRQE/N9cYj1Z3oKQYVQ19OJknnlXZiGPhGQN7DqjRrIKTDA/hMoubcPvePbz54AEePBjHkNY5/S5utpao58q+I93axfmCMotRdizY1kbxIL+5Fl7jaZleNPeJz+bJR8O1EXRVcXhbIiIiop1u86/4vTSCxvJ2vVlNSStGRWHafFI75lW7N/LaLbOEWf9j7BaF+9y9pgK6hYW7XRjbexJ1Fqf5V2bnsXooV/+8KzMY6h+HHH12f3EFyrxqtKeFGcxmFuCQvLE0jrazV7Uai2PN8sri8glKrMeirGKmvx2TBa9ZLpd8fGl+Do+0plUeZIlAY/U5V1fjDW8rhyc+i6uqiiX+ctFOxCt+ExER7QybHzJUYbJlDCjruKxfCM5kdXYAZ32XMHvoNfRdrsWhsILpCvxdPpwbivfaZvT3VdmMgERE6Yohg4iIaGfYgpBBRGSNIYOIiGhnYJ8MIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrOIQtEaUNDmG79Uq/8lT9RVth/MsvqL+IiLY31mQQEREREZGrGDKIiIiIiMhVDBlEREREROQq9skgorTBPhlEREQ7A0MGEaUNhoyt9+6776q/iIiIkseQQURpgyGDiIhoZ2CfDCIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiIiIiIlcxZBARERERkasYMrbaVC98Ph96p9RtIiIiIqJtjiHjuTOFXhFqfEw1RERERJQiGeuC+ptSQdZUXJlWN5KXfaIdF8pzxF8BjJ5vxa1F/f6YCs+gr75I3TDIkHEF05aPCUkub2j5iJK3tLSEvXv3qltERES0XTFkbDVVqC880werMn9yYgUJZyHD+fLo8wswZJALGDKIiIh2BjaXIkvTV3xaX5H4kwgs6jVERERERBJrMlJK1RqoWxtTiDN99XBW2cGaDNqeWJNBRES0MzBkpFTsAv1Urw+y+0O8Ar3+vPCQYbw2pg2EjESxTwa5gSGDiIhoZ2DISCn7Ar1twBCF/POByrACe3TIUJ2/cQLtF8oRXbSPFSTihAyiLcSQQUREtDMwZGwBPTRk40T7BYSd/Fe1CNkiANSLAGBfL7CRoBD92sDoebQ6Gq7KoWy78EMUG0MGERHRzsCQsalUAd+qf4UWMOCs34URRpJqosSaDEpfDBlEREQ7A0PGJorZj8Io9AdGcb4XqI9RE2DUPCQ37G3skJF0rQZrL8gFDBlEREQ7A0PGFtIL9AhvNhUQIaBXhIBF+9GkHHX6liwL/k5CRk70e8vwIxY2JyrYxOsfQuQcQwYREdHOwJCxFYwRnGybLBlX9bbot+FIrII/azIofTFkEBER7QwMGZvJCBcIDw+xayaSCRqxggRrMih9MWQQERHtDAwZm8KomVA3Ldh24taCSSCxoKECwWLSIYM1GbQ1GDKIiIh2BoaMLacX+mNdMXuq9zwClYmHDJFMLOYZO2TYsq3JIHIPQwYREdHOwJCxqfQaDb/XXPiPDBlJhgAz1SzLevQp6/knXYMRaSPLTc89hgwiIqKdgSFjk4T6XWSj8EQlKsuNi+1FhIypKYwGhnErWOC3H2XKmtE0y+51rMmg9MWQQUREtDMwZKRUeF8My5qFWLUOwY7iUnQHcPsO47GCSXTIcDwkrlPsn0FJYsggIiLaGRgyUshoghTeqduiE3i8WgXV+bvwTL0IIhsturvQHIsoRRgyiIiIdgaGDCJKGwwZREREO8Mu9S8REREREZErWJNBRGmDNRlbb21tTf1FRESUPNZkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGreMVvIkobvOL31tupV/z+yc8yMP3jDMz/j3UsvpOBxXeB/y7+/QUvcO7IBzzA//KhdeR8UP839/+WgcKPruMjv8EiBBFZY8ggorTBkLH1dlLImP5JBr4zJf4V4WL5SYa6l9yUtWddCxu/VwQUfoTFCSIKYcggorTBkLH1dkLI+OnPMnD1Xgb+zx8xWGymkhfX8dkj6/gwazeISGDIIKK0wZCx9bZzyHjnvQxc/4/Ad6Z34SmPbFviBZHrfq/wGU7+78CH3s8vgeh5xo7fRES07b0rAkbbEHBnigFjK8l1L7+DC7eAJ6vqTiJ6LjFkEBHRtvb45xlouJ6Bt/4bD2npYuYnu/Cv/z+7sCC+GyJ6PnGPTERE29ZbP92FRhEwAu+wMJtuHi1l4Oy3MjD3mN8N0fOIIYOIiLal/7kKXPwPwLt/y0JsupLN2P7N3Qw2nSJ6DjFkEBHRtvNsHfiDP92F//b/Y8BId3+9mIHOP9ulfWdE9PxgyCAiom3nz6cyMDnPgLFd/OBvMrTvjIieHwwZRES0rcirdF//CxZYtxv5nckmbkT0fGDIICKibWXAn6G19aftRX5ngxP83oieFwwZRES0bcgRi2492HmHrup/sQvjX96FL6rbKfXJXbjz5RfwrePq9iaS393iuwwaRM8DXvGbiNIGr/i99dL9it/fHM/At/8qdSGj4bMvoDpH/rWOH373Ger92t1hZCBoyI0uKK/9ah2B+XX0/4d1fO8ddacs0B/NwB51M2jpGUqvhA6/+jyB0a88w1fVfeIQjW+J4PFRdSuWH08/xadvqxtxhJZ/PeL9NsenfucZPlPKosdm+i9XG/GNGeB/Of4lfPn/ka3uJUot1mQQEdG24f//pvIseAaKtIAhZeDFQ/Hea10LFvoEeN6XgY++uAvnT+/Ca7+pnvJkHT9eEpP4VyeCiLy9pG468GReBJKvPLWephMvrN/8t8/QI8KQ/Iwf34LajNR+h0SULliTQURpgzUZWy+dazJ+spyB/+c3U3hurGwXxn9HFID/dh1Pfi0De8S/PX/4DDfVwwajJkAW/o/929Ah9MW/n4HXju7Cx39N3Fh6hs9dWceU/hBwXMy7UJ+3/TytazJ+I+J9wqj5hmoyMvD1z+9CkVwGN9gs70b9vz/zDB/JYvFjKxm1GwWf7cbpv6/uJHIRQwYRpQ2GjK2XziHj3/2fu/DH91N3Fvz0qV2o/bAssD/Dzw7JgroICXdFWPi+eoJiFzI0weZR6/jLbz3Dlx6p+y1DRozmUFpzKqSkuVQ6+JeH1/HP/+/P1C3aCgwZlGpsLkVERNvCXy+qP1JCNpWSAWZdFNjX8cMlGR6cNJmK8P11/Ez9uSdu0/d1fFo1e9KbL8k+EqoZlKm/hivNpWT4+fwuVKub4fSwsymdzpXUfpdElA5Yk0FEaYM1GVsvnWsyzg3uwn/5cYpqMl7ZhbGXM+D5+To+1/0MU8btJ+v46r/5/7d3P9BR1Qe+wL/REBsWsGs4nRFxhdTi0YCT08C2iT1K2xVydoV9CT5doLuGc5ScRMAK4h8UQqIFuorbgiYn4DnEfYrVU5L3xFcDrop7atgqsTMGaqF9ESvipE3cQiwpxJL3+3dn7szc+Zfc/OX76bk1c+fO/TdD8vvO7995NJvNpIQ1GaHaiahakCFrLuXAVrviVDMTOrd4zw+C6/+mD08sZk2GG3q7WrGn4Wd478Tv0fOFWJGZjYmeaSi4+XYsLMjBOLGq47VH8djLvze1Fu9jx8qdaFOvjvKVhXhk/c1Q+bi3C617GvDyL47jM7lfZGLiFdfi5tu/h29PHy9XCB147dHH8PLvv4KFj6zB1e83oOFnH6jtMy+7Fn9fVoabxbbyHF/c+SJaP+nBF+L8rii4HXd9rwA5Zi/ACfy89jn87EQHurvVwZTMiVfg2psX4Z++/TVMMuvExeDRx17G7+W53jMNv/rJHrz6wSfq2jOzr0DB7Xfhe+K6afixJoOIiEaFjlODFDCE5VcBWeK/n3WafhRv9OF38r8TRP5IoymJ9+8zQs2bfutSYX3CNBEC1l/svKhwkIAVMGS4EQHGMUC8LGtKRLD6cwby5w/N0LaffW5+oIERBe6tGxvw9vHPkDl1Fr7+9a9j1tRs9HzyAQ407MEHZrNIl+E6sd20y8yjaV9Xr1PL9VcgW67s+i/UPrwRDW8fx2kRFtRz114m9tuGxic3Ysf7Z9Rrw7pFSNiIJ1/+AKezJ2Jidia++OwDvPxkA95sfQ6PiXP8RQeQPXEiMr/owSe/aMAPn/uNea30GX71m8/EBlMxyzqXWdOQ3fMJ2hq34bFdv0Kv2TKkW1z7w9vQ2KZ2rI8ptv9Fw0ZseY1VZSMBazKIaMRgTcbwG8k1Gf/wxMXo/Yt54KoM1D50Ea7LjPwm/8GKi1EsPo6f/fY8Sl8I/6mMV5ORLwr0D343A95M3cQpovYhjZoMiON+63P5et0no981GdYxZf+OTzLwyqV9cfajO4tfHTyPn0+4SF3zYPfx+KtLgKbvD8qbeUHR/SqyMatsI5YXWLULgqyFeO7nyF72j7hOPIysydCbxO+T0YHXtjyGlz+R+31E7DdUh6BCzZbHXsYnl83FA9WLMDVUkyGeu+zrKFv1PRTkyLqTXvxq18Ooe69H/JyNqxfehWU3m9qILrGPjWIfmIW7ti9Hwgx/phU7REBp67kWS5+sxDd1tYyuycBEsd9lWDZX7FeuF0637sBjDW3owbUoE9sXmPU0PFiTQUREo0KWKLwPiqIMXC33/Wfg57Zv+hs+0QXyy7wZ+I76KdIEETT2i3CilvUX40fzdcA4Jwr1NfFCQUIZKBb7ue6Tv5gwoPtsxA0YkqqFiA0EMrTIgKH6c9T14cErMtT5Ova7WJihRqOaMAHYUqf7h/yN72K88s+DV3NEbjiN0936p/HZtoAhjctBgQkYafvNa3jtExENvlEWGTAkz824eZb472fvozWisuAy/F3lMhMwpHG4ruBq/eOs23GPFTCknOtR8BX5Qwc6klU4jC/AN9VuutBtdXayfOXb+Ce5X1uQmFTwT1gowjrwAd63V5TQsGDIICKiUeGv/6o/Bffkbv2qbip1rrMvooYhGBCL/EEUvosdS2sZam4MtYhH5/7cB3/gPCpFoT71llKy38XFqmbE6vj9Ly/LmgWHplFJF9N5e6GuFfHvCweULXXn8TsZYiqig4M4lurcLo5tOptb82jIUPKjv1WrXDdY7+WFZRKu/4YsUffgF3XrsHXHHrz5qw/RdSamYVFauo6fEHsEJvZ+htbW1pjlNCaKZz+LCgiZiIo5NqlWJ/Si4zdvYs+uWmxZtw7r1t2LlSt1bUvqJuFrV+t2YCc+YZOp4caQQUREo8JlMdNmuyED31KjSomgMTWq78O/ZEDPzZeBqx36PkSP+jTv8fP4/st9+K15PinZX2J9Bj4TYUCPLmXpw/cft40gZVtiRqGKWEyncdPHIrL/RR/+RY5ENTkqOJhajM/Ffu0zf8ugEbsP9wzOe3nhmfStCqxeeC0mZnbjeNsBNNY9iY0PrMbKex/Fc61dZqv0fGF6P/z+vRfR0NAQszS2meoTN515H7vWrcZj2xpx4L0PoOKB6Z9h9R1J2fjBqvKkdDFkEBHRqPDX8b8q7b+/FQHCTFwXnr07ciZv6TJROM/XP7rnnfO4JWFBXtdyuNZsSYSP5k7Zudsarlbs3/QTaehX867+G5T38oI0HtNvrsSmf3sSP9y4GhVLF+Lr02Tn6t/jFw3bsOeE2awfpt3+A2zfvj3u4t7cGr1obdiJ90R2yb52KR55cjv+bdMmbFq/BsuXLcPNV5jNUnTmtKyHAXImpptOyG0MGURENCp8Nem8E+m79RrVGgoInse8zQ7L/zHzXnxZbHuV/GEIiQAki0mfnYoOALrvRkSti1hSGRVKNpuSo0gVr70I/y4WNdTuW+7P6J3MYLyXF7ZxGJ8zHdd982YsW7MJq27QTZp+9UH6TYY806arEaaOv/8bU6cx2D7DZ6rS5WqUln0TngF11j6B996XNS2XwTOVvb6HG0MGERGNCjd8ze1v2zPwt5N1LcFvP4qz71/14bdquNUMXD1I/RPi0QFIhBzVMcTOublUWqNBfSkDf/MlOYrU4DWJSsT99/JC1IHXduxCa0dsFOj5QlfBeTzx09zEHBlERBG/67T6b8jXbsA3ZLr94EXs/K+u2KBx+gT+a9cOuDdKbKbptvEJ3v/Adi69p/Gb136M5+L1yejpwumIkxPb73kOB+S3AtNuxs1T9VoaPgwZREQ0KlyZ04epl7lYOL1eBAdVjdEH/361xoEo0Af1Mb3efjSZui4DtRUX4d+/ah6Lgv2t8vH/TNYEKgMLVWdwccyb4s3UnSY5pO36i1QfDDmsbXMn1ChSQzEvhp18D+V7SS7oeA8Nj63GvfdvQe2uXdglCv9bq+5F3S96gCsW4h8TNGmafv11qsbik8YqPForX1uLR7e+JqLLdCyqXIgrMnvwwfMbcb9934/ej3sf/iGef8/NTtU5uOHvZ4lz6UFbw8PiWmSn73W4d/XD2Paz04jb6qn7bWxbvRL3qk7i63D/vWL7A3JYrKtx+/e+FR7NioYNQ8YIEWzegPJaNQUUERHFMXu6e4XT7+TJRhWCCBFPqTXO3gjIBh3Cl0XBP90mUxMy8DeTxSL+q2XAKx8nmQ7mQRFErFnD/eI1K9YOIGioDuYXh+fpkDUfdX1quFrZuRsiaMjwMVgjSUUrYi2GSzyYu/wuLPz6NPE57sAH772H995rw4mey3Dt3LuwcY2ZuTuer30PD5R9A1eIpPH7D+Rrf4OezGxZr6CGqn3wXzeibO618GSG9338s0x4rp2LpavvwVwXm7yNv365ORc5oV43urt7cNmsUqyqXo9/jNcnY+IszL1hGiap7btFRMnGFfI1j9yDb7E53ojAyfgGm78W5Y25qK4pNqOUOAmieUMVmjrEv+uSatQUx99ySASbsaGqCXDxXGSIqkVl8v2lcr/kNnUB+CrqUZn0a0Vzb1ESf59yfy1FqE++MxpknIxv+I3kyfikT/+YgWU7LsL5MfaXS0/8J5tB6cn45IR44Qn99GR5ahQoERImiP/K7eyjQTmxJhNU5IR8ZohaZ+FjxJsw0A0XiZzzbPl5eC5l0YP6yZqM7ysL8cj6JEGKhhVDxiDz15ZDlIcFHyrqKxNUtftRW16HgCdBYTiaKWynK2mQSasQn4pwiBIHj399JtzIzRIdW9/TZPfTkjxkWO9RxH2xnUuqRkRAHOUYMobfSA8Z0o/3XYT/60/W3Gg0kKNHyRoLTYWKoxl4Zb64NsdZviO3jyVrPsRrbgo3iUocLOKQNR/iHFRLMpcDxz/k9+Ge+SJIEfUXQ8aowZAxFEJhwIOS6lK0V4kwoZ9Jg0OhOu0woINMMElhWNY6VIlE4F7I0Kz9OgcuK4jIe1SD+KdntvNWhGseosKWLOyXtleZcOcs+tqsoNG/a07tvlJyDBnDbzSEjP/+Uwb+ue4inPuLWUGjQtbFwHOV5/Hl8Sx20AAwZIwaDBlDRX4zXtuO0kpRuI4qh6oCbjCNGgzLINVkhGtf+ifR/tW+ZcgoEvchppCfLGAIDjUMoWBgnvNGBIWomgzHbaRwbUv6QYMhwy0MGcNvNIQMqfY/MvC/W9mtcDS57RvncedcFjlogBgyRg2GjGFmfbvv8VWgUpRsQ0VUGSCS9RMYpJoMXeBPtTlSIqYJmHnUP5HnoUOKrRbDRj0XE9ZSDRmCfK7Ri5rUbqYNQ4ZbGDKG32gJGWe/ANa+kIFfn2TQGA2uubwPW5ecRxYnYya6YDBkDCZVoG1HabzCulUTIQJGdKFZF/ST1DoMSk1GVKHcrB0U/QxJInU4BwQTHkqDVrOsJBzuuxau1UhK9THxopEhwxUMGcNvtIQM6XRPBlb9rwyc/O+x0D9j7Lr8y33YfkcfJn2JxQ2iCwlDxiAK90FwaIJjCsUdqpDqVJgP1wKk33xnIMxx4xbAXZRmyND30+tYw+JciyGlUZPRb6zJcAtDxvAbTSFD+kQEjHv+PQOn/8ygMRJNFMFCBowpImgQ0YWFIWPQhcNC6JvzUA1E4iZJTh2l7cHFFdEhxwo/IzBkWLU7kcS9qc5FY9zgkDhkRO+zf4GOIcMtDBnDb7SFDKnjVAY2NmXg/3UwaIwkuV/pQ/WiPngmsZhBdCFiyBgSshDaiFzVqTmNpjh2Q1Hol6yQYR6mJ81+HGk3lzLU64KhTuLRwas/o0v1+1wUhgy3MGQMv9EYMqQ/9wKbX74IB3/LoDESfOOrfXjkf5zHJeyDQXTBYsgYBeS37S25ouAsCrD2Imy/azXiNtHqLys4DU/ICNPn0VJkL+yn2FzK6VzMunjC2zJkuIUhY/iN1pAhyT9mrx2+CPWvA91sPjUsZPOou74NzL/+PPgOEF3YGDKGS3RBOeqxbsaTSnMqhz4KcfsdRBW4zdqBc9jvgGpEYskCfbwO3eGO7LqwL26I7bpTvOa4IcMhzMTcX4YMtzBkDL/RHDIssn/GzjeAfW0ceWoozZt5Hsu/C3bwJiKFIWNIOBR+XQsZI6gmI63wou+JrCdIPNqVg4h7pY+tay+C5j5XAHWJh86NqT1hyBgRGDKG31gIGZYjJy5C0yHgnfYM1ZyK3PelccCc3D6UzgbypnImbyIK49c8QyEYFMVwINDi14+FoFjnDhlE6lFvX6pL1OQ0ssAcsb6+GiUOs9bIQFNe3r9lQ7O8jiDaZdbxRjbnSsjfokfO8vnQ0VQLtZt+8SK/yIMOcW/lPQ2KK8/15qMy+pplsLLdi4iAQURjkiz0yn4BL6/+CzaWnsff5Z1X8zVMvayPs073g7xnV/x1n7qH82edx6O36nu7XtxjBgwiisaajCGgaxwQ8Y14TE3FqK7JMLUSKXdON9ub8wjKa01nxvPoGgarZkEElkAwN2o/bC41mrAmY/iNpZoMIiIaPqzJGAJB/TW//KLfCMrKDVHYz025oK9qG2rDNSGSt7gm9M18xBK3JsMsrgYMwdTUeHJT2avVTEoEKHMe+ZXVIgI0oWpDs9pPOoLNtWhGMUp9QCAQ0LUpMhyEaltEwJC3v0Ps31YDE30v4+tAU5XtdXIRAaMf0Y6IiIjogsGajEHn8C2/+SYc9m++k9RkqMfm2370twYjmlvD4jrVAjiyBYyYGhpT45DKCFXmXvlksAgW6RoKcw6x/Tv6UZPhFe9Poxc1RS0R70l8rMlwC2syhh9rMoiIyA2syRhspu9B+Ft+Ueitld+E+9SQtKkxNR+mz0PcGgxrSVaTYS1uBAzB36J6V6Aowe5UTYwVthxDhBfFNfWo8AVQV2719XCm+7N0IBDwhmpD1Dl4xFU3VSHlSgoHgTpZU9GOUnlv8ivFuSYLGEREREQUjTUZg0zXSHjMt+HWt/XWY7ORFFWTETk8bfib8mSTzKUtxf4Z+jrMgxjxax/Cr0uhhsJianpkXU1KNRP2ewfrtWkcTwidZ39qd5xqpqhfWJMx/FiTQUREbmDIGFT2ArEXjfKb/BQL9aLYa5oWWdIrNA870/xoQJ3ME4YNS5ymStbxEwmdW1BsXovG3MrUQoLTvgdynRTCkDH8GDKIiMgNDBk0qqkanxbTL8Oso9GLIWP4MWQQEZEbGDKIaMRgyBh+DBlEROQGdvwmIiIiIiJXMWQQEREREZGrGDKIiIiIiMhV7JNBRCMG+2QQERGNDazJICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiIiIiIlcxZBARERERkasYMoiIiIiIyFUMGURERERE5CqGDCIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKGhB+15eUor/Wbx6T4a1Eu7gtvCxEREdHYwpAxAgWbN6jCd3jZgOageXJIBNG8QRx3Q7P4qf/kdSQKEP6WgPh/H4ry9WMiIiIiGhsy+gTzMw0aWZNRh4CvAvWVpkQtv8Wvk4VsJz5UVOeisaoJ3op6VOYHEQx64fXqgntVU4fZboDs5xNBhowqNKEE1TXFEIdNcr5RPPJ1+fDLfXR4UFJdg2K1EztzT9S25hh0wevs7MTkyZPNIyIiIhqtWJMxzHwiRNTXi6W6BJ7Q40pEFv11wFA/FdeI56tRojfWr7WWCp/aRu/DbCML8fZt1FIhYox4KtdWtE/WdCm/0nEfMecgFxUavCiukefQgaZahxoRfwtkZPEU5TNgEBEREY0xDBmDKNzsqU4VqBGoM49rMfjdEMLBJEYwqAr93rgbGB1NqLKabEWnDxMSfAnbOomgUSnCk9xP1Ot1Uyl5iCpzTxIs7LRBRERENKowZAwiXevg9K1/dE3F4PDmekQpvj22FiHYjg54YK/IcGSvBYlqVhUUQUVcUPL+FN5iVMoqFRGwNlgdS4LNaBQZw1NSbe5HnMXUzETUuBARERHRiMeQMcLpwnwcoZoRs0T1mdA1FbI/h35s0ftMUNMRh71Duu4XEkCd/fhycegs7i2uRInHh1LTMcPf2CRCTvixDB0bxGtDIcTQtR0eEWQYMoiIiIhGE4aM0SxOn4wQb64oonegPaLsHhSFdxEQPLn97AvhQ4X9mKHF9AFxJPtnmNobfy1kFvKUlCapzfFDZ4wiMGMQERERjS4MGSOVV3adHiCzj8jakCDaZcawdbj215aHakECdbJGQo4KJR7Y+2Q41FCo16U5zG1QBB+fvRZDUs23orBjOBEREdGoxZAxpFr0pHxpFMw7Iqsh0pSPIp/YR4s/fDxTeLd3+s6vdKqZiFoGOMysv1bP9eGVfTSi+qRYIch+rdYcGhFhhIiIiIhGBYaMwab6G1ijSwFFKRfYvZD9thNK0idDylcpI9z5O7UO22YyPrdGdVIdveMMZSsEZdWKFGgJjbqlg8/QdJAnoqHReWAjlixZopaNBzrN2rCjDYswf8kabNq9F60nz4o1nWhtKMf8TS2QjxLrxtE9a1C2tc152+6j2LOuDFtbYo8rdYtzK9u4B23OTyv281+yu82sdXCyBQ1b16FcbDe/qAibWpOfPRHRWMOQMYhUc6JaoDI0ulRR+oVmEQqcCuZKsj4ZUn6ROHYAjapTtR+Nsh2U03mYeTKiO1+7QXf09qCk0ilcmb4XPtmIKoAWjlZLNHZ1d+HYsWNq6eo260KO4/D+j9B17C00PrlHPOrGvjULUf5UK7oa7xPhIEFBvfMANi6Zj6Wb38LhF8px396T5gnt7PE9KF+wFJv3H8YLq27FmqjnRbzBnu2v4PArm7GsuAhLRKhxzBq28z/2qVnnZEoOcGA/WuV1njuHxn2tKYQkIqKxhSFjEKlv4xPWWiQaRtaM/uQ0BG1abE2mVFMpUdgvjY06uobDeSQnOapUv8NHaLjaSodZv4XQfBuV6jwDTBlEF6ajB9BwzPx802LMmzIZ81euwUy1QhTU79uKuDlj8gwUiHK9dg4HqzfDniMumVaI0oIJ5tHneKv6VqzcczxU8O/c+xSe+sg8wOUoXFCA1Oed78SBjaZ2I7RUY689RDWui3peL/bKkM69KzF79mzXlpV7E1TJEBENAYaMYRLZGduZmudCRIwUNk0ov9RMiKeGdXIarcmMOOUrdQgCuvYjol+HYs4rSQf1mOFqIwTRrBMIZO5R5xloVH03iOhCchate3ZAVw5koXTJXEyUP067BWsWX67WTpgBdH8aL2VMwYKqKhRmmYc4iOqVW9EW2nwK5m/djSprg6vmYV7B5bhE/tx9AE9uPqhWy2MXVm3HylnqmZR1d5naDdvy0efmSeVzfBT1vFwSVYYQEY12DBnDKvFcFbpzdgda/AMsdYeCQJwmS0E/VMZw6Kjhr5X9SXyoiKmRMaNUJZooL1SLEWe4Wn+jGsXKV2r27S1GqS9+3w0iGo1O4sD27dgulh37j5t1wPH9O8S6PWiT3/h37kdD4zn9hPDW1mXm2/5l2NwiN5iAnHOH8ew6a71Z7FUBk+ejqqpQxATjo7144eBJnGxrRWurXD7FlEWLMTOnECtWLsCUrsNq/Z7N67DfOvRVt+CWKZ+a7WWDLakbbXtizx9tL6h12w98hIk5MzBjhl5y5Alk5YQeh5arZE1KFnJs63R8IiIamxgyhoVVc5Ckj4bqT2GaOuk1DkwnbVvHbz0MrdW/Qj5vOp6LwNLUGNscSTajkrUNMRkjUKfmtPBVOHTAdhilKpI4bm0TOjwlqHSqxZAd4sXO5azf9snE8ysr4OtoQi2rM4jGiC60PvssnhVL48Hwd/efHmwU6w7g+NmzaHt2B6y6BNncqcv+jb+qEnCuCYjuFzF5fpWqrciasRjbmg9g09wstO4wvx/lct+zONx1EE/dF163OZQwhI8a8bC1bbnsFyKdxfEDseePw/vVumdbszB3427seuIOzMw6iS65u3OXY9Gm3di921p2YUWBegJdJ7Mw7ZaHUC/WL5ml9uSgFNvefBNvprVsE68iIho5GDKGg6k5SFgLoOj+FHK+CisbqM7k1jwWanQp1bM8ouO3r0I/rimGCBh6W71OFODFa6L7V8jRnSJrG7woLtX7socAb3GN2IcMHKaZk6ACjRqFSk64F+6DEmyujaylsJMBo0oEEF+FOMfoZ/NRKa6jo6kKbg1uRUQj2LFXsPWFcOH98sJS3HHHHWYpRWHo6/7LUVhqrTdLuCOGMRnzn9iHfbvXoCj1ThWuuCRnMi7pstpIHcbmNQ04ah6dbduBrVZNzefdyJk1QzcHi+sSTJw4Me0lvUZeRESDK6NPMD/ToPGjVg5jK0eDEiV22ZG6qsmLCvsQrabg7RVhwP7NfqhA7ilBdbKhb+UIUXUBFSgq880xxWr9WG9i7Q8iPMQW8DV9fjJ4OG+jn5e7qEFxUB9TbBxxfkFxnEaRf0qjz9mcozgpdS/isc4h4txpzOvs7MTkyUNcOqRB1o3jrcfQJX7qPLAVD7+ge3fPWPwDrCkE9j31MBqtDt9CYVUzti+wPgOd2LuyGNWqmqMQVc3bEXoqJWdxsu0wPrVVVkj28wBuwur6JbjGPArLwYyCaSIMhPcR8bqbVqN+yTURn9nOfZvwcKPsQT4D81bfgVuuEcEDJ7FvUzXUamnmHXhiZZEJGVm4fOYsTBHpQHb8LtYXKizGrkNrELeiw1Ebts5ehhfMo8j7SEQ09FiTMRTMMLS65iLBMLJOVD8F8V/ZcTvFr/aDjRtQ7hQwJLG/muoSoKnKYR4M3fTKKtw7BQxZk6KfFwFDPp1fqWtI1OzgteLqNDXpXlTAsGYWl+ElUcCQZK1JdYnHVlNCRKPTREwrKECBXGaEax5yZhRgJlojAkb/yMJ17OhKW1V3jUswZZY5tn2xnYfsFD4r+nm1yIAh2fZhf92UWWrdlMMPm+ZV5SZgSMew/8mHsUqttwUM6fCzuC/UJGsHWmOG8iUiGhsYMgaR/DZe/SGRNRHWCEuqL4MPFdGFbFn4r3f+1l71U3B6TTxeLzxy+zj7s4KGRza3sgrwap4M2bQqzuvMPBp1Aafn81FZX40STwB15Xpm70g6vFivjVeDEk01z4o+TyIaMy4pWoQVUb2fW59aZevcvQpPtZonRCB5apWt07dYnCb0i3C2G93dsYucuyIkJwvnHLZRCye3ICLqNzaXIlXDoFswOYeSZM/bqWZOLUXJm3YROWBzqbHN3iRoxuIqLM7qwrmJbdi64yDO2Qv+KdJNgj6NaCZkWbzrEObtn41l0U+kY/EuHFoTbrQU0aRJPrdiGjpFErnkknBviO6WzVj45EncsngxFswtwFU5lyTsK5Fl+lKwuRQRjTUMGUQ0YjBkjGFnO9G6YxXKn7W3jxKF6bdXYOL++3CrKWDLjt/zZljdortxbH8j9KBOsuP3PISeEqbMLcOiWRNxtrsb53AS++9bis2m5sO9kDED3d3n0H3yGNpesffl0OY98SY2zQ2f774138bDb+lHWfOewL5NZs6PJBgyiGisYcggohGDIWMM6m7BprJ1aIycnc7QhenLbQXs/nf8tm9rQkbbEmx+RT+26zp+TA81K024CjNkz2sntzyE3Yu6semGVWg0q6JNuGqG6ritncXJYx/ButKsnBmYFj0Alt2M5di2ca6aXZwhg4jGGvbJICKiwXO2C586BIysnEKUPjQP08zjwTBriX2uCrNsWoTLI1pmTcTMRQ9hW/R2cpETWVwyERNDM/xFy8K5T+1zd4QDhnTOYSbwiKWLvb6JaOxiyCAioiGRlRUurResqMK6RbNimhK52vE72tk2bF2zGYfNQ+Xzw2jcvAzFc8uwaU8bYvd4OaYViP9k5eAqNZ23sbgehw61oH6FfUZvw2HGb/tLZQ2HWp+TSkMqIqLRiSGDiIgGz+QCLHpoG37a/DZ++pAsrScW/e1/qFlT9Ezg8rk0KgK6j+7FxiXL8EJoONksTJhgK/nbw8beowjvejLmPfE2DrXsE4HCfv76tbq2ZBceKgoHhsKHno+sEYmoPZmJNbvMetNUiohoLGLIICKiQTQFcxcVYdrkS0yxPLF0ZvyeOy3RuE1G91Hs3VSGBUur8YptvoqrFtdj34EWNNevQIGtEkKFjeql+PaafaFaDfvoUY6OvoCNoVnLs3Bs/7PY23YSagTcqNqTrNLluGWKeUBENIYxZBAR0Ygxbd5yrFy50izLMS/UaWMa5i231utFjiwV9jm65bTiRrea5KITLdvXobrxsK2vRBZmLN6G+jWz1NCxkwvKUH+gGfV3zLSFoEJUrZmfci1DN3JQVJhjXn8OXQdfQPWyhbhhbhnKlpWHa0+y5mHTyqKEQ9pqJ9HW2orWtJY28SoiopGDo0sR0YjB0aXGNvsISvbRj+KtlyEhpdGlutvQsLIcTx229ejOmoHFT2zDmqKJOL7nPizZfBDnJhRgxdYfoKzA+TMmm1Rtrd6KrsW7xTnEVjdEjAAVNYeG0n0cLXt3YMeO/TjsMJjWzNU/Rf2SaY4hI3J0qYHj6FJENNwYMohoxGDIGNuONizA0qd0s6J4ISM9i7HrzULsWbAKrzgU6qUJM+dhwYKbMO34YWQVzrUNNxvH2bM4K2KAbiE1AVfNvAaTzWuO716CW58082REh4yz3Th5vAUH97yCHa8ctPUliTJhJuYtX47lC4owzVYRw5BBRGMNQwYRjRgMGWPRSewtX4jq0ChRmmsh49BiHCtbiM2m00NW4S2Yd/KViP4X/VZYhebt0/Bs0TK8EBUaZjz0U9TPaMOOF15B69GjOOY4D0gWZsxbhJlde9HYGv18FmY+tBsNi3R7sMh7IMLNjCkpNKuyi5yjgyGDiIYbQwYRjRgMGWOTvQZDy0Jp/ZtYV6CL0fYCduSM38nMwqKVc5FlXj/hph9g99b5mHL2OPZuXofNrxxDvAqFVOiC+kS0bLoBqyJm47scK57fi7Jpbdh6qwgg9ktTJmCm7FuyYhEKTNVJ9/EW7BHn9FQobEQ2/4oMGZyMj4hGP4YMIhoxGDLGprMtm3CDVUqfcBVuWr4Jm5ZcE/qm3l7A7lfhuHsf1q07hxXbFyCiJ8XZkzh6+DiOHW3FcVun8NRMwdyyRZB9y0/uLcdCUxWTlTMTt6zYiDULdN+K7n1r8O2H31LXVVA0F7csWoDCmdNCTayiWWFjb2E99pRdY9aK9W170HDA6rqtw1N6g1CdxIHte0TU0KbMLYvqGE9ENLQYMohoxGDIuECd7Ua3VeWQNRET4xTQR6az6D57ySg7ZyKiwceQQUQjBkMGERHR2MB5MoiIiIiIyFUMGURERERE5CqGDCIiIiIichVDBhERERERuYohg4iIiIiIXMWQQURERERErmLIICIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFzFkEFERERERK5iyCAiIiIiIlcxZBARERERkasYMoiIiIiIyFUMGUPCj9rycpTX+s1jIiIiIqKxiyFjBAo2b0C5DCWhZQOag+bJQeSvLUcqOUhul/ycgmjeILbb0Cx+svHXqmtK5Tj2+7BhKG4AEREREbkio08wP9OgkTUZdQj4KlBfmW9WicJ2XUD/HMOHiupcNFY1wVtRj8r8IIJBL7xeXfCuauow2w2Q/Xysc4QHJdU1KBbHcmQ/74jXR5MhowpN4lp8Yq/BomrUyJ2a1/vUdVn3pQQlwSbEXJZt/8FgUFx/vJOisaKzsxOTJ082j4iIiGi0Yk3GMJOF7fp6sVSXiOK99bgSkUV3HTDUT8U14vlqlOiN9WutpcKnttH7MNt4SlBt30YtFaLgL57KtRfa81Gp1negqapWRA4nIhTIgCH2WSF3HmhMoYYlF0VFHnQ01cZsG2xuFPFDBCorqESfqy3AMGAQERERjR4MGYMo3NxH1hAIgTrzOF4h3k3hYBIjGFRNmGIL7iJoqKASQF10MydVMyGvQ4SCmmLkF1eKEJMokIR5i0t1eGm0bRlsRm1ThwhE0YGKiIiIiEY7hoxBpGsdwjUH4ZqHoSlYe3M9QEd7VFgQgu2iyO9BREWGJb8S1SUe+IrsZ2iaPnWIgBE6dy+Ka2RtiVMgiZaPUlXz0RIKJIGmJnSI+xG3tRURERERjVoMGSOc7IsQV6hmxCxRfTx0TYXsz6EfW/Q+49d0yHBUWSyeV49kv4nogGExQQNNqEpSO6MDV/j1qkkXEwYRERHRmMSQMZrF6ZMR4s2FBx1ojwgZQfhbOmSHDBMi4tPNvUyH9aiAER6JSgaNelT4AqgTQYejQBERERERQ8ZI5bVqEgbA7COyNiSIdpkxivLN/s1Qs6EaET00rQwRVU1ASXV0jYPeXlaaBFrCdRf5lWK76hKgqSpqPpB2NNr3b2pbAnWRx1M6ZI2IbVv7krRJFhERERGNFAwZQ6pFT8qXRoG5I7IaIk35KPKJfYgwENqLv0V1Qg93+tY1EdE1ISo01EcNZRtsxoZQ06no8CF4i1ETsz4Xpdb+zQhaUmhULfsx7KNLRYyUJZaa4oGHLiIiIiIaEgwZg00VzK3RpYCilAvMXsh+2wkl6ZMh5auUEe78rWs1fIjo152U7Jch9m/m7YhoOiWvL8XQ5G9sgjUVRrBxA5tWEREREY1RDBmDSM2MXQsz/4TgK4rqOJ0CEQriFsWT9cmQ8ovEsQNoVAV6PxrljHdpnIee3bsOMDUKEZUUcmI9ETw6OlrgT5YXRBhpFBnI59Pn2NHRgY6mqpRm/iYiIiKi0YUhYxCpJkcJay3iDCOrmNGfnIagTYutyZRqKuVBSWnqUUc3m4oKF+KMVD+OOrG3kmrxfIIZwhWxfa0ZsrZIr/FV6MkCA3VDMWcIEREREQ0lhoxhknBoWkPNcyEK6ClsmlB+aQk8slO1bE7lKUJ+8rZa8cnaC1u/jJrE6ULx14rtUYLqiKQSnmcj1H/cjc7uRDRyqd8f1sh08ZgvMYarmlOe4wVdxaqbxyZvzmrep6EelEM1QR6G47rp1FvYIq8h3ucs2fN25t/UBd382NyD4f93a/5NDMmEyyOX/Xc8Q8awMrUVcejO2R2iED7AXx6hwrsHJZX97EBt/SOuC+oRp2LmzJD/uBz+YYlw0xTQs4THHld3Oq/MNyNexa/WIaILiNerqjmTN6e0Cpz9Xmyj2xn+loDu72YrxOrhvJ1eH3+JPHer8DGAxalQrX4vx15DNH3+ybejodF7JIAPxX8jJ70NS/Y8DZXwv9thzy+jRq9Ywv1+GTKGhZmrIlnfCNWfwjR10msc2P54RQ0Pq7/ZkM+bjucisDQ1pvsvxXT6Vt0yZLhwahplTdhn9f2wUSNGRQeSKKYZV9GAqliIaPQxv18ilirUBfQQEeGhrsOL4ze20f3TUlicurBJqomofFLW/kYU7D3mC5YkS7wdS/YR9GJeE3//iXZJo00v3j10RPw3D/l5ek2kZM8TjWC974qPbr749GoMGcMh6IeeDy9ZoVr3p5B/7KxsoDtiywK9eKBGl1I9y/UfI/OXyBr2taYYImDobfW6CvjEa1KrVrVqJvLF7uVrnYNCaMI+88czleZT0dQ3h0lqdYhoLLJ+v8imk4kL2eHfa0PwiyK/0vw+bU/QXNV8wTPSvuI0tTsJf8+HaoAugNqNBM2rrBqqoW1qdAR+mSGm+5A3Tq+JlOx5d+kyBb+pdxYe4j96xH6K44hffHTzYH10GTKGgeyA3QEfSlP4Y6n6U4j/Bhr1L0irI3Z4idfp2qpd0H+c9T8Q8QfdTJiX6Jdqe6P8xVuFlqJSx2ChmF/cVeIA6o9/vA7u0RPs2Wtb1C99EbjEKk9JgmMR0SgWv7Y1soDegaZa5yZB8mXW78AhI4NGTeXA+rCNKOL+Vpn7XtWOIjnyBr/cGXqH/Tgm/jO9MB+X6jWRkj1PNIId9h9DYX74k8uQMRTMMLS65iLNYWS9xSg1tRlVKX7VIOegULUL4udwwDDkhHmOM3NbNQodCAS88Tt1W30z9HTgCRK+bZK/eIsIJsFaeZ6pBS4iGo1iJ/y0aiXCE3fKbSrgE7/naiO+APGjVg1YUYLqhCP1DR3rm9/IGmW9bmi+Ebc1MVOhLRweYo5vfl/LL4Mim2MlacLqJMX+H5TY0UN+9Ij3Iv8a5wiR7HmikesoDvl7YP/oZvQJ5mdymayK1b/cJTkak/jFLn9Rq/4N6fySl39UWlCUtG+D3HcAHjkXhfjbU5poe1kTIee4kG2Z1R96EYSaG1HVXhQ7k7c6vtWvQ/6hSjZkbYrMOcgJ/mIPqa8lJiTRmNbZ2YnJkyebRzTmJPl3rX5ntpeGfgfJAn1dIMHvnJjfY6mL2be1L/20TEKhferf5fJ7Fft5yBoaETS8Ucd2vEazrRxlzyksqdfIQTWcr1Oda9DhtU6vM8dXTDgTB485f3395u9SxO/4WOpaEH2sJNcUbQDvVQRrP/La1s/Gx8/X4fl3T6DnCyBz0nTceEcFbp+pSzmRf4Mjeb8snv+jeRBB3xNxQ1QNmq/iKdzW+xKeaWrBh13iIMhETt4C3HlnMXLH61dY9D0VP8QNxe14ce0P8ca47+CRTbfjSrM2LNHzveh8N/I8sqfmYUFuD176z2PikNWhLwY/fmsbGl75GMHTpyG3VDInYWpeMW5b+l1TCEzwnpvz701pP4kk/lzp8oS81yawx5G0HGB95uVn67ZMvLh7N/7zSJc658wccY/uvBPFtjcrtfujxf0ddOooXn/+Jew9oj974kCYXjQbOUf24VCX9e9KMOdmf39C7Oed0r8J8Rnwv46X9r6OIyf0uWdme3BlXhGKS76L/MmmkVJvJ9596Rk0tXwI9VERn5VJ4rNSfNtSfNd+cfZ/Sw/OgP+ZZ8T1yPtm/4zLz93zqHv+XZwQF5qZPRVzllagbI7D3+n2F7H2h2/g8fp6s4IhgxIJ/dF1MVgQJcCQMcaZP6q60GAKqQkKF85sf8AHUHCNW3hwCA+uhYy0r9XGqeCqjhUu+IcKuYK9UON0/pEhw04XDIPRhaKoYyW8Jof3I1zgdzpmGqz3PHsSJvWexukvRGF70niM6z2D06q0l43C1T9C2TWiHHi4ES+9cQRHZEFQFI7y8rziWakXE7LG4Q+/E8+d6FGF9TyvfgaYgeK7bkKXuZfZ2dno6elRhVBxGJyxCqbZs7Hy8bsw09ZvImnI+PhFrHvsDfR+5wE8fnuuWWkT9/kz8O+sQt2h0+pR5qRJkEXm0LkI9vfbX3s3Gj7MgXf6lchR59eLrmNH8OFpsXXovD/GWzubcfDDQyK0ADnTZ2N6jnq5eFCI20pn4sOU9qNeEYc+hmz+FaHrQxySB80Wn4XHlyJz70s4KB5G6Anq9y2V8odVWJefiR7xmZCFav1mic+H3CAbs1c+jrvMyaZ2f9Sm5j2NOgfxGXz00SackPvOzBafC7Fx6PMnDUbIsH8GMuHJy8eV2bbztvZxRvz7XSeCnfzI5kxHnnhTx/V8DP+RDhUeppasx3rrPEL/lnKQgy509ej71ivum7qUvNtw56TX8Yx4czLFvR0/TlyjuqHhf2N2H7+4Do+90Yv6+sfNGkGGDCKikeAPf/iD+YnGpF8+3bd8+fK+p39pHjv45dPL+5avf7XvU/M4oU9f7Vsv9rc80Q7jUMdZvr7v1ZgDfdr36vrIfX766nq97av6/OMv4W0iT8nsM951qfvidC5a3Hvi9DpzT9bbVobO37Zd/Pv8y76no16vxBwryTVFG8B7FcHaz/LKvvW73un79JxZL3y6R16neO7H7/SFVlvbO5ynvi8O1yroz8fyvsr1u/resR/k3O/69tTo5x76ye/MSs16Tbx7oo93T9+uX5sVUeI9f07c+3vkfu/5cd/bf7Cdi7jKP/7HE+qYTtcQ6U997zx9j9r2x2+H92Gdc+pvi/N+Uic+N+r+3SOO+SezLtqfxHnpY9QkvS7B/F6R+3zi1V/3/TF0Wuf6frenRj/30E/6It+taInuj8PnXp7bT8SxzFrl3K/7nrtPPve0+FdkmHNzfH+s807h5oc/A0/3vRNx0L6+P/761b4nftImf+o7sNmcW/Tx/vhO39P3yOds1xL6tyQ+yzve6Qt9tM619e1Q28rjPdH36q/DB/zDq+Z+xpyzuS/37DKPNfbJICKioSW/QXNq3y/WN8pvgkNz+4wwsjO46tMQb0nyjeuFTPYHlPco6Te2KfIsQGXZHHht36R7byzCVPlDZxeivxjvr7zSMsyxH2TclSi9rVDViMhvkTv1WiU0MItjU6lTOOrvALLzURj1DbAW7/lTaGkOoEd+e3znKhRZTWKUcbg0x6qBSWY85hTNUD91nh7I3RnIfnpxeOcWNJ0Qb9/8B1GZH9XezAg2b0VdQFyx706sSecflK9MbH8NLg3donG4snQpvjNJ/Nh1DEfsb1aMFK/raDOaZYXc1Nuw6nZxLL1WG3cpUn470mL/DFRiTlQztUuvKcaa22eKG3cQr8sJVnK+g7Lo+3bpHCxdIP91dOD1t9r1OkvOfKy6aw5CH61xMzFH3wr4lq5Bsa2J1eT8OZBDRlh9jUNOHYX++BaaFRpDBhERDTrZXEY1DRACLXLk7dgCuR55z4OSUpcKohSHHtVvxIa5/prshdXiZ1BdkwdVBjvRDlFeTs0pPw7KAuCMfDhnjHjPf4gjcr04Yp4oR6aqN3gUr7+4E9seXYu1a9fi7tBAAelxaz/SGf9OPHOoRxTQS1BZGueTF2zGTplCsn0oEyHSOYakIxe50+V/T6Dd9mb197qCH7aLwr4ol+flDeHoXyl+BoLtuk/Z1Gsc+vuInDF9BmTeOv3hxyK22GQmuMv2TJvAKf9BNYHkjPzITy9DBhERDSLZxr9cd+i2Rpcqld/06vXWyEzhUZBsQ606LnL+nuFghnuV7ahH1HmlIXTusjOuDxVu1SpccFIsedlYs3jnzXGeYS/Z81JqR5Vt99diRdWTeOmNQziivm7OxpW+2Zgd6nSRCrf2Y4jwsFUU4ntEeLhzjVNNj9B7GDu3NIk44MH8BysRp6IjbZH3zZ3rSlQuH0yJPgOdXboGJscb5zrGXyquVDjTo4KSe3pxJKA+vYj++DJkEBHRIDIT7sUUaK2J+ORSIYq8guy8GFpnluhhbwfSabgf/LVO4UF2BA2fY7WacyKRINplfhrumoOI5l7iPqrQwWFp09Z7Rne4npSjvhlOxRE1w14eZuc7FxOTPZ+q3nef0Z2Ds/NwR/VTqH/6cTz+eA0erLwLdxWrxmQpcWs/WhDNO2V4yIavrAxzHAvosvD/DHRFRyXiVXSkrxdn1JuVjfGihO3udaXuizPmhwHqNf91MjlHh4uuYJzmXmdO6XAhboS7rbrMBJJ5sxH98WXIICKiYSRHKYr3zbo/NE/G0LegkudVjsbcUnhlQvDkDjwg2ObUiFhUM434NTgptU6RgcFhVuvkOtAe70VWzQeng47Q6z8kilXClbmOzVJimeZpcWfxTvS8CKaq7HgCRz9WKxLq6tIdD2bcdieK7H1J0uTWfmSxeFD7YSTT68ch9WblIi934NflzdHn1nHs44QF/mhdwYEkeTlKlPzvMRw5rFY48+bq/hIfHkVUrwvl1IfHIMemmjT9Snebevlb1DDF9pm+LQwZREQ0fMQfX2+RrK0IoM4UqnWZ1hY+HDvSDhZT6xBoUsPT1hQHVQHQU5Tf/3Mwf4TlMJbhmgTbomprImtH7IupzInDhJPG3NTmq7AJqoKPB2qeWEl1yNfzGnTICVvlPuU5uNGsSu17GAJLziSoQbFPByM6aUs5k/Rw2aeD8XsE93SdiihM9na2oO55WWrNRuH8ORGFKjncqQpl0WHvaJJZvBM+78Ucn0wZXXijoREfh06mF6eONmNrg3y3wjLNGX3sP2Jrd++8rTRJ3B+pS1ynXbr7Cb2/UTVj7vbDCDexdPwY9XThVOSbhZa651UgzC6cjzniktK+rmj5c6BaBB15Hjvftd2z3iDe3bktdkhnq+B/rAXvhmoz5PFexKM7nY7ndI2XIr9QpoweHHymFv6oWhH5max9UaQPbyG+Kzc7/Qaej66ePPUunt8rO6V48N2bHIZPHoCjfvXpjZjp28KQQUREw8ebj/zicDMeWaAO1Mk/snIOBlnwTqF5VLwaggRLvNoBOSmpesoad14FBA+K8u0FpMhah3gTvll0YV5cqurU4QKrQCcuIhRcEgQMb3GN2Maho71uwyX+Z/ZX1YIie9BxMdzpTv1CoEUUo4bQuDz4VPnsIOrWbkHtzp2o3bIWDeIkxuX5RNFIPlWHtVtqsXNnLbasbYg4v2Mv3Y8Vd39fdQ5eu/ZurHj4WRwRZeacGyuw1LEHd6x2UaBNNIt3suevLF2C2bJ9y4l9eGzF3fpc7l6B+59sQtf4yPb3k29cAJ/YtifwDO63zlttuxenJsW21c/Nz1NNZ068tA4btu0U92AbNmxpxhdp7sfRqbdQJz6jPXJeh0s/xl5x73dGLW993I7nVT8MEXi84/Du87HbNB6ODEBxHXsJ968ox93qvVqLu1c8jGf1m4UK82ale39ijJuD20pks6oeBJ65H3d/Xx7r++JYVXhGpJmY0aW8N6JYppKeAJ651/7evYGeS1O8j8KlN60SvxvViaNO7Ee/V+Lzuk5/JgNq1r1LcdOqCnV9J5qqxH3Qn/ed2zbg7vufQaBHzpNR6fIIeO3wy3vsyXecnJEhg4iIRgjTbCTEFOaTNQNy6suRZIlXO+AtLoVPTqamvr0PolmOqespQkTGEAXC2FqHeGHIj0YzCV2RCxUCKmBUNcFr+qjETPAlQluRR9y5Fn/ieyb2o4YL9slrM8PLDuIQvN78InHXBHk8tWaoyILXAyjJEwW60x8icEh39h2XKZ+6CaseKIF+KoBDh46IezZOFInDpheWwCfuiZz4Tk5EJic4u/HOH6BaFFrttRjxteNd2QcgR074Z1ZFSPa8MG4m7tr0AG7zecS5fSHO4zTOXKrPY9NtUf0Ixuej8pE7UTg1G5lf9Ohtc3y4bfUm1JQ69Dm4pgyP3FkIsTk6jhwS9+AoesaJ16a7Hyc9Paa24Auz79jlSNdpnFIdBeR74LyN/4TZIIls322448bpuFROwicnKpSzcN94J35QvRTXWG+WC9flLV6PH9x5I6ZPEu+GnPzvjFgnjv3AplW4MaaTzngUVfwAdxZORXam9d7loWT1v8a+dwmNR37l4/q4nnHoUvczgI/PiGucfRtWLzU9ruX1bXrE3Af9eT90pAvjp+prDE3E55b2d6E/vnmOX0hkyMkyzM9ERMOKM36Pbc4zZ1vrTW1A9GzJplAtn42ZNdd6LqUZcyM5zuQbJd75JhL9GuvaHGf8tci+DxGzadvJZmNVaEKcWaSd2O5ZQknuW8T7kpbE93U0sGbvjpy5vR/Me9ETb5bvZM8TjWD6d0QPvvPA43D6+DJkENGIwZAxFplCslVWDTVDkgVrU22RUkiQbZXrEOhHoOgXU/iTNQYJD+dUoA+do7l2b5JzjggZUfdLGf2F9tHGrZBx6vVHcf9LXShc/SOUOTSvSvY80ch1Cq8/ej9e6irE6h+VOc7/wpBBRCMGQwYRjQTuhIxTeGvL/dgdLMRKUQiLnUct2fNEI9ipt7Dl/t0IFq7Ej8qcP70MGUQ0YjBkENFI4FpzKaILGEMGEY0YDBlERERjA0eXIiIiIiIiVzFkEBERERGRqxgyiIiIiIjIVQwZRERERETkKoYMIiIiIiJyFUMGERERERG5iiGDiIiIiIhcxZBBRERERESuYsggIiIiIiJXMWQQEREREZGrGDKIiIiIiMhVDBlEREREROQqhgwiIiIiInIVQwYREREREbmKIYOIiIiIiFwE/H8ajsWsIDaQ+wAAAABJRU5ErkJggg==\" alt=\"\"></p>\n<p>并将hexo配置中的<code># URL</code>模块下的url改成自己的域名。</p>\n<p>在hexo配置的<code># Deployment</code>模块新添加<code>- type: baidu_url_submitter</code> ，注意，deployment多个项目需要在type前面加<code>- </code>。</p>\n<p>成功后推送后最后出现以下两行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&quot;remain&quot;</span>:2999,<span class=\"string\">&quot;success&quot;</span>:1&#125;</span><br><span class=\"line\">INFO  Deploy <span class=\"keyword\">done</span>: baidu_url_submitter</span><br></pre></td></tr></table></figure>\n<p>remain意思是今天还可以推送多少条，success是成功推送了多少条</p>\n<h1 id=\"sitemap\">sitemap</h1>\n<p>上述插件安装好并部署之后，打开主页网址/sitemap.xml和主页网址/baidusitemap.xml就是网站地图，将这两个网址提交到百度站长的sitemap位置。</p>\n","categories":["博客搭建"],"tags":["Hexo"]},{"title":"hexo-github搭静态博客并绑定个人域名","url":"/posts/8128d504/","content":"<p>gitee pages太慢了蚌埠住了，转移到github并绑定个人域名</p>\n<span id=\"more\"></span>\n<p>建立在上一次部署gitee pages的基础上，详见<a href=\"http://www.lyroch.site/posts/5e240c50/\">Hexo-gitee搭建个人博客完整详细教程</a>，忽略gitee部分的配置就可以。</p>\n<h1 id=\"github-pages配置\">github pages配置</h1>\n<p>新建一个仓库，命名为<code>名称.github.io</code>，在hexo配置文件中deploy部分添加以下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">- <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repository: git@github.com:名称/名称.github.io.git</span><br><span class=\"line\">  branch: master</span><br></pre></td></tr></table></figure>\n<p>在setting中左侧找到Pages，打开，将source的branch改成master。</p>\n<p>打开名称.gitee.io这个网址就可以看到了！</p>\n<h1 id=\"github-pages绑定个人域名\">github pages绑定个人域名</h1>\n<p>网上很多教程是错的。。。</p>\n<p>我的域名在阿里云买的，其他应该也是差不多的，找到解析域名的入口，添加<strong>5条</strong>解析记录。</p>\n<p>第一条，主机记录<code>www</code>，记录类型<code>CNAME</code>，解析线路默认，记录值<code>名称.github.io</code>。</p>\n<p>第2.3.4.5条，主机记录<code>@</code>，记录类型<code>A</code>，解析线路默认，记录值分别为以下四个：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">185.199.108.153</span><br><span class=\"line\">185.199.109.153</span><br><span class=\"line\">185.199.110.153</span><br><span class=\"line\">185.199.111.153</span><br></pre></td></tr></table></figure>\n<p>这样就可以从你自己的域名访问了！</p>\n<p>参考大佬<a href=\"https://blog.csdn.net/i_do_not_know_you/article/details/105594269\">博客</a></p>\n","categories":["博客搭建"],"tags":["Hexo","Node.js"]},{"title":"Win10下Tomcat+IDEA解决控制台乱码问题","url":"/posts/6b2529cf/","content":"<p>完成某些课程作业，群友解决了Win10下Tomcat+IDEA的乱码问题，Tomcat版本8.5.66，IDEA版本2019.3.3，记录一下，解决乱码需要完成下面所有步骤。</p>\n<span id=\"more\"></span>\n<h1 id=\"idea操作1\">IDEA操作1</h1>\n<p>IDEA中Help-Edit Custom VM Options生成<code>idea64.exe.vmoptions</code>文件（64位改这个文件就可以了）：</p>\n<img data-src=\"/posts/6b2529cf/image-20221016171810995.png\" class=\"\" title=\"image-20221016171810995\">\n<p>我的文件生成在<code>C:\\Users\\用户名\\.IntelliJIdea2019.3\\config</code>，好像不同的版本位置不太一样，在这个文件最后添加一行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-Dfile.encoding=UTF-8</span><br></pre></td></tr></table></figure>\n<h1 id=\"idea操作2\">IDEA操作2</h1>\n<p>在IDEA的目录，我的是<code>C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.3.3\\bin</code>，找到跟第一步一样的文件<code>idea64.exe.vmoptions</code>以及<code>idea.exe.vmoptions</code>（如果有的话），全都加上：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-Dfile.encoding=UTF-8</span><br></pre></td></tr></table></figure>\n<h1 id=\"idea操作3\">IDEA操作3</h1>\n<p>在IDEA里打开File-Settings：</p>\n<img data-src=\"/posts/6b2529cf/image-20221016172347376.png\" class=\"\" title=\"image-20221016172347376\">\n<p>将以下三处全部改为UTF-8：</p>\n<img data-src=\"/posts/6b2529cf/image-20221016172532047.png\" class=\"\" title=\"image-20221016172532047\">\n<h1 id=\"修改tomcat虚拟机选项-idea中\">修改Tomcat虚拟机选项（IDEA中）</h1>\n<p>在IDEA中打开Run-Edit Configurations：</p>\n<img data-src=\"/posts/6b2529cf/image-20221016173059666.png\" class=\"\" title=\"image-20221016173059666\">\n<p>在下图这里加入<code>-Dfile.encoding=UTF-8</code>：</p>\n<img data-src=\"/posts/6b2529cf/image-20221016173315433.png\" class=\"\" title=\"image-20221016173315433\">\n","categories":["Web开发"],"tags":["Web"]},{"title":"hexo-next主题博客个性化汇总","url":"/posts/87f39dc9/","content":"<p>除去<a href=\"https://theme-next.js.org/\">next官方文档</a>的个性化配置和各种功能，还修改了一些样式~现做一个汇总</p>\n<span id=\"more\"></span>\n<h1 id=\"前言\">前言</h1>\n<p>在hexo目录下的<code>source</code>文件夹下创建<code>_data</code>文件夹，在里面创建<code>styles.styl</code>文件，没有特殊说明，本文说的修改均是在styles.styl文件里添加内容。</p>\n<p>其实大部分内容都可以通过F12+右键检查，再查找css语法来修改~</p>\n<h1 id=\"背景图片和透明度\">背景图片和透明度</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&quot;/images/background.png&quot;</span>);</span><br><span class=\"line\">  <span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">  <span class=\"attribute\">background-attachment</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">background-position</span>: center;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">font-smoothing</span>: antialiased;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">  -o-<span class=\"attribute\">background-size</span>: cover;                </span><br><span class=\"line\">  <span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0.9</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中url中是背景图片路径，像上面那样写完整路径是<code>themes/next/source/images/background.png</code>，opacity是透明度。</p>\n<h1 id=\"博客标题处的背景图片\">博客标题处的背景图片</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.site-brand-container</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&quot;/images/a.png&quot;</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">\t<span class=\"attribute\">background-attachment</span>: fixed;</span><br><span class=\"line\">\t<span class=\"attribute\">background-position</span>: center;</span><br><span class=\"line\">\t<span class=\"attribute\">background-size</span>: <span class=\"number\">100%</span> <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">font-smoothing</span>: antialiased;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">\t-o-<span class=\"attribute\">background-size</span>: <span class=\"number\">100%</span> <span class=\"number\">100%</span>;                </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"文章样式\">文章样式</h1>\n<p>注：颜色可以通过rgb(x,x,x)，#xxxxxx，和#black这样来表示</p>\n<h2 id=\"标题颜色\">标题颜色</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">h1</span><span class=\"selector-class\">.post-title</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">95</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"选中字符颜色\">选中字符颜色</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* webkit, opera, IE9 */</span></span><br><span class=\"line\"><span class=\"selector-pseudo\">::selection</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"number\">#FFF1C0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* firefox */</span></span><br><span class=\"line\">::-moz-selection &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"number\">#FFF1C0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"表格\">表格</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">table</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span> = &quot;<span class=\"number\">0</span>&quot;;</span><br><span class=\"line\">\tcellpadding=&quot;<span class=\"number\">0</span>&quot;;</span><br><span class=\"line\">\tcellspacing=&quot;<span class=\"number\">0</span>&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">table</span>&gt;<span class=\"selector-tag\">thead</span> &#123; // 表头颜色</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#FDFBBA</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">table</span>&gt;<span class=\"selector-tag\">tbody</span>&gt;<span class=\"selector-tag\">tr</span> &#123; // 偶数行底色</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:nth-of-type</span>(even) &#123;</span><br><span class=\"line\">        <span class=\"attribute\">background-color</span>: <span class=\"number\">#D8E4F5</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">table</span>&gt;<span class=\"selector-tag\">tbody</span>&gt;<span class=\"selector-tag\">tr</span> &#123; // 表格每一行鼠标经过时的颜色</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">background-color</span>: <span class=\"number\">#CDC9C9</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"文章内链接样式\">文章内链接样式</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post-body</span> <span class=\"selector-tag\">p</span> <span class=\"selector-tag\">a</span>, <span class=\"selector-class\">.post-copyright</span> <span class=\"selector-tag\">a</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#0593d3</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-bottom</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#0593d3</span>;</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"number\">#fc6423</span>;</span><br><span class=\"line\">        <span class=\"attribute\">border-bottom</span>: none;</span><br><span class=\"line\">        <span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#fc6423</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"删除线样式\">删除线样式</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post-body</span> <span class=\"selector-tag\">p</span> s&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#989898</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#F0F0F0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">2px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"文章一级二级-标题样式-左边竖线\">文章一级二级……标题样式（左边竖线）</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post-body</span> <span class=\"selector-tag\">h1</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-left</span>: <span class=\"number\">4px</span> solid <span class=\"number\">#FF201D</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding-left</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#eee</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">1.7%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#2e405b</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-body</span> <span class=\"selector-tag\">h2</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-left</span>: <span class=\"number\">4px</span> solid <span class=\"number\">#FF6A33</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding-left</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#2e405b</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-bottom</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-body</span> <span class=\"selector-tag\">h3</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-left</span>: <span class=\"number\">4px</span> solid <span class=\"number\">#FFCB5C</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding-left</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#2e405b</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-bottom</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-body</span> <span class=\"selector-tag\">h4</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-left</span>: <span class=\"number\">4px</span> solid <span class=\"number\">#FFF8A4</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding-left</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#2e405b</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-bottom</span>: none;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"文章内短代码样式\">文章内短代码样式</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">code</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">207</span>,<span class=\"number\">207</span>,<span class=\"number\">209</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"博客顶部彩色线条\">博客顶部彩色线条</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.headband</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">2px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: <span class=\"built_in\">linear-gradient</span>(<span class=\"number\">90deg</span>, <span class=\"number\">#cc0033</span> <span class=\"number\">0%</span>, <span class=\"number\">#ff3300</span> <span class=\"number\">14%</span>, <span class=\"number\">#ffff00</span> <span class=\"number\">28%</span>, <span class=\"number\">#33cc99</span> <span class=\"number\">43%</span>, <span class=\"number\">#99cccc</span> <span class=\"number\">57%</span>, <span class=\"number\">#3366cc</span> <span class=\"number\">71%</span>, <span class=\"number\">#9933cc</span> <span class=\"number\">86%</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"分类页面样式\">分类页面样式</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.category-list</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: auto;</span><br><span class=\"line\">    <span class=\"attribute\">list-style</span>:none outside;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.category-list</span> <span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span> <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.category-list-child</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">list-style</span>: <span class=\"string\">&quot;&lt;&quot;</span> outside;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.category-list</span> <span class=\"selector-tag\">li</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">    -webkit-<span class=\"attribute\">transition</span>: all <span class=\"number\">0.3s</span> ease;</span><br><span class=\"line\">    -moz-<span class=\"attribute\">transition</span>: all <span class=\"number\">0.3s</span> ease;</span><br><span class=\"line\">    -o-<span class=\"attribute\">transition</span>: all <span class=\"number\">0.3s</span> ease;</span><br><span class=\"line\">    -ms-<span class=\"attribute\">transition</span>: all <span class=\"number\">0.3s</span> ease;</span><br><span class=\"line\">    <span class=\"attribute\">transition</span>: all <span class=\"number\">0.3s</span> ease;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.category-list-link</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(<span class=\"number\">1.5</span>, <span class=\"number\">1.5</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#EBDEFF</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">20px</span></span><br><span class=\"line\">    padding: <span class=\"number\">6px</span> <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"标签页面样式\">标签页面样式</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.tag-cloud-tags</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">counter-reset</span>: tags;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.tag-cloud-tags</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span>: hidden;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#F0E7FF</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">    <span class=\"attribute\">padding-right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding-left</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.tag-cloud-tags</span> <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:hover</span>&#123;</span><br><span class=\"line\">     <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">     <span class=\"attribute\">transition-duration</span>: <span class=\"number\">0.3s</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"鼠标移到文章标题时的下划线\">鼠标移到文章标题时的下划线</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.posts-expand</span> <span class=\"selector-class\">.post-title-link</span><span class=\"selector-pseudo\">::before</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: <span class=\"built_in\">linear-gradient</span>(<span class=\"number\">90deg</span>, <span class=\"number\">#9933cc</span> <span class=\"number\">0%</span>, <span class=\"number\">#3366cc</span> <span class=\"number\">67%</span>, <span class=\"number\">#0097FF</span> <span class=\"number\">80%</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"toc的样式\">TOC的样式</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post-toc</span> <span class=\"selector-class\">.nav</span> <span class=\"selector-class\">.active</span> &gt; <span class=\"selector-tag\">a</span> , <span class=\"selector-class\">.sidebar-toc-active</span> <span class=\"selector-class\">.sidebar-nav-toc</span>, <span class=\"selector-class\">.sidebar-overview-active</span> <span class=\"selector-class\">.sidebar-nav-overview</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: <span class=\"number\">#8315D3</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-bottom-color</span>: <span class=\"number\">#8315D3</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"文末结束分割线\">文末结束分割线</h1>\n<p>在hexo根目录<code>/source/_data</code>创建<code>post-body-end.njk</code>文件，输入以下内容：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    &#123;% if not is_index %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;text-align:center;color: #ccc;font-size:14px; padding-top: 10px;&quot;</span>&gt;</span>--------------------------------------- <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;fa fa-heart&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span> The End <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;fa fa-heart&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span> ---------------------------------------  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    &#123;% endif %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"鼠标点击小爱心效果\">鼠标点击小爱心效果</h1>\n<p>在hexo根目录下的<code>\\themes\\next\\source\\js</code>文件夹中添加<code>clicklove.js</code>，内容如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">! <span class=\"keyword\">function</span>(<span class=\"params\">e, t, a</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">function</span> <span class=\"title function_\">n</span>(<span class=\"params\"></span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"title function_\">c</span>(<span class=\"string\">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>), <span class=\"title function_\">o</span>(), <span class=\"title function_\">r</span>()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">function</span> <span class=\"title function_\">r</span>(<span class=\"params\"></span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> e = <span class=\"number\">0</span>; e &lt; d.<span class=\"property\">length</span>; e++) d[e].<span class=\"property\">alpha</span> &lt;= <span class=\"number\">0</span> ? (t.<span class=\"property\">body</span>.<span class=\"title function_\">removeChild</span>(d[e].<span class=\"property\">el</span>), d.<span class=\"title function_\">splice</span>(e, <span class=\"number\">1</span>)) : (d[e].<span class=\"property\">y</span>--, d[e].<span class=\"property\">scale</span> += <span class=\"number\">.004</span>, d[e].<span class=\"property\">alpha</span> -= <span class=\"number\">.013</span>, d[e].<span class=\"property\">el</span>.<span class=\"property\">style</span>.<span class=\"property\">cssText</span> = <span class=\"string\">&quot;left:&quot;</span> + d[e].<span class=\"property\">x</span> + <span class=\"string\">&quot;px;top:&quot;</span> + d[e].<span class=\"property\">y</span> + <span class=\"string\">&quot;px;opacity:&quot;</span> + d[e].<span class=\"property\">alpha</span> + <span class=\"string\">&quot;;transform:scale(&quot;</span> + d[e].<span class=\"property\">scale</span> + <span class=\"string\">&quot;,&quot;</span> + d[e].<span class=\"property\">scale</span> + <span class=\"string\">&quot;) rotate(45deg);background:&quot;</span> + d[e].<span class=\"property\">color</span> + <span class=\"string\">&quot;;z-index:99999&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"title function_\">requestAnimationFrame</span>(r)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">function</span> <span class=\"title function_\">o</span>(<span class=\"params\"></span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> t = <span class=\"string\">&quot;function&quot;</span> == <span class=\"keyword\">typeof</span> e.<span class=\"property\">onclick</span> &amp;&amp; e.<span class=\"property\">onclick</span>;</span><br><span class=\"line\">\t\te.<span class=\"property\">onclick</span> = <span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tt &amp;&amp; <span class=\"title function_\">t</span>(), <span class=\"title function_\">i</span>(e)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">function</span> <span class=\"title function_\">i</span>(<span class=\"params\">e</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> a = t.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;div&quot;</span>);</span><br><span class=\"line\">\t\ta.<span class=\"property\">className</span> = <span class=\"string\">&quot;heart&quot;</span>, d.<span class=\"title function_\">push</span>(</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">el</span>: a,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">x</span>: e.<span class=\"property\">clientX</span> - <span class=\"number\">5</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">y</span>: e.<span class=\"property\">clientY</span> - <span class=\"number\">5</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">scale</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">alpha</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">color</span>: <span class=\"title function_\">s</span>()</span><br><span class=\"line\">\t\t&#125;), t.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(a)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">function</span> <span class=\"title function_\">c</span>(<span class=\"params\">e</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> a = t.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;style&quot;</span>);</span><br><span class=\"line\">\t\ta.<span class=\"property\">type</span> = <span class=\"string\">&quot;text/css&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\ta.<span class=\"title function_\">appendChild</span>(t.<span class=\"title function_\">createTextNode</span>(e))</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">catch</span> (t)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\ta.<span class=\"property\">styleSheet</span>.<span class=\"property\">cssText</span> = e</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tt.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;head&quot;</span>)[<span class=\"number\">0</span>].<span class=\"title function_\">appendChild</span>(a)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">function</span> <span class=\"title function_\">s</span>(<span class=\"params\"></span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">&quot;rgb(&quot;</span> + ~~(<span class=\"number\">255</span> * <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>()) + <span class=\"string\">&quot;,&quot;</span> + ~~(<span class=\"number\">255</span> * <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>()) + <span class=\"string\">&quot;,&quot;</span> + ~~(<span class=\"number\">255</span> * <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>()) + <span class=\"string\">&quot;)&quot;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> d = [];</span><br><span class=\"line\">\te.<span class=\"property\">requestAnimationFrame</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> e.<span class=\"property\">requestAnimationFrame</span> || e.<span class=\"property\">webkitRequestAnimationFrame</span> || e.<span class=\"property\">mozRequestAnimationFrame</span> || e.<span class=\"property\">oRequestAnimationFrame</span> || e.<span class=\"property\">msRequestAnimationFrame</span> || <span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">setTimeout</span>(e, <span class=\"number\">1e3</span> / <span class=\"number\">60</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;(), <span class=\"title function_\">n</span>()</span><br><span class=\"line\">&#125;(<span class=\"variable language_\">window</span>, <span class=\"variable language_\">document</span>);</span><br></pre></td></tr></table></figure>\n<p>在<code>\\themes\\next\\layout\\_layout.njk</code>中添加一行内容：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/clicklove.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"添加豆瓣\">添加豆瓣</h1>\n<p>安装插件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-douban</span><br></pre></td></tr></table></figure>\n<p>在hexo配置文件中添加：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">douban:</span><br><span class=\"line\">  user: mythsman</span><br><span class=\"line\">  <span class=\"built_in\">builtin</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">  book:</span><br><span class=\"line\">    title: <span class=\"string\">&#x27;This is my book title&#x27;</span></span><br><span class=\"line\">    quote: <span class=\"string\">&#x27;This is my book quote&#x27;</span></span><br><span class=\"line\">  movie:</span><br><span class=\"line\">    title: <span class=\"string\">&#x27;This is my movie title&#x27;</span></span><br><span class=\"line\">    quote: <span class=\"string\">&#x27;This is my movie quote&#x27;</span></span><br><span class=\"line\">  game:</span><br><span class=\"line\">    title: <span class=\"string\">&#x27;This is my game title&#x27;</span></span><br><span class=\"line\">    quote: <span class=\"string\">&#x27;This is my game quote&#x27;</span></span><br><span class=\"line\">  <span class=\"built_in\">timeout</span>: 10000 </span><br></pre></td></tr></table></figure>\n<p>user：豆瓣网页打开，个人中心，网址中有个/people/…/xxxxx，就是省略号的部分</p>\n<p>builtin：是否将生成页面的功能嵌入hexo s和hexo g中</p>\n<p>title：页面标题</p>\n<p>quote：页面开头的话，支持html</p>\n<p>timeout：爬虫的限制时间</p>\n<p>注意不能够再使用<code>hexo d</code>，因为<code>hexo douban</code>也是<code>hexo d</code></p>\n<h1 id=\"参考文章\">参考文章</h1>\n<p><a href=\"https://octopuslian.github.io/2022/04/27/hexo-next-7-8-0-theme-beautify/\">Hexo NexT主题7.8.0新版本美化</a></p>\n<p><a href=\"https://kalialbert.github.io/article/107153072.html\">hexo 主题 next7.8 版本配置美化</a></p>\n","categories":["博客搭建"],"tags":["Hexo","Node.js"]},{"title":"hexo+next主题设置中的各种bug","url":"/posts/648ab6b0/","content":"<p>官方教程也有bug…恼火，进行一些记录</p>\n<span id=\"more\"></span>\n<h1 id=\"本地搜索插件\">本地搜索插件</h1>\n<p>按照官网，首先git bash安装插件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>\n<p>然后在hexo配置文件中添加如下内容：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">search:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">search.xml</span></span><br><span class=\"line\">  <span class=\"attr\">field:</span> <span class=\"string\">post</span></span><br><span class=\"line\">  <span class=\"attr\">content:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">format:</span> <span class=\"string\">html</span></span><br></pre></td></tr></table></figure>\n<p>预览好好的，部署之后出现了搜索栏奇奇怪怪还有个一直转的圈，搜了一圈，解决方案如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">search:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">search.json</span></span><br><span class=\"line\">  <span class=\"attr\">field:</span> <span class=\"string\">post</span></span><br><span class=\"line\">  <span class=\"attr\">content:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">format:</span> <span class=\"string\">html</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"添加访问量\">添加访问量</h1>\n<p>试了三种方法，一一说来：</p>\n<h2 id=\"百度统计-弃用\">百度统计（弃用）</h2>\n<p>百度统计配置很简单，按<a href=\"https://tongji.baidu.com/web/40019767/welcome/login\">官网</a>教程注册账号，复制一个id码到next主题的配置即可。但是，百度统计能看到访问量，无法显示在文章中，搜了半天也没有结果，遂放弃。</p>\n<h2 id=\"leancloud-弃用\">Leancloud（弃用）</h2>\n<p>先注册了.cn结尾的Leancloud，需要CNAME一下域名，本博客部署在gitee pages上的，没有买域名，往上搜索一圈无果，遂放弃。</p>\n<p>搜索过程中看到有说Leancloud国际版不需要解析域名，注册后，按照流程走了一边（创建类，部署实例等等，以及next主题和hexo的设置），发现仍然显示不上去，某次尝试中无意间看到next主题设置里有一行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Required for apps from CN region</span></span><br></pre></td></tr></table></figure>\n<p>我猜是因为这个原因不行，最终放弃。</p>\n<h2 id=\"不蒜子\">不蒜子</h2>\n<p>居然最后才发现这个最简单的方法，直接在next的配置里把<code>busuanzi_count:</code> 设为<code>true</code>，全站访问人数访问量<code>true</code>或<code>false</code>设置一下即可。</p>\n<h1 id=\"数学公式渲染\">数学公式渲染</h1>\n<p>更新于2022.9.14</p>\n<p>我本来的npm安装了太多插件，依赖乱到啥也装不了啥也卸载不了，最后重开了一个，按照next主题文档和当时留下的博客重新装了插件（hexo和next设置都没变），但是发现数学公式渲染不出来了。。。</p>\n<p>原本用的next主题文档里给的Katex指南，遂改成文档里给的Mathjax，但是太丑了，不能忍，还是决定折腾Katex，网上教程包括<code>hexo-renderer-markdown-it</code>，<code>hexo-renderer-markdown-it-plus</code>，<code>hexo-renderer-markdown-it-katex</code>，<code>@upupming/hexo-renderer-markdown-it-plus</code>等等。</p>\n<p>在我这唯一能用的是<code>hexo-renderer-markdown-it-katex</code>，我也不知道为什么。。。</p>\n<p>在next主题设置中添加：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">markdown:</span></span><br><span class=\"line\">  <span class=\"attr\">render:</span></span><br><span class=\"line\">    <span class=\"attr\">html:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">xhtmlOut:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"attr\">breaks:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">linkify:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">typographer:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"attr\">anchors:</span></span><br><span class=\"line\">    <span class=\"attr\">level:</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"attr\">collisionSuffix:</span> <span class=\"string\">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n","categories":["博客搭建"],"tags":["Hexo"]},{"title":"hexo博客文章加密","url":"/posts/4b91f054/","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"密码错误\" data-whm=\"校验错误\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"7f4d59080ea3f46c44b1330ed2fcf7beed16d140310b1db35066d789938f7889\">22e3370969064581c4636a86ec696b57dae0e7447d7714b1e3b1c5b1f454f563a73a830295ac69c887622ae1900261c178aec8b1ed4511efea8a8ee8117888e7396f4a8f8c76da789db70796988aee267123cf7d15d31775fc4118c401c7dd6af9584969df362b5900bdcf76491e1a9a2bfd927425b602bc00b83a9f8afde0d447a1ec4a958ee9db646d78d4369caf79377e5b54459bddc584f428f05d5128aa7dc561fce6aad0a9d3318031edf05fcaf416892ed23adbfaeaa77156dddfdd44266e3c05b0a913d99690ad8a7fbb5e46c6922db0be8932f232774e665be4999bab9a85cda05ac98d67084438d512b5fea41d4fe974b057aa27ab24c6f30793a5e55a8599df54b171257f419f962068711731855973c1866cabf65974434c03768bc942a79d9d34204a35177fc51efc677ca57ee177ed7f1274c9dc92ead5499e6b5c73755b21522b5c029d08485eae718ffbb34d867496f92e8af5c487b2735aef8e1ff2dacce4aa36faa66260acd7a6a88789ada07b95aae50f3c8cfd49e0d4a320bdf88f902440604e659c7dca936046b54577b8a9ab189561ebbff41fc0f8f1013cff181874c1f247049ece5ee26aa2797f49fc1069cde33e376bf23ba4a744898c6edbf99967528476fa0182bccb09b35daf970a58563e0ff404b7a1b6dfce1a60f2f758b182ee00b0677eee6ac2bf2b7efe3433cf1939d58b43fb5df0b79829d6ec162227660a4f0e1e823540bdad054708b887f9a6013323bc6d8144cadc050d2f97ae4dbebaf28dff1040c722f7f01fe32942fe6e04795fa5bbdf533caafaa4d48a4c9728d2ca4fbea2b6546d8b4aa6f0af112084b7f404a8a4857526e0c11a0a3ac44e3e9b48755337517067111b909f138f10421f0e9b1272d360179523ff2fadf7759955b44ecd337b6b82327ddf6a2830fd2649ffd170ef3d1628da450004ef0fe89cdd434c565a806b84f5d1e85054245c344a8f94aabd6fc4d710a04506eb91830e3764cca1099fb8259899b6232b41da4621a8a29b3ca814ef7b7853d00ce30d6bb075581300e8b007a805504d71bf4a559218db27d11dac06a6e51d313661b3caed233fc3d6ca609639e739f91aaef513ebc4f746efdf860449eafbb2eb4f0debbdeb7cf8e8c1be63fa93c5c3c6f9ac56cacd6d7cf45bb95e1ad27d0e08b8f21f9f5412c1ea56149f4beea9754fa00959902229654d54443474544516131d40f504588c5f6a8ccabea36e33bece47e56ac2d48b98bba582426289d3b253b6b84ffd259a394d9a122a51cab4f7d505cca7310b238a72f8084d92c12605943b79789bab401de6a3427193bb69c7fa80578e34b01993d614a95bb301252e5158cf834536d123d0e46a845335fc6b3058b1ca71108fc62044e0dd0bc726bf731e4a4cdee8560cbd30739eb6db63a33dc6152aebe468eb33cbff8eb49e6c749c45a9afccdfe4e75e3e65474af1c77579ba2cde41112bfa077b57893d9e54ab5a4ef0998d5fba117b7909e6e48111643ccf852deabd7fbf16c9d8e5f678737734f865c7eda80f773b0b6317c6e29f4802fb0eba907ad1b5c6cad3df7333803d75a5fcfbad6bc77a9bbc2caf59a6db53c0ca70fe08b84fef5cfd1635462a3a855b9ad73e70aa38668889f85d5ca2f472c2bcac3ea0bbdb2bba9d83632aa85a4726a6ee4cf79ac5b98c60db60f47d2c4c46980d00434cf9767827f35e2d404f1abb8c435f38cb13636c0ccd8744c7edf61912eb0e57951dbb4e868ccf9701f85708fdc0dbd8ce3e6292262eb3d4acd8603d4dcb24830c7040a05a9c6543a0d05a3933147d06c5b1cd0482b05e43fc6d3b280aed2886798a309abb44f6b6f1024a9150d3ec850905c9d00644afc6fb09310d895730e80766bc142a5369d3a45e85be9015b2966b099365a8323b7beeb8f0c78c9319792f53c86c4eef78af12eccfd7cb90815df618da184de10ef4cd8f43e1f584998b0f08118061d1558095d15bd2486a648a5fe50ba8a50a2547894ad18bce5ca8fe0d5e38359cfa6528d9d4f54e116540aa19881a8396be1c2874084a6d0c5d30bc1b25b8042e691bfc6d913714a4a073c007c9615f97383e9ec166101241b8178345f04346e96d02bdc72126785ffe964b9c23e3ac511f929c88892917efa9640a76683c39b546497bd901524f9779e115f623c0167c3412795905cbd189d14694b67b2c2bf256046db03826683eebf14a0c46bc3945e58492d5043a62af338104b9468e14ee7e009aa9d475d820aa2d56b33c3a305a951665ee29e4eec5940a28702c0951335866247bd6b25e1d17d27bf781476ac8ae681273c44ae48991ce550f27cfc80846e976ac0cb5692fe499d3971f2707b43c3acd523db91d872bc04e96a1ae82c3757c2db2532153c2320be2835ea235ea8a16a2b646f4b373f862978d3c461ba40ef399281d30885d88918586c4492c57ccdf464f76bd307e7266e93e19492c78dcb960cd105419394250dcf253501f440ea00afcd1cce1d21ad7befdc3583b13e6a85cadd2245061d9de071f5a1d4ed2d3c42a520402df17d3c15f10a22a15b08d3f7f7d4ebb616ac7890abfe98fba8b6028e5801e3379d6d27fec36a64136f49091d666d7899f2e51e249b2a783d059a370b64e3f9e1f3920e4836ce1a24f9d1f5cec25d33cfde60d44ccbd3804ab11b9cbef9243a211a0c508ab94b060f5947432719e7d3cdc4f79161e0ac9ecaec1a878407c875a8a0ad29f41643e85414fa908b5c5bac8a73aa3d0920296bf06ce0742cfe84a8105c40db868c7d3cee1ab3890f3bd8ce5f72b352b5fdaadf2ee4f51aa625efbfbe8cdd485b982e6a1b20d95f6ade5e0e8ee72c1ea912a1c5dca7c7d43a15a3cc563992325fd9c17351a651bac0b98163ab769dde7a0d5ebc691e9c69a3bedb010c22661097eaf33014c53779a36b9518d4c8f58c8cb65ea695f5a501d6da5422482b932282f56a80a8e7a66b5fe4025744c84627c01a8ac59535c9d0c03036eb22e43f91f41ce74ac81f802d6ed315d6e14a95dd1d5f6f664d94f724ddaeb1c77683d6272defaf7867ea24b5814a1f2b7c86dc71e64c27b74e49eba8f4d2e302ee1c1a66dac9a8b6e42abfd3a5109b26f9a0fe78b1c0713acd9073668c6170570e40c5065faee563d209e3d81e34f7e31612a97c21c1b909c9110bb593f4e5efa075d0aa041c50d3b7dd64ed75c0638603c111a53aa8724c35c5fa7b8a0a5615df850e9337c77f938f09ed7f629ee7b7a621c8e5d254bdb9ba27067ad736a5e4cadd3019b14e2433c48a5819c096732ae30bfdb24677a4e6526a5c39b99a1f1de2e5f742f7cf78934f6a7e92a34c36c332e8ba1e7ca1a0023ddbb9c79ef2617e52fb92f9a6e7af6be3ac2ff5718719e20e57fa00620dc3c71fcfc9160be02390ecc79f1c12797ef9b383625bfb452e4e5b9cc67da45a688effcb4fccaa3aa80dcea0a323f6a511b7c52e3f034eb66036f4816f04cde5333bf6ac537bb48784c090fb1aae87799b26eb20c7782d85a0d438b0f81e535bf379f8a1b7147bf65acf24a3e5d7f3a09d18b582adf41f855f0d671fd2cd18f79b72f8a685855925575def2a161d98e817c6e724eab589a4d470ef6a3b6bee77f2235de157d9ff3301a12560f97d17fa2059e7c4ba638f7681d58ecbcb5a0c6b83da923bc57bc886d3cdb46243eecfbc830bc61f84eab52e38dc94bc88a4e98b18198f0325a75dfe1786b2d98ca0d32ba9f6e3acce3c3f11250f29af281d86f30612784b58ac321696335ff59ea6913dc01de8c8d343fdad0739d1ffe889afc2b3aba4217ddfe</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-blink\">\n      <input class=\"hbe hbe-input-field hbe-input-field-blink\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-blink\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-blink\" data-content=\"密码是try\">密码是try</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","categories":["博客搭建"],"tags":["Hexo","加密文章"]},{"title":"【Github】SSH连接Github上传项目（包含协作项目）","url":"/posts/39b0b687/","content":"<p>SSH连接Github上传项目的步骤</p>\n<span id=\"more\"></span>\n<h1 id=\"前置\">前置</h1>\n<p>Git的安装、Github的注册等这里不介绍了，以下内容要在git bash中完成（Windows系统），命令行就可以（Linux系统）</p>\n<h1 id=\"配置git用户信息\">配置Git用户信息</h1>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">&quot;Github账号用户名&quot;</span></span><br><span class=\"line\">git config --global user.email Github账号邮箱</span><br></pre></td></tr></table></figure>\n<h1 id=\"配置密钥\">配置密钥</h1>\n<p>输入以下指令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b 4096 -C Github账号邮箱</span><br></pre></td></tr></table></figure>\n<p>如果需要修改密钥存放在系统中的位置，根据弹出内容修改即可，如果直接回车则存放在<code>~/.ssh</code>，公钥为<code>id_rsa.pub</code>，私钥为 <code>id_rsa</code></p>\n<p>（Linux系统）依次输入以下指令打开文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"string\">&quot;<span class=\"subst\">$(ssh-agent -s)</span>&quot;</span></span><br><span class=\"line\">ssh-add ~/.ssh/id_rsa</span><br><span class=\"line\"><span class=\"built_in\">cat</span> ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>\n<p>（Windows系统）在<code>C:\\user\\xxx\\.ssh\\</code>中找到<code>id_rsa.pub</code>，打开文件：</p>\n<p>将文件中的内容复制下来，在Github个人信息的Settings里面：</p>\n<img data-src=\"/posts/39b0b687/image-20221116234821085.png\" class=\"\" title=\"image-20221116234821085\">\n<p>添加到SSH里就可以了：</p>\n<img data-src=\"/posts/39b0b687/image-20221116234847595.png\" class=\"\" title=\"image-20221116234847595\">\n<h1 id=\"创建项目并连接\">创建项目并连接</h1>\n<p>在<a href=\"https://github.com/\">Github</a>上创建新项目，复制下它的SSH连接（项目主页Code下拉里的），<code>git@github.com:xxx.git</code>，在你自己本地项目的文件夹里打开命令行（Windows下右键Git Bash）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git remote add origin git@github.com:xxx.git</span><br></pre></td></tr></table></figure>\n<p>或者，不用上面的代码，直接<code>git clone git@github.com:xxx.git</code>也可以。</p>\n<p>这时候输入<code>git remote -v</code>应该会显示下面两行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">origin  git@github.com:用户名/项目名.git (fetch)</span><br><span class=\"line\">origin  git@github.com:用户名/项目名.git (push)</span><br></pre></td></tr></table></figure>\n<p>即成功连接了</p>\n<h1 id=\"拷贝老项目到自己的新项目\">拷贝老项目到自己的新项目</h1>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:xxx.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> xxx</span><br><span class=\"line\">git remote set-url --push origin git@github.com:yyy.git</span><br><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n<p><code>xxx</code>是老项目，<code>yyy</code>自己的项目</p>\n<p>输入<code>git remote -v</code>，会出现一行以<code>(fetch)</code>结尾，一行以<code>(push)</code>结尾。如果在<code>set-url</code>之前，二者前面的github地址是一样的，而进行过上述最后一行代码后，二者就不一样了，fetch来自老项目，push来自新项目</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout -b 本地分支名 origin/远程分支名</span><br></pre></td></tr></table></figure>\n<h1 id=\"增加项目协作者\">增加项目协作者</h1>\n<p>度娘说，一种方式是用fork+pull request，另一种是加协作者，前者看着有些复杂，这里说后者。</p>\n<p>在项目的settings-collaborators中添加用户，对方同意邀请。</p>\n<img data-src=\"/posts/39b0b687/image-20221116235503016.png\" class=\"\" title=\"image-20221116235503016\">\n<p>协作者在配置Git用户信息后，（可选配置密钥通过ssh连接项目），就可以使用常用命令了！</p>\n","categories":["工具"],"tags":["Github","Git"]},{"title":"【Git】Git常用命令","url":"/posts/48ce2890/","content":"<p>Git常用命令</p>\n<span id=\"more\"></span> \n<h1 id=\"概念图\">概念图</h1>\n<img data-src=\"/posts/48ce2890/git.jpg\" class=\"\" title=\"img\">\n<h1 id=\"克隆项目\">克隆项目</h1>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> 项目url</span><br></pre></td></tr></table></figure>\n<h1 id=\"初始化本地仓库\">初始化本地仓库</h1>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n<h1 id=\"添加远程仓库\">添加远程仓库</h1>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote add origin 项目url（https或ssh，ssh需要提前配置git）</span><br><span class=\"line\">git remote add origin <span class=\"comment\"># 查询当前远程仓库路径</span></span><br><span class=\"line\">git remote set-url origin 项目url <span class=\"comment\"># 修改远程仓库</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"上传项目\">上传项目</h1>\n<p>（将本地代码更新到仓库）输入以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;上传评论内容&quot;</span></span><br><span class=\"line\">git push -u origin main <span class=\"comment\"># origin是远程主机，main是本地分支名：远程分支名，如果相同可以省略只写一个，只在第一次推送的时候需要带 -u 参数</span></span><br></pre></td></tr></table></figure>\n<p>就完成上传项目了！</p>\n<h1 id=\"下拉项目\">下拉项目</h1>\n<h2 id=\"pull\">pull</h2>\n<p>（将仓库里的代码更新到本地）输入以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git pull origin main</span><br></pre></td></tr></table></figure>\n<p>origin是远程主机，main是省略的<code>远程分支名：本地分支名</code>，如果远程的与当前分支合并，可以省略本地分支名只写远程分支名。</p>\n<h2 id=\"fetch\">fetch</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git fetch origin main <span class=\"comment\"># origin是远程主机，main是远程分支名</span></span><br></pre></td></tr></table></figure>\n<p>如果不指定远程分支，会创建并更新所有远程分支的本地分支，设定当前分支的<code>FETCH_HEAD</code>为远程服务器的main分支，如果这时候执行<code>git merge FETCH_HEAD</code>，会把这个FETCH_HEAD合并到当前分支，也就完成<code>git pull main</code>的功能，但是这种方法能够让本地代码更新前可以使用<code>git log -p FETCH_HEAD</code>检查文件改变，再决定是否需要merge，避免一些损失</p>\n<h1 id=\"查看修改日志\">查看修改日志</h1>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --oneline <span class=\"comment\"># 一行一个简洁版</span></span><br></pre></td></tr></table></figure>\n<p>如果太长得不停<code>return</code>读取下一行，这时候按<code>q</code>退出log</p>\n<h1 id=\"回滚版本\">回滚版本</h1>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git reset --hard HEAD^ \t<span class=\"comment\"># 上一个版本</span></span><br><span class=\"line\">git reset --hard HEAD^^ <span class=\"comment\"># 上上一个版本</span></span><br><span class=\"line\">git reset --hard 版本号 <span class=\"comment\"># 指定版本号</span></span><br></pre></td></tr></table></figure>\n<p>其中版本号是<code>git log</code>中commit后面长串字符的前7位：</p>\n<img data-src=\"/posts/48ce2890/image-20221117000843454.png\" class=\"\" title=\"image-20221117000843454\">\n<p>或者是<code>git log --oneline</code>中的字符：</p>\n<img data-src=\"/posts/48ce2890/image-20221117000914860.png\" class=\"\" title=\"image-20221117000914860\">\n<p>回滚是本地回滚，如果没有提交就不会对远程仓库造成影响</p>\n<h1 id=\"分支操作\">分支操作</h1>\n<h2 id=\"查看分支\">查看分支</h2>\n<p>查看的是本地分支，打星的是当前分支</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git branch</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/48ce2890/image-20221117143038735.png\" class=\"\" title=\"image-20221117143038735\">\n<h2 id=\"创建分支\">创建分支</h2>\n<p>基于当前分支创建新分支<code>x</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git branch x</span><br></pre></td></tr></table></figure>\n<h2 id=\"切换分支\">切换分支</h2>\n<p>切换到分支<code>x</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout x</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建-切换\">创建+切换</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout -b x</span><br></pre></td></tr></table></figure>\n<p>如果考虑远程分支直接拉取：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout -b 本地分支名称 远程仓库名称/远程分支名称</span><br></pre></td></tr></table></figure>\n<h2 id=\"合并分支\">合并分支</h2>\n<p>将本地的<code>x</code>分支合并到<code>y</code>分支：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout y \t<span class=\"comment\"># 先切换到y分支</span></span><br><span class=\"line\">git merge x\t\t<span class=\"comment\"># 再将x合并到当前分支（y）</span></span><br></pre></td></tr></table></figure>\n<p>注意：如果在<code>x</code>和<code>y</code>分支对同一个文件都进行了修改会出现冲突无法合并</p>\n<h2 id=\"删除分支\">删除分支</h2>\n<p>删除<code>x</code>分支：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout y \t<span class=\"comment\"># 先切换到任意不是x的分支上</span></span><br><span class=\"line\">git branch -d x\t<span class=\"comment\"># 删除x分支</span></span><br></pre></td></tr></table></figure>\n","categories":["工具"],"tags":["Git"]},{"title":"【MIT 6.S081】Lab1: Xv6 and Unix utilities","url":"/posts/e0b3b1f5/","content":"<p>MIT 6.S081的<a href=\"https://pdos.csail.mit.edu/6.828/2021/labs/util.html#submit\">Lab1: Xv6 and Unix utilities</a>题解</p>\n<span id=\"more\"></span>\n<h1 id=\"boot-xv6-easy\">Boot xv6 (easy)</h1>\n<p>这个在<a href=\"https://www.lyroch.site/posts/4be1f6bb/\">环境配置</a>里已经做过了，注意退出系统是按<code>ctrl+a</code>后按<code>x</code>，查看进程是<code>ctrl+p</code>，根据后面报错和网上教程在这里先做一些调整：由于我的<code>/usr/bin</code>下有python3，于是把<code>grade-lab-util</code>文件的第一行修改为<code>#!/usr/bin python3</code></p>\n<h1 id=\"sleep-easy\">sleep (easy)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>实现UNIX的<code>sleep</code>程序，使得系统停止用户指定的时钟数，这里的时钟由xv6内核决定，程序放在<code>user/sleep.c</code></p>\n<h2 id=\"分析\">分析</h2>\n<p>首先对用户传的参数进行判断，错误的话打印错误信息并退出；之后将参数用提示中说的<code>atoi</code>转成整型再使用系统调用<code>sleep</code>就可以了。</p>\n<p>有兴趣的话可以去看内核代码<code>kernal/sysproc.c</code>中的函数<code>sys_sleep</code></p>\n<h2 id=\"实现\">实现</h2>\n<p>编辑<code>user/sleep.c</code>文件：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/types.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/stat.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;user/user.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> agrc, <span class=\"type\">char</span> *agrv[])</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(agrc &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: sleep time is required!\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> sleep_time = atoi(agrv[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    sleep(sleep_time);</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>编辑<code>Makefile</code>文件，在<code>UPROGS=\\</code>一栏添加如下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$U</span>/_sleep\\</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入下面的命令，注意不是官网上的<code>./grade-lab-util sleep</code>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-util <span class=\"built_in\">sleep</span></span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/e0b3b1f5/sleep.jpg\" class=\"\" title=\"sleep\">\n<h1 id=\"pingpong-easy\">pingpong (easy)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>使用系统调用实现两个进程使用管道通信，父进程向子进程发送信息，等待子进程结束，从管道读取子进程发的信息，打印<code>进程id: received pong</code>，结束进程；子进程打印<code>进程id: received ping</code> ，将信息发给父进程，结束子进程。程序放在<code>user/pingpong.c</code></p>\n<h2 id=\"分析\">分析</h2>\n<p>创建两个管道，一个用于父进程到子进程通信，另一个用于子进程到父进程通信。创建子进程，分别对父子进程编程：一个先写后读，一个先读后写。这里没有提示要用<code>close</code>，在官方文档对管道的解说里是有close的，写了下代码，关不关闭这里都是可以通过的。</p>\n<h2 id=\"实现\">实现</h2>\n<p>编辑<code>user/pingpong.c</code>文件：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/types.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/stat.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;user/user.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> agrc, <span class=\"type\">char</span> *agrv[])</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> p_cp[<span class=\"number\">2</span>], p_pc[<span class=\"number\">2</span>];</span><br><span class=\"line\">    pipe(p_cp);</span><br><span class=\"line\">    pipe(p_pc);</span><br><span class=\"line\">    <span class=\"type\">char</span> buf[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> pid = fork();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pid &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: fail to fork!\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(pid &gt; <span class=\"number\">0</span>) &#123;      <span class=\"comment\">// parent</span></span><br><span class=\"line\">        close(p_pc[<span class=\"number\">0</span>]);     <span class=\"comment\">// parent_to_child read</span></span><br><span class=\"line\">        close(p_cp[<span class=\"number\">1</span>]);     <span class=\"comment\">// child_to_parent write</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(write(p_pc[<span class=\"number\">1</span>], <span class=\"string\">&quot;p&quot;</span>, <span class=\"number\">1</span>) != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: parent fail to write!\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        close(p_pc[<span class=\"number\">1</span>]);     <span class=\"comment\">// parent_to_child write</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(read(p_cp[<span class=\"number\">0</span>], buf, <span class=\"number\">1</span>) != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: parent fail to read!\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        close(p_cp[<span class=\"number\">0</span>]);     <span class=\"comment\">// child_to_parent read</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(buf[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;c&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d: received pong\\n&quot;</span>, getpid());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: parent receives wrongly\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;  <span class=\"comment\">// child</span></span><br><span class=\"line\">        close(p_pc[<span class=\"number\">1</span>]);     <span class=\"comment\">// parent_to_child write</span></span><br><span class=\"line\">        close(p_cp[<span class=\"number\">0</span>]);     <span class=\"comment\">// child_to_parent read</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(read(p_pc[<span class=\"number\">0</span>], buf, <span class=\"number\">1</span>) != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: child fail to read!\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        close(p_pc[<span class=\"number\">0</span>]);     <span class=\"comment\">// parent_to_child read</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(buf[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;p&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d: received ping\\n&quot;</span>, getpid());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: child receives wrongly\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(write(p_cp[<span class=\"number\">1</span>], <span class=\"string\">&quot;c&quot;</span>, <span class=\"number\">1</span>) != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: child fail to write!\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        close(p_cp[<span class=\"number\">1</span>]);     <span class=\"comment\">// child_to_parent write</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>简略版（省去close和错误信息）：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/types.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/stat.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;user/user.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> agrc, <span class=\"type\">char</span> *agrv[])</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> p_cp[<span class=\"number\">2</span>], p_pc[<span class=\"number\">2</span>];</span><br><span class=\"line\">    pipe(p_cp);</span><br><span class=\"line\">    pipe(p_pc);</span><br><span class=\"line\">    <span class=\"type\">char</span> buf[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> pid = fork();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pid &gt; <span class=\"number\">0</span>) &#123;      <span class=\"comment\">// parent</span></span><br><span class=\"line\">        write(p_pc[<span class=\"number\">1</span>], <span class=\"string\">&quot;p&quot;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">        read(p_cp[<span class=\"number\">0</span>], buf, <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(buf[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;c&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d: received pong\\n&quot;</span>, getpid());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;  <span class=\"comment\">// child</span></span><br><span class=\"line\">        read(p_pc[<span class=\"number\">0</span>], buf, <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(buf[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;p&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d: received ping\\n&quot;</span>, getpid());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        write(p_cp[<span class=\"number\">1</span>], <span class=\"string\">&quot;c&quot;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>编辑<code>Makefile</code>文件，在<code>UPROGS=\\</code>一栏添加如下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$U</span>/_pingpong\\</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-util pingpong</span><br></pre></td></tr></table></figure>\n<p>上面是简略版代码的测试结果，下面是完整版代码的测试结果，均通过：</p>\n<img data-src=\"/posts/e0b3b1f5/pingpong.jpg\" class=\"\" title=\"pingpong\">\n<h1 id=\"primes-moderate-hard\">primes (moderate/hard)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>利用<code>pipe</code>和<code>fork</code>完成埃式筛素数，输出2-35的所有素数，程序放在<code>user/primes.c</code></p>\n<h2 id=\"分析\">分析</h2>\n<p>给出了思路提示：</p>\n<img data-src=\"/posts/e0b3b1f5/primehint.jpg\" class=\"\" title=\"primehint\">\n<ul>\n<li>\n<p>图片的意思是每个进程取出当前最小的素数输出，并利用埃式筛的原理去除该素数的倍数，将剩余的数传给下一个进程，直到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>35</mn></mrow><annotation encoding=\"application/x-tex\">35</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">5</span></span></span></span></p>\n</li>\n<li>\n<p>上述思路父子进程不断嵌套，考虑在一个无尽的循环里对父子进程分别操作</p>\n</li>\n<li>\n<p>有一个数组用于保存当前的素数集，数组的第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 位存放素数个数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 至 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 位存放对应的每一个素数</p>\n</li>\n<li>\n<p>每次循环里，父进程输出素数集的第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 位即当前的第一个素数，并对剩下的素数进行筛选存入一个临时素数集（存放规则仍同上）中，筛完将其通过管道整体送给子进程，等待子进程完成后中止</p>\n</li>\n<li>\n<p>每次循环里，子进程读出管道中的第一个整型数据（应为父进程给的素数个数），如果为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 中止进程，否则将管道中剩余数据全部读入素数集，开新管道，开新进程</p>\n</li>\n<li>\n<p>注意主进程要等所有进程结束才能结束，且注意关闭文件描述符防止越界</p>\n</li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<p>编辑<code>user/primes.c</code>文件：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/types.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/stat.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;user/user.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> agrc, <span class=\"type\">char</span> *agrv[])</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> p[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> prime[<span class=\"number\">35</span>], newprime[<span class=\"number\">35</span>];    <span class=\"comment\">// [1...[0]]: current primes</span></span><br><span class=\"line\">    pipe(p);</span><br><span class=\"line\">    prime[<span class=\"number\">0</span>] = <span class=\"number\">34</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= <span class=\"number\">35</span>; i++) &#123;</span><br><span class=\"line\">        prime[i - <span class=\"number\">1</span>] = i;           <span class=\"comment\">// init</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> pid = fork();</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(pid &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;error: fail to fork!\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(pid &gt; <span class=\"number\">0</span>) &#123;          <span class=\"comment\">//parent</span></span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;prime %d\\n&quot;</span>, prime[<span class=\"number\">1</span>]);</span><br><span class=\"line\">            close(p[<span class=\"number\">0</span>]);            <span class=\"comment\">// read close</span></span><br><span class=\"line\">            newprime[<span class=\"number\">0</span>] = <span class=\"number\">0</span>;        <span class=\"comment\">// count new primes</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= prime[<span class=\"number\">0</span>]; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(prime[i] % prime[<span class=\"number\">1</span>] != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                    newprime[++newprime[<span class=\"number\">0</span>]] = prime[i];</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            write(p[<span class=\"number\">1</span>], newprime, <span class=\"keyword\">sizeof</span>(<span class=\"type\">int</span>) * (newprime[<span class=\"number\">0</span>] + <span class=\"number\">1</span>));</span><br><span class=\"line\">            close(p[<span class=\"number\">1</span>]);</span><br><span class=\"line\">            wait(<span class=\"number\">0</span>);</span><br><span class=\"line\">            <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            close(p[<span class=\"number\">1</span>]);            <span class=\"comment\">// close write</span></span><br><span class=\"line\">            read(p[<span class=\"number\">0</span>], prime, <span class=\"keyword\">sizeof</span>(<span class=\"type\">int</span>));</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(prime[<span class=\"number\">0</span>] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);            <span class=\"comment\">// finish: no more primes</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            read(p[<span class=\"number\">0</span>], prime + <span class=\"number\">1</span>, <span class=\"keyword\">sizeof</span>(<span class=\"type\">int</span>) * prime[<span class=\"number\">0</span>]);</span><br><span class=\"line\">            close(p[<span class=\"number\">0</span>]);</span><br><span class=\"line\">            pipe(p);</span><br><span class=\"line\">            pid = fork();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>编辑<code>Makefile</code>文件，在<code>UPROGS=\\</code>一栏添加如下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$U</span>/_primes\\</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-util primes</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/e0b3b1f5/prime.jpg\" class=\"\" title=\"prime\">\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">make qemu</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/e0b3b1f5/prime1.jpg\" class=\"\" title=\"prime1\">\n<h1 id=\"find-moderate\">find (moderate)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>写一个模仿UNIX中<code>find</code>指令的简单程序，指令给出特定查找目录，和特定查找文件名，输出目录树中所有匹配的文件，程序放在<code>user/find.c</code></p>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p>看<code>ls.c</code>的源代码可能会用到的东西</p>\n<ul>\n<li>\n<p><code>fstat(路径，文件信息结构体指针)</code>：将路径指向的文件（文件已打开）信息拷贝至后面所给的结构体，<code>stat</code>基本一样但是路径指向的文件不是已打开状态。</p>\n</li>\n<li>\n<p><code>open</code>函数打开文件成功返回文件描述符，否则返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span></p>\n</li>\n<li>\n<p><code>read</code>函数从指定设备/文件中读取指定字节数，成功则返回读取的字节数，否则返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span></p>\n</li>\n<li>\n<p><code>strcmp</code>函数比较传进去两个字符串的值，相等返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，否则返回非 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></p>\n</li>\n<li>\n<p>其余关于文件的标识什么的看英文大概能猜，问题不大</p>\n</li>\n</ul>\n</li>\n<li>\n<p><code>ls.c</code>源代码浅说：</p>\n<ul>\n<li>\n<p><code>ls</code>函数的流程</p>\n<ul>\n<li>\n<p>尝试打开文件，获得文件信息（代码<code>switch</code>之前）</p>\n</li>\n<li>\n<p>（代码<code>switch</code>之后）如果给的路径是文件输出文件信息，如果给的路径是目录，利用<code>while</code>循环读该目录下的所有文件/目录，获得文件信息后输出文件信息</p>\n</li>\n</ul>\n</li>\n<li>\n<p><code>fmtname</code>函数：取传入路径字符串的最深文件名，如果是<code>./a/b</code>，返回的是<code>b</code>；如果是<code>./a</code>，返回的是<code>a</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p>思路：对<code>ls.c</code>进行修改，新的<code>ls</code>函数中，如果路径是文件就利用<code>fmtname</code>函数取文件名进行比较；如果路径是目录在获得文件信息后递归这个文件/目录</p>\n</li>\n<li>\n<p>提示：不要递归到<code>.</code>和<code>..</code>，否则会无限递归</p>\n</li>\n<li>\n<p><strong>坑点</strong>，<code>ls.c</code>打印文件时有用空格对齐（在<code>fmtname</code>函数的倒数第二步），而我们对是否是所需文件的判断在新的<code>ls</code>函数判断出路径是文件之后，使用<code>fmtname</code>函数取文件名，多余空格会影响<code>strcmp</code>的结果</p>\n</li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<p>编辑<code>user/find.c</code>文件：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/types.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/stat.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;user/user.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/fs.h&quot;</span></span></span><br><span class=\"line\"><span class=\"type\">char</span>* <span class=\"title function_\">newfmtname</span><span class=\"params\">(<span class=\"type\">char</span> *path)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">static</span> <span class=\"type\">char</span> buf[DIRSIZ+<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"type\">char</span> *p;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(p = path + <span class=\"built_in\">strlen</span>(path); p &gt;= path &amp;&amp; *p != <span class=\"string\">&#x27;/&#x27;</span>; p--);</span><br><span class=\"line\">    p++;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">strlen</span>(p) &gt;= DIRSIZ)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">    memmove(buf, p, <span class=\"built_in\">strlen</span>(p));</span><br><span class=\"line\">    buf[<span class=\"built_in\">strlen</span>(p)] = <span class=\"number\">0</span>;     <span class=\"comment\">// different from fmtname in ls.c</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> buf;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">findfile</span><span class=\"params\">(<span class=\"type\">char</span> *path, <span class=\"type\">char</span> *name)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">char</span> buf[<span class=\"number\">512</span>], *p;</span><br><span class=\"line\">    <span class=\"type\">int</span> fd;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">dirent</span> <span class=\"title\">de</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">stat</span> <span class=\"title\">st</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>((fd = open(path, <span class=\"number\">0</span>)) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;ls: cannot open %s\\n&quot;</span>, path);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(fstat(fd, &amp;st) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;ls: cannot stat %s\\n&quot;</span>, path);</span><br><span class=\"line\">        close(fd);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>(st.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> T_FILE:            <span class=\"comment\">// check this filename</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">strcmp</span>(newfmtname(path), name) == <span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%s\\n&quot;</span>, path);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> T_DIR:             </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">strlen</span>(path) + <span class=\"number\">1</span> + DIRSIZ + <span class=\"number\">1</span> &gt; <span class=\"keyword\">sizeof</span> buf) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;ls: path too long\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">strcpy</span>(buf, path);</span><br><span class=\"line\">        p = buf + <span class=\"built_in\">strlen</span>(buf);</span><br><span class=\"line\">        *p++ = <span class=\"string\">&#x27;/&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(read(fd, &amp;de, <span class=\"keyword\">sizeof</span>(de)) == <span class=\"keyword\">sizeof</span>(de)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(de.inum == <span class=\"number\">0</span>)</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"built_in\">strcmp</span>(de.name, <span class=\"string\">&quot;.&quot;</span>) == <span class=\"number\">0</span> || <span class=\"built_in\">strcmp</span>(de.name, <span class=\"string\">&quot;..&quot;</span>) == <span class=\"number\">0</span>)</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            memmove(p, de.name, DIRSIZ);    <span class=\"comment\">// add file name to path</span></span><br><span class=\"line\">            p[DIRSIZ] = <span class=\"number\">0</span>;</span><br><span class=\"line\">            findfile(buf, name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    close(fd);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> agrc, <span class=\"type\">char</span> *agrv[])</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(agrc != <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">fprintf</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;wrong path or filename!\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    findfile(agrv[<span class=\"number\">1</span>], agrv[<span class=\"number\">2</span>]);</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>编辑<code>Makefile</code>文件，在<code>UPROGS=\\</code>一栏添加如下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$U</span>/_find\\</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-util find</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/e0b3b1f5/find.jpg\" class=\"\" title=\"find\">\n<h1 id=\"xargs-moderate\">xargs (moderate)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>写一个模仿UNIX中<code>xargs</code>指令的简单程序，从标准输入读取行并为每一行运行一个命令，将该行作为参数提供给命令，程序放在<code>user/xargs.c</code></p>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p>题意：可能因为我没用过UNIX系统中的这个指令，看了半天也没太看明白，先写了个输出传入main函数的参数的程序，发现输出的是<code>xargs</code>后面的部分，那这个指令大概是标准输入读取的是前面部分指令执行的结果（已经执行过了，直接读就可以），标准输入每行添加到原本的参数（argv）后面执行。</p>\n</li>\n<li>\n<p>将原本的参数放进一个新的字符串数组，标记一下原参数结尾的位置，每从标准输入读一行（<code>\\n</code>结尾），将其添加到参数后面，<code>fork()</code> 一个子程序用来执行这个指令</p>\n</li>\n<li>\n<p><code>kernal/exec.c</code>中可以查到<code>exec</code>指令的代码，第一个参数传名字第二个参数传字符串数组</p>\n</li>\n<li>\n<p>注意<code>kernel/param.h</code>声明了<code>MAXARG</code>，<code>exec</code>的最大参数量，可以用于开数组</p>\n</li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/types.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/stat.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;user/user.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/fs.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;kernel/param.h&quot;</span></span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> argc, <span class=\"type\">char</span>* argv[])</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">char</span>* newargv[MAXARG];      <span class=\"comment\">// args for exec</span></span><br><span class=\"line\">    <span class=\"type\">char</span>** lastpos = newargv;   <span class=\"comment\">// arg_last_pos</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; argc; i++, lastpos++)</span><br><span class=\"line\">        *lastpos = argv[i];     <span class=\"comment\">// point to argv</span></span><br><span class=\"line\">    <span class=\"type\">char</span>** argv_cur = lastpos;  <span class=\"comment\">// fill argv</span></span><br><span class=\"line\">    <span class=\"type\">char</span> buf[MAXARG][<span class=\"number\">100</span>];      <span class=\"comment\">// store args from stdin</span></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(buf, <span class=\"number\">0</span>, MAXARG * <span class=\"number\">100</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (read(<span class=\"number\">0</span>, buf[i] + j, <span class=\"number\">1</span>) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (buf[i][j] == <span class=\"string\">&#x27; &#x27;</span>) &#123; <span class=\"comment\">// end of a word</span></span><br><span class=\"line\">            buf[i][j] = <span class=\"number\">0</span>;</span><br><span class=\"line\">            *argv_cur = buf[i];</span><br><span class=\"line\">            argv_cur++;</span><br><span class=\"line\">            i++, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (buf[i][j] == <span class=\"string\">&#x27;\\n&#x27;</span>) &#123;</span><br><span class=\"line\">            buf[i][j] = <span class=\"number\">0</span>;</span><br><span class=\"line\">            *argv_cur = buf[i];</span><br><span class=\"line\">            i = j = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"type\">int</span> pid = fork();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pid == <span class=\"number\">0</span>) &#123;     <span class=\"comment\">// children</span></span><br><span class=\"line\">                argv_cur++;</span><br><span class=\"line\">                **argv_cur = <span class=\"number\">0</span>;</span><br><span class=\"line\">                exec(argv[<span class=\"number\">1</span>], newargv);</span><br><span class=\"line\">                <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;              <span class=\"comment\">// parent</span></span><br><span class=\"line\">                wait(<span class=\"number\">0</span>);</span><br><span class=\"line\">                argv_cur = lastpos;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            j++;                <span class=\"comment\">// next char </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>编辑<code>Makefile</code>文件，在<code>UPROGS=\\</code>一栏添加如下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$U</span>/_xargs\\</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>在系统里输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sh &lt; xargstest.sh</span><br></pre></td></tr></table></figure>\n<p>以下是文档给的样例和测试的两个结果截图：</p>\n<img data-src=\"/posts/e0b3b1f5/xargs.jpg\" class=\"\" title=\"xargs\">\n","categories":["操作系统"],"tags":["OS","MIT 6.S081"]},{"title":"【MIT 6.S081】Lab3: Page Tables","url":"/posts/16f06914/","content":"<p>MIT 6.S081的<a href=\"https://pdos.csail.mit.edu/6.828/2021/labs/pgtbl.html\">Lab3: Page Tables</a> 题解</p>\n<span id=\"more\"></span>\n<h1 id=\"speed-up-system-calls-easy\">Speed up system calls (easy)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>操作系统如Linux通过在用户空间和内核之间共享只读区域中的数据来加速某些系统调用，实现系统调用<code>getpid()</code>的优化。</p>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p>说明：创建每个进程时映射一个只读页面到虚拟地址<code>USYSCALL</code>（在 <code>memlayout.h</code> 中定义），页面开头存储<code>struct ussyscall</code>（也在<code>memlayout.h</code>中定义），并初始化它以存储当前进程的 PID，用户空间已有<code>ugetpid()</code> ，使用USYSCALL 映射</p>\n</li>\n<li>\n<p>先看<code>ugetpid()</code>，将宏定义的<code>USYSCALL</code>所指内容强制转换成<code>usyscall</code>类型的指针从而找到进程号，就是找了共享的数据</p>\n</li>\n<li>\n<p>提示要在<code>kernel/proc.c</code>中的<code>proc_pagetable()</code>函数中完成映射，可以看到这个函数返回了一个分配的页表，过程用到了提示中也给到的<code>mappages</code>做其他东西的映射，所以要用类似的形式写一个映射USYSCALL，看一下这些形式用的函数都是什么意思：</p>\n<ul>\n<li>\n<p><code>int mappages(pagetable_t pagetable, uint64 va, uint64 size, uint64 pa, int perm)</code>：为从<code>va</code>开始的虚拟地址（这题就是USYSCALL了）创建PTE，指向<code>pa</code>开始的物理地址（这里要在proc结构体里多安排一个指针指向实际内容，也就是前面的<code>usyscall</code>指针）；va和size可能不是页面对齐的（这个不知道有啥用）；成功时返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>，如果<code>walk()</code>不能分配所需的页表返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>；<code>perm</code>是选用在<code>kernel/riscv.h</code>中的参数（也是PTE的属性，RW跟是读写权限），根据提示这里为了普通用户只读应使用<code>PTE_R | PTE_U</code></p>\n</li>\n<li>\n<p><code>uvmunmap(pagetable_t pagetable, uint64 va, uint64 npages, int do_free)</code>：删除从<code>va</code>开始的映射的<code>npages</code>，<code>va</code>必须是页面对齐的。映射必须存在，是可以选择性的释放内存</p>\n</li>\n<li>\n<p><code>uvmfree(pagetable_t pagetable, uint64 sz)</code>：释放用户内存页，然后释放页-表页</p>\n</li>\n<li>\n<p>这题如果映射失败，需要把之前两个映射成功的全部释放，再释放用户内存页，因为在上述<code>uvmfree()</code>函数中调用了一个<code>freewalk()</code>的函数，要求必须已经删除所有叶子映射</p>\n</li>\n<li>\n<p>提示要在<code>kernel/proc.c</code>中的<code>allocproc()</code>函数里初始化上面映射的内容，这个函数中看到了给熟悉的trapframe分配页表的判定，所以模仿着写一个对usyscall分配页表的判定；初始化那就是将这个指针指向的内容<code>pid</code>赋值为这个函数前段已经获得了的<code>pid</code>值</p>\n</li>\n</ul>\n</li>\n<li>\n<p>提示在<code>kernel/proc.c</code>中的<code>freeproc()</code>函数中释放页面：模仿trapframe的写法即可，查了一下释放trapframe指针后面的函数<code>proc_freepagetable()</code>函数，用<code>uvmunmap</code>解除了上面分配的<code>TRAMPOLINE</code>和<code>TRAPFRAME</code>后释放页，根据上面已经查过的需要删除所有叶子映射，这里的<code>proc_freepagetable()</code>函数也需要改动</p>\n</li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<p>注意：在写的过程中会出现<code>USYSCALL</code>报错和<code>struct usyscall *</code>在使用时报错，而<code>kernel/memlayout.h</code>中是用了<code>ifdef LAB_PGTBL</code>，所以不用管，跑起来不会报错</p>\n<p>在<code>kernel/proc.c</code>中的<code>proc_pagetable()</code>函数中补充：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// map USYSCALL</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (mappages(pagetable, USYSCALL, PGSIZE,</span><br><span class=\"line\">        (uint64)(p-&gt;ucall), PTE_R | PTE_U) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    uvmunmap(pagetable, TRAMPOLINE, <span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    uvmunmap(pagetable, TRAPFRAME, <span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    uvmfree(pagetable, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/proc.h</code>中补充：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Per-process state</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span> &#123;</span></span><br><span class=\"line\">...</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">usyscall</span> *<span class=\"title\">ucall</span>;</span>      <span class=\"comment\">// for USYSCALL</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/proc.c</code>中的<code>allocproc()</code>函数中补充：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Allocate a usyscall page.</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ((p-&gt;ucall = (<span class=\"keyword\">struct</span> usyscall*)kalloc()) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    freeproc(p);</span><br><span class=\"line\">    release(&amp;p-&gt;lock);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\">p-&gt;ucall-&gt;pid = p-&gt;pid; <span class=\"comment\">// init usyscall</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/proc.c</code>中的<code>freeproc()</code>函数中补充：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(p-&gt;ucall)</span><br><span class=\"line\">    kfree((<span class=\"type\">void</span>*)p-&gt;ucall);</span><br><span class=\"line\">p-&gt;ucall = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"comment\">// before proc_freepgetable()</span></span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/proc.c</code>中的<code>proc_freepagetable()</code>函数中补充：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">uvmunmap(pagetable, USYSCALL, <span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-pgtbl ugetpid</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/16f06914/getpid.jpg\" class=\"\" title=\"getpid\">\n<h1 id=\"print-a-page-table-easy\">Print a page table (easy)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>写一个函数打印页表内容，参数是一个<code>pagetable_t</code>，在<code>exec.c</code>的<code>return argc</code>前添加代码<code>if(p-&gt;pid==1) vmprint(p-&gt;pagetable)</code>，打印格式：第一行<code>page table 参数</code>，之后每行一个PTE，以<code>..</code>表示树中的深度”，后面依次打印PTE 索引、PTE 位和 PTE 中提取的物理地址</p>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p><code>vmprint()</code>写在<code>vm.c</code>中，函数要在<code>defs.h</code>声明</p>\n</li>\n<li>\n<p>上一个题有查到<code>kernel/vm.c</code>中的<code>freewalk()</code>函数是递归释放页表的，提示中也提到了这个函数，用递归的方式释放所有的叶子，把释放改成打印信息即可</p>\n</li>\n<li>\n<p>提示在<code>printf</code>里用<code>%p</code>打印十六进制PTE</p>\n</li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<p>在<code>kernel/exec.c</code>中<code>return argc</code>之前添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// print pagetable</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(p-&gt;pid == <span class=\"number\">1</span>)</span><br><span class=\"line\">    vmprint(p-&gt;pagetable);</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/defs.h</code>中添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// vm.c</span></span><br><span class=\"line\"><span class=\"type\">void</span>            <span class=\"title function_\">vmprint</span><span class=\"params\">(<span class=\"type\">pagetable_t</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/vm.c</code>中添加两个函数，其中<code>vmprint_help()</code>是用于递归打印的函数，<code>vmprint()</code>用于打印第一行和开启递归（主要是需要打印一个单独的第一行，递归改迭代太麻烦，单独写一个函数用于递归了）：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">vmprint_help</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> pagetable, <span class=\"type\">int</span> depth)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">512</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">pte_t</span> pte = pagetable[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((pte &amp; PTE_V) &amp;&amp; depth &lt;= <span class=\"number\">3</span>) &#123; <span class=\"comment\">// valid pte</span></span><br><span class=\"line\">            uint64 child = PTE2PA(pte);</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;..&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; depth - <span class=\"number\">1</span>; i++)</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">&quot; ..&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d: pte %p pa %p\\n&quot;</span>, i, pte, child);</span><br><span class=\"line\">            vmprint_help((<span class=\"type\">pagetable_t</span>)child, depth + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">vmprint</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> pagetable)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;page table %p\\n&quot;</span>, pagetable);</span><br><span class=\"line\">    vmprint_help(pagetable, <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-pgtbl pte printout</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/16f06914/pte.jpg\" class=\"\" title=\"pte\">\n<h1 id=\"detecting-which-pages-have-been-accessed-hard\">Detecting which pages have been accessed (hard)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>实现<code>pgaccess()</code>的系统调用，报告哪些页面已被访问。检查 RISC-V 页表中的访问位来检测并向用户空间报告此信息，RISC-V 硬件page walker在解决一个 TLB 未命中时会在 PTE 中标记这些位。这个系统调用有三个参数，第一个参数是第一个用户页的虚拟地址，第二个参数是页数，第三个参数是一个指针传递结果（第一页对应LSB，后面依次）</p>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>在<code>kernel/sysproc.c</code>中实现<code>sys_pgaccess()</code>：需要用到Lab2中介绍过的解析参数的函数<code>argint()</code>和<code>argaddr()</code>；内核传给用户信息需要Lab2中介绍过的<code>copyout()</code>函数；<code>walk()</code>函数对于找PTE很有用\n<ul>\n<li><code>int argint(int n, int *p)</code>获取第<code>n</code>个寄存器的值，将指针p指向它的值，<code>argaddr(int n, uint64 *ip)</code>拿的是指针</li>\n<li><code>copyout(pagetable_t pagetable, uint64 dstva, char *src, uint64 len)</code>：从内核拷贝内容到用户层，从<code>src</code>拷贝<code>len</code>字节到虚拟地址<code>dstva</code>在页表<code>pagetable</code>指向的位置，成功返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，否则返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span></li>\n<li><code>pte_t * walk(pagetable_t pagetable, uint64 va, int alloc)</code> ：返回对应虚拟地址<code>va</code>的PTE的地址，如果<code>alloc</code>不为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 则创建所需的页。大致过程是找到合法的最顶层pte（与上一个题目中的<code>freewalk()</code>是反着的），我们可以利用这个找到每一页的pte</li>\n</ul>\n</li>\n<li>在系统调用函数的实现中，首先从寄存器把三个参数拿到，接着调用一个工具函数得到结果，最后使用<code>copyout()</code>拷贝结果给用户层</li>\n<li>工具函数主要是完成答案的收集，从指定页开始的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个页，每一页利用<code>walk()</code>函数找到顶层PTE，检查<code>PTE_A</code>并更新答案</li>\n<li>在<code>pgaccess_test()</code>里可以查到调用时的三个参数为<code>char *</code>，整数，<code>uint *</code></li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<p>在<code>kernel/risc.h</code>中添加<code>PTE_A</code>的定义：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// access bit </span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PTE_A (1L &lt;&lt; 6)</span></span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/sysproc.c</code>中补充<code>sys_pgaccess()</code>函数：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">sys_pgaccess</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123;</span><br><span class=\"line\">    uint64 addr, bits;</span><br><span class=\"line\">    <span class=\"type\">int</span> npages;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (argaddr(<span class=\"number\">0</span>, &amp;addr) &lt; <span class=\"number\">0</span> || argint(<span class=\"number\">1</span>, &amp;npages) &lt; <span class=\"number\">0</span> || argaddr(<span class=\"number\">2</span>, &amp;bits) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span>* <span class=\"title\">p</span> =</span> myproc();</span><br><span class=\"line\">    uint64 res = check_pgaccess(p-&gt;pagetable, addr, npages);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (copyout(p-&gt;pagetable, bits, (<span class=\"type\">char</span>*)&amp;res, <span class=\"keyword\">sizeof</span>(res)) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/vm.c</code>中添加在上面函数中用到的检查访问位的工具函数：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// check PTE_A</span></span><br><span class=\"line\">uint64</span><br><span class=\"line\"><span class=\"title function_\">check_pgaccess</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> pagetable, uint64 va, <span class=\"type\">int</span> npages)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (va &gt;= MAXVA)</span><br><span class=\"line\">        panic(<span class=\"string\">&quot;walk&quot;</span>);</span><br><span class=\"line\">    uint64 res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; npages; i++) &#123; <span class=\"comment\">// check each page</span></span><br><span class=\"line\">        <span class=\"type\">pte_t</span>* pte = walk(pagetable, va + i * PGSIZE, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pte &amp;&amp; (*pte &amp; PTE_A)) &#123; <span class=\"comment\">// access</span></span><br><span class=\"line\">            res |= (<span class=\"number\">1L</span> &lt;&lt; i);</span><br><span class=\"line\">            *pte &amp;= ~PTE_A; <span class=\"comment\">// 111...0111... reset *pte</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-pgtbl pgtbltest</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/16f06914/pgtbl.jpg\" class=\"\" title=\"pgtbl\">\n","categories":["操作系统"],"tags":["OS","MIT 6.S081"]},{"title":"【MIT 6.S081】Lab2: System Calls","url":"/posts/1aaeae90/","content":"<p>MIT 6.S081的<a href=\"https://pdos.csail.mit.edu/6.828/2021/labs/syscall.html\">Lab2: System calls</a>题解</p>\n<span id=\"more\"></span>\n<h1 id=\"system-call-tracing-moderate\">System call tracing (moderate)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>添加一个系统调用追踪函数，有一个整数参数为mask，二进制指定需要追踪的系统调用（也许是多个），打印<code>进程id:系统调用名-&gt;返回值</code>，</p>\n<h2 id=\"分析\">分析</h2>\n<h3 id=\"添加系统调用的步骤\">添加系统调用的步骤</h3>\n<ul>\n<li>\n<p>即为用户空间添加该系统调用的入口：</p>\n</li>\n<li>\n<p>在<code>/user/user.h</code>中添加函数声明</p>\n</li>\n<li>\n<p>在<code>/user/usys.pl</code>中添加入口<code>entry(&quot;xxx&quot;);</code></p>\n</li>\n<li>\n<p>在<code>kernel/syscall.h</code>中定义系统调用号</p>\n</li>\n<li>\n<p>在<code>kernel/syscall.c</code>的<code>syscalls</code>函数指针数组中添加对应的函数，则可以根据头文件里的系统调用号调用相应函数</p>\n</li>\n</ul>\n<h3 id=\"实现本题的系统调用\">实现本题的系统调用</h3>\n<ul>\n<li>\n<p>在<code>kernel/proc.h</code>中为进程添加变量记录trace的系统调用编号</p>\n</li>\n<li>\n<p>在<code>kernel/sysproc.c</code>中添加一个<code>sys_trace()</code>函数</p>\n</li>\n<li>\n<p>修改<code>kernel/proc.c</code>中<code>fork()</code>函数，将系统调用编号提供给子进程</p>\n</li>\n<li>\n<p>在<code>kernel/sysproc.c</code>中添加<code>sys_trace()</code>，从寄存器中获得参数（即想追踪的系统调用mask）设置到当前的进程</p>\n</li>\n<li>\n<p>修改<code>kernel/syscall.c</code>中的<code>syscall</code>函数打印trace的信息，这里我卡了一下没仔细看提示，一开始直接用了proc类中的name，后来发现那个是进程名不是系统调用名字，所以另开一个字符串数组放入系统调用的名字，用系统调用的序号直接找到它输出</p>\n</li>\n</ul>\n<h3 id=\"可能用到的函数\">可能用到的函数</h3>\n<ul>\n<li>\n<p><code>int argint(int n, int *p)</code>在<code>kernel/sysproc.c</code>中的函数大都使用，意思是获取第<code>n</code>个寄存器的值，将指针p指向它的值（并非指向寄存器，这里值是由另一个函数返回来的）</p>\n</li>\n<li>\n<p><code>myproc()</code>：返回一个proc类的指针，指向当前进程，可以用它来完成mask赋值</p>\n</li>\n<li>\n<p><code>static uint64 argraw(int n)</code>：返回对应的寄存器内容（trap前）</p>\n</li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<p>编辑<code>Makefile</code>文件，在<code>UPROGS=\\</code>一栏添加如下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$U</span>/_trace\\</span><br></pre></td></tr></table></figure>\n<p>在<code>/user/user.h</code>添加系统调用函数声明（参数是<code>int</code> 可以从<code>/user/trace.c</code>中的调用看出来）：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// system calls</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">trace</span><span class=\"params\">(<span class=\"type\">int</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p>在<code>/user/usys.pl</code>添加：</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"code\"><pre><span class=\"line\">entry(<span class=\"string\">&quot;trace&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/syscall.h</code>添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SYS_trace  22</span></span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/syscall.c</code>的<code>syscalls</code>函数指针数组中补充内容：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">extern</span> uint64 <span class=\"title function_\">sys_trace</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"title function_\">uint64</span> <span class=\"params\">(*syscalls[])</span><span class=\"params\">(<span class=\"type\">void</span>)</span> = &#123;</span><br><span class=\"line\">...</span><br><span class=\"line\">[SYS_trace]   sys_trace,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/proc.h</code>中为进程添加变量<code>mask</code>来记录（一旦有调用trace）提供的系统调用编号：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Per-process state</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span> &#123;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">    uint mask;                   <span class=\"comment\">// Mask for trace</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/proc.c</code>中修改<code>fork()</code>函数，将mask提供给子进程：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">fork</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123;</span><br><span class=\"line\">...</span><br><span class=\"line\">  <span class=\"comment\">// set the same mask</span></span><br><span class=\"line\">  np-&gt;mask = p-&gt;mask;</span><br><span class=\"line\">... &#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/sysproc.c</code>中添加一个<code>sys_trace()</code>函数：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// set current process mask</span></span><br><span class=\"line\">uint64</span><br><span class=\"line\"><span class=\"title function_\">sys_trace</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    uint mask;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(argint(<span class=\"number\">0</span>, &amp;mask) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    myproc()-&gt;mask = mask;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改<code>kernel/syscall.c</code>，添加系统调用函数名的字符串数组，以及修改<code>syscall</code>函数打印trace的信息：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">const</span> <span class=\"type\">char</span>* sysname[] = &#123; <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;fork&quot;</span>, <span class=\"string\">&quot;exit&quot;</span>, <span class=\"string\">&quot;wait&quot;</span>, <span class=\"string\">&quot;pipe&quot;</span>, <span class=\"string\">&quot;read&quot;</span>, <span class=\"string\">&quot;kill&quot;</span>, <span class=\"string\">&quot;exec&quot;</span>, <span class=\"string\">&quot;fstat&quot;</span>, <span class=\"string\">&quot;chdir&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;dup&quot;</span>, <span class=\"string\">&quot;getpid&quot;</span>, <span class=\"string\">&quot;sbrk&quot;</span>, <span class=\"string\">&quot;sleep&quot;</span>, <span class=\"string\">&quot;uptime&quot;</span>, <span class=\"string\">&quot;open&quot;</span>, <span class=\"string\">&quot;write&quot;</span>, <span class=\"string\">&quot;mknod&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;unlink&quot;</span>, <span class=\"string\">&quot;link&quot;</span>, <span class=\"string\">&quot;mkdir&quot;</span>, <span class=\"string\">&quot;close&quot;</span>, <span class=\"string\">&quot;trace&quot;</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">syscall</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> num;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span>* <span class=\"title\">p</span> =</span> myproc();</span><br><span class=\"line\"></span><br><span class=\"line\">    num = p-&gt;trapframe-&gt;a7; <span class=\"comment\">// current proc&#x27;s system call numbers</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (num &gt; <span class=\"number\">0</span> &amp;&amp; num &lt; NELEM(syscalls) &amp;&amp; syscalls[num]) &#123;</span><br><span class=\"line\">        p-&gt;trapframe-&gt;a0 = syscalls[num](); <span class=\"comment\">// return value</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (p-&gt;mask &amp; (<span class=\"number\">1</span> &lt;&lt; num)) &#123; <span class=\"comment\">// current proc is the sysproc we trace</span></span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d: syscall %s -&gt; %d\\n&quot;</span>, p-&gt;pid, sysname[num], p-&gt;trapframe-&gt;a0);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d %s: unknown sys call %d\\n&quot;</span>,</span><br><span class=\"line\">            p-&gt;pid, p-&gt;name, num);</span><br><span class=\"line\">        p-&gt;trapframe-&gt;a0 = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-syscall trace</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/1aaeae90/trace.jpg\" class=\"\" title=\"trace\">\n<h1 id=\"sysinfo-moderate\">Sysinfo (moderate)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>添加一个<code>sysinfo</code>系统调用，参数是一个<code>kernel/sysinfo.h</code>中的结构体<code>sysinfo</code>指针，系统调用补充指针指向这个结构体的字段内容</p>\n<h2 id=\"分析\">分析</h2>\n<h3 id=\"sysinfo结构体\">sysinfo结构体</h3>\n<ul>\n<li>\n<p><code>freemem</code>：空闲内存的字节数</p>\n</li>\n<li>\n<p><code>nproc</code>：正在运行（<code>state</code>的内容不是UNUSED，proc的定义在<code>/kernel/proc.h</code>）的进程数</p>\n</li>\n</ul>\n<h3 id=\"流程\">流程</h3>\n<ul>\n<li>与第一个题目中的分析相同</li>\n</ul>\n<h3 id=\"可能用到的函数\">可能用到的函数</h3>\n<ul>\n<li>\n<p>拷贝的过程</p>\n<ul>\n<li>\n<p><code>copyout(pagetable_t pagetable, uint64 dstva, char *src, uint64 len)</code>：从内核拷贝内容到用户层，从<code>src</code>拷贝<code>len</code>字节到虚拟地址<code>dstva</code>在页表<code>pagetable</code>指向的位置，成功返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，否则返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span></p>\n</li>\n<li>\n<p>还需要用上一个题中<code>syscall.c</code>中的函数（<code>argint</code>拿整数，<code>argaddr</code>拿指针）</p>\n</li>\n<li>\n<p>proc结构体里有页表信息</p>\n</li>\n</ul>\n</li>\n<li>\n<p>获取空闲内存</p>\n<ul>\n<li><code>kernel/kalloc.c</code>中的<code>kalloc()</code>：<code>kmen</code>有个空闲列表，空闲列表的大小应该是宏定义的<code>PGSIZE</code>，补充一个函数，用同样的写法统计空闲列表的个数，就得到结果了</li>\n</ul>\n</li>\n<li>\n<p>获取进程数：</p>\n<ul>\n<li><code>kernel/proc.c</code>中的<code>static struct proc* allocproc(void)</code>：模仿这个函数中分配进程的过程进行统计</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"实现\">实现</h2>\n<p>编辑<code>Makefile</code>文件，在<code>UPROGS=\\</code>一栏添加如下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$U</span>/_sysinfotest\\</span><br></pre></td></tr></table></figure>\n<p>在<code>/user/user.h</code>添加系统调用函数声明（文档有提示）：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// system calls</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sysinfo</span>;</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">sysinfo</span><span class=\"params\">(<span class=\"keyword\">struct</span> sysinfo *)</span>;</span><br></pre></td></tr></table></figure>\n<p>在<code>/user/usys.pl</code>添加：</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"code\"><pre><span class=\"line\">entry(<span class=\"string\">&quot;sysinfo&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/syscall.h</code>添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SYS_sysinfo     23</span></span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/syscall.c</code>的<code>syscalls</code>函数指针数组和函数名数组中补充内容：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">extern</span> uint64 <span class=\"title function_\">sys_sysinfo</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"title function_\">uint64</span> <span class=\"params\">(*syscalls[])</span><span class=\"params\">(<span class=\"type\">void</span>)</span> = &#123;</span><br><span class=\"line\">...</span><br><span class=\"line\">[SYS_sysinfotest] sys_sysinfo,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">const</span> <span class=\"type\">char</span>* sysname[] = &#123;<span class=\"string\">&quot;&quot;</span>, ..., <span class=\"string\">&quot;sysinfo&quot;</span> &#125;;</span><br></pre></td></tr></table></figure>\n<p>根据上述分析写出<code>kernel/sysproc.c</code>中的<code>sys_sysinfo()</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">uint64 <span class=\"title function_\">sys_sysinfo</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123;</span><br><span class=\"line\">    uint64 dstva; <span class=\"comment\">// virtual address</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (argaddr(<span class=\"number\">0</span>, &amp;dstva) &lt; <span class=\"number\">0</span>) <span class=\"comment\">// get virtual address dstva</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sysinfo</span> <span class=\"title\">info</span>;</span></span><br><span class=\"line\">    info.freemem = get_freemem(); <span class=\"comment\">// kalloc.c</span></span><br><span class=\"line\">    info.nproc = get_nproc(); <span class=\"comment\">// proc.c</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> copyout(myproc()-&gt;pagetable, dstva, (<span class=\"type\">char</span>*)&amp;info, <span class=\"keyword\">sizeof</span>(info));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中<code>get_freemem()</code>函数写在<code>kernel/kalloc.c</code>中，记得补充函数声明到<code>defs.h</code>头文件中：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// in defs.h</span></span><br><span class=\"line\"><span class=\"comment\">// kalloc.c</span></span><br><span class=\"line\">...</span><br><span class=\"line\">uint64          <span class=\"title function_\">get_freemem</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// in kalloc.c</span></span><br><span class=\"line\">uint64 <span class=\"title function_\">get_freemem</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">run</span>* <span class=\"title\">r</span>;</span></span><br><span class=\"line\">    acquire(&amp;kmem.lock); <span class=\"comment\">// lock</span></span><br><span class=\"line\">    r = kmem.freelist;</span><br><span class=\"line\">    uint64 cnt = <span class=\"number\">0</span>; <span class=\"comment\">// count freelist</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (r) &#123;</span><br><span class=\"line\">        r = r-&gt;next;</span><br><span class=\"line\">        cnt++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    release(&amp;kmem.lock);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cnt * PGSIZE;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中<code>get_nproc()</code>函数写在<code>kernel/proc.c</code>中，记得补充函数声明到<code>defs.h</code>头文件中：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// in defs.h</span></span><br><span class=\"line\"><span class=\"comment\">// proc.c</span></span><br><span class=\"line\">uint64          <span class=\"title function_\">get_nproc</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// in proc.c</span></span><br><span class=\"line\">uint64 <span class=\"title function_\">get_nproc</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span>* <span class=\"title\">p</span>;</span></span><br><span class=\"line\">    uint64 cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (p = proc; p &lt; &amp;proc[NPROC]; p++) &#123;</span><br><span class=\"line\">        acquire(&amp;p-&gt;lock);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (p-&gt;state != UNUSED)</span><br><span class=\"line\">            cnt++;</span><br><span class=\"line\">        release(&amp;p-&gt;lock);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cnt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<p>输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-syscall sysinfotest</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/1aaeae90/sysinfo.jpg\" class=\"\" title=\"sysinfo\">\n","categories":["操作系统"],"tags":["OS","MIT 6.S081"]},{"title":"【MIT 6.S081】Lab4: Traps","url":"/posts/c5231a06/","content":"<p>MIT 6.S081的<a href=\"https://pdos.csail.mit.edu/6.828/2021/labs/traps.html\">Lab4: Traps</a>题解</p>\n<span id=\"more\"></span>\n<h1 id=\"risc-v-assembly-easy\">RISC-V assembly (easy)</h1>\n<ul>\n<li>目标：认识RISC-V的汇编代码</li>\n<li>方法：执行<code>make fs.img</code> 编译，在<code>user</code>文件夹中找到<code>call.c</code> 的汇编文件<code>call.asm</code></li>\n</ul>\n<h2 id=\"问题一\">问题一</h2>\n<blockquote>\n<p>Which registers contain arguments to functions? For example, which register holds 13 in main’s call to <code>printf</code>?</p>\n</blockquote>\n<p>即函数的参数存放在哪些寄存器？例如，哪个寄存器存放了<code>call.c</code>的main函数中的参数<code>13</code>。</p>\n<h3 id=\"分析\">分析</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">printf(&quot;%d %d\\n&quot;, f(8)+1, 13);</span><br><span class=\"line\">24:\t4635                \tli\ta2,13</span><br><span class=\"line\">26:\t45b1                \tli\ta1,12</span><br></pre></td></tr></table></figure>\n<p>可以看到，<code>13</code>这个参数放在了<code>a2</code>寄存器，<code>f(8)+1</code>已经被计算出来是<code>12</code>放在<code>a1</code>寄存器。</p>\n<p>回想起很多年前（并不）的计组知识（学的是mips），那这个即存在大概是<code>a0~a7</code></p>\n<h3 id=\"回答\">回答</h3>\n<p><code>a0~a7</code> ，<code>a2</code></p>\n<h2 id=\"问题二\">问题二</h2>\n<blockquote>\n<p>Where is the call to function <code>f</code> in the assembly code for main? Where is the call to <code>g</code>? (Hint: the compiler may inline functions.)</p>\n</blockquote>\n<p><code>main</code>函数里调用函数<code>f</code>读到代码在哪？<code>g</code>呢？（提示：编译器可能会将函数变成inline的）</p>\n<h3 id=\"分析\">分析</h3>\n<p>可以看到代码中并没有专门的跳转，所以是inline了。</p>\n<h3 id=\"答案\">答案</h3>\n<p>没有，编译器将其转成内联函数。</p>\n<h2 id=\"问题三\">问题三</h2>\n<blockquote>\n<p>At what address is the function <code>printf</code> located?</p>\n</blockquote>\n<p><code>printf</code>函数的在哪？</p>\n<h3 id=\"分析\">分析</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">34:\t600080e7          \tjalr\t1536(ra) # 630 &lt;printf&gt;</span><br></pre></td></tr></table></figure>\n<p><code>jalr</code>是跳转，所以位置在<code>1536(ra)</code>，再往前找<code>ra</code>：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">30:\t00000097          \tauipc\tra,0x0</span><br></pre></td></tr></table></figure>\n<p><code>auipc</code>指令：将立即数左移12位加到PC上，这里立即数是<code>0</code>所以<code>ra=pc=30</code>。</p>\n<p>则<code>1536(ra)</code>=<code>0x600+0x30=0x630</code> 。</p>\n<h3 id=\"答案\">答案</h3>\n<p><code>0x630</code></p>\n<h2 id=\"问题四\">问题四</h2>\n<blockquote>\n<p>What value is in the register <code>ra</code> just after the <code>jalr</code> to <code>printf</code> in <code>main</code>?</p>\n</blockquote>\n<p><code>main</code>函数中跳转<code>printf</code>后的时刻<code>ra</code>值是多少？</p>\n<p>查资料可知<code>jalr</code>指令将下一条指令的位置也就是<code>pc+4</code>赋给<code>ra</code>，所以应该是<code>0x38</code>。</p>\n<h2 id=\"问题五\">问题五</h2>\n<blockquote>\n<p>Run the following code.</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">int</span> i = <span class=\"number\">0x00646c72</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;H%x Wo%s&quot;</span>, <span class=\"number\">57616</span>, &amp;i);</span><br></pre></td></tr></table></figure>\n<p>What is the output? <a href=\"http://web.cs.mun.ca/~michael/c/ascii-table.html\">Here’s an ASCII table</a> that maps bytes to characters.</p>\n<p>The output depends on that fact that the RISC-V is little-endian. If the RISC-V were instead big-endian what would you set <code>i</code> to in order to yield the same output? Would you need to change <code>57616</code> to a different value?</p>\n<p><a href=\"http://www.webopedia.com/TERM/b/big_endian.html\">Here’s a description of little- and big-endian</a> and <a href=\"http://www.networksorcery.com/enp/ien/ien137.txt\">a more whimsical description</a>.</p>\n</blockquote>\n<p>跑以下代码：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">int</span> i = <span class=\"number\">0x00646c72</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;H%x Wo%s&quot;</span>, <span class=\"number\">57616</span>, &amp;i);</span><br></pre></td></tr></table></figure>\n<p>输出是什么？可以查ASCII对应表。输出取决于RISC-V是小端编址，如果它是大端编址，如何修改<code>i</code>得到相同输出？<code>57616</code>是否需要改？</p>\n<h3 id=\"分析\">分析</h3>\n<p>直接放到<code>main.c</code>的代码里去跑，输出结果是<code>He110 World</code> ，合理的。</p>\n<p>因为<code>%x</code>输出<code>57616</code> 的十六进制数即<code>E110</code>。</p>\n<p>而字符串输出按地址读，由于小端编址，最右作为字地址（计组应软件接口教材里的说法，着实抽象），就是从最右开始存完整的一个字（高位先存），则有地址从小到大：<code>72 6c 64 00</code> ，对应ASCII查表得<code>r l d \\0</code> 。</p>\n<p>大端编址存储会是<code>00 64 6c 72</code>，为了输出一致，<code>i=0x726c6400</code> 即可。</p>\n<h3 id=\"答案\">答案</h3>\n<p><code>He110 World</code> ，大端编址<code>i=0x726c6400</code> ，<code>57616</code>不用改。</p>\n<h2 id=\"问题六\">问题六</h2>\n<blockquote>\n<p>In the following code, what is going to be printed after <code>'y='</code>? (note: the answer is not a specific value.) Why does this happen?</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;x=%d y=%d&quot;</span>, <span class=\"number\">3</span>);</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>第二个参数，没有给寄存器正确的值，则如果函数调用第二个参数应当是当时寄存器<code>a2</code>中的值。</p>\n<h1 id=\"backtrace-moderate\">Backtrace (moderate)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>考虑到debug时经常需要查看到错误发生时之前的函数栈，在<code>kernel/printf.c</code> 中实现一个<code>backtrace()</code> 函数。</p>\n<p>编译器在每个栈帧中放一个帧指针指向调用者的帧指针。</p>\n<p>在<code>sys_sleep</code>中调用这个函数并运行<code>bttest</code> 验证，输出应是：</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">backtrace:</span><br><span class=\"line\">0x0000000080002cda</span><br><span class=\"line\">0x0000000080002bb6</span><br><span class=\"line\">0x0000000080002898</span><br></pre></td></tr></table></figure>\n<p>也许会有些许不同，但输入：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">addr2line -e kernel/kernel</span><br><span class=\"line\">0x0000000080002de2</span><br><span class=\"line\">0x0000000080002f4a</span><br><span class=\"line\">0x0000000080002bfc</span><br><span class=\"line\">Ctrl-D</span><br></pre></td></tr></table></figure>\n<p>应该会看到：</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">kernel/sysproc.c:74</span><br><span class=\"line\">kernel/syscall.c:224</span><br><span class=\"line\">kernel/trap.c:85</span><br></pre></td></tr></table></figure>\n<p>提示：</p>\n<ul>\n<li>\n<p>记得把函数加到<code>kernel/defs.h</code>中以便<code>sys_sleep</code>调用</p>\n</li>\n<li>\n<p>GCC编译器将当前的帧指针存在<code>s0</code>中，在<code>kernel/riscv.h</code> 中加入以下函数：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">static</span> <span class=\"keyword\">inline</span> uint64</span><br><span class=\"line\"><span class=\"title function_\">r_fp</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 x;</span><br><span class=\"line\">  <span class=\"keyword\">asm</span> <span class=\"title function_\">volatile</span><span class=\"params\">(<span class=\"string\">&quot;mv %0, s0&quot;</span> : <span class=\"string\">&quot;=r&quot;</span> (x) )</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>backtrace()</code>中可以利用这个读当前帧指针，这个函数用内联汇编读<code>s0</code>，</p>\n</li>\n<li>\n<p>栈帧如图，则return address在<code>fp-8</code>，调用者的栈帧在<code>fp-16</code>：</p>\n<img data-src=\"/posts/c5231a06/image-20230413233731538.png\" class=\"\" title=\"image-20230413233731538\">\n</li>\n<li>\n<p>xv6给每个栈一个page，<code>kernel/riscv.h</code>中的<code>PGROUNDDOWN(fp)</code> and <code>PGROUNDUP(fp)</code>可以帮忙结束循环。</p>\n</li>\n<li>\n<p>成功后， 在<code>kernel/printf.c</code> 的<code>panic</code> 中调用该函数。</p>\n</li>\n</ul>\n<h2 id=\"分析\">分析</h2>\n<p>题面写的很清楚了，关于栈帧的具体分类和内容可以看xv6手册，这里不做总结了。</p>\n<p><code>fp-8</code> 指向return address，所以<code>*(fp-8)</code>就是地址，但直接输出十六进制会有问题，所以再取一次变成<code>**(fp-8)</code>输出<code>%p</code>即可。</p>\n<p><code>*(fp-16)</code>指向调用者的<code>fp</code>的位置，所以<code>fp</code>迭代为<code>**(fp-16)</code>。</p>\n<p>但是有一个细节，从题面给的<code>r_fp()</code>可以看出<code>fp</code>是<code>uint64</code>格式的，所以第一次<code>*</code>引用时要转一下<code>uint64*</code>（好坑）。</p>\n<h2 id=\"实现\">实现</h2>\n<p>在<code>kernel/defs.h</code> 中添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// printf.c</span></span><br><span class=\"line\"><span class=\"type\">void</span>            <span class=\"title function_\">backtrace</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/riscv.h</code> 中添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">static</span> <span class=\"keyword\">inline</span> uint64</span><br><span class=\"line\"><span class=\"title function_\">r_fp</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 x;</span><br><span class=\"line\">  <span class=\"keyword\">asm</span> <span class=\"title function_\">volatile</span><span class=\"params\">(<span class=\"string\">&quot;mv %0, s0&quot;</span> : <span class=\"string\">&quot;=r&quot;</span> (x) )</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/sysproc.c</code> 中补充<code>sys_sleep</code> ：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">uint64</span><br><span class=\"line\"><span class=\"title function_\">sys_sleep</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">...</span><br><span class=\"line\">    backtrace();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>kernel/printf.c</code>中添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">backtrace</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;backtrace:\\n&quot;</span>);</span><br><span class=\"line\">  uint64 fp = r_fp();</span><br><span class=\"line\">  uint64 tp = PGROUNDUP(fp);</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(fp &lt; tp)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// *(fp-8): return address</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%p\\n&quot;</span>,*((uint64*)(fp<span class=\"number\">-8</span>)));</span><br><span class=\"line\">    fp = *((uint64*)(fp<span class=\"number\">-16</span>));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">make qemu</span><br><span class=\"line\">$ bttest</span><br></pre></td></tr></table></figure>\n<p>输出：</p>\n<img data-src=\"/posts/c5231a06/image-20230414001613911.png\" class=\"\" title=\"image-20230414001613911\">\n<p>地址略有不同，提示给的方法exec fail了，所以直接运行了评价程序：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-traps backtrace</span><br></pre></td></tr></table></figure>\n<p>通过：</p>\n<img data-src=\"/posts/c5231a06/image-20230414001722001.png\" class=\"\" title=\"image-20230414001722001\">\n<p>按提示，测试完成后在<code>kernel/printf.c</code> 的<code>panic</code> 中添加：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">panic</span><span class=\"params\">(<span class=\"type\">char</span> *s)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  backtrace();</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(;;)</span><br><span class=\"line\">    ;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"alarm-hard\">Alarm (hard)</h1>\n<h2 id=\"要求\">要求</h2>\n<p>为xv6加功能，在一个进程使用cpu时周期性提醒它。你需要实现一个用户中断/错误处理的初级形式，这与处理页表错误类似。</p>\n<p>加一个新的系统调用<code>sigalarm(interval, handler)</code>，应用使用<code>sigalarm(n, fn)</code>时，每 <code>n</code>个CPU时间的ticks停止应用并调用<code>fn</code>函数，该函数返回时原应用继续。xv6的ticks取决于硬件计时器产生中断的频率。调用<code>sigalarm(0, 0)</code>时不再继续。</p>\n<p>将<code>user/alarmtest.c</code>加入Makefile，<code>sigalarm</code>和<code>sigreturn</code>正确实现后才能编译通过。</p>\n<p><code>alarmtest</code>调用<code>sigalarm(2, periodic)</code>在<code>test0</code>，<code>alarmtest</code>的汇编代码在<code>user/alarmtest.asm</code>，也许可以帮助debug，正确时输出：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ alarmtest</span><br><span class=\"line\">test0 start</span><br><span class=\"line\">........alarm!</span><br><span class=\"line\">test0 passed</span><br><span class=\"line\">test1 start</span><br><span class=\"line\">...alarm!</span><br><span class=\"line\">..alarm!</span><br><span class=\"line\">...alarm!</span><br><span class=\"line\">..alarm!</span><br><span class=\"line\">...alarm!</span><br><span class=\"line\">..alarm!</span><br><span class=\"line\">...alarm!</span><br><span class=\"line\">..alarm!</span><br><span class=\"line\">...alarm!</span><br><span class=\"line\">..alarm!</span><br><span class=\"line\">test1 passed</span><br><span class=\"line\">test2 start</span><br><span class=\"line\">................alarm!</span><br><span class=\"line\">test2 passed</span><br><span class=\"line\">$ usertests</span><br><span class=\"line\">...</span><br><span class=\"line\">ALL TESTS PASSED</span><br><span class=\"line\">$</span><br></pre></td></tr></table></figure>\n<h2 id=\"分析\">分析</h2>\n<p>完整代码见实现一节。</p>\n<p>如果记忆不清晰了需要重新回顾一下<a href=\"https://www.lyroch.site/posts/1aaeae90/\">【MIT 6.S081】Lab2: System Calls</a> 中的许多内容。</p>\n<h3 id=\"test0-调用处理函数\">test0: 调用处理函数</h3>\n<p>跟着提示走：</p>\n<p>将 <code>alarmtest.c</code> 添加到Makefile中：</p>\n<figure class=\"highlight makefile\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPROGS=\\</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\t$U/_alarmtest\\</span><br></pre></td></tr></table></figure>\n<p>将函数声明放到 <code>user/user.h</code> 中：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">sigalarm</span><span class=\"params\">(<span class=\"type\">int</span> ticks, <span class=\"type\">void</span> (*handler)())</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">sigreturn</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p>更新<code>user/usys.pl</code>、<code>kernel/syscall.h</code>、<code>kernel/syscall.c</code>，可见<a href=\"https://www.lyroch.site/posts/1aaeae90/\">【MIT 6.S081】Lab2: System Calls</a> 中的第一个实验，基本一致。</p>\n<p><code>kernal/sysproc.c</code>中的<code>sys_sigreturn</code> 函数现在只需返回<code>0</code>:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">uint64 <span class=\"title function_\">sys_sigreturn</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>kernal/sysproc.c</code>中的<code>sys_sigreturn</code> 函数需要将两个参数（ticks和函数指针，方法回顾Lab2）传给进程，同时进程也需要记录已经过了多少个ticks，类似Lab2操作<code>kernel/proc.h</code>中的<code>proc</code>结构体，并在<code>kernel/proc.c</code>中初始化：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/proc.h</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span> &#123;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// alarm</span></span><br><span class=\"line\">  <span class=\"type\">int</span> interval;</span><br><span class=\"line\">  <span class=\"type\">void</span> (*handler)();</span><br><span class=\"line\">  <span class=\"type\">int</span> ticks;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/proc.c</span></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"keyword\">struct</span> proc*</span><br><span class=\"line\"><span class=\"title function_\">allocproc</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// alarm</span></span><br><span class=\"line\">  p-&gt;interval = <span class=\"number\">0</span>;</span><br><span class=\"line\">  p-&gt;handler = (<span class=\"type\">void</span>*)<span class=\"number\">0</span>;</span><br><span class=\"line\">  p-&gt;ticks = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/sysproc.c</span></span><br><span class=\"line\">uint64 <span class=\"title function_\">sys_sigalarm</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"type\">int</span> interval;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(argint(<span class=\"number\">0</span>, &amp;interval) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">  uint64 handler;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(argaddr(<span class=\"number\">1</span>, &amp;handler) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">  myproc()-&gt;interval = interval;</span><br><span class=\"line\">  myproc()-&gt;handler = (<span class=\"type\">void</span>*)handler;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>硬件产生的中断在<code>kernel/trap.c</code>的 <code>usertrap()</code> 处理，则每次中断更新进程的ticks计数，如果到达周期则调用对应函数，提示在代码<code>if(which_dev == 2) ...</code>中处理，以及提醒注意需要调用函数的地址可能为<code>0</code>，则只能通过<code>interval</code>为<code>0</code>判断是否需要处理。</p>\n<p>在<code>usertrap()</code>中注意到一行关键代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// sepc points to the ecall instruction,</span></span><br><span class=\"line\"><span class=\"comment\">// but we want to return to the next instruction.</span></span><br><span class=\"line\">p-&gt;trapframe-&gt;epc += <span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n<p>这熟悉的下一条指令&quot;PC=PC+4&quot;，显然将<code>p-&gt;handler</code>传给<code>p-&gt;trapframe-&gt;epc</code>即可。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/proc.c</span></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">usertrap</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// give up the CPU if this is a timer interrupt.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(which_dev == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(p-&gt;interval != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      p-&gt;ticks++;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(p-&gt;ticks == p-&gt;interval) &#123;</span><br><span class=\"line\">        p-&gt;trapframe-&gt;epc = (uint64)p-&gt;handler;</span><br><span class=\"line\">        p-&gt;ticks = <span class=\"number\">0</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  yield();</span><br><span class=\"line\">  usertrapret();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>于是完成了第一部分，这时候运行<code>$ alarmtest</code>会crashed，但是既然文档说了不用管那就不用管。</p>\n<img data-src=\"/posts/c5231a06/image-20230415001521245.png\" class=\"\" title=\"image-20230415001521245\">\n<h3 id=\"test1-test2-返回原来的执行位置\">test1/test2: 返回原来的执行位置</h3>\n<p>alarm要求结束时调用 <code>sigreturn</code> ，<code>user/alarmtest.c</code>中的<code>periodic</code>可做参考。</p>\n<p>为了保存调用函数前的状态，需要保存寄存器现场，这里看了网上提示才恍然大悟，存trapframe就行了，用的是基本的<code>memmove</code>。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/proc.c</span></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">usertrap</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// give up the CPU if this is a timer interrupt.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(which_dev == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(p-&gt;interval != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      p-&gt;ticks++;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(p-&gt;ticks == p-&gt;interval) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ra</span></span><br><span class=\"line\">        p-&gt;last_epc = p-&gt;trapframe-&gt;epc;</span><br><span class=\"line\">        <span class=\"comment\">// registers</span></span><br><span class=\"line\">        p-&gt;last_trapframe = (<span class=\"keyword\">struct</span> trapframe*)kalloc();</span><br><span class=\"line\">        memmove(p-&gt;last_trapframe,p-&gt;trapframe,PGSIZE);</span><br><span class=\"line\">        p-&gt;trapframe-&gt;epc = (uint64)p-&gt;handler;</span><br><span class=\"line\">        p-&gt;ticks = <span class=\"number\">0</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  yield();</span><br><span class=\"line\">  usertrapret();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/sysproc.c</span></span><br><span class=\"line\">uint64 <span class=\"title function_\">sys_sigreturn</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span>* <span class=\"title\">p</span> =</span> myproc();</span><br><span class=\"line\">  <span class=\"comment\">// ra</span></span><br><span class=\"line\">  p-&gt;trapframe-&gt;epc = p-&gt;last_epc;</span><br><span class=\"line\">  <span class=\"comment\">// registers</span></span><br><span class=\"line\">  memmove(p-&gt;trapframe,p-&gt;last_trapframe,PGSIZE);</span><br><span class=\"line\">  kfree(p-&gt;last_trapframe);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/c5231a06/image-20230415004130520.png\" class=\"\" title=\"image-20230415004130520\">\n<p>这时候test2出问题了，test2是要解决如果被调用的函数还没有返回但ticks到了，这时不要再次调用，进程加一个标志就可以了：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/proc.h</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span> &#123;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// alarm</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"type\">int</span> f_alive;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/proc.c</span></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"keyword\">struct</span> proc*</span><br><span class=\"line\"><span class=\"title function_\">allocproc</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// alarm</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  p-&gt;f_alive = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/proc.c</span></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">usertrap</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// give up the CPU if this is a timer interrupt.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(which_dev == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(p-&gt;interval != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      p-&gt;ticks++;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(p-&gt;ticks &gt;= p-&gt;interval &amp;&amp; !p-&gt;f_alive) &#123;</span><br><span class=\"line\">        p-&gt;f_alive = <span class=\"number\">1</span>;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/sysproc.c</span></span><br><span class=\"line\">uint64 <span class=\"title function_\">sys_sigreturn</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  p-&gt;f_alive = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后就能通过了！usertests一样也通过。</p>\n<h2 id=\"实现\">实现</h2>\n<p>Makefile：</p>\n<figure class=\"highlight makefile\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPROGS=\\</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\t$U/_alarmtest\\</span><br></pre></td></tr></table></figure>\n<p><code>user/user.h</code> ：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">sigalarm</span><span class=\"params\">(<span class=\"type\">int</span> ticks, <span class=\"type\">void</span> (*handler)())</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">sigreturn</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p><code>user/usys.pl</code>：</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">entry(<span class=\"string\">&quot;sigalarm&quot;</span>);</span><br><span class=\"line\">entry(<span class=\"string\">&quot;sigreturn&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p><code>kernel/syscall.h</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SYS_sigalarm 22</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SYS_sigreturn 23</span></span><br></pre></td></tr></table></figure>\n<p><code>kernel/syscall.c</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">extern</span> uint64 <span class=\"title function_\">sys_sigalarm</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> uint64 <span class=\"title function_\">sys_sigreturn</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"title function_\">uint64</span> <span class=\"params\">(*syscalls[])</span><span class=\"params\">(<span class=\"type\">void</span>)</span> = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">[SYS_sigalarm]    sys_sigalarm,</span><br><span class=\"line\">[SYS_sigreturn]   sys_sigreturn</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><code>kernal/sysproc.c</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">uint64 <span class=\"title function_\">sys_sigalarm</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"type\">int</span> interval;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(argint(<span class=\"number\">0</span>, &amp;interval) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">  uint64 handler;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(argaddr(<span class=\"number\">1</span>, &amp;handler) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">  myproc()-&gt;interval = interval;</span><br><span class=\"line\">  myproc()-&gt;handler = (<span class=\"type\">void</span>*)handler;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">uint64 <span class=\"title function_\">sys_sigreturn</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span>* <span class=\"title\">p</span> =</span> myproc();</span><br><span class=\"line\">  <span class=\"comment\">// ra</span></span><br><span class=\"line\">  p-&gt;trapframe-&gt;epc = p-&gt;last_epc;</span><br><span class=\"line\">  <span class=\"comment\">// registers</span></span><br><span class=\"line\">  memmove(p-&gt;trapframe,p-&gt;last_trapframe,PGSIZE);</span><br><span class=\"line\">  kfree(p-&gt;last_trapframe);</span><br><span class=\"line\">  p-&gt;f_alive = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>kernel/proc.h</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">proc</span> &#123;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// alarm</span></span><br><span class=\"line\">  <span class=\"type\">int</span> interval;</span><br><span class=\"line\">  <span class=\"type\">void</span> (*handler)();</span><br><span class=\"line\">  <span class=\"type\">int</span> ticks;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">trapframe</span> *<span class=\"title\">last_trapframe</span>;</span></span><br><span class=\"line\">  uint64 last_epc;</span><br><span class=\"line\">  <span class=\"type\">int</span> f_alive;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><code>kernel/proc.c</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">static</span> <span class=\"keyword\">struct</span> proc*</span><br><span class=\"line\"><span class=\"title function_\">allocproc</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// alarm</span></span><br><span class=\"line\">  p-&gt;interval = <span class=\"number\">0</span>;</span><br><span class=\"line\">  p-&gt;handler = (<span class=\"type\">void</span>*)<span class=\"number\">0</span>;</span><br><span class=\"line\">  p-&gt;ticks = <span class=\"number\">0</span>;</span><br><span class=\"line\">  p-&gt;f_alive = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>kernel/trap.c</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">usertrap</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// give up the CPU if this is a timer interrupt.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(which_dev == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(p-&gt;interval != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      p-&gt;ticks++;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(p-&gt;ticks &gt;= p-&gt;interval &amp;&amp; !p-&gt;f_alive) &#123;</span><br><span class=\"line\">        p-&gt;f_alive = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"comment\">// ra</span></span><br><span class=\"line\">        p-&gt;last_epc = p-&gt;trapframe-&gt;epc;</span><br><span class=\"line\">        <span class=\"comment\">// registers</span></span><br><span class=\"line\">        p-&gt;last_trapframe = (<span class=\"keyword\">struct</span> trapframe*)kalloc();</span><br><span class=\"line\">        memmove(p-&gt;last_trapframe,p-&gt;trapframe,PGSIZE);</span><br><span class=\"line\">        p-&gt;trapframe-&gt;epc = (uint64)p-&gt;handler;</span><br><span class=\"line\">        p-&gt;ticks = <span class=\"number\">0</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  yield();</span><br><span class=\"line\">  usertrapret();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\">测试</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-traps alarm</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/c5231a06/image-20230415010200415.png\" class=\"\" title=\"image-20230415010200415\">\n","categories":["操作系统"],"tags":["OS","MIT 6.S081"]},{"title":"【MIT 6.S081】Lab5: Copy on-write","url":"/posts/3f0e8b2b/","content":"<p>MIT 6.S081的<a href=\"https://pdos.csail.mit.edu/6.828/2021/labs/cow.html\">Lab 5: Copy-on-Write Fork for xv6</a>题解</p>\n<span id=\"more\"></span>\n<h1 id=\"前置\">前置</h1>\n<p>内核可以通过将 PTE 标记为无效或只读来截获内存引用，导致页面错误， 并且可以通过修改 PTE 来更改地址的含义。</p>\n<p>为优化内存，比如父进程fork后复制可能需大量时间，但子进程不一定用，很可能浪费了，只有在父/子进程需要写内容时才需要各自一个单独的page，否则都可以共享。</p>\n<p>COW fork（） 只为子项创建一个分页表，为用户提供 PTE 指向父级物理页的内存，标记父子的PTE只读。因需要写page fault时，内核复制并分配新page，标记为可写。物理页面需要引用计数，没有引用时才可释放。</p>\n<h1 id=\"要求\">要求</h1>\n<p>实现copy-on-write fork。</p>\n<p>计划：</p>\n<ul>\n<li>修改<code>kernel/vm.c</code>中的<code>uvmcopy</code>使其不分配新物理内存而是映射到原本的页表。</li>\n<li>修改<code>kernel/trap.c</code>中的<code>usertrap</code>使其识别page fault，用<code>kalloc</code>分配新内存，复制page，设PTE可写。</li>\n<li>在<code>kalloc</code>时更新引用计数， <code>kfree()</code> 将page放在free list中但只有引用计数为<code>0</code>才正式释放。可以将这些计数放在一个固定大小的数组里，找一个方法让page能找到数组下标，比如模数，give the array a number of elements equal to highest physical address of any page placed on the free list by <code>kinit()</code> in kalloc.c.（没看懂？）</li>\n<li><code>kernel/vm.c</code>中的<code>copyout</code>也需要为引用计数修改。</li>\n</ul>\n<p>提示：</p>\n<ul>\n<li>PTE最后两位RSW保留给supervisor software（内核），将bit8标识为当前是一个copy-on-write page。</li>\n<li>pagetable的很多define在 <code>kernel/riscv.h</code></li>\n<li>COW的page fault，如果没有内存可分配，进程应该kill了。</li>\n</ul>\n<h1 id=\"分析\">分析</h1>\n<h2 id=\"fork后不分配直接映射\">fork后不分配直接映射</h2>\n<p><code>fork()</code>调用<code>uvmcopy</code>复制page，在<code>uvmcopy</code>中首先删除父进程的可写位，并设置第8位（在<code>riscv.h</code>中define一个），之后分配内存的部分全部删掉，将映射<code>mappages</code>中的新内存<code>mem</code>改成已有的<code>pa</code>就行了。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kernel/riscv.h</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PTE_C (1L &lt;&lt; 7)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// kernel/vm.c</span></span><br><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">uvmcopy</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> old, <span class=\"type\">pagetable_t</span> new, uint64 sz)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; sz; i += PGSIZE)&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    pa = PTE2PA(*pte);</span><br><span class=\"line\">    <span class=\"comment\">// modify father</span></span><br><span class=\"line\">    *pte = *pte&amp;(~PTE_W)|PTE_C;</span><br><span class=\"line\">    flags = PTE_FLAGS(*pte);</span><br><span class=\"line\">    <span class=\"comment\">// if((mem = kalloc()) == 0)</span></span><br><span class=\"line\">    <span class=\"comment\">//   goto err;</span></span><br><span class=\"line\">    <span class=\"comment\">// memmove(mem, (char*)pa, PGSIZE);</span></span><br><span class=\"line\">    <span class=\"comment\">// if(mappages(new, i, PGSIZE, (uint64)mem, flags) != 0)&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(mappages(new, i, PGSIZE, pa, flags) != <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">      <span class=\"comment\">// kfree(mem);</span></span><br><span class=\"line\">      <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 这里在引用计数设计后补上</span></span><br><span class=\"line\">    addref((<span class=\"type\">void</span> *)pa);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"识别page-fault\">识别page fault</h2>\n<p>在<code>usertrap</code>中增加page fault的处理，根据文档：</p>\n<img data-src=\"/posts/3f0e8b2b/image-16815773560073.png\" class=\"\" title=\"image-16815773560073\">\n<p>应当是在<code>r_scause() == 15 </code>时是因为page fault而trap的（其他的page fault不是复制这些操作），所以在这里复制原映射的page给当前进程，注意判断是否是COW的page fault，剩下就是普通的复制页面，可参考原本的<code>uvmcopy</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(r_scause() == <span class=\"number\">15</span>) &#123;</span><br><span class=\"line\">    uint64 va = PGROUNDDOWN(r_stval());</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(va &gt;= MAXVA || va &gt; p-&gt;sz) </span><br><span class=\"line\">      <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">    <span class=\"type\">pte_t</span> *pte;</span><br><span class=\"line\">    pte = walk(p-&gt;pagetable, va, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pte &amp;&amp; (*pte &amp; PTE_C)) &#123;</span><br><span class=\"line\">      <span class=\"type\">char</span> *mem;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>((mem = kalloc()) == <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">      <span class=\"built_in\">memset</span>(mem, <span class=\"number\">0</span>, PGSIZE);</span><br><span class=\"line\">      uint64 pa = walkaddr(p-&gt;pagetable, va);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(pa == <span class=\"number\">0</span>) </span><br><span class=\"line\">        <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">      memmove(mem, (<span class=\"type\">char</span>*)pa, PGSIZE);</span><br><span class=\"line\">      <span class=\"type\">int</span> flags = PTE_FLAGS(*pte);</span><br><span class=\"line\">      <span class=\"comment\">// write and not COW</span></span><br><span class=\"line\">      flags = (flags | PTE_W) &amp; (~PTE_C);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(mappages(p-&gt;pagetable, va, PGSIZE, (uint64)mem, flags) != <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;usertrap: COW can&#x27;t map new page&quot;</span>);</span><br><span class=\"line\">        kfree(mem);</span><br><span class=\"line\">        <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      kfree((<span class=\"type\">void</span>* )pa);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;usertrap: not COW page fault&quot;</span>);</span><br><span class=\"line\">      err:</span><br><span class=\"line\">        p-&gt;killed = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">goto</span> end;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">...</span><br><span class=\"line\">  end:</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(p-&gt;killed)</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">-1</span>);</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h2 id=\"引用计数的设计\">引用计数的设计</h2>\n<p>剩下的部分是关于引用计数的，设计要非常精巧（/(ㄒoㄒ)/~~）。</p>\n<p>注意这里涉及到可能多个进程改一个引用计数，要加锁，至于数组的大小，从<code>kinit</code>找到了一些奇怪的define的数，点进去发现<code>kernel/memlayout.h</code>中有这样一段：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// the kernel expects there to be RAM</span></span><br><span class=\"line\"><span class=\"comment\">// for use by the kernel and user pages</span></span><br><span class=\"line\"><span class=\"comment\">// from physical address 0x80000000 to PHYSTOP.</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> KERNBASE 0x80000000L</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PHYSTOP (KERNBASE + 128*1024*1024)</span></span><br></pre></td></tr></table></figure>\n<p>所以页表的个数就是<code>128*1024*1024/PGSIZE</code>，index就是第几块，<code>(位置-KERNBASE)/PGSIZE</code>就可算：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">page_ref</span>&#123;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">spinlock</span> <span class=\"title\">lock</span>;</span></span><br><span class=\"line\">  <span class=\"type\">int</span> num;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PGNUM 128*1024*1024/PGSIZE</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">page_ref</span> <span class=\"title\">page_ref</span>[<span class=\"title\">PGNUM</span>];</span></span><br><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">getrefindex</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ((uint64)pa-KERNBASE)/PGSIZE;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>freerange</code>中一起初始化，注意<code>kfree</code>了所以计数先设为<code>1</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">freerange</span><span class=\"params\">(<span class=\"type\">void</span> *pa_start, <span class=\"type\">void</span> *pa_end)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"type\">char</span> *p;</span><br><span class=\"line\">  p = (<span class=\"type\">char</span>*)PGROUNDUP((uint64)pa_start);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(; p + PGSIZE &lt;= (<span class=\"type\">char</span>*)pa_end; p += PGSIZE) &#123;</span><br><span class=\"line\">    initlock(&amp;(page_ref[getrefindex((<span class=\"type\">void</span> *)p)].lock), <span class=\"string\">&quot;page_ref&quot;</span>);</span><br><span class=\"line\">    page_ref[getrefindex(p)].num = <span class=\"number\">1</span>;</span><br><span class=\"line\">    kfree(p);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>写一个加引用计数和设置引用计数为<code>1</code>的函数，不需要写减法因为减的时候可能涉及到释放内存，有并行的风险（先减再读，两步必须在一个锁里）：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">addref</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 index = getrefindex(pa);</span><br><span class=\"line\">  acquire(&amp;page_ref[index].lock);</span><br><span class=\"line\">  page_ref[index].num++;</span><br><span class=\"line\">  release(&amp;page_ref[index].lock);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">setref</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 index = getrefindex(pa);</span><br><span class=\"line\">  acquire(&amp;page_ref[index].lock);</span><br><span class=\"line\">  page_ref[index].num = <span class=\"number\">1</span>;</span><br><span class=\"line\">  release(&amp;page_ref[index].lock);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>先改<code>kalloc</code>，在分配过内存后调用一个上述<code>updateref</code>即可：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> *</span><br><span class=\"line\"><span class=\"title function_\">kalloc</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(r) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>((<span class=\"type\">char</span>*)r, <span class=\"number\">5</span>, PGSIZE); <span class=\"comment\">// fill with junk</span></span><br><span class=\"line\">    setref((<span class=\"type\">void</span>*)r);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (<span class=\"type\">void</span>*)r;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>再改<code>kfree</code>，计数减少前先检验是否已经为<code>0</code>（报panic），之后加锁，修改后检查计数值，如果为<code>0</code>则按原来代码释放内存，最后释放锁。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">kfree</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">run</span> *<span class=\"title\">r</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(((uint64)pa % PGSIZE) != <span class=\"number\">0</span> || (<span class=\"type\">char</span>*)pa &lt; end || (uint64)pa &gt;= PHYSTOP)</span><br><span class=\"line\">    panic(<span class=\"string\">&quot;kfree&quot;</span>);</span><br><span class=\"line\">  </span><br><span class=\"line\">  uint64 index = getrefindex(pa);</span><br><span class=\"line\">  acquire(&amp;page_ref[index].lock);</span><br><span class=\"line\">  page_ref[index].num--;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(page_ref[index].num == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Fill with junk to catch dangling refs.</span></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(pa, <span class=\"number\">1</span>, PGSIZE);</span><br><span class=\"line\"></span><br><span class=\"line\">    r = (<span class=\"keyword\">struct</span> run*)pa;</span><br><span class=\"line\"></span><br><span class=\"line\">    acquire(&amp;kmem.lock);</span><br><span class=\"line\">    r-&gt;next = kmem.freelist;</span><br><span class=\"line\">    kmem.freelist = r;</span><br><span class=\"line\">    release(&amp;kmem.lock);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  release(&amp;page_ref[index].lock);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这里有个细节，是在读网上的博客看到的，如果引用计数的减少写在<code>kfree</code>里是最方便的，因为原本的代码中<code>kfree</code>包括了映射变更后的释放，如果引用计数减少写在每个映射改动的地方会很多很麻烦。</p>\n<h2 id=\"内核态的cow\">内核态的COW</h2>\n<p>内核态复制页面COW在<code>copyout</code>中，与<code>usertrap</code>基本一致：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">copyout</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> pagetable, uint64 dstva, <span class=\"type\">char</span> *src, uint64 len)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 n, va0, pa0;</span><br><span class=\"line\">  <span class=\"type\">pte_t</span> *pte;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(len &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">    va0 = PGROUNDDOWN(dstva);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(va0 &gt;= MAXVA) </span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    pte = walk(pagetable, va0, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pte &amp;&amp; (*pte &amp; PTE_C)) &#123;</span><br><span class=\"line\">      <span class=\"type\">char</span> *mem;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>((mem = kalloc()) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;copyout: kalloc failed\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">memset</span>(mem, <span class=\"number\">0</span>, <span class=\"keyword\">sizeof</span>(mem));</span><br><span class=\"line\">      uint64 pa = walkaddr(pagetable, va0);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(pa) &#123;</span><br><span class=\"line\">        memmove(mem, (<span class=\"type\">char</span>*)pa, PGSIZE);</span><br><span class=\"line\">        <span class=\"type\">int</span> flags = PTE_FLAGS(*pte);</span><br><span class=\"line\">        <span class=\"comment\">// write and not COW</span></span><br><span class=\"line\">        flags = (flags | PTE_W) &amp; (~PTE_C);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mappages(pagetable, va0, PGSIZE, (uint64)mem, flags) != <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">          <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;copyout: COW can&#x27;t map new page&quot;</span>);</span><br><span class=\"line\">          kfree(mem);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        kfree((<span class=\"type\">void</span>*)pa);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    pa0 = walkaddr(pagetable, va0);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pa0 == <span class=\"number\">0</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    n = PGSIZE - (dstva - va0);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(n &gt; len)</span><br><span class=\"line\">      n = len;</span><br><span class=\"line\">    memmove((<span class=\"type\">void</span> *)(pa0 + (dstva - va0)), src, n);</span><br><span class=\"line\"></span><br><span class=\"line\">    len -= n;</span><br><span class=\"line\">    src += n;</span><br><span class=\"line\">    dstva = va0 + PGSIZE;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"函数定义补充\">函数定义补充</h2>\n<p>使用的函数添加到<code>kernel/def.h</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kalloc.c</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">void</span>            <span class=\"title function_\">addref</span><span class=\"params\">(<span class=\"type\">void</span> *)</span>;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">// vm.c</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">pte_t</span> *         <span class=\"title function_\">walk</span><span class=\"params\">(<span class=\"type\">pagetable_t</span>, uint64, <span class=\"type\">int</span>)</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"重复映射判断的修改\">重复映射判断的修改</h2>\n<p>上面代码写完如果直接跑会报panic: mappages: remap，因为重复映射时原本会报错，但现在如果发现page有标记<code>PTE_C</code>就可以不报错，在<code>mappages()</code>中修改：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">mappages</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> pagetable, uint64 va, uint64 size, uint64 pa, <span class=\"type\">int</span> perm)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">    <span class=\"keyword\">if</span>((*pte &amp; PTE_C) == <span class=\"number\">0</span> &amp;&amp; (*pte &amp; PTE_V))</span><br><span class=\"line\">      panic(<span class=\"string\">&quot;mappages: remap&quot;</span>);</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"实现\">实现</h1>\n<p>以下文件都在kernel中，所以不写一级目录了。</p>\n<p><code>def.h</code>：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// kalloc.c</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">void</span>            <span class=\"title function_\">addref</span><span class=\"params\">(<span class=\"type\">void</span> *)</span>;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">// vm.c</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">pte_t</span> *         <span class=\"title function_\">walk</span><span class=\"params\">(<span class=\"type\">pagetable_t</span>, uint64, <span class=\"type\">int</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p><code>kalloc.c</code></p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">page_ref</span>&#123;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">spinlock</span> <span class=\"title\">lock</span>;</span></span><br><span class=\"line\">  <span class=\"type\">int</span> num;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PGNUM 128*1024*1024/PGSIZE</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">page_ref</span> <span class=\"title\">page_ref</span>[<span class=\"title\">PGNUM</span>];</span></span><br><span class=\"line\">uint64</span><br><span class=\"line\"><span class=\"title function_\">getrefindex</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ((uint64)pa-KERNBASE)/PGSIZE;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">addref</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 index = getrefindex(pa);</span><br><span class=\"line\">  acquire(&amp;page_ref[index].lock);</span><br><span class=\"line\">  page_ref[index].num++;</span><br><span class=\"line\">  release(&amp;page_ref[index].lock);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">setref</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 index = getrefindex(pa);</span><br><span class=\"line\">  acquire(&amp;page_ref[index].lock);</span><br><span class=\"line\">  page_ref[index].num = <span class=\"number\">1</span>;</span><br><span class=\"line\">  release(&amp;page_ref[index].lock);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">freerange</span><span class=\"params\">(<span class=\"type\">void</span> *pa_start, <span class=\"type\">void</span> *pa_end)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"type\">char</span> *p;</span><br><span class=\"line\">  p = (<span class=\"type\">char</span>*)PGROUNDUP((uint64)pa_start);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(; p + PGSIZE &lt;= (<span class=\"type\">char</span>*)pa_end; p += PGSIZE) &#123;</span><br><span class=\"line\">    initlock(&amp;(page_ref[getrefindex((<span class=\"type\">void</span> *)p)].lock), <span class=\"string\">&quot;page_ref&quot;</span>);</span><br><span class=\"line\">    page_ref[getrefindex(p)].num = <span class=\"number\">1</span>;</span><br><span class=\"line\">    kfree(p);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">kfree</span><span class=\"params\">(<span class=\"type\">void</span> *pa)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">run</span> *<span class=\"title\">r</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(((uint64)pa % PGSIZE) != <span class=\"number\">0</span> || (<span class=\"type\">char</span>*)pa &lt; end || (uint64)pa &gt;= PHYSTOP)</span><br><span class=\"line\">    panic(<span class=\"string\">&quot;kfree&quot;</span>);</span><br><span class=\"line\">  </span><br><span class=\"line\">  uint64 index = getrefindex(pa);</span><br><span class=\"line\">  acquire(&amp;page_ref[index].lock);</span><br><span class=\"line\">  page_ref[index].num--;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(page_ref[index].num == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Fill with junk to catch dangling refs.</span></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(pa, <span class=\"number\">1</span>, PGSIZE);</span><br><span class=\"line\"></span><br><span class=\"line\">    r = (<span class=\"keyword\">struct</span> run*)pa;</span><br><span class=\"line\"></span><br><span class=\"line\">    acquire(&amp;kmem.lock);</span><br><span class=\"line\">    r-&gt;next = kmem.freelist;</span><br><span class=\"line\">    kmem.freelist = r;</span><br><span class=\"line\">    release(&amp;kmem.lock);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  release(&amp;page_ref[index].lock);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">void</span> *</span><br><span class=\"line\"><span class=\"title function_\">kalloc</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">run</span> *<span class=\"title\">r</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  acquire(&amp;kmem.lock);</span><br><span class=\"line\">  r = kmem.freelist;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(r)</span><br><span class=\"line\">    kmem.freelist = r-&gt;next;</span><br><span class=\"line\">  release(&amp;kmem.lock);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(r) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>((<span class=\"type\">char</span>*)r, <span class=\"number\">5</span>, PGSIZE); <span class=\"comment\">// fill with junk</span></span><br><span class=\"line\">    setref((<span class=\"type\">void</span>*)r);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (<span class=\"type\">void</span>*)r;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>riscv.h</code></p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PTE_C (1L &lt;&lt; 7)</span></span><br></pre></td></tr></table></figure>\n<p><code>trap.c</code></p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(r_scause() == <span class=\"number\">15</span>) &#123;</span><br><span class=\"line\">    uint64 va = PGROUNDDOWN(r_stval());</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(va &gt;= MAXVA || va &gt; p-&gt;sz) </span><br><span class=\"line\">      <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">    <span class=\"type\">pte_t</span> *pte;</span><br><span class=\"line\">    pte = walk(p-&gt;pagetable, va, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pte &amp;&amp; (*pte &amp; PTE_C)) &#123;</span><br><span class=\"line\">      <span class=\"type\">char</span> *mem;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>((mem = kalloc()) == <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">      uint64 pa = walkaddr(p-&gt;pagetable, va);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(pa == <span class=\"number\">0</span>) </span><br><span class=\"line\">        <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">      memmove(mem, (<span class=\"type\">char</span>*)pa, PGSIZE);</span><br><span class=\"line\">      <span class=\"type\">int</span> flags = PTE_FLAGS(*pte);</span><br><span class=\"line\">      <span class=\"comment\">// write and not COW</span></span><br><span class=\"line\">      flags = (flags | PTE_W) &amp; (~PTE_C);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(mappages(p-&gt;pagetable, va, PGSIZE, (uint64)mem, flags) != <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;usertrap: COW can&#x27;t map new page&quot;</span>);</span><br><span class=\"line\">        kfree(mem);</span><br><span class=\"line\">        <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      kfree((<span class=\"type\">void</span>* )pa);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;usertrap: not COW page fault&quot;</span>);</span><br><span class=\"line\">      err:</span><br><span class=\"line\">        p-&gt;killed = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">goto</span> end;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>((which_dev = devintr()) != <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ok</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;usertrap(): unexpected scause %p pid=%d\\n&quot;</span>, r_scause(), p-&gt;pid);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;            sepc=%p stval=%p\\n&quot;</span>, r_sepc(), r_stval());</span><br><span class=\"line\">    p-&gt;killed = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  end:</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(p-&gt;killed)</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">-1</span>);</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><code>vm.c</code></p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">mappages</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> pagetable, uint64 va, uint64 size, uint64 pa, <span class=\"type\">int</span> perm)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">    <span class=\"keyword\">if</span>((*pte &amp; PTE_C) == <span class=\"number\">0</span> &amp;&amp; (*pte &amp; PTE_V))</span><br><span class=\"line\">      panic(<span class=\"string\">&quot;mappages: remap&quot;</span>);</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">uvmcopy</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> old, <span class=\"type\">pagetable_t</span> new, uint64 sz)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"type\">pte_t</span> *pte;</span><br><span class=\"line\">  uint64 pa, i;</span><br><span class=\"line\">  uint flags;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; sz; i += PGSIZE)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>((pte = walk(old, i, <span class=\"number\">0</span>)) == <span class=\"number\">0</span>)</span><br><span class=\"line\">      panic(<span class=\"string\">&quot;uvmcopy: pte should exist&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>((*pte &amp; PTE_V) == <span class=\"number\">0</span>)</span><br><span class=\"line\">      panic(<span class=\"string\">&quot;uvmcopy: page not present&quot;</span>);</span><br><span class=\"line\">    pa = PTE2PA(*pte);</span><br><span class=\"line\">    <span class=\"comment\">// modify father</span></span><br><span class=\"line\">    *pte = (*pte &amp; (~PTE_W)) | PTE_C;</span><br><span class=\"line\">    flags = PTE_FLAGS(*pte);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(mappages(new, i, PGSIZE, (uint64)pa, flags) != <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">goto</span> err;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    addref((<span class=\"type\">void</span> *)pa);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> err:</span><br><span class=\"line\">  uvmunmap(new, <span class=\"number\">0</span>, i / PGSIZE, <span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">copyout</span><span class=\"params\">(<span class=\"type\">pagetable_t</span> pagetable, uint64 dstva, <span class=\"type\">char</span> *src, uint64 len)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  uint64 n, va0, pa0;</span><br><span class=\"line\">  <span class=\"type\">pte_t</span> *pte;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(len &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">    va0 = PGROUNDDOWN(dstva);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(va0 &gt;= MAXVA) </span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    pte = walk(pagetable, va0, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pte &amp;&amp; (*pte &amp; PTE_C)) &#123;</span><br><span class=\"line\">      <span class=\"type\">char</span> *mem;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>((mem = kalloc()) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;copyout: kalloc failed\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      uint64 pa = walkaddr(pagetable, va0);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(pa) &#123;</span><br><span class=\"line\">        memmove(mem, (<span class=\"type\">char</span>*)pa, PGSIZE);</span><br><span class=\"line\">        <span class=\"type\">int</span> flags = PTE_FLAGS(*pte);</span><br><span class=\"line\">        <span class=\"comment\">// write and not COW</span></span><br><span class=\"line\">        flags = (flags | PTE_W) &amp; (~PTE_C);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mappages(pagetable, va0, PGSIZE, (uint64)mem, flags) != <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">          <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;copyout: COW can&#x27;t map new page&quot;</span>);</span><br><span class=\"line\">          kfree(mem);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        kfree((<span class=\"type\">void</span>*)pa);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    pa0 = walkaddr(pagetable, va0);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pa0 == <span class=\"number\">0</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    n = PGSIZE - (dstva - va0);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(n &gt; len)</span><br><span class=\"line\">      n = len;</span><br><span class=\"line\">    memmove((<span class=\"type\">void</span> *)(pa0 + (dstva - va0)), src, n);</span><br><span class=\"line\"></span><br><span class=\"line\">    len -= n;</span><br><span class=\"line\">    src += n;</span><br><span class=\"line\">    dstva = va0 + PGSIZE;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"测试\">测试</h1>\n<p>记得加一个<code>time.txt</code>的文件记录时间。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo python3 grade-lab-cow</span><br></pre></td></tr></table></figure>\n<img data-src=\"/posts/3f0e8b2b/image-20230416193117738.png\" class=\"\" title=\"image-20230416193117738\">\n","categories":["操作系统"],"tags":["OS","MIT 6.S081"]},{"title":"【MIT 6.S081】笔记","url":"/posts/a7a8912e/","content":"<p>学习MIT 6.S081过程中的一些理解，并非完整的操作系统理论知识笔记</p>\n<span id=\"more\"></span>\n<h1 id=\"进程\">进程</h1>\n<ul>\n<li>内核将每个进程与一个进程标识符pid关联</li>\n</ul>\n<h2 id=\"fork\">fork</h2>\n<ul>\n<li>\n<p>进程创建子进程的函数</p>\n</li>\n<li>\n<p>创建子进程的过程可以视作，父进程的所有资源<strong>复制</strong>一份，即父子进程拥有独立的资源，子进程与父进程代码相同但是从<code>fork()</code>函数之后开始执行</p>\n</li>\n<li>\n<p>进程用<code>exit</code> 函数退出，子进程向父进程返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">pid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span> ，子进程的函数返回 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></p>\n</li>\n<li>\n<p>父进程用<code>wait</code>函数等待子进程完成</p>\n</li>\n</ul>\n<h2 id=\"exec\">exec</h2>\n<ul>\n<li>从指定的文件中读取并加载指令，并替代当前调用进程的指令（丢弃了原进程的资源），原进程不需要单独写返回（完全替代了原进程）</li>\n</ul>\n<h1 id=\"i-o\">I/O</h1>\n<ul>\n<li>系统调用 <code>read</code> 和 <code>write</code> 从文件描述符所指的文件中读或者写 n 个字节。<code>read(fd, buf, n)</code> 从 <code>fd</code> 读最多 n 个字节（<code>fd</code> 可能没有 n 个字节），将它们拷贝到 <code>buf</code> 中，然后返回读出的字节数。</li>\n</ul>\n<h1 id=\"管道\">管道</h1>\n<ul>\n<li>\n<p>进程间通信</p>\n</li>\n<li>\n<p>读和写描述符</p>\n</li>\n</ul>\n<img data-src=\"/posts/a7a8912e/pipe.jpg\" class=\"\" title=\"pipe\">\n<h1 id=\"用户-内核模式\">用户/内核模式</h1>\n<ul>\n<li>普通权限/特定权限指令</li>\n</ul>\n<h1 id=\"页表\">页表</h1>\n<ul>\n<li>\n<p>内存管理单元（MMU，Memory Management Unit）将指令中的（虚拟）地址转换成物理地址</p>\n</li>\n<li>\n<p>SATP的寄存器会保存页表的物理地址（指向最高一级的页表）</p>\n</li>\n<li>\n<p>index和offset，index用来查找page，offset对应的是一个page中的哪个字节</p>\n</li>\n<li>\n<p>一般三级页表</p>\n</li>\n</ul>\n<h1 id=\"traps-x86的中断\">Traps（X86的中断）</h1>\n<ul>\n<li>用户程序想要进入内核（设备信号<code>interrupt</code>、非法操作<code>exception</code>），OS需要在用户/内核模式间转换</li>\n<li>系统必须保存寄存器以备将来的状态恢复</li>\n</ul>\n<h1 id=\"page-fault\">Page fault</h1>\n<p>信息：引起page fault 的内存地址、原因类型、程序计数值</p>\n<h2 id=\"lazy-allocation\">lazy allocation</h2>\n<p>内核不提前分配物理内存，应用程序使用到新申请的内存时会触发page fault，希望内核能够分配一个内存page，并且重新执行指令。</p>\n<p><code>p-&gt;sz</code>指向stack的顶，heap的底，新旧<code>p-&gt;sz</code>之间就是未分配的部分。</p>\n<p>在page fault handler中，通过kalloc函数分配一个内存page；初始化这个page内容为0；将这个内存page映射到user page table中在page fault handler中，通过kalloc函数分配一个内存page；初始化这个page内容为0；将这个内存page映射到user page table中</p>\n<h2 id=\"0-fill-on-demand\">0 fill on demand</h2>\n<p>用户程序的地址空间：text区域（指令），data区域（初始化了的全局变量），BSS区域（未被初始化、初始化为0的全局或者静态变量）</p>\n<p>物理内存只分配一个page内容是0，虚拟空间的全0的page全映射到这一个物理内存（只读），需要写的时候page fault，重新给个page。</p>\n<h2 id=\"copy-on-write-fork-cow-fork\">copy-on-write fork（COW fork）</h2>\n<p>创建子进程时，直接共享父进程的物理内存page，设置子进程的PTE指向父进程对应的物理内存page，PTE设只读防止被修改。触发page fault后拷贝新page给子进程，二者PTE就可设可读可写了。</p>\n<p>重新执行用户指令是指调用userret函数（lab 4见过）</p>\n<p>PTE最后两位RSW保留给supervisor software（内核），将bit8标识为当前是一个copy-on-write page。</p>\n<p>但由于共享，需要对于每一个物理内存page的引用进行计数，确保释放是安全的。</p>\n<h2 id=\"demand-paging\">Demand paging</h2>\n<h1 id=\"线程\">线程</h1>\n<p>线程就是单个串行执行代码的单元，它只占用一个CPU并且以普通的方式一个接一个的执行指令。</p>\n<p>线程的状态包含线程的状态包含：程序计数器、寄存器、栈。</p>\n<p>多线程的并行运行：多CPU、一个CPU切换多线程。</p>\n<p>XV6内核共享内存，支持内核线程的概念，每个用户进程都有一个内核线程来执行来自用户进程的系统调用。所有的内核线程都共享了内核内存。</p>\n<p>每一个用户进程都有独立的内存地址空间，包含一个线程控制用户进程代码指令的执行，用户线程之间没有共享内存。</p>\n<p>每个CPU核都有一个线程调度器（Scheduler）。</p>\n<p>位于内核的定时器中断处理程序，自愿把CPUyield给线程调度器。</p>\n<p>pre-emptive scheduling：将一个RUNNING转换成RUNABLE。</p>\n<p>一个用户进程切换到另一个用户进程:</p>\n<ul>\n<li>\n<p>第一个用户进程接入内核（一个定时器中断强迫CPU从用户空间进程切换到内核，trampoline代码将用户寄存器保存于用户进程对应的trapframe对象中），保存用户进程的状态并运行第一个用户进程的内核线程（usertrap）。</p>\n</li>\n<li>\n<p>从第一个用户进程的内核线程（包括一些工作和swtch；swtch函数会保存用户进程P1对应内核线程的寄存器至context对象，恢复之前这个CPU核的调度器线程保存的寄存器和stack pointer，之后就在调度器线程的context下执行schedulder函数中；schedulder再调用swtch，保存自己的寄存器到调度器线程的context对象，找到第二个进程之前保存的context，恢复其中的寄存器，第二个进程之前的swtch函数会被恢复，并返回到进程P2所在的系统调用或者中断处理程序中）切换到第二个用户进程的内核线程。</p>\n</li>\n<li>\n<p>之后，第二个用户进程的内核线程暂停自己，并恢复第二个用户进程的用户寄存器。</p>\n</li>\n<li>\n<p>最后返回到第二个用户进程继续执行。</p>\n</li>\n</ul>\n<p>用户进程的内核线程context对象保存在用户进程对应的proc结构体中；调度器线程没有对应的进程和proc结构体，所以调度器线程的context对象保存在cpu结构体中（对应一个CPU核，有一个context字段）。</p>\n<p>context保存在trapframe中不是不可以，但是设计成两个也许是简化/让代码清晰。</p>\n","categories":["操作系统"],"tags":["OS","MIT 6.S081"]},{"title":"【MIT 6.S081】实验环境配置","url":"/posts/4be1f6bb/","content":"<p>麻省理工学院 PDOS 实验室开设的本科生的操作系统课程，基于 RISC-V 开发了一个教学用操作系统 xv6，前身是 MIT 著名的课程 6.828</p>\n<span id=\"more\"></span>\n<!--more-->\n<h1 id=\"资源汇总\">资源汇总</h1>\n<p><a href=\"https://pdos.csail.mit.edu/6.828/2021/index.html\">2021年秋MIT 6.S081官网</a>：教材与lab都可以查到</p>\n<p><a href=\"https://www.bilibili.com/video/BV19k4y1C7kA?spm_id_from=333.999.0.0&amp;vd_source=f787d0362985ea028753ba0011c47823\">2020秋中英字幕课程</a></p>\n<p><a href=\"https://mit-public-courses-cn-translatio.gitbook.io/mit6-s081/\">课程中文翻译</a></p>\n<p><a href=\"https://th0ar.gitbooks.io/xv6-chinese/content/index.html\">xv6中文文档</a></p>\n<h1 id=\"linux系统配置\">linux系统配置</h1>\n<p>我用的是Windows的子系统WSL，子系统是Ubuntu-20.04，配置可以参考<a href=\"https://www.lyroch.site/posts/973e27dc/\">我的博客：WSL激活安装与迁移盘操作</a>，用虚拟机之类的也是可以的，此处省略</p>\n<h1 id=\"xv6lab系统\">XV6lab系统</h1>\n<h2 id=\"环境配置\">环境配置</h2>\n<p>若是刚启动的系统，别忘了进行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get upgrade</span><br></pre></td></tr></table></figure>\n<p>按<a href=\"https://pdos.csail.mit.edu/6.828/2021/tools.html\">官网</a>的方法WSL只需一条指令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install git build-essential gdb-multiarch qemu-system-misc gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu</span><br></pre></td></tr></table></figure>\n<h2 id=\"从github下载\">从Github下载</h2>\n<p>我clone的是2021版的lab</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> git://g.csail.mit.edu/xv6-labs-2021</span><br></pre></td></tr></table></figure>\n<p>切换到文件夹，并切换到lab分支</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> xv6-labs-2021</span><br><span class=\"line\">git checkout util</span><br></pre></td></tr></table></figure>\n<h2 id=\"编译qemu\">编译qemu</h2>\n<p>接上面，输入：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">make qemu</span><br></pre></td></tr></table></figure>\n<p>结果应是很长的一大段，后面一段意思很明确，这样就算正确启动了：</p>\n<img data-src=\"/posts/4be1f6bb/qemu.jpg\" class=\"\" title=\"qemu\">\n<p>退出：<code>ctrl a + x</code></p>\n<h1 id=\"vscode配置\">VSCode配置</h1>\n<p>为了能在WSL中使用VSCode编写代码（远程连接），以及使用VSCode debug（gdb配置）</p>\n<h2 id=\"vscode远程连接wsl\">VSCode远程连接WSL</h2>\n<p>需要安装VSCode里的一个插件：</p>\n<img data-src=\"/posts/4be1f6bb/wsl.jpg\" class=\"\" title=\"wsl\">\n<p>安装完成后，目录到在先前的<code>xv6-labs-2021</code>文件夹，输入<code>code .</code>，注意点前面有个空格，意思是在这个文件夹启动VSCode，如果是第一次启动会有一些简单的安装，完成后再次输入<code>code .</code>，便在windows系统下启动了一个VSCode窗口，并在远程资源管理器可以看到成功连接的界面：</p>\n<img data-src=\"/posts/4be1f6bb/sss.jpg\" class=\"\" title=\"sss\">\n<p><strong>如果遇到code指令不存在的问题</strong>，指令没输错的话，windows下也是会报这个错的，可以查找网上资料如何解决<code>code</code>指令不存在，应该是VSCode的旧版本缺一个指令，新版本/旧版本安装指令后，没有添加到环境变量（安装的文件夹下的<code>bin</code>文件夹）</p>\n<h2 id=\"vscode配置qemu的gdb调试\">VSCode配置qemu的gdb调试</h2>\n<h3 id=\"普通gdb调试\">普通gdb调试</h3>\n<p>在目录下执行以下指令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">make qemu-gdb</span><br></pre></td></tr></table></figure>\n<p>另开一个终端，输入以下指令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gdb-multiarch kernel/kernel</span><br></pre></td></tr></table></figure>\n<p>结果会出现一大段字和gdb的界面，字里有一个warning，我不知道是否需要，但是网友的教程把它修改掉了，执行以下指令（退出qemu和gdb后），其中<code>xxx</code>是自己文件夹的路径：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;add-auto-load-safe-path xxx/xv6-labs-2021/.gdbinit&quot;</span> &gt;&gt; <span class=\"string\">&quot;xxx/.gdbinit&quot;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置vscode\">配置VSCode</h3>\n<p>远程启动VSCode后，添加插件：</p>\n<img data-src=\"/posts/4be1f6bb/cpp.jpg\" class=\"\" title=\"cpp\">\n<p>创建<code>.vscode</code>文件夹，添加文件<code>launch.json</code>：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;0.2.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;configurations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;xv6debug&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cppdbg&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;request&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;launch&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;program&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;$&#123;workspaceFolder&#125;/kernel/kernel&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stopAtEntry&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;cwd&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;$&#123;workspaceFolder&#125;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;miDebuggerServerAddress&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;127.0.0.1:26000&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">//见.gdbinit 中 target remote xxxx:xx</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;miDebuggerPath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/usr/bin/gdb-multiarch&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">// which gdb-multiarch</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;MIMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;gdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;preLaunchTask&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;xv6build&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>其中<code>miDebuggerServerAddress</code>一项的内容，在目录下有一个<code>.gdbinit</code>文件，里面有&quot;target remote …&quot;，打开这个文件复制来地址后，将这一行注释掉（添加<code>@REM</code>）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">@REM target remote 127.0.0.1:26000</span><br></pre></td></tr></table></figure>\n<p>再添加文件<code>tasks.json</code>：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;2.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;tasks&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;label&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;xv6build&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;shell&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;isBackground&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;command&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;make qemu-gdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;problemMatcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;pattern&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">                        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                            <span class=\"attr\">&quot;regexp&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;.&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                            <span class=\"attr\">&quot;file&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                            <span class=\"attr\">&quot;location&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                            <span class=\"attr\">&quot;message&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">                        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">                    <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;background&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                        <span class=\"attr\">&quot;beginsPattern&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;.*Now run &#x27;gdb&#x27; in another window.&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                        <span class=\"attr\">&quot;endsPattern&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;.&quot;</span></span><br><span class=\"line\">                    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>这样就可以在VSCode里运行qemu的gdb调试了！</p>\n","categories":["操作系统"],"tags":["OS","MIT 6.S081"]},{"title":"【STL】算法竞赛常用STL","url":"/posts/1b08a78e/","content":"<p>一些常用STL</p>\n<span id=\"more\"></span>\n<h1 id=\"algorithm\">Algorithm</h1>\n<h2 id=\"sort\">sort</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sort</span>(a, a + n, &amp;cmp); </span><br><span class=\"line\"><span class=\"built_in\">stable_sort</span>(a, a + n, &amp;cmp); <span class=\"comment\">//稳定排序</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"lower-bound-upper-bound\">lower_bound/upper_bound</h2>\n<p>条件：有序序列</p>\n<p>默认：lower_bound找序列中第一个<strong>大于等于</strong>val的数，upper_bound找序列中第一个<strong>大于</strong>val的数。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">lower_bound</span>(a, a + n, val);  <span class=\"comment\">//返回第一个大于等于val的指针</span></span><br><span class=\"line\"><span class=\"built_in\">upper_bound</span>(a, a + n, val);  <span class=\"comment\">//返回第一个大于val的指针</span></span><br><span class=\"line\"><span class=\"built_in\">lower_bound</span>(a, a + n, val, <span class=\"built_in\">greater</span>&lt;T&gt;());  <span class=\"comment\">//返回第一个小于等于val的指针</span></span><br><span class=\"line\"><span class=\"built_in\">upper_bound</span>(a, a + n, val, <span class=\"built_in\">greater</span>&lt;T&gt;());  <span class=\"comment\">//返回第一个小于val的指针</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"equal-range\">equal_range</h2>\n<p>条件：有序序列</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">equal_range</span>(begin, end, val); </span><br><span class=\"line\"><span class=\"comment\">//在[begin, end)区间寻找值为val的区间，begin、end为迭代器或指针</span></span><br><span class=\"line\"><span class=\"comment\">//返回一个pair，值为val的区间两端点迭代器（左闭右开），查找失败时first和second相同</span></span><br></pre></td></tr></table></figure>\n<p>注意返回的是迭代器，如果是数组即<code>pair&lt;int*,int*&gt;</code>，如果是vector即<code>pair&lt;vector&lt;int&gt;::iterator,vector&lt;int&gt;::iterator&gt;</code></p>\n<h2 id=\"unique\">unique</h2>\n<p>条件：有序序列</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">unique</span>(begin, end); </span><br><span class=\"line\"><span class=\"comment\">//在[begin, end)区间用不重复元素替代重复元素，begin、end为迭代器</span></span><br><span class=\"line\"><span class=\"comment\">//返回最后一个不重复元素后一位的迭代器</span></span><br></pre></td></tr></table></figure>\n<p>常与erase操作一起用达到改变删去重复元素并改变数组长度的作用</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">a.<span class=\"built_in\">erase</span>(<span class=\"built_in\">unique</span>(a.<span class=\"built_in\">begin</span>(), a.<span class=\"built_in\">end</span>()), a.<span class=\"built_in\">end</span>());</span><br></pre></td></tr></table></figure>\n<p>注意用在数组时是左闭右开。</p>\n<h2 id=\"next-prev-permutation\">next/prev_permutation</h2>\n<p>获取排列</p>\n<p>next_permutation先小后大，prev_permutation先大后小</p>\n<p>返回bool值，若有下一排列就返回true，否则返回false，且返回false的同时将数组改变为下一排列（从头开始的第一个排列）</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">next_permutation</span>(a, a+n, &amp;cmp); <span class=\"comment\">//数组</span></span><br><span class=\"line\"><span class=\"built_in\">next_permutation</span>(begin, end, &amp;cmp); <span class=\"comment\">//迭代器</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>在10之后很慢</li>\n</ul>\n<h2 id=\"reverse\">reverse</h2>\n<p>翻转数组或迭代器</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">reverse</span>(a, a+n);</span><br><span class=\"line\"><span class=\"built_in\">reverse</span>(begin, end);</span><br></pre></td></tr></table></figure>\n<h1 id=\"array\">array</h1>\n<p>.begin(), .end(), .size(), .max_size(), .empty(), .at(), .front(), .data()都与vector相同</p>\n<p>.fill(n)把数组里的数都赋值为n</p>\n<p>声明：array&lt;int, n&gt; a={xx,xx,…}，n个元素，n只能为常数</p>\n<p>访问：auto it=a.begin(),it++</p>\n<p>array与数组储存在栈中，vector储存在堆中</p>\n<h1 id=\"utility\">utility</h1>\n<h2 id=\"pair\">pair</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">pair&lt;T1, T2&gt; p;</span><br><span class=\"line\">p.first</span><br><span class=\"line\">p.<span class=\"function\">second</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">make_pair</span><span class=\"params\">(a,b)</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"swap\">swap</h2>\n<p>C++11前在algorithm头文件，之后在utility头文件</p>\n<h1 id=\"set-multiset\">set/multiset</h1>\n<p>set无重复元素，multiset元素可重复</p>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">set&lt;T, &amp;cmp&gt; st;</span><br><span class=\"line\">multiset&lt;T, &amp;cmp&gt; st;</span><br><span class=\"line\"><span class=\"function\">set&lt;T&gt; <span class=\"title\">st</span><span class=\"params\">(st1)</span></span>; </span><br><span class=\"line\"><span class=\"function\">set&lt;T&gt; <span class=\"title\">st</span><span class=\"params\">(st2.begin(), st2.end())</span></span>; <span class=\"comment\">//用另一个set声明</span></span><br><span class=\"line\"><span class=\"function\">set&lt;T&gt; <span class=\"title\">st</span><span class=\"params\">(arr, arr+n)</span></span>; <span class=\"comment\">//用数组声明</span></span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">set&lt;T&gt;::iterator it; <span class=\"comment\">//声明迭代器</span></span><br><span class=\"line\">st.<span class=\"built_in\">begin</span>(); st.<span class=\"built_in\">end</span>(); <span class=\"comment\">//获得首、尾迭代器</span></span><br><span class=\"line\">st.<span class=\"built_in\">rbegin</span>(); st.<span class=\"built_in\">rend</span>(); <span class=\"comment\">//获得反向首位迭代器</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//为空返回1，不空返回0</span></span><br><span class=\"line\">st.<span class=\"built_in\">size</span>(); st.<span class=\"built_in\">max_size</span>(); <span class=\"comment\">//返回集合实际大小和最大容量</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">insert</span>(x); <span class=\"comment\">//插入x</span></span><br><span class=\"line\">st.<span class=\"built_in\">insert</span>(arr, arr+n); <span class=\"comment\">//插入数组</span></span><br><span class=\"line\">st.<span class=\"built_in\">insert</span>(begin, end); <span class=\"comment\">//插入一段数据，可以是别的容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">erase</span>(x); <span class=\"comment\">//删除x</span></span><br><span class=\"line\">st.<span class=\"built_in\">erase</span>(it); <span class=\"comment\">//删除迭代器指向的元素，删后迭代器</span></span><br><span class=\"line\">st.<span class=\"built_in\">erase</span>(begin, end); <span class=\"comment\">//删除一段数据</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">find</span>(x); <span class=\"comment\">//查找x元素，找不到返回st.end()，找到返回指向该元素的迭代器</span></span><br><span class=\"line\">st.<span class=\"built_in\">count</span>(x); <span class=\"comment\">//查询x元素的个数（0或1）</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">clear</span>(); <span class=\"comment\">//清空集合</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">swap</span>(st1); <span class=\"comment\">//交换</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"vector\">vector</h1>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">vector&lt;T&gt; a;</span><br><span class=\"line\">vector&lt;T&gt; a = (n, i); <span class=\"comment\">//将前n个赋值为i</span></span><br><span class=\"line\"><span class=\"comment\">//N*M的二维数组</span></span><br><span class=\"line\"><span class=\"comment\">//方法1：</span></span><br><span class=\"line\">vector&lt;vector&lt;T&gt; &gt; <span class=\"built_in\">a</span>(N); </span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; N; i++)</span><br><span class=\"line\">    a[i].<span class=\"built_in\">resize</span>(M);</span><br><span class=\"line\"><span class=\"comment\">//方法2：</span></span><br><span class=\"line\">vector&lt;vector&lt;T&gt; &gt; <span class=\"built_in\">a</span>(N, <span class=\"built_in\">vector</span>&lt;T&gt;(M));</span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">vector&lt;T&gt;::iterator it; <span class=\"comment\">//声明迭代器</span></span><br><span class=\"line\">a.<span class=\"built_in\">begin</span>(); a.<span class=\"built_in\">end</span>(); <span class=\"comment\">//获得首、尾迭代器</span></span><br><span class=\"line\">a.<span class=\"built_in\">rbegin</span>(); a.<span class=\"built_in\">rend</span>(); <span class=\"comment\">//获得反向首位迭代器</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//为空返回1，不空返回0</span></span><br><span class=\"line\">a.<span class=\"built_in\">size</span>(); a.<span class=\"built_in\">max_size</span>(); <span class=\"comment\">//返回容器实际大小/最大容量</span></span><br><span class=\"line\">a.<span class=\"built_in\">capacity</span>(); <span class=\"comment\">//已分配内存中最多容纳元素个数</span></span><br><span class=\"line\">a.<span class=\"built_in\">resize</span>(x); <span class=\"comment\">//将容器大小置为x</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"built_in\">push_back</span>(); a.<span class=\"built_in\">pop_back</span>(); <span class=\"comment\">//向尾端插入元素/删除尾端元素</span></span><br><span class=\"line\">a.<span class=\"built_in\">insert</span>(it, n, i); <span class=\"comment\">//在it位置之前插入n个值为i的元素，n省略即插入一个，返回原位置</span></span><br><span class=\"line\">a.<span class=\"built_in\">erase</span>(it); a.<span class=\"built_in\">erase</span>(it, it+n); <span class=\"comment\">//删除指定位置/区间位置的元素，返回下一个数据的位置</span></span><br><span class=\"line\">a.<span class=\"built_in\">assign</span>(n, i); <span class=\"comment\">//将前n个元素赋值i</span></span><br><span class=\"line\">a.<span class=\"built_in\">assign</span>(arr, arr+n); <span class=\"comment\">//将数组元素赋值给这个容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"built_in\">at</span>(i) = j; a[i] = j; <span class=\"comment\">//访问第i个元素（0起始）</span></span><br><span class=\"line\">a.<span class=\"built_in\">front</span>(); a.<span class=\"built_in\">back</span>(); <span class=\"comment\">//取最前/最后元素</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"built_in\">clear</span>(); <span class=\"comment\">//清空容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"built_in\">swap</span>(a1); <span class=\"comment\">//交换</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"built_in\">reverse</span>(begin, end); <span class=\"comment\">//元素翻转</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"map-multimap\">map/multimap</h1>\n<p>映射，一一映射和多重映射，键值有序，查询O(n)</p>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">std::map&lt;T1, T2&gt; mp; <span class=\"comment\">//单重映射，允许下标访问</span></span><br><span class=\"line\">std::multimap&lt;T1, T2&gt; mp; <span class=\"comment\">//多重映射，不允许下标访问</span></span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">mp.<span class=\"built_in\">at</span>(key); mp[key]; <span class=\"comment\">//用键值访问</span></span><br><span class=\"line\">it-&gt;first; it-&gt;second; <span class=\"comment\">//迭代器访问键值、映射值</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"built_in\">size</span>(); a.<span class=\"built_in\">max_size</span>(); <span class=\"comment\">//返回容器实际大小/最大容量</span></span><br><span class=\"line\"></span><br><span class=\"line\">mp.<span class=\"built_in\">begin</span>(); mp.<span class=\"built_in\">end</span>(); <span class=\"comment\">//获得首、尾迭代器</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">insert</span>(x); <span class=\"comment\">//插入x</span></span><br><span class=\"line\">st.<span class=\"built_in\">insert</span>(arr, arr+n); <span class=\"comment\">//插入数组</span></span><br><span class=\"line\">st.<span class=\"built_in\">insert</span>(begin, end); <span class=\"comment\">//插入一段数据，可以是别的容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">erase</span>(x); <span class=\"comment\">//删除x</span></span><br><span class=\"line\">st.<span class=\"built_in\">erase</span>(it); <span class=\"comment\">//删除迭代器指向的元素，删后迭代器</span></span><br><span class=\"line\">st.<span class=\"built_in\">erase</span>(begin, end); <span class=\"comment\">//删除一段数据</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"unordered-map-unordered-set\">unordered_map/unordered_set</h1>\n<p>无序map和set，查询O(1)，与map、set基本相同，但不支持迭代器遍历</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">std::unordered_set&lt;T&gt; st;</span><br><span class=\"line\">std::unordersd_map&lt;T1, T2&gt; mp;</span><br></pre></td></tr></table></figure>\n<h1 id=\"stack\">stack</h1>\n<p>栈，先进后出</p>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">stack&lt;T&gt; st;</span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">st.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//如果栈空返回1，不空返回0</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">pop</span>(); st.<span class=\"built_in\">push</span>(); <span class=\"comment\">//入栈、出栈</span></span><br><span class=\"line\">st.<span class=\"built_in\">top</span>(); <span class=\"comment\">//取栈顶元素</span></span><br><span class=\"line\"></span><br><span class=\"line\">st.<span class=\"built_in\">size</span>(); <span class=\"comment\">//返回栈的大小</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>不可用迭代器遍历</li>\n<li>没有clear</li>\n</ul>\n<h1 id=\"queue\">queue</h1>\n<p>队列，先进先出/双端队列，前后都可入队、出队</p>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">queue&lt;T&gt; q;</span><br><span class=\"line\"><span class=\"function\">queue&lt;T&gt; <span class=\"title\">q</span><span class=\"params\">(n, i)</span></span>; <span class=\"comment\">//初始化为由n个i组成的队列</span></span><br><span class=\"line\"></span><br><span class=\"line\">deque&lt;T&gt; q0;</span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">q.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//如果队列空返回1，不空返回0</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">pop</span>(); q.<span class=\"built_in\">push</span>(); <span class=\"comment\">//队尾入队、队头出队</span></span><br><span class=\"line\">q.<span class=\"built_in\">front</span>(); q.<span class=\"built_in\">back</span>() <span class=\"comment\">//取队头、队尾元素</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">size</span>(); <span class=\"comment\">//返回栈的大小</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>不可用迭代器遍历</li>\n<li>没有clear</li>\n</ul>\n<h1 id=\"deque\">deque</h1>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">q.<span class=\"built_in\">begin</span>(); q.<span class=\"built_in\">end</span>(); <span class=\"comment\">//获得首、尾迭代器</span></span><br><span class=\"line\">q.<span class=\"built_in\">rbegin</span>(); q.<span class=\"built_in\">rend</span>(); <span class=\"comment\">//获得反向首位迭代器</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//为空返回1，不空返回0</span></span><br><span class=\"line\">q.<span class=\"built_in\">size</span>(); q.<span class=\"built_in\">max_size</span>(); <span class=\"comment\">//返回容器实际大小/最大容量</span></span><br><span class=\"line\">q.<span class=\"built_in\">capacity</span>(); <span class=\"comment\">//已分配内存中最多容纳元素个数</span></span><br><span class=\"line\">q.<span class=\"built_in\">resize</span>(x); <span class=\"comment\">//将容器大小置为x</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">push_back</span>(); q.<span class=\"built_in\">pop_back</span>(); <span class=\"comment\">//向队尾插入元素/删除队尾元素</span></span><br><span class=\"line\">q.<span class=\"built_in\">push_front</span>(); q.<span class=\"built_in\">pop_front</span>(); <span class=\"comment\">//向队头插入元素/删除队头元素</span></span><br><span class=\"line\">q.<span class=\"built_in\">insert</span>(it, n, i); <span class=\"comment\">//在it位置之前插入n个值为i的元素，n省略即插入一个，返回原位置</span></span><br><span class=\"line\">q.<span class=\"built_in\">erase</span>(it); q.<span class=\"built_in\">erase</span>(it, it+n); <span class=\"comment\">//删除指定位置/区间位置的元素，返回下一个数据的位置</span></span><br><span class=\"line\">q.<span class=\"built_in\">assign</span>(n, i); <span class=\"comment\">//将前n个元素赋值i</span></span><br><span class=\"line\">q.<span class=\"built_in\">assign</span>(arr, arr+n); <span class=\"comment\">//将数组元素赋值给这个容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">at</span>(i) = j; q[i] = j; <span class=\"comment\">//访问第i个元素（0起始）</span></span><br><span class=\"line\">q.<span class=\"built_in\">front</span>(); q.<span class=\"built_in\">back</span>(); <span class=\"comment\">//取最前/最后元素</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">clear</span>(); <span class=\"comment\">//清空容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">swap</span>(q1); <span class=\"comment\">//交换</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">reverse</span>(begin, end); <span class=\"comment\">//元素翻转</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"priority-queue\">priority_queue</h1>\n<p>优先队列，堆结构</p>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">priority_queue&lt;T, vector&lt;T&gt; &gt; q; <span class=\"comment\">//降序，大根堆</span></span><br><span class=\"line\">priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt; &gt; q; <span class=\"comment\">//升序，小根堆</span></span><br><span class=\"line\"><span class=\"comment\">//非结构体内自定义排序：</span></span><br><span class=\"line\">priority_queue&lt;T, vector&lt;T&gt;, cmp&gt; q;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">cmp</span> &#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">operator</span><span class=\"params\">()</span> <span class=\"params\">(name y, name z)</span> </span>&#123; <span class=\"keyword\">return</span> y.x&lt;z.x; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">q.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//如果队列空返回1，不空返回0</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">pop</span>(); q.<span class=\"built_in\">push</span>(); <span class=\"comment\">//队尾入队、队头出队</span></span><br><span class=\"line\">q.<span class=\"built_in\">front</span>(); q.<span class=\"built_in\">back</span>() <span class=\"comment\">//取队头、队尾元素</span></span><br><span class=\"line\"></span><br><span class=\"line\">q.<span class=\"built_in\">size</span>(); <span class=\"comment\">//返回栈的大小</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"list\">list</h1>\n<p>链表</p>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">list&lt;T&gt; ls;</span><br></pre></td></tr></table></figure>\n<p>使用：包括迭代器、insert等</p>\n<h1 id=\"bitset\">bitset</h1>\n<p>二进制，以数组形式保存</p>\n<p>声明：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">bitset&lt;n&gt; <span class=\"title\">a</span><span class=\"params\">(string(<span class=\"string\">&quot;1010001&quot;</span>))</span></span>; <span class=\"comment\">//n为长度，可以直接用a[i]访问</span></span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">a.<span class=\"built_in\">count</span>(); <span class=\"comment\">//返回有多少个1</span></span><br><span class=\"line\">a.<span class=\"built_in\">test</span>(i); <span class=\"comment\">//返回第i个是否为1</span></span><br><span class=\"line\">a.<span class=\"built_in\">set</span>(); <span class=\"comment\">//全置为1</span></span><br><span class=\"line\">a.<span class=\"built_in\">set</span>(x); <span class=\"comment\">//第x个置为1</span></span><br><span class=\"line\">a.<span class=\"built_in\">set</span>(x,y); <span class=\"comment\">//把y赋值给第x个</span></span><br><span class=\"line\"></span><br><span class=\"line\">bitset&lt;M&gt; f[N];</span><br><span class=\"line\">f[n]|=f[k]; <span class=\"comment\">//表示按位相与</span></span><br><span class=\"line\">f[n]&lt;&lt;=k; <span class=\"comment\">//表示整体向左k位</span></span><br></pre></td></tr></table></figure>\n","categories":["ACM"],"tags":["ACM","STL"]},{"title":"【动态规划】DP的优化方法（未完待续）","url":"/posts/3ff98430/","content":"<p>动态规划的优化方法（鸽）</p>\n<span id=\"more\"></span>\n<h1 id=\"单调队列优化dp\">单调队列优化dp</h1>\n<p>特征：状态结果是单调的，在该状态之前的状态结果中找最大/最小值，如果范围是特定区间，可以用滑动窗口，但是注意入队和出队的顺序，虽然我也不是很明白到底顺序影响了啥。</p>\n<h1 id=\"滚动数组压缩空间\">滚动数组压缩空间</h1>\n<ul>\n<li><code>pos^=1</code>，但注意更新的时候不能直接加在pos上（上一轮的没有清零），解决：清零（但多次memset可能会慢）。</li>\n</ul>\n","categories":["ACM","动态规划"],"tags":["ACM","dp"]},{"title":"【动态规划】区间DP","url":"/posts/846de0f3/","content":"<p>区间DP是在区间上的动态规划</p>\n<span id=\"more\"></span>\n<h1 id=\"正文\">正文</h1>\n<ul>\n<li>状态为区间：常设<code>dp[i][j]</code>表示区间 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[i,j]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span></span></span></span> 的状态</li>\n<li>思想：区间的状态由子区间更新而来</li>\n<li>题目技巧1：断环成链：首尾相连得到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 倍环，转化为区间。注意区间要更新到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>∼</mo><mn>2</mn><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n+1\\sim 2n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∼</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">n</span></span></span></span> 的段。</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> len = <span class=\"number\">1</span>; len &lt; n; len++) <span class=\"comment\">// 区间长度，由小区间开始dp，因为最先能确定的一定是最小的区间</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> l = <span class=\"number\">1</span>, r = len + <span class=\"number\">1</span>; l &lt;= n &amp;&amp; r &lt;= n; l++, r++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> ans = INF; <span class=\"comment\">// int ans=0; 取决于要求的是最大值还是最小值</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = l; k &lt; r; k++)</span><br><span class=\"line\">            ans = <span class=\"built_in\">max</span>(ans, dp[l][k] + dp[k + <span class=\"number\">1</span>][r] + 对这俩区间操作得到的结果);</span><br><span class=\"line\">        dp[l][r] = ans;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"题目\">题目</h1>\n","categories":["ACM","动态规划"],"tags":["ACM","dp"]},{"title":"【动态规划】SOSdp","url":"/posts/31c49b2f/","content":"<p>SOSdp是关于集合的特殊动态规划</p>\n<span id=\"more\"></span>\n<ul>\n<li>\n<p>子集和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo>:</mo><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dp: dp(st,i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 表示集合<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">st</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span></span></span></span> 的最后<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 位变化的所有子集的贡献</p>\n</li>\n<li>\n<p>第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 位为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dp(st,i)=dp(st,i-1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 位为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mo>∧</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dp(st,i)=dp(st,i-1)+dp(st\\wedge (1&lt;&lt;i),i-1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∧</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>压缩掉一维，变成如下代码</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; n; j++)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1</span> &lt;&lt; n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt;&gt; j &amp; <span class=\"number\">1</span>)</span><br><span class=\"line\">            f[i] += f[i ^ (<span class=\"number\">1</span> &lt;&lt; j)]; <span class=\"comment\">// i在j-1层</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>应用\n<ul>\n<li>高维前缀和</li>\n</ul>\n</li>\n</ul>\n","categories":["ACM","动态规划"],"tags":["ACM","dp"]},{"title":"【动态规划】子序列问题汇总","url":"/posts/85d233cc/","content":"<p>子序列问题是动态规划很常见的问题，这里做一个汇总，包括最长上升子序列、最长公共子序列、最大连续子序列的问题</p>\n<span id=\"more\"></span>\n<h1 id=\"lis\">LIS</h1>\n<p>最长上升子序列</p>\n<p>（原理鸽了，有时间会来补）</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 最长上升</span></span><br><span class=\"line\"><span class=\"comment\">// a[i]是原序列，答案是len</span></span><br><span class=\"line\">d[<span class=\"number\">0</span>] = a[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> len = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d[len - <span class=\"number\">1</span>] &lt; a[i])</span><br><span class=\"line\">        d[len++] = a[i];    <span class=\"comment\">// d数组内的数值始终上升</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        *<span class=\"built_in\">lower_bound</span>(d, d + len, a[i]) = a[i];    <span class=\"comment\">// 找到最前面可以替换的地方</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 最长不上升： *upper_bound(dp,dp+len,m[i],greater&lt;int&gt;()) = a[i];</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"lcs\">LCS</h1>\n<p>最长公共子序列</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a[i] == b[j]) <span class=\"comment\">//如果第i和第j位相同，更新值</span></span><br><span class=\"line\">            dp[i][j] = <span class=\"built_in\">max</span>(dp[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>] + <span class=\"number\">1</span>, dp[i][j]);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"comment\">//如果不相同，继承上一个状态的长度</span></span><br><span class=\"line\">            dp[i][j] = <span class=\"built_in\">max</span>(dp[i - <span class=\"number\">1</span>][j], dp[i][j - <span class=\"number\">1</span>]);</span><br></pre></td></tr></table></figure>\n<h1 id=\"最大连续子序列\">最大连续子序列</h1>\n<p>连续的子序列，各位之和最大，其实这并不是个动态规划问题，归纳在这了</p>\n<h2 id=\"朴素算法\">朴素算法</h2>\n<p>用数组<code>sum[i]</code>维护前缀和，两层循环就能遍历每一个子序列 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>j</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{a_i,a_{i+1},\\cdots,a_j\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 的和<code>sum[j]-sum[i-1]</code>，时间复杂度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"贪心\">贪心</h2>\n<p>如果求和反而变小了就重新开始计算子序列</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> maxn = <span class=\"number\">0</span>, s = <span class=\"number\">0</span>, t = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> sum = <span class=\"number\">0</span>, pos = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= k; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    sum += a[i];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (sum &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        pos = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">        sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (sum &gt; maxn)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        s = pos;</span><br><span class=\"line\">        t = i;</span><br><span class=\"line\">        maxn = sum;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"动态规划\">动态规划</h2>\n<p>上述贪心思想如果考虑动态规划，则设<code>dp[i]</code>表示以<code>a[i]</code>结尾的连续子序列的最大和，很容易得到状态转移方程<code>dp[i]=max(dp[i-1]+a[i],a[i])</code></p>\n<h2 id=\"分治\">分治</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">maxsum</span><span class=\"params\">(<span class=\"type\">int</span> *A, <span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> <span class=\"comment\">// 返回数组在左闭右开区间[x,y)中的最大连续和</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (y - x == <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> A[x];                                  <span class=\"comment\">// 只有一个元素，直接返回</span></span><br><span class=\"line\">    <span class=\"type\">int</span> m = x + (y - x) / <span class=\"number\">2</span>;                          <span class=\"comment\">// 划分成[x,m)和[m,y)</span></span><br><span class=\"line\">    <span class=\"type\">int</span> maxn = <span class=\"built_in\">max</span>(<span class=\"built_in\">maxsum</span>(A, x, m), <span class=\"built_in\">maxsum</span>(A, m, y)); <span class=\"comment\">// 递归求解</span></span><br><span class=\"line\">    <span class=\"type\">int</span> v = <span class=\"number\">0</span>, L = A[m - <span class=\"number\">1</span>], R = A[m];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = m - <span class=\"number\">1</span>; i &gt;= x; i--) </span><br><span class=\"line\">        L = <span class=\"built_in\">max</span>(L, v += A[i]); <span class=\"comment\">// 找从分界点开始往左的最大连续和L</span></span><br><span class=\"line\">    v = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = m; i &lt; y; i++)</span><br><span class=\"line\">        R = <span class=\"built_in\">max</span>(R, v += A[i]); <span class=\"comment\">// 找从分界点开始往右的最大连续和R</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">max</span>(maxn, L + R); <span class=\"comment\">// max(左区间，右区间，横跨区间)</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","动态规划"],"tags":["ACM","dp"]},{"title":"【动态规划】数位DP","url":"/posts/e0cbb50d/","content":"<p>数位DP是针对数字的一种动态规划</p>\n<span id=\"more\"></span>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> a[<span class=\"number\">20</span>];</span><br><span class=\"line\">ll dp[<span class=\"number\">20</span>][state];</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> pos, <span class=\"comment\">/*state变量*/</span>, <span class=\"type\">bool</span> lead, <span class=\"type\">bool</span> limit)</span> <span class=\"comment\">//lead是前导零，不是必须，limit是数位上界</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pos == <span class=\"number\">-1</span>) <span class=\"comment\">//按位枚举，最低位是0，pos==-1说明这个数我枚举完了</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>; <span class=\"comment\">//返回表示前面的枚举全部合理，已经枚举完了，返回枚举结果</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!limit &amp;&amp; !lead &amp;&amp; dp[pos][state] != <span class=\"number\">-1</span>) <span class=\"comment\">//记忆化和一些边界</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> dp[pos][state];</span><br><span class=\"line\">    <span class=\"type\">int</span> up = limit ? a[pos] : <span class=\"number\">9</span>; <span class=\"comment\">//根据limit判断枚举的上界</span></span><br><span class=\"line\">    ll ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt;= up; i++) <span class=\"comment\">//枚举，然后把不同情况的个数加到ans就可以了</span></span><br><span class=\"line\">    &#123; <span class=\"comment\">//分类讨论，根据state进行统计并更新答案</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ()</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ()</span><br><span class=\"line\">        ans += <span class=\"built_in\">dfs</span>(pos - <span class=\"number\">1</span>, <span class=\"comment\">/*状态转移*/</span>, lead &amp;&amp; i == <span class=\"number\">0</span>, limit &amp;&amp; i == a[pos])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!limit &amp;&amp; !lead)</span><br><span class=\"line\">        dp[pos][state] = ans;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">solve</span><span class=\"params\">(ll x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> pos = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (x) <span class=\"comment\">//把数位都分解出来</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        a[pos++] = x % <span class=\"number\">10</span>;</span><br><span class=\"line\">        x /= <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">dfs</span>(pos - <span class=\"number\">1</span>, <span class=\"comment\">/*状态 */</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>); <span class=\"comment\">//刚开始最高位都是有限制并且有前导零的</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>state可以定义为数字出现次数</li>\n</ul>\n","categories":["ACM","动态规划"],"tags":["ACM","dp"]},{"title":"【动态规划】背包问题合集","url":"/posts/ee076891/","content":"<p>背包问题是动态规划的经典问题，题型灵活</p>\n<span id=\"more\"></span>\n<!--more-->\n<h1 id=\"一些说明\">一些说明</h1>\n<ul>\n<li>背包问题总的来说，对于一个有限制条件（如体积、重量等，以及必须装满/可以不装满等要求）的背包，用一种策略选择物品装入，使得背包中的物品总价值最大。</li>\n<li>常规背包问题初始化：要求背包恰好装满体积 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span></span></span></span> ：初始化为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">INF</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span> ；最多不超过体积 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span></span></span></span> ：初始化为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></li>\n<li>开始可做的优化：去掉大于背包体积的物品</li>\n<li>参考资料：<a href=\"https://github.com/tianyicui/pack\">背包九讲</a></li>\n</ul>\n<h1 id=\"01背包\">01背包</h1>\n<h2 id=\"设定\">设定</h2>\n<ul>\n<li>共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 件物品，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品的体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，每件物品只有一个</li>\n</ul>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p>记 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 为前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品放入体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的背包中的能获得的最大价值</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">[</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo>−</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v)=max[f(i-1,v),f(i-1,v-c(i))+w(i)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span></p>\n</li>\n<li>\n<p>即用第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件的信息更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span></span></span></span> 时，比较不取第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件的最大价值 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(i-1,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 与取第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件的最大价值 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo>−</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(i-1,v-c(i))+w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> （前提是背包的体积 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 能装下第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品）</p>\n</li>\n<li>\n<p>伪代码：空间复杂度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mi>V</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(NV)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mclose\">)</span></span></span></span> ，时间复杂度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mi>V</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(NV)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">f</span>(i,v)=<span class=\"built_in\">max</span>(<span class=\"built_in\">f</span>(i<span class=\"number\">-1</span>,v),<span class=\"built_in\">f</span>(i<span class=\"number\">-1</span>,v-<span class=\"built_in\">c</span>(i))+<span class=\"built_in\">w</span>(i)) </span><br><span class=\"line\"><span class=\"keyword\">for</span> i=<span class=\"number\">1</span> to N</span><br><span class=\"line\">    <span class=\"keyword\">for</span> v=<span class=\"built_in\">c</span>(i) to V</span><br><span class=\"line\">        <span class=\"built_in\">f</span>(i,v)=<span class=\"built_in\">max</span>(<span class=\"built_in\">f</span>(i<span class=\"number\">-1</span>,v),<span class=\"built_in\">f</span>(i<span class=\"number\">-1</span>,v-<span class=\"built_in\">c</span>(i))+<span class=\"built_in\">w</span>(i))</span><br><span class=\"line\">    <span class=\"keyword\">for</span> v=<span class=\"number\">0</span> to <span class=\"built_in\">c</span>(i)<span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"built_in\">f</span>(i,v)=<span class=\"built_in\">f</span>(i<span class=\"number\">-1</span>,v)     <span class=\"comment\">//  v从0到c(i)-1部分直接从i-1更新过来</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"空间复杂度优化\">空间复杂度优化</h2>\n<ul>\n<li>\n<p>省去第一维：设 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 为当下（与遍历到哪件物品有关）背包体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 时的最大价值</p>\n</li>\n<li>\n<p>思想：注意到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 只能由 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的状态更新过来，因此只要保证更新时 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span></span></span></span> 值还是上次更新的值就可以了，第二层循环要从大往小刷，则状态转移所需的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo>−</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(v-c(i))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span> 在第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 轮还未被更新，仍是第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 轮更新后的值</p>\n</li>\n<li>\n<p>伪代码：</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i=<span class=\"number\">1</span> to N</span><br><span class=\"line\">    <span class=\"keyword\">for</span> v=V to <span class=\"built_in\">c</span>(i)</span><br><span class=\"line\">        <span class=\"built_in\">f</span>(v)=<span class=\"built_in\">max</span>(<span class=\"built_in\">f</span>(v),<span class=\"built_in\">f</span>(v-<span class=\"built_in\">c</span>(i))+<span class=\"built_in\">w</span>(i))  </span><br></pre></td></tr></table></figure>\n<ul>\n<li>这也是01背包最常见的写法，为方便其他背包变式，在这定义<code>ZeroOnePack(f, c, w)</code> 为以下内容（01背包的精髓）：</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> v=V to <span class=\"built_in\">c</span>(i)</span><br><span class=\"line\">    <span class=\"built_in\">f</span>(v)=<span class=\"built_in\">max</span>(<span class=\"built_in\">f</span>(v),<span class=\"built_in\">f</span>(v-<span class=\"built_in\">c</span>(i))+<span class=\"built_in\">w</span>(i))  </span><br></pre></td></tr></table></figure>\n<h1 id=\"完全背包\">完全背包</h1>\n<h2 id=\"设定\">设定</h2>\n<ul>\n<li>共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 件物品，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品的体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，每件物品有无限个</li>\n</ul>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 为前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件放入体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的背包中的最大价值</p>\n</li>\n<li>\n<p>可化成有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">⌊</mo><mfrac><mi>v</mi><mi>c</mi></mfrac><mo stretchy=\"false\">⌋</mo></mrow><annotation encoding=\"application/x-tex\">\\lfloor{\\frac{v}{c}}\\rfloor</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.095em;vertical-align:-0.345em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">c</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mclose\">⌋</span></span></span></span> 件某相同物品的01背包</p>\n</li>\n<li>\n<p>开始可做优化：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>&gt;</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>j</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">&amp;</mi><mi mathvariant=\"normal\">&amp;</mi><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i)&gt;c(j)\\&amp;\\&amp;w(i)&lt;w(j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span><span class=\"mord\">&amp;</span><span class=\"mord\">&amp;</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span> 时舍弃物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> （能取无限件的情况下肯定不会选择一个体积更大且价值更小的物品的）</p>\n</li>\n<li>\n<p>状态转移方程 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">{</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo>−</mo><mi>k</mi><mo>∗</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mi>k</mi><mo>∗</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">}</mo><mo separator=\"true\">,</mo><mi>k</mi><mo>∈</mo><mi>N</mi><mo separator=\"true\">,</mo><mi>k</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mfrac><mi>v</mi><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v)=max\\{f(i-1,v-k*c(i))+k*w(i)\\}, k\\in N,k\\in[0,\\frac{v}{c(i)}]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">}</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.27em;vertical-align:-0.52em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">c</span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">]</span></span></span></span> ，即考虑第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>⋯</mo></mrow><annotation encoding=\"application/x-tex\">k=0,1,\\cdots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span></span></span></span> 件的最大价值（不能超过体积上限 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> ）</p>\n</li>\n<li>\n<p>伪代码：空间复杂度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mi>V</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(NV)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mclose\">)</span></span></span></span> ，时间复杂度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><msup><mi>V</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(NV^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i=<span class=\"number\">1</span> to N</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i=<span class=\"number\">0</span> to V</span><br><span class=\"line\">        <span class=\"built_in\">f</span>(i,v)=<span class=\"built_in\">f</span>(i<span class=\"number\">-1</span>,v)    <span class=\"comment\">// 第i件物品取0件</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> k=<span class=\"number\">1</span> to v/<span class=\"built_in\">c</span>(i)  <span class=\"comment\">// 第i件物品取1,2,...件</span></span><br><span class=\"line\">            <span class=\"built_in\">f</span>(i,v)=<span class=\"built_in\">max</span>(<span class=\"built_in\">f</span>(i,v),<span class=\"built_in\">f</span>(i<span class=\"number\">-1</span>,v-k*<span class=\"built_in\">c</span>(i))+k*<span class=\"built_in\">w</span>(i))</span><br></pre></td></tr></table></figure>\n<h2 id=\"优化\">优化</h2>\n<ul>\n<li>\n<p>与01背包思路相同，想优化空间，与01背包不同的是物品有无数件，则第二维对体积的遍历不需要倒序，已经拿过若干个当前物品的背包可以继续拿，这样同时也优化了时间的一维</p>\n</li>\n<li>\n<p>伪代码：</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i=<span class=\"number\">1</span> to N</span><br><span class=\"line\">    <span class=\"keyword\">for</span> v=<span class=\"built_in\">c</span>(i) to V  </span><br><span class=\"line\">        <span class=\"built_in\">f</span>(v)=<span class=\"built_in\">max</span>(<span class=\"built_in\">f</span>(v),<span class=\"built_in\">f</span>(v-<span class=\"built_in\">c</span>(i))+<span class=\"built_in\">w</span>(i)) </span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中后两行是完全背包的精髓，为方便后面使用，我们将其定义为 <code>CompletePack(f,c,w)</code></li>\n</ul>\n<h1 id=\"多重背包\">多重背包</h1>\n<h2 id=\"设定\">设定</h2>\n<ul>\n<li>共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 件物品，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品的体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，每件物品有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">m(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 个</li>\n</ul>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 为前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件放入体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的背包中的最大价值</p>\n</li>\n<li>\n<p>状态转移方程 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">{</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo>−</mo><mi>k</mi><mo>∗</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mi>k</mi><mo>∗</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">}</mo><mo separator=\"true\">,</mo><mi>k</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mi mathvariant=\"normal\">/</mi><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v)=max\\{f(i-1,v-k*c(i))+k*w(i)\\}, k\\in[0,min(v/c(i),m(i))]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">}</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 是取这件物品的个数，与上述完全背包类似，只是由于物品有个数限制取的个数上限需做修改，且不能做上述完全背包的提前排除物品的优化</p>\n</li>\n</ul>\n<h2 id=\"优化\">优化</h2>\n<ul>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>1</mn></msup><mo separator=\"true\">,</mo><mo>⋯</mo><msup><mn>2</mn><mi>k</mi></msup><mo separator=\"true\">,</mo><mi>m</mi><mo>−</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^0,2^1,\\cdots2^k,m-2^{k+1}+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.043548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9324379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 这些数能表示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0,m]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">]</span></span></span></span> 中的任何一个数。</p>\n</li>\n<li>\n<p>将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">m(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 件物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 拆成由 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>1</mn></msup><mo separator=\"true\">,</mo><mo>⋯</mo><msup><mn>2</mn><mi>k</mi></msup><mo separator=\"true\">,</mo><mi>m</mi><mo>−</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^0,2^1,\\cdots2^k,m-2^{k+1}+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.043548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9324379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 件物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 构成的新物品，体积分别为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo>×</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>1</mn></msup><mo>×</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo>⋯</mo><msup><mn>2</mn><mi>k</mi></msup><mo>×</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mi>m</mi><mo>−</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">2^0\\times c(i),2^1\\times c(i),\\cdots2^k\\times c(i),(m-2^{k+1}+1)\\times c(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.099108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9324379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值分别为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo>×</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>1</mn></msup><mo>×</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo>⋯</mo><msup><mn>2</mn><mi>k</mi></msup><mo>×</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mi>m</mi><mo>−</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">2^0\\times w(i),2^1\\times w(i),\\cdots2^k\\times w(i),(m-2^{k+1}+1)\\times w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.099108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9324379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，于是这 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">⌊</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">⌋</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lfloor\\log n\\rfloor +1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">⌊</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">⌋</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 件新物品（每件只有一个）的选择情况能够表达原来取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0,m(i)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span> 件物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 的情况。</p>\n</li>\n<li>\n<p>因此进行上述拆分后，对所有新物品跑01背包即可。</p>\n</li>\n<li>\n<p>代码如下，时间复杂度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mi>log</mi><mo>⁡</mo><mi>V</mi><mo>+</mo><mi>V</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(N\\log V+V)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mclose\">)</span></span></span></span> ：</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// v[i],w[i],m[i]分别表示第i件物品的体积，价值和可取数量</span></span><br><span class=\"line\"><span class=\"comment\">// V[i],W[i]为二进制拆分后的所有物品的体积和价值，即01背包的初始条件，编号[1,cnt]</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    cin &gt;&gt; v[i] &gt;&gt; w[i] &gt;&gt; m[i];</span><br><span class=\"line\">    <span class=\"type\">int</span> x = <span class=\"number\">1</span>; <span class=\"comment\">// 二进制系数2^k</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (x &lt;= m[i])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        V[++cnt] = v[i] * x;</span><br><span class=\"line\">        W[cnt] = w[i] * x;</span><br><span class=\"line\">        m[i] -= x;</span><br><span class=\"line\">        x &lt;&lt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (m[i] &gt; <span class=\"number\">0</span>) <span class=\"comment\">// m-2^&#123;k+1&#125;+1</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        V[++cnt] = v[i] * m[i];</span><br><span class=\"line\">        W[cnt] = w[i] * m[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">ZeroOnePack</span>(f, V, W);</span><br></pre></td></tr></table></figure>\n<p>为方便后面描述，我们将上述代码的逻辑过程 <code>MultiplePack(f,c,w)</code></p>\n<h1 id=\"混合背包\">混合背包</h1>\n<ul>\n<li>\n<p>设定：共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 件物品，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品的体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，每件物品有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">m(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 个或无限个</p>\n</li>\n<li>\n<p>分析：不同类型的物品按不同类型处理即可</p>\n</li>\n<li>\n<p>伪代码：</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i=<span class=\"number\">1</span> to N</span><br><span class=\"line\">    <span class=\"keyword\">if</span> 第i件是<span class=\"number\">01</span>背包</span><br><span class=\"line\">        <span class=\"built_in\">ZeroOnePack</span>(f,c,w)</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> 第i件是完全背包</span><br><span class=\"line\">        <span class=\"built_in\">CompletePack</span>(f,c,w)</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> 第i件是多重背包</span><br><span class=\"line\">        <span class=\"built_in\">MultiplePack</span>(f,c,w,m)</span><br></pre></td></tr></table></figure>\n<h1 id=\"二维费用的背包\">二维费用的背包</h1>\n<ul>\n<li>设定：背包有两个限制条件 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mo separator=\"true\">,</mo><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">V,U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">U</span></span></span></span> （比如体积和重量），共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 件物品，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品的代价（比如体积和重量）为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>d</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i),d(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，物品的选择可能是01/完全/多重/混合背包</li>\n<li>状态设定：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v,u)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span></span></span></span> 为前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件放入限制条件为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo separator=\"true\">,</mo><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">v,u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 的背包中的最大价值，状态转移方程要结合具体背包类型来写（与二维一样）。以01背包为例，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">[</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>v</mi><mo>−</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>u</mi><mo>−</mo><mi>d</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f(i,v,u)=max[f(i-1,v,u),f(i-1,v-c(i),u-d(i))+w(i)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span></li>\n<li>优化：结合具体背包类型来写，与二维一样，只是扩展了维数而已</li>\n<li>继续扩展：增加限制条件<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 增加维数</li>\n</ul>\n<h1 id=\"分组背包\">分组背包</h1>\n<ul>\n<li>设定：共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 件物品，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品的体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，每件物品只有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个。这些物品被划分成 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span></span></span></span> 组，组中物品最多选一件。</li>\n<li>分析：显然组内是一个01背包，设 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(k,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 表示第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 组用体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的背包，能获得的最大价值（即普通01背包加了一维第几组）。这样每一组便又是一个01背包，代码可以写在一起（反正都是从大到小遍历背包体积）</li>\n<li>伪代码：</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> k=<span class=\"number\">1</span> to K</span><br><span class=\"line\">    <span class=\"keyword\">for</span> v=V to <span class=\"number\">0</span>           <span class=\"comment\">// 组间01背包</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> item i in k    <span class=\"comment\">// 组内01</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(v&gt;=<span class=\"built_in\">c</span>(i))</span><br><span class=\"line\">                <span class=\"built_in\">f</span>(v)=<span class=\"built_in\">max</span>(<span class=\"built_in\">f</span>(v),<span class=\"built_in\">f</span>(v-<span class=\"built_in\">c</span>(i))+<span class=\"built_in\">w</span>(i)) </span><br><span class=\"line\">                <span class=\"comment\">// 此时用的是k-1组的价值更新</span></span><br><span class=\"line\">                <span class=\"comment\">// 对于同一个v，第k组内的物品至多只有一个被选上（因为一直在取max）</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"有依赖的背包\">有依赖的背包</h1>\n<h2 id=\"设定\">设定</h2>\n<ul>\n<li>\n<p>共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 件物品，第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 件物品的体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，价值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>物品间存在特定依赖关系：如果选择物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> ，必须选择物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> ；反之如果选择物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> ，不一定选择物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span>。将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 称主件，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 称附件。</p>\n</li>\n<li>\n<p>不存在一个物品依赖多个物品（即如果选择物品 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> ，必须选择的物品最多只有一个）</p>\n</li>\n</ul>\n<h2 id=\"分析\">分析</h2>\n<ul>\n<li>\n<p>可以看出依赖关系是一个树形关系</p>\n</li>\n<li>\n<p>以一个节点和它的子节点看作一组，先处理出这些节点的所有背包体积的对应价值，上一层再对这些组进行分组背包中的组选择</p>\n</li>\n<li>\n<p>设 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>c</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">dp[u][c]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">]</span></span></span></span> 表示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 节点（及其子孙节点整体）放在体积为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span></span></span></span> 的背包能获得的最大价值</p>\n</li>\n<li>\n<p>遍历 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 的所有子节点 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> ，更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">dp[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> ，此时它代表的内容是不包括 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 对应背包各种体积能获得的最大价值</p>\n</li>\n<li>\n<p>遍历完后，对于背包空间足够放下 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 这个物品的，全部强制放入 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> （依赖项必须得选），空间不足的背包价值清零</p>\n</li>\n<li>\n<p>代码：时间复杂度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><msup><mi>V</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(NV^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; G[N]; <span class=\"comment\">// 邻接矩阵存树</span></span><br><span class=\"line\"><span class=\"type\">int</span> dp[N][M];</span><br><span class=\"line\"><span class=\"type\">int</span> c[N], w[N]; <span class=\"comment\">// 体积、价值</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> v : G[rt]) <span class=\"comment\">// 遍历子节点</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == from)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = V - c[rt]; i &gt;= <span class=\"number\">0</span>; i--) <span class=\"comment\">// 体积V的背包，01背包优化一维空间（倒序），不足c[rt]空间的可以不考虑</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt;= i; j++)     <span class=\"comment\">// 子节点已经得到的体积j的背包</span></span><br><span class=\"line\">                dp[rt][i] = <span class=\"built_in\">max</span>(dp[rt][i], dp[rt][i - j] + dp[v][j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = V; i &gt;= c[rt]; i++)</span><br><span class=\"line\">        dp[rt][i] = dp[rt][i - c[rt]] + w[rt];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; c[rt]; i++)</span><br><span class=\"line\">        dp[rt][i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"特例\">特例</h2>\n<p>[NOIP2006 提高组] 金明的预算方案](<a href=\"https://www.luogu.com.cn/problem/P1064\">https://www.luogu.com.cn/problem/P1064</a>) 这道题由于规定了主件个数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">0,1,2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span></span></span></span> ，所以直接强行分类讨论就好了，并不一定要树形dp</p>\n","categories":["ACM","动态规划"],"tags":["ACM","dp"]},{"title":"【图论】2-SAT问题","url":"/posts/bb2d348c/","content":"<p>2-SAT问题</p>\n<span id=\"more\"></span>\n<h1 id=\"定义\">定义</h1>\n<p>每句话包含两个条件，真/假，用或连接</p>\n<p>许多话以且连接</p>\n<p>求一组真假赋值使其符合所有要求</p>\n<h1 id=\"分析\">分析</h1>\n<p>每个原子拆成真/假两个点（离散数学的方法，真值表也可推）：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">原式</th>\n<th style=\"text-align:center\">建图</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">¬</mi><mi>a</mi><mo>∨</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\neg a\\vee b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.55556em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∨</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span></td>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>→</mo><mi>b</mi><mo>∧</mo><mi mathvariant=\"normal\">¬</mi><mi>b</mi><mo>→</mo><mi mathvariant=\"normal\">¬</mi><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a\\rightarrow b\\wedge\\neg b\\rightarrow\\neg a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∧</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">a</span></span></span></span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>∨</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a \\vee b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.55556em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∨</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span></td>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">¬</mi><mi>a</mi><mo>→</mo><mi>b</mi><mo>∧</mo><mi mathvariant=\"normal\">¬</mi><mi>b</mi><mo>→</mo><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">\\neg a\\rightarrow b\\wedge\\neg b\\rightarrow a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∧</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">¬</mi><mi>a</mi><mo>∨</mo><mi mathvariant=\"normal\">¬</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\neg a\\vee\\neg b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.55556em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∨</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">b</span></span></span></span></td>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>→</mo><mi mathvariant=\"normal\">¬</mi><mi>b</mi><mo>∧</mo><mi>b</mi><mo>→</mo><mi mathvariant=\"normal\">¬</mi><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a\\rightarrow\\neg b\\wedge b\\rightarrow\\neg a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∧</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathdefault\">a</span></span></span></span></td>\n</tr>\n</tbody>\n</table>\n<p>同一强连通分量中的点取值相同，对于一个原子的真假点，取拓扑序在后的。</p>\n<p>如果真假点在一个强连通分量中就没有符合条件的数据。</p>\n<p>可以直接利用tarjan缩点出来的scc数组，本身就是拓扑逆序。</p>\n","categories":["ACM","图论"],"tags":["ACM","拓扑排序","Tarjan","图论"]},{"title":"【图论】图的匹配问题","url":"/posts/4fd08cb0/","content":"<p>图的匹配问题（二分图（最大）匹配）</p>\n<span id=\"more\"></span>\n<h1 id=\"概念\">概念</h1>\n<ul>\n<li>边集中边数最大为<strong>最大匹配</strong>，边权和最大的为<strong>最大权匹配</strong> 。</li>\n<li>完全匹配，也叫做完备匹配，即某个匹配中，每个顶点都和某条边相关联。</li>\n<li><strong>点覆盖集</strong> ：无向图的一个点集，使得该图中的所有边至少有一个端点在该集合内。点数最少的点覆盖集被称为<strong>最小点覆盖集</strong>。</li>\n<li><strong>点独立集</strong> ：无向图的一个点集，使得该集合中任意两个点之间不连通。点数最多的点被称为<strong>最大点独立集</strong>。</li>\n<li>二分图：可以将点分成两个集合，使得每条边的端点都不在一个集合里，两个集合的点称左部点和右部点，没有节点个数为奇数的环</li>\n</ul>\n<h1 id=\"二分图匹配\">二分图匹配</h1>\n<p>二分图的最小点覆盖集大小+最大点独立集大小=图中点的个数</p>\n<p>染色法：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; G[N];      </span><br><span class=\"line\"><span class=\"type\">int</span> n;                 <span class=\"comment\">//顶点数</span></span><br><span class=\"line\"><span class=\"type\">int</span> color[N];          <span class=\"comment\">//顶点的颜色 （1 or -1）</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> c)</span> <span class=\"comment\">//染色法，顶点u，颜色c</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    color[u] = c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> v : G[u]) <span class=\"comment\">//遍历每个相邻点</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (color[v] == c || (!color[v] &amp;&amp; !<span class=\"built_in\">dfs</span>(v, -c)))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; <span class=\"comment\">//如果染同样色，或染不同色失败了，说明不是二分图</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">solve</span><span class=\"params\">()</span> <span class=\"comment\">//判断是否是二分图</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)      <span class=\"comment\">//遍历每个未被染色点</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!color[i] &amp;&amp; !<span class=\"built_in\">dfs</span>(i, <span class=\"number\">1</span>)) <span class=\"comment\">//如果染色失败</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>增广路：从一个未匹配点出发，依次经过非匹配边、匹配边、非匹配边⋯形成的路径叫交替路。整个路径两个端点都是未匹配点，这条路就是增广路。</p>\n<h1 id=\"二分图最大匹配\">二分图最大匹配</h1>\n<ul>\n<li>\n<p>一个边集使得每条边没有公共端点</p>\n</li>\n<li>\n<p>增广路定理：找不到增广路则当前匹配就是最大匹配，如果找得到只需要翻转增广路的匹配边和非匹配边。</p>\n</li>\n</ul>\n<h2 id=\"匈牙利算法\">匈牙利算法</h2>\n<ul>\n<li>对于左部点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> ，枚举所有连边，出点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 若没有匹配直接匹配（找到增广路），否则让<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 之前的匹配左部点递归匹配右部点（每一轮递归右部点只能访问一次）找增广路，如果找到未匹配点即找到增广路，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 匹配，否则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 失配。左部点比右部点少可以优化。复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>V</mi><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(VE)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> 。</li>\n<li>linker[v]=u 就是匹配方案</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> uN, vN;  <span class=\"comment\">//左右部点的数目，注意访问的起点是0/1</span></span><br><span class=\"line\"><span class=\"type\">int</span> G[N][N]; <span class=\"comment\">//邻接矩阵</span></span><br><span class=\"line\"><span class=\"type\">int</span> linker[N]; <span class=\"comment\">//记录匹配</span></span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N]; </span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> v = <span class=\"number\">1</span>; v &lt;= vN; v++) <span class=\"comment\">//遍历右部点</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (G[u][v] &amp;&amp; !vst[v]) <span class=\"comment\">//u连v且v本轮递归没有访问过</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            vst[v] = <span class=\"literal\">true</span>; <span class=\"comment\">//标记访问</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (linker[v] == <span class=\"number\">-1</span> || <span class=\"built_in\">dfs</span>(linker[v])) <span class=\"comment\">//如果未匹配或递归成功匹配</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                linker[v] = u; <span class=\"comment\">//标记匹配</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">hungary</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(linker, <span class=\"number\">-1</span>, <span class=\"built_in\">sizeof</span>(linker));</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> u = <span class=\"number\">1</span>; u &lt;= uN; u++) <span class=\"comment\">//遍历左部点</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">memset</span>(vst, <span class=\"literal\">false</span>, <span class=\"built_in\">sizeof</span>(vst));</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">dfs</span>(u))</span><br><span class=\"line\">            res++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"dinic-网络流\">Dinic（网络流）</h2>\n<ul>\n<li>建超级源点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span></span></span></span> ，向左部点各连一条容量为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的路</li>\n<li>建超级汇点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> ，右部点向其各连一条容量为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的路</li>\n<li>给定边，左部点向右部点连一条容量为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的路</li>\n<li>注意节点总数、加边的点序号</li>\n</ul>\n","categories":["ACM","图论"],"tags":["ACM","图论"]},{"title":"【图论】图的连通性问题合集","url":"/posts/40eb1829/","content":"<p>图连通性问题涉及到强连通分量、双连通、割点和桥的理解</p>\n<span id=\"more\"></span>\n<h1 id=\"强连通分量：tarjan缩点\">强连通分量：Tarjan缩点</h1>\n<p>dfs时记录dfs序，入栈并标记，更新能访问到最早的dfs序</p>\n<p>最早dfs序和当前dfs序相等则找到强连通分量</p>\n<p>画图更好理解dfs序和最早dfs序的问题</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> from, to, nxt;</span><br><span class=\"line\">&#125; edge[N], edge2[N];</span><br><span class=\"line\"><span class=\"type\">int</span> tot;</span><br><span class=\"line\"><span class=\"type\">int</span> head[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    edge[++tot].to = v;</span><br><span class=\"line\">    edge[tot].from = u;</span><br><span class=\"line\">    edge[tot].nxt = head[u];</span><br><span class=\"line\">    head[u] = tot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> tot2;</span><br><span class=\"line\"><span class=\"type\">int</span> head2[N];</span><br><span class=\"line\"><span class=\"type\">int</span> in[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge2</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    edge2[++tot2].to = v;</span><br><span class=\"line\">    edge2[tot2].from = u;</span><br><span class=\"line\">    edge2[tot2].nxt = head2[u];</span><br><span class=\"line\">    head2[u] = tot2;</span><br><span class=\"line\">    in[v]++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> val[N]; <span class=\"comment\">//点权</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> dfn[N], low[N]; <span class=\"comment\">//dfs序记录、追溯到的最早的栈中节点的次序号</span></span><br><span class=\"line\"><span class=\"type\">int</span> dfntot;         <span class=\"comment\">//dfs序</span></span><br><span class=\"line\"><span class=\"type\">int</span> st[N];          <span class=\"comment\">//栈</span></span><br><span class=\"line\"><span class=\"type\">bool</span> in_stack[N];   <span class=\"comment\">//是否入栈</span></span><br><span class=\"line\"><span class=\"type\">int</span> tp;             <span class=\"comment\">//栈顶指针</span></span><br><span class=\"line\"><span class=\"type\">int</span> scc[N], sc;     <span class=\"comment\">// 结点 i 所在 scc 的编号</span></span><br><span class=\"line\"><span class=\"type\">int</span> sz[N];          <span class=\"comment\">// 强连通 i 的大小</span></span><br><span class=\"line\"><span class=\"type\">int</span> scval[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">tarjan</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    low[u] = dfn[u] = ++dfntot;    <span class=\"comment\">//记录dfs序</span></span><br><span class=\"line\">    st[++tp] = u, in_stack[u] = <span class=\"number\">1</span>; <span class=\"comment\">//当前点入栈，并标记已入栈</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; i; i = edge[i].nxt)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"type\">int</span> &amp;v = edge[i].to;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!dfn[v]) <span class=\"comment\">//没有访问过</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">tarjan</span>(v);                    <span class=\"comment\">//递归访问</span></span><br><span class=\"line\">            low[u] = <span class=\"built_in\">min</span>(low[u], low[v]); <span class=\"comment\">//更新与u相连的连通图第一次访问的dfs序</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (in_stack[v])             <span class=\"comment\">//成环</span></span><br><span class=\"line\">            low[u] = <span class=\"built_in\">min</span>(low[u], dfn[v]); <span class=\"comment\">//更新第一次访问的dfs序</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (dfn[u] == low[u]) <span class=\"comment\">//找到强连通分量</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ++sc;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (st[tp] != u) <span class=\"comment\">//将环中的节点出栈并记录</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            scc[st[tp]] = sc;</span><br><span class=\"line\">            sz[sc]++;</span><br><span class=\"line\">            scval[sc] += val[st[tp]]; <span class=\"comment\">//强连通分量的权值</span></span><br><span class=\"line\">            in_stack[st[tp]] = <span class=\"number\">0</span>;</span><br><span class=\"line\">            --tp;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        scc[st[tp]] = sc; <span class=\"comment\">//上一次入栈的当前节点</span></span><br><span class=\"line\">        sz[sc]++;</span><br><span class=\"line\">        scval[sc] += val[st[tp]];</span><br><span class=\"line\">        in_stack[st[tp]] = <span class=\"number\">0</span>; <span class=\"comment\">//出栈</span></span><br><span class=\"line\">        --tp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">rebuild</span><span class=\"params\">()</span> <span class=\"comment\">//缩点重构图</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> scx = scc[edge[i].from], scy = scc[edge[i].to];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (scx == scy)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>; <span class=\"comment\">//强连通分量缩点了</span></span><br><span class=\"line\">        <span class=\"built_in\">add_edge2</span>(scx, scy);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>注意：缩点之后重构图，可能会出现大量重边，有些题可能需要删除，尤其是拓扑路径计数的时候</li>\n<li>注：Tarjan使用了栈，求得的 SCC 编号相当于反拓扑序（2-SAT问题）</li>\n</ul>\n<h1 id=\"双连通\">双连通</h1>\n<ul>\n<li>\n<p>无向图，删除任意一条边/一个点，仍是连通图，称边双连通/点双连通</p>\n</li>\n<li>\n<p>两个点是边双连通的，当且仅当它们的树上路径中不包含桥。</p>\n<ul>\n<li>\n<p>从任意点dfs出一个生成树，于是有树边（黑+绿）和非树边（红）</p>\n</li>\n<li>\n<p>非树边覆盖的边（绿）和非树边，除此之外的（黑色边）一定是<strong>桥</strong></p>\n</li>\n</ul>\n</li>\n</ul>\n<img data-src=\"/posts/40eb1829/bcc-1-16791529398113.svg\" class=\"\" title=\"bcc-1\">\n<img data-src=\"/posts/40eb1829/bcc-2-16791529534705.svg\" class=\"\" title=\"bcc-2\">\n<ul>\n<li>建一个新图，新图中的每一个点对应原图中的每一条树边（在上图中用蓝色点表示）。对于原图中的每一条非树边，将这条非树边对应的树上简单路径中的所有边在新图中对应的蓝点连成一个连通块（这在上图中也用蓝色的边体现出来了）。一个点不是割点，当且仅当与其相连的所有边在新图中对应的蓝点都属于同一个连通块。</li>\n</ul>\n<h1 id=\"割点：tarjan\">割点：tarjan</h1>\n<p>注意：这里的<code>low[i]</code>和强连通分量中的定义不同，更新内容不同</p>\n<p>初始dfs时from是0</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> dfntot;</span><br><span class=\"line\"><span class=\"type\">int</span> dfn[N], low[N];</span><br><span class=\"line\"><span class=\"comment\">//low[u]表示,顶点u及其子树中的点，通过非dfs生成树边能够回溯到的最早的点dfn值</span></span><br><span class=\"line\"><span class=\"type\">bool</span> cut[N]; <span class=\"comment\">//是否为割点</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">tarjan</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    dfn[rt] = low[rt] = ++dfntot;</span><br><span class=\"line\">    <span class=\"type\">int</span> child = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> it : G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (it == from)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!dfn[it])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">tarjan</span>(it, rt);</span><br><span class=\"line\">            low[rt] = <span class=\"built_in\">min</span>(low[rt], low[it]);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!from) <span class=\"comment\">//是根节点，只需判是否有两棵子树</span></span><br><span class=\"line\">                child++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (low[it] &gt;= dfn[rt]) <span class=\"comment\">//不是根节点，且没有另一条路能绕回去</span></span><br><span class=\"line\">                cut[rt] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        low[rt] = <span class=\"built_in\">min</span>(low[rt], dfn[it]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!from &amp;&amp; child &gt;= <span class=\"number\">2</span>)</span><br><span class=\"line\">        cut[rt] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"桥\">桥</h1>\n<p>当isbridge[x]为真时，(father[x], x) 为一个桥</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> dfntot;</span><br><span class=\"line\"><span class=\"type\">int</span> dfn[N], low[N];</span><br><span class=\"line\"><span class=\"comment\">//low[u]表示顶点u及其子树中的点，通过非dfs生成树边能够回溯到的最早的点dfn值</span></span><br><span class=\"line\"><span class=\"type\">bool</span> isbridge[N]; <span class=\"comment\">//是否为q</span></span><br><span class=\"line\"><span class=\"type\">int</span> fa[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">tarjan</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fa[rt]=from;</span><br><span class=\"line\">    dfn[rt] = low[rt] = ++dfntot;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> it : G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (it == from)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!dfn[it])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">tarjan</span>(it, rt);</span><br><span class=\"line\">            low[rt] = <span class=\"built_in\">min</span>(low[rt], low[it]);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(low[it] &gt; dfn[rt])</span><br><span class=\"line\">                isbridge[it] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(dfn[it] &lt; dfn[rt])</span><br><span class=\"line\">            low[rt] = <span class=\"built_in\">min</span>(low[rt], dfn[it]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","图论"],"tags":["ACM","Tarjan","图论"]},{"title":"【图论】基本概念与图的存储","url":"/posts/db3f1cda/","content":"<p>图论中的一些基本概念和图的存储方法</p>\n<span id=\"more\"></span>\n<h1 id=\"基本概念\">基本概念</h1>\n<h2 id=\"顶点-边\">顶点&amp;边</h2>\n<ul>\n<li>\n<p><strong>顶点 (Vertex or Node)</strong> 构成<strong>点集 (Vertex set)</strong>。</p>\n</li>\n<li>\n<p><strong>边(Edge)</strong> 构成<strong>边集 (Edge set)</strong></p>\n<ul>\n<li>常记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">u,v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 称为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">e</span></span></span></span> 的 <strong>端点 (Endpoint)</strong>。</li>\n<li><strong>有向边 (Directed edge)</strong> 或 <strong>弧 (Arc)</strong>： <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 有序，有时也写作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo>→</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">u \\to v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 。设 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>=</mo><mi>u</mi><mo>→</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">e=u \\to v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>，则此时<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 称为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">e</span></span></span></span> 的 <strong>起点 (Tail)</strong>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 称为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">e</span></span></span></span> 的 <strong>终点 (Head)</strong>，并称<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的直接前驱，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 的直接后继。</li>\n<li><strong>无向边 (Undirected edge)</strong> 或<strong>边 (Edge)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 无序。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"图\">图</h2>\n<p><strong>图 (Graph)</strong> 是一个二元组$G=(V(G), E(G)) $ ，其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">V(G)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mclose\">)</span></span></span></span> 是非空<strong>点集 (Vertex set)</strong>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">E(G)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mclose\">)</span></span></span></span> 是<strong>边集 (Edge set)</strong>。</p>\n<p>常记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G=(V,E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> ，图<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的点数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>V</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">|V(G)|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mclose\">)</span><span class=\"mord\">∣</span></span></span></span> 也被称作图<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的<strong>阶 (Order)</strong>。</p>\n<h3 id=\"自环与重边\">自环与重边</h3>\n<p><strong>自环 (Loop)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∃</mi><mi>e</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>∈</mo><mi>E</mi><mo separator=\"true\">,</mo><mtext>且</mtext><mi>u</mi><mo>=</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">\\exists e=(u,v)\\in E,且u=v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">∃</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord cjk_fallback\">且</span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">e</span></span></span></span> 称作自环。</p>\n<p><strong>重边 (Multiple edge)</strong>：若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 中存在两个完全相同的边，则它们被称作（一组）重边。</p>\n<h3 id=\"分类与相关概念\">分类与相关概念</h3>\n<h4 id=\"按有限性分类\">按有限性分类</h4>\n<p>当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">V,E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 都是有限集合时，称<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 为 <strong>有限图</strong>；当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span></span></span></span> 或<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 是无限集合时，称<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 为<strong>无限图</strong>。</p>\n<h4 id=\"按边的性质分类\">按边的性质分类</h4>\n<p><strong>有向图 (Directed graph)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 中均为有向边。</p>\n<p><strong>无向图 (Undirected graph)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 中均为无向边。</p>\n<p><strong>混合图 (Mixed graph)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 中既有有向边也有无向边。</p>\n<p><strong>赋权图</strong>：每条边都有权值。其中边权全是正的为<strong>正权图</strong>。</p>\n<p><strong>稀疏图 (Sparse graph)</strong>：边很多，**稠密图 (Dense graph)**刚好相反。这个一般用于讨论时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">∣</mi><mi>V</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(|V|^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 的算法与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">∣</mi><mi>E</mi><mi mathvariant=\"normal\">∣</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(|E|)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\">∣</span><span class=\"mclose\">)</span></span></span></span> 的算法的效率差异（稀疏图优先选择后者）。</p>\n<p>补图：对于无向图</p>\n<p>反图</p>\n<p><strong>简单图 (Simple graph)</strong>：若一个图中没有自环和重边，它被称为简单图。否则为<strong>多重图 (Multigraph)</strong>。</p>\n<h3 id=\"点的相邻和点的度\">点的相邻和点的度</h3>\n<ul>\n<li>\n<p>对于两顶点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> ，若存在边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> ，则称<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 是<strong>相邻的 (Adjacent)</strong>。</p>\n<p>一个顶点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">v\\in V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span></span></span></span> 的**邻域 (Neighborhood)**是所有与之相邻的顶点所构成的集合，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">N(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>。</p>\n<p>一个点集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 的邻域是所有与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 中至少一个点相邻的点所构成的集合，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">N(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span> ，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mo>⋃</mo><mrow><mi>v</mi><mo>∈</mo><mi>S</mi></mrow></msub><mi>N</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">N(S)=\\bigcup_{v\\in S} N(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.07708em;vertical-align:-0.32708000000000004em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">⋃</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17862099999999992em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32708000000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>。</p>\n</li>\n<li>\n<p><strong>度 (Degree)</strong> ：与一个顶点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 关联的边的条数，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>​ 。</p>\n<ul>\n<li>\n<p>无向简单图，有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">∣</mi><mi>N</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">d(v)=|N(v)|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mord\">∣</span></span></span></span> 。</p>\n</li>\n<li>\n<p>握手定理（图论基本定理）：对于任何无向图<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G(V,E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> ，有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mrow><mi>v</mi><mo>∈</mo><mi>V</mi></mrow></msub><mi>d</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>2</mn><mi mathvariant=\"normal\">∣</mi><mi>E</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\sum_{v\\in V}d(v)=2|E|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.07708em;vertical-align:-0.32708000000000004em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17862099999999992em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32708000000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\">∣</span></span></span></span> 。</p>\n<p>推论：在任意图中，度数为奇数的点必然有偶数个。</p>\n</li>\n<li>\n<p><strong>孤立点 (Isolated vertex)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">d(v)=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></p>\n<p><strong>叶节点 (Leaf vertex)</strong>/<strong>悬挂点 (Pendant vertex)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">d(v)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<p><strong>偶点 (Even vertex)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>∣</mo><mi>d</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">2\\mid d(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span></p>\n<p><strong>奇点 (Odd vertex)</strong>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>∤</mo><mi>d</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">2\\nmid d(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.99253em;vertical-align:-0.25142em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel amsrm\">∤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>，其中一张图中奇点必有偶数个。</p>\n</li>\n<li>\n<p>对于一张图，所有节点的度数的最小值称为<strong>最小度 (Minimum degree)</strong>，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\delta(G)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mclose\">)</span></span></span></span> ，最大值称为<strong>最大度 (Maximum degree)</strong>，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Δ</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Delta(G)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Δ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mclose\">)</span></span></span></span> 。</p>\n</li>\n<li>\n<p>对于有向图，以一个顶点为起点的边的条数称为该顶点的<strong>出度 (Out-degree)</strong>，记作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>d</mi><mo>+</mo></msup><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d^+(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.021331em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 或<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">out(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 。以一个顶点为终点的边的条数称为该节点的<strong>入度 (In-degree)</strong>，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>d</mi><mo>−</mo></msup><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d^-(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.021331em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 或<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">in(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 。对于任何有向图 ，有：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mrow><mi>v</mi><mo>∈</mo><mi>V</mi></mrow></msub><msup><mi>d</mi><mo>+</mo></msup><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mo>∑</mo><mrow><mi>v</mi><mo>∈</mo><mi>V</mi></mrow></msub><msup><mi>d</mi><mo>−</mo></msup><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">∣</mi><mi>E</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\sum_{v \\in V} d^+(v)=\\sum_{v \\in V} d^-(v)=|E|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.098411em;vertical-align:-0.32708000000000004em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17862099999999992em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32708000000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.098411em;vertical-align:-0.32708000000000004em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17862099999999992em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32708000000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\">∣</span></span></span></span></p>\n</li>\n<li>\n<p>对于无向图 ，每个顶点的度数都是一个固定的常数的，称为 <strong>k - 正则图 (-Regular Graph)</strong>。</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"路径\">路径</h3>\n<p>将若干个点连接起来的边的集合。</p>\n<p>边的数量被称作这条途径的<strong>长度</strong>，如果边是带权的，长度通常指路径上的边权之和。</p>\n<ul>\n<li><strong>简单路径 (Simple path)</strong>：路径连接的点两两不同。</li>\n<li><strong>回路 (Circuit)</strong>：路径头尾相接。</li>\n<li><strong>简单回路/简单环 (Simple circuit)</strong>：路径中仅头尾相接。</li>\n</ul>\n<h3 id=\"子图\">子图</h3>\n<p>对于图<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∃</mi><mi>H</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo separator=\"true\">,</mo><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>∈</mo><mi>V</mi><mo separator=\"true\">,</mo><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>∈</mo><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">\\exists H=(V&#x27;,E&#x27;),V&#x27;\\in V,E&#x27;\\in E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">∃</span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.946332em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> ，则称<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的<strong>子图 (Subgraph)</strong>，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo>⊆</mo><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">H \\subseteq G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 。</p>\n<h3 id=\"连通性\">连通性</h3>\n<p>存在一条<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的路径则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">u,v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 连通 (Connected)。</p>\n<h4 id=\"无向图\">无向图</h4>\n<ul>\n<li>\n<p>图中任意两个顶点均连通的称<strong>连通图 (Connected graph)</strong>。</p>\n</li>\n<li>\n<p>若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的一个连通子图，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的一个<strong>连通块/连通分量 (Connected component)</strong>。若不存在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span> 使<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo>⊊</mo><mi>F</mi><mo>⊆</mo><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">H\\subsetneq F\\subseteq G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel amsrm\">⊊</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的一个极大连通子图。</p>\n</li>\n</ul>\n<h4 id=\"有向图\">有向图</h4>\n<ul>\n<li>有向图的节点两两互相可达，则称这张图是<strong>强连通的 (Strongly connected)</strong>。</li>\n<li>一张有向图的边替换为无向边后可以得到一张连通图，则称原来这张有向图是<strong>弱连通的 (Weakly connected)</strong>。</li>\n<li>同无向图，有<strong>弱连通分量 (Weakly connected component)</strong>、极大弱连通子图、<strong>强连通分量 (Strongly Connected component)</strong>、极大强连通子图。</li>\n</ul>\n<h3 id=\"割\">割</h3>\n<ul>\n<li>强连通图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G=(V, E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span>, 若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>⊆</mo><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V^{\\prime} \\subseteq V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.887862em;vertical-align:-0.13597em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span></span></span></span> 且 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mrow><mo fence=\"true\">[</mo><mi>V</mi><mi mathvariant=\"normal\">\\</mi><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">G\\left[V \\backslash V^{\\prime}\\right]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\">\\</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">]</span></span></span></span></span> 不是连通 图, 则 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">V^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> 是图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的一个<strong>点割集 (Vertex cut/Separating set)</strong>。大小为一的点割集又被称作<strong>割点 (Cut vertex)</strong></li>\n<li>强连通图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G=(V, E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> 和整数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>, 若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>V</mi><mi mathvariant=\"normal\">∣</mi><mo>≥</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">|V| \\geq k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 且 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 不存在大小为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">k-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的点割集, 则称 图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 是**<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>-点连通的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">(k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>-vertex-connected)** ，使上式成立的最大的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 被称作图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的<strong>点连通度 (Vertex connectivity)</strong>，记作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>κ</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\kappa(G)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">κ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mclose\">)</span></span></span></span> 。\n<ul>\n<li>非完全图点连通度为最小点割集的大小, 完全图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>K</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">K_{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的点连通度为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 。</li>\n</ul>\n</li>\n<li>对于图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G=(V, E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> 以及 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">u, v \\in V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span></span></span></span> 满足 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo mathvariant=\"normal\">≠</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u \\neq v, u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 不相邻, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 可达 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>, 若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>⊆</mo><msub><mi>V</mi><mtext>, </mtext></msub></mrow><annotation encoding=\"application/x-tex\">V^{\\prime} \\subseteq V_{\\text {, }}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.887862em;vertical-align:-0.13597em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:-0.07610800000000001em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">, </span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo mathvariant=\"normal\">∉</mo><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">u, v \\notin V^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mord\"><span class=\"mrel\">∈</span></span><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"llap\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mord\">/</span><span class=\"mspace\" style=\"margin-right:0.05555555555555555em;\"></span></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.25em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>, 且在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mrow><mo fence=\"true\">[</mo><mi>V</mi><mi mathvariant=\"normal\">\\</mi><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">G\\left[V \\backslash V^{\\prime}\\right]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\">\\</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">]</span></span></span></span></span> 中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 不连通, 则 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>V</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">V^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> 被称作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的点割集。 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的最小点割集的大小被称作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的 局部点连通度 (Local connectivity), 记作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>κ</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\kappa(u, v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">κ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 。</li>\n<li>对于连通图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G=(V, E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span>, 若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>⊆</mo><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E^{\\prime} \\subseteq E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.887862em;vertical-align:-0.13597em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 且 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>=</mo><mrow><mo fence=\"true\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mi mathvariant=\"normal\">\\</mi><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">G^{\\prime}=\\left(V, E \\backslash E^{\\prime}\\right)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\">\\</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span></span></span></span> (即从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 中删去 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">E^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> 中的边) 不是连通图, 则 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">E^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> 是图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的一个<strong>边割集(Edge cut)</strong>。大小为一的边割集又被称作<strong>桥 (Bridge)</strong>。</li>\n<li>对于连通图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G=(V, E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> 和整数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>, 若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 不存在大小为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">k-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的边割集, 则称图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> - 边连通的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">(k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>-edge-connected)，使上式成立的最大的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 被称作图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> 的边连通度 (Edge connectivity)，记作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\lambda(G)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">λ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mclose\">)</span></span></span></span> 。边连通度为最小边割集的大小。</li>\n<li>对于图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G=(V, E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> 以及 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">u, v \\in V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span></span></span></span> 满足 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo mathvariant=\"normal\">≠</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u \\neq v, u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 可达 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>, 若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>⊆</mo><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E^{\\prime} \\subseteq E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.887862em;vertical-align:-0.13597em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span>, 且在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>=</mo><mrow><mo fence=\"true\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mi mathvariant=\"normal\">\\</mi><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">G^{\\prime}=\\left(V, E \\backslash E^{\\prime}\\right)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\">\\</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span></span></span></span> 中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 不连通, 则 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">E^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> 被称作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的边割集。 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的最小边割集的大 小被称作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的 局部边连通度 (Local edge-connectivity), 记作 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\lambda(u, v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">λ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 。</li>\n<li><strong>点双连通 (Biconnected)</strong>：没有割点的强连通图是点双连通的。\n<ul>\n<li>即对于任意两个点，无论删去图中哪个点（只能删去一个，且不能删自己），它们始终连通。</li>\n<li>点双连通没有传递性</li>\n</ul>\n</li>\n<li><strong>边双连通 (2-edge-connected)</strong> ：没有桥的强连通图是边双连通的。\n<ul>\n<li>即对于任意两个点，无论删去哪条边（只能删去一条），它们始终连通。</li>\n<li>边双连通有传递性</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"存图\">存图</h1>\n<h2 id=\"邻接矩阵\">邻接矩阵</h2>\n<p>邻接矩阵（二维数组）：空间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">G[i][j]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span></span></span></span> 表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>→</mo><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">i\\rightarrow j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 的边是否存在/权值大小</p>\n<p>一般不用于稀疏图</p>\n<p>遍历时先检查是否有边</p>\n<h2 id=\"邻接表\">邻接表</h2>\n<h3 id=\"无边权\">无边权</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; G;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> from, <span class=\"type\">int</span> to)</span> </span>&#123;</span><br><span class=\"line\">\tG[from].<span class=\"built_in\">push_back</span>(to);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"有边权\">有边权</h3>\n<p>排序之后可以log复杂度查边</p>\n<p>结构体写法：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">edge</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">int</span> v,val;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">vector&lt;edge&gt; graph[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> from,<span class=\"type\">int</span> to,<span class=\"type\">int</span> value)</span> </span>&#123;</span><br><span class=\"line\">    graph[from].<span class=\"built_in\">push_back</span>((edge)&#123;to,value&#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//遍历在C++14后可以写作：</span></span><br><span class=\"line\"><span class=\"comment\">//for(auto it:graph[i])</span></span><br><span class=\"line\"><span class=\"comment\">//其中it相当于graph[i][j]</span></span><br></pre></td></tr></table></figure>\n<p>pair写法：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> pair&lt;<span class=\"type\">int</span>, <span class=\"type\">int</span>&gt; pii;</span><br><span class=\"line\">vector&lt;pii&gt; G[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> from, <span class=\"type\">int</span> to, <span class=\"type\">int</span> value)</span> </span>&#123;</span><br><span class=\"line\">    graph[from].<span class=\"built_in\">push_back</span>(<span class=\"built_in\">make_pair</span>(to, value));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"邻接链表\">邻接链表</h2>\n<p>以链表储存每一个点的所有边</p>\n<p>链式前向星：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> to,val,nxt; <span class=\"comment\">//一般不用存边的起点</span></span><br><span class=\"line\">&#125;edge[M];<span class=\"comment\">//M看数据，未给就是N*N（N为节点数）</span></span><br><span class=\"line\"><span class=\"type\">int</span> head[N]; <span class=\"comment\">//初始化为-1</span></span><br><span class=\"line\"><span class=\"type\">int</span> tot;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v, <span class=\"type\">int</span> w)</span>\t<span class=\"comment\">//添加一条u-&gt;v的权为w的边</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t++tot;</span><br><span class=\"line\">\tedge[tot].to = v;</span><br><span class=\"line\">\tedge[tot].val = w;</span><br><span class=\"line\">    edge[tot].nxt = head[u];</span><br><span class=\"line\">\thead[u] = tot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//遍历写作：</span></span><br><span class=\"line\"><span class=\"comment\">//for(int i=head[x];~i;i=edge[i].nxt)</span></span><br></pre></td></tr></table></figure>\n<p>无向边存邻接表的技巧：每条边的序号<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为偶数，反边存在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>，利用位运算<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>^<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>  迅速找到反边</p>\n","categories":["ACM","图论"],"tags":["ACM","图论"]},{"title":"【图论】差分约束","url":"/posts/62fcd8f3/","content":"<p>利用图论方法解决不等式为约束条件的解问题</p>\n<span id=\"more\"></span>\n<h1 id=\"定义\">定义</h1>\n<p>特殊的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 元一次不等式组，包含 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个变量 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{1}, x_{2}, \\ldots, x_{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 以及 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 个约束条件，求一组解 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo>=</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{1}=a_{1}, x_{2}=a_{2}, \\ldots, x_{n}=a_{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, 使得所有的约束条件得到满足, 否则无解。</p>\n<p>约束条件： <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>j</mi></msub><mo>≤</mo><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{i}-x_{j} \\leq c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.922078em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，其中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo>≤</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>i</mi><mo mathvariant=\"normal\">≠</mo><mi>j</mi><mo separator=\"true\">,</mo><mn>1</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">1 \\leq i, j \\leq n, i \\neq j, 1 \\leq k \\leq m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 并且 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是常数 (可以是非负数, 也可以是负数) 。</p>\n<h1 id=\"分析\">分析</h1>\n<ul>\n<li>约束条件变形成 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>≤</mo><msub><mi>x</mi><mi>j</mi></msub><mo>+</mo><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{i} \\leq x_{j}+c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7859700000000001em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8694379999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，把每个变量看做图中的一个结点，从结点 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 向结点 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 连一条长度为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的有向边。</li>\n<li>如果 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo fence=\"true\">{</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo fence=\"true\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\left\\{a_{1}, a_{2}, \\ldots, a_{n}\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 是该差分约束系统的一组解, 那么对于任意的常数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span>， <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo fence=\"true\">{</mo><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo><mi>d</mi><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo>+</mo><mi>d</mi><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo>+</mo><mi>d</mi><mo fence=\"true\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\left\\{a_{1}+d, a_{2}+d, \\ldots, a_{n}+d\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 显然也是该差分约束系统的一组解。</li>\n<li>设 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">dist</mi><mo>⁡</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\operatorname{dist}[0]=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">d</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">t</span></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 并向每一个点连一条<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 边，跑单源最短路（spfa或bellmanford）\n<ul>\n<li>若图中存在负环，则给定的差分约束系统无解</li>\n<li>否则， <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mi mathvariant=\"normal\">dist</mi><mo>⁡</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">x_{i}=\\operatorname{dist}[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">d</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">t</span></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 为该差分约束系统的一组解。</li>\n</ul>\n</li>\n<li>注意：不可达的情况即二者无约束条件</li>\n</ul>\n<h1 id=\"变式\">变式</h1>\n<ul>\n<li>变式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ： <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>j</mi></msub><mo>≥</mo><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{i}-x_{j} \\geq c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.922078em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>\n<ul>\n<li>方法一：乘<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span> 改不等式方向</li>\n<li>方法二：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 向<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 建<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">c_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 边，跑最长路</li>\n</ul>\n</li>\n<li>变式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> ： <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>j</mi></msub><mo>=</mo><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{i}-x_{j} = c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ：改为两个：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>j</mi></msub><mo>≤</mo><msub><mi>c</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>j</mi></msub><mo>≥</mo><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{i}-x_{j} \\leq c_{k}, x_{i}-x_{j} \\geq c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.922078em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.922078em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></li>\n<li>变式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> ： <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>j</mi></msub><mo>&lt;</mo><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_{i}-x_{j} &lt; c_{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8252079999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ：改为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>j</mi></msub><mo>&lt;</mo><msub><mi>c</mi><mi>k</mi></msub><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x_{i}-x_{j} &lt; c_{k}-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8252079999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n<li>注意：涉及边权为负数时，对于跑最短路 or 反图最长路的选择</li>\n</ul>\n","categories":["ACM","图论"],"tags":["ACM","图论","差分约束"]},{"title":"【图论】拓扑排序","url":"/posts/d8c1fa06/","content":"<p>拓扑排序是基于DAG的排序方法</p>\n<span id=\"more\"></span>\n<h1 id=\"定义\">定义</h1>\n<p>有向无环图（DAG），顶点线性排序使得对于每一个有向边，起始节点都在尾节点的前面</p>\n<h1 id=\"分析\">分析</h1>\n<p>记录每个点的入度</p>\n<p>对于每个点，遍历它的所有出边并更新到达节点的入度，如果该到达节点的入度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 则加入队列</p>\n<p>复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>E</mi><mo>+</mo><mi>V</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(E+V)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mclose\">)</span></span></span></span></p>\n<h1 id=\"应用\">应用</h1>\n<ul>\n<li>找环</li>\n<li>找最长路</li>\n<li>找优先级最大（等效于最长路）</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">toposort</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!topo.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> cur = topo.<span class=\"built_in\">front</span>();</span><br><span class=\"line\">        topo.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (graph[cur][i])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                in[i]--;</span><br><span class=\"line\">                d[i] = <span class=\"built_in\">max</span>(d[i], d[cur] + <span class=\"number\">1</span>);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!in[i])</span><br><span class=\"line\">                    topo.<span class=\"built_in\">push</span>(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>字典序拓扑排序：上述队列改成优先队列，复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>E</mi><mo>+</mo><mi>V</mi><mi>log</mi><mo>⁡</mo><mi>V</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(E+V\\log V)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<h1 id=\"关键路径\">关键路径</h1>\n<p><s>离散数学里学的东西，学之前完全没听说过…</s></p>\n<ul>\n<li>定义：顶点表活动，有向边表优先级，这样的DAG称AOV(activity on vertex network)；边有权值表时间，称AOE网(activity on edge)；AOE网上的最长路径称关键路径，只有这条路径上的关键活动进行时间变化能够影响到整体时间。</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 节点的最早开始时间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">ve[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> ，最晚开始时间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>l</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">vl[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> 。</li>\n<li>以最早开始时间为例，对于边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v,w)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mclose\">)</span></span></span></span> ，更新操作：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>v</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>v</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>v</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">ve[v]=max(ve[v],ve[u]+w)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mclose\">)</span></span></span></span> 。</li>\n<li>正反图分别进行拓扑排序，过程中进行<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>v</mi><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">ve,vl</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span> 的更新，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>v</mi><mi>l</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">ve[u]=vl[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> 的点即为关键路径上的点。</li>\n</ul>\n","categories":["ACM","图论"],"tags":["ACM","拓扑排序","图论"]},{"title":"【图论】最短路合集","url":"/posts/e168e421/","content":"<p>图论中的最短路问题</p>\n<span id=\"more\"></span>\n<p>前置知识：边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 的松弛操作：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dis(v)=min(dis(v),dis(u)+w)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>一般实际中写<code>if((ll)d[v]&gt;(ll)d[u]+w)</code>，防止赋了<code>0x7fffffff</code> 的<code>d</code> 数组加法溢出；另一种方法是赋值<code>0x3f3f3f3f</code></p>\n<h1 id=\"单源最短路径\">单源最短路径</h1>\n<p>即求解给定的单个出发点到图中其他点的最短路径</p>\n<h2 id=\"bellman-ford\">Bellman-Ford</h2>\n<p>可以负权，可以判断是否有负环，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nm)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> 。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//结构体+vector存边</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">bellmanford</span><span class=\"params\">(<span class=\"type\">int</span> n, <span class=\"type\">int</span> s)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    d[s] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">bool</span> flag;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> u = <span class=\"number\">1</span>; u &lt;= n; u++) <span class=\"comment\">//对每条边试图进行松弛操作</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> it : G[u])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"type\">int</span> v = it.to, w = it.val;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (d[v] &gt; d[u] + w)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    d[v] = d[u] + w;</span><br><span class=\"line\">                    flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!flag)<span class=\"comment\">// 没有可以松弛的边时就停止算法</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> flag; <span class=\"comment\">// 第 n 轮循环仍然可以松弛时说明 s 点可以抵达一个负环</span></span><br><span class=\"line\">    <span class=\"comment\">//注意，这里如果false说明s走不到负环，但是说不定有负环</span></span><br><span class=\"line\">    <span class=\"comment\">//如果仅仅是判负环，需要建一个到各个点距离为0的超级源点</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"spfa\">SPFA</h2>\n<p>队列优化的Bellman-Ford，复杂度玄学</p>\n<p>原理：松弛操作只可能在之前有过松弛操作的边端点产生</p>\n<blockquote>\n<p>关于SPFA，它死了</p>\n</blockquote>\n<p>出自某年NOI，因为造适当的数据可以将SPFA卡成最坏情况<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nm)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">queue&lt;<span class=\"type\">int</span>&gt; q;</span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"type\">int</span> cnt[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">spfa</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    d[s] = <span class=\"number\">0</span>, vst[s] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    q.<span class=\"built_in\">push</span>(s);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = q.<span class=\"built_in\">front</span>();</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        vst[u] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> it : G[u])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = it.to, w = it.val;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (d[v] &gt; d[u] + w)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[v] = d[u] + w;</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"comment\">/** 无重边的写法 **/</span></span><br><span class=\"line\">                cnt[v] = cnt[u] + <span class=\"number\">1</span>; <span class=\"comment\">// 记录最短路经过的边数</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (cnt[v] &gt;= n) <span class=\"comment\">// 在不经过负环的情况下，最短路至多经过 n - 1 条边</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; <span class=\"comment\">// 因此如果经过了多于 n 条边，一定说明经过了负环</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!vst[v]) <span class=\"comment\">//如果不在队列里就加入</span></span><br><span class=\"line\">                    q.<span class=\"built_in\">push</span>(v), vst[v] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"comment\">/** 有重边的写法</span></span><br><span class=\"line\"><span class=\"comment\">                if (!vst[v])</span></span><br><span class=\"line\"><span class=\"comment\">                &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                    cnt[v]++; //有重边，记录入队次数</span></span><br><span class=\"line\"><span class=\"comment\">                    if (cnt[v] &gt; n)</span></span><br><span class=\"line\"><span class=\"comment\">                        return false; // 有负环</span></span><br><span class=\"line\"><span class=\"comment\">                    q.push(v);</span></span><br><span class=\"line\"><span class=\"comment\">                    vst[v] = true;</span></span><br><span class=\"line\"><span class=\"comment\">                &#125;</span></span><br><span class=\"line\"><span class=\"comment\">                **/</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"dijkstra\">Dijkstra</h2>\n<p>没有负权边，时间复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mi>log</mi><mo>⁡</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(m\\log m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> pair&lt;<span class=\"type\">int</span>, <span class=\"type\">int</span>&gt; P; <span class=\"comment\">//优先队列优化</span></span><br><span class=\"line\"><span class=\"type\">int</span> n, m, cnt, s; <span class=\"comment\">//s为源点</span></span><br><span class=\"line\"><span class=\"type\">int</span> d[N]; <span class=\"comment\">//记录最短路</span></span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Dijkstra</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    priority_queue&lt;P, vector&lt;P&gt;, greater&lt;P&gt;&gt; dij; <span class=\"comment\">//声明优先队列</span></span><br><span class=\"line\">    dij.<span class=\"built_in\">push</span>(<span class=\"built_in\">P</span>(<span class=\"number\">0</span>, s)); <span class=\"comment\">//pair的first为当前最短距离，second为起点</span></span><br><span class=\"line\">    d[s] = <span class=\"number\">0</span>; <span class=\"comment\">//其余置为INF</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!dij.<span class=\"built_in\">empty</span>()) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> cur = dij.<span class=\"built_in\">top</span>().second; <span class=\"comment\">//取出目前距离最短的点</span></span><br><span class=\"line\">        dij.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vst[cur]) <span class=\"comment\">//vst的更新位置和入队是配套的，如果已经更新过这次的不会更优</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        vst[cur] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[cur]; ~i; i = edge[i].nxt) <span class=\"comment\">//从当前点遍历所有边</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to, w = edge[i].val; <span class=\"comment\">//方便代码</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (d[v] &gt; d[cur] + w) </span><br><span class=\"line\">            &#123; \t<span class=\"comment\">//如果当前记录过的到to节点的距离比cur节点走这条路大</span></span><br><span class=\"line\">                d[v] = d[cur] + w; <span class=\"comment\">//更新</span></span><br><span class=\"line\">                dij.<span class=\"built_in\">push</span>(<span class=\"built_in\">P</span>(d[v], v)); <span class=\"comment\">//入队</span></span><br><span class=\"line\">                <span class=\"comment\">//pre[v] = cur; //如果需要记录最短路</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"多源最短路径\">多源最短路径</h1>\n<h2 id=\"floyd\">Floyd</h2>\n<p>无负环图，多源最短路，时间复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//预处理将d[i][j]置为INF</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = <span class=\"number\">1</span>; k &lt;= n; k++) <span class=\"comment\">//中转点k</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (d[i][k] == INF || i == k)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>; <span class=\"comment\">//此中转点不通或是自环</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++) <span class=\"comment\">//如果有负权，需要判一下d[k][j]是否为INF</span></span><br><span class=\"line\">            d[i][j] = <span class=\"built_in\">min</span>((ll)d[i][j], (ll)d[i][k] + d[k][j]);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>正权无向图求最小权值环：跑一遍找<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">d[i][i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 最小的，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 。</p>\n</li>\n<li>\n<p>判断是否有负环：去掉<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>=</mo><mo>=</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">i==k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ，跑完检查<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">d[i] [i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 是否为负，若有为负的就有负环</p>\n</li>\n<li>\n<p>有向图判断任意两点是否连通：跑一遍，把<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">min</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span></span></span></span> 改成或运算<code>d[i][j]|=d[i][k]&amp;d[k][j]</code>，还可以用bitset 优化成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mfrac><msup><mi>n</mi><mn>3</mn></msup><mi>w</mi></mfrac><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\frac{n^3}{w})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.36292em;vertical-align:-0.345em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01792em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span></span> ：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = <span class=\"number\">1</span>; k &lt;= n; k++)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (d[i][k]) <span class=\"comment\">//如果i能通中转点k</span></span><br><span class=\"line\">            d[i] = d[i] | d[k]; <span class=\"comment\">//k能通的地方i都能通</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>如果需要记录路径，记录的是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">pre[i][j]=k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 。</p>\n</li>\n</ul>\n<h2 id=\"johnson\">Johnson</h2>\n<ul>\n<li>无负环图，复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>m</mi><mi>log</mi><mo>⁡</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nm\\log m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> 。</li>\n<li>核心思想：修改路径权值使其能跑dijkstra</li>\n<li>步骤：\n<ul>\n<li>新建0号节点，向每个点连一条长度为0的边</li>\n<li>跑一遍0号起点开始的Bellman-Ford，得到0号点到每个点的最短路<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>v</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">dis[v]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">]</span></span></span></span></li>\n<li>将边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 的边权修改为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>+</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>v</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">w+dis[u]-dis[v]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">]</span></span></span></span></li>\n<li>跑n轮dijkstra</li>\n</ul>\n</li>\n<li>正确性：\n<ul>\n<li>将修改后的边权，带入某条路径长的计算，结果为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∑</mo><msub><mi>w</mi><mi>i</mi></msub><mo>+</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>s</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>t</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\sum w_i +dis[s]-dis[t]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.00001em;vertical-align:-0.25001em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">]</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span></span></span></span> 是起点，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> 是终点，因此最短路的性质没有改变。</li>\n<li>BellmanFord对所有边进行了松弛操作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mi>w</mi><mo>&gt;</mo><mo>=</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>v</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">dis[u]+w&gt;=dis[v]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">]</span></span></span></span> ，保证修改后边权的非负性。</li>\n</ul>\n</li>\n<li>注意：改spfa时判断轮数是n+1（添加了一个节点）</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* luoguP5905 */</span></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> to, val, nxt; <span class=\"comment\">//一般不用存边的起点</span></span><br><span class=\"line\">&#125; edge[M];            <span class=\"comment\">//M看数据，未给就是N*N（N为节点数）</span></span><br><span class=\"line\"><span class=\"type\">int</span> head[N];          <span class=\"comment\">//初始化为-1</span></span><br><span class=\"line\"><span class=\"type\">int</span> tot;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v, <span class=\"type\">int</span> w)</span> <span class=\"comment\">//添加一条u-&gt;v的权为w的边</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ++tot;</span><br><span class=\"line\">    edge[tot].to = v;</span><br><span class=\"line\">    edge[tot].val = w;</span><br><span class=\"line\">    edge[tot].nxt = head[u];</span><br><span class=\"line\">    head[u] = tot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> dis[N];</span><br><span class=\"line\"><span class=\"type\">int</span> d[N][N];</span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"type\">int</span> cnt[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">spfa</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    queue&lt;<span class=\"type\">int</span>&gt; q;</span><br><span class=\"line\">    dis[<span class=\"number\">0</span>] = <span class=\"number\">0</span>, vst[<span class=\"number\">0</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    q.<span class=\"built_in\">push</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = q.<span class=\"built_in\">front</span>();</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>(), vst[u] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to, w = edge[i].val;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (dis[v] &gt; dis[u] + w)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                dis[v] = dis[u] + w;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!vst[v])</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    cnt[v]++; <span class=\"comment\">//有重边，记录入队次数</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (cnt[v] &gt; n)</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    q.<span class=\"built_in\">push</span>(v);</span><br><span class=\"line\">                    vst[v] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">priority_queue&lt;pii, vector&lt;pii&gt;, greater&lt;pii&gt;&gt; q;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dijkstra</span><span class=\"params\">(<span class=\"type\">int</span> d[], <span class=\"type\">int</span> s)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        vst[i] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    d[s] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    q.<span class=\"built_in\">push</span>(<span class=\"built_in\">make_pair</span>(<span class=\"number\">0</span>, s));</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> cur = q.<span class=\"built_in\">top</span>().second;</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vst[cur])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        vst[cur] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[cur]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to, w = edge[i].val;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (d[v] &gt; (ll)d[cur] + w)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[v] = d[cur] + w;</span><br><span class=\"line\">                q.<span class=\"built_in\">push</span>(<span class=\"built_in\">make_pair</span>(d[v], v));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(n), <span class=\"built_in\">read</span>(m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt;= n; i++)</span><br><span class=\"line\">        head[i] = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> u, v, w;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(u), <span class=\"built_in\">read</span>(v), <span class=\"built_in\">read</span>(w);</span><br><span class=\"line\">        <span class=\"built_in\">add_edge</span>(u, v, w);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">add_edge</span>(<span class=\"number\">0</span>, i, <span class=\"number\">0</span>); <span class=\"comment\">//注意，这里是有向边，如果用邻接矩阵，要把G[i][0]置为INF</span></span><br><span class=\"line\">        dis[i] = INF;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">spfa</span>()) <span class=\"comment\">//如果有负环</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;-1&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = head[i]; ~j; j = edge[j].nxt)</span><br><span class=\"line\">            edge[j].val += dis[i] - dis[edge[j].to];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">            d[i][j] = INF;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"built_in\">dijkstra</span>(d[i], i);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ll ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">            ans += (ll)j * (d[i][j] == INF ? INF : (d[i][j] - dis[i] + dis[j]));</span><br><span class=\"line\">       \t<span class=\"comment\">// 这里的处理跟题目求解的东西有关，跟算法关系不大</span></span><br><span class=\"line\">        <span class=\"comment\">// 正常来说ij联通的话最短路就是d[i][j] - dis[i] + dis[j]</span></span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lld\\n&quot;</span>, ans);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"分层图\">分层图</h1>\n<p>图论题一般二维，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 点到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 点，有些题对这个过程有多种选择，引入第三维，将其“分层”，和dp中增加维数一个道理，在松弛操作中维护。</p>\n<h2 id=\"题目\">题目</h2>\n<p><a href=\"https://www.luogu.com.cn/problem/P4568\">P4568 JLOI2011 飞行路线 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)</a></p>\n<p><a href=\"https://www.luogu.com.cn/problem/P1266\">P1266 速度限制 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)</a></p>\n<h1 id=\"k短路\">k短路</h1>\n<p>建正反图，跑反图的最短路，再调整边取前k</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"type\">double</span> dis[N];</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">node</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> x;</span><br><span class=\"line\">    <span class=\"type\">double</span> v; <span class=\"comment\">//当前已走距离</span></span><br><span class=\"line\">    <span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&lt;(<span class=\"type\">const</span> node &amp;rhs) <span class=\"type\">const</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v + dis[x] &gt; rhs.v + dis[rhs.x]; <span class=\"comment\">//A*的估价函数</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">priority_queue&lt;pii&gt; Q; </span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dijkstra</span><span class=\"params\">()</span> <span class=\"comment\">//跑反图的最短路</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        dis[i] = INF;</span><br><span class=\"line\">    dis[ed] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    Q.<span class=\"built_in\">push</span>(<span class=\"built_in\">make_pair</span>(<span class=\"number\">0</span>, ed));</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!Q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> cur = Q.<span class=\"built_in\">top</span>().second;</span><br><span class=\"line\">        Q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vst[cur])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        vst[cur] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[cur]; i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">            <span class=\"type\">double</span> w = edge[i].val;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (dis[v] &gt; dis[cur] + w)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                dis[v] = dis[cur] + w;</span><br><span class=\"line\">                Q.<span class=\"built_in\">push</span>(<span class=\"built_in\">make_pair</span>(dis[v], v));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> cnt[N];</span><br><span class=\"line\">priority_queue&lt;node&gt; q;</span><br><span class=\"line\"><span class=\"comment\">//main函数里</span></span><br><span class=\"line\"><span class=\"built_in\">dijkstra</span>();</span><br><span class=\"line\">q.<span class=\"built_in\">push</span>(&#123;st, <span class=\"number\">0</span>&#125;);</span><br><span class=\"line\"><span class=\"keyword\">while</span> (!q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> cur=q.<span class=\"built_in\">top</span>().x, w=q.<span class=\"built_in\">top</span>().v;</span><br><span class=\"line\">    q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">    cnt[cur]++;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (cur == ed &amp;&amp; cnt[cur] == k)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%.2lf\\n&quot;</span>, w);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (cnt[cur] &gt; k)</span><br><span class=\"line\">        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[cur]; i; i = edge[i].nxt)</span><br><span class=\"line\">        q.<span class=\"built_in\">push</span>(&#123;edge[i].to, edge[i].val + w&#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;-1\\n&quot;</span>);</span><br></pre></td></tr></table></figure>\n<h1 id=\"最短路计数\">最短路计数</h1>\n<p>在Dijkstra中，做一点修改就行，很好懂直接看代码：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">int</span> cnt[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Dijkstra</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">    cnt[s] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!dij.<span class=\"built_in\">empty</span>()) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[cur]; ~i; i = edge[i].nxt) <span class=\"comment\">//从当前点遍历所有边</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to, w = edge[i].val; <span class=\"comment\">//方便代码</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (d[v] &gt; d[cur] + w) </span><br><span class=\"line\">            &#123; \t<span class=\"comment\">//如果当前记录过的到to节点的距离比cur节点走这条路大</span></span><br><span class=\"line\">                d[v] = d[cur] + w; <span class=\"comment\">//更新</span></span><br><span class=\"line\">                dij.<span class=\"built_in\">push</span>(<span class=\"built_in\">P</span>(d[v], v)); <span class=\"comment\">//入队</span></span><br><span class=\"line\">                <span class=\"comment\">//pre[v] = cur; //如果需要记录最短路</span></span><br><span class=\"line\">                cnt[v] = cnt[cur];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (d[v] == d[cur] + w) <span class=\"comment\">// 很好理解，都是同样长度到达的</span></span><br><span class=\"line\">\t\t\t\tcnt[v] += cnt[cur];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>基于此可以延伸一些诸如次短路计数的鬼东西，可以把<code>d</code> 和<code>cnt</code> 都设置成二维，一个记最短路一个记次短路，分类讨论更新就行了。</p>\n","categories":["ACM","图论"],"tags":["ACM","图论","最短路"]},{"title":"【图论】树的基本概念、存储与遍历","url":"/posts/4b415f60/","content":"<p>树的基本概念、存储与遍历相关内容</p>\n<span id=\"more\"></span>\n<h1 id=\"基本概念\">基本概念</h1>\n<p>树：特殊的图</p>\n<h2 id=\"无根树\">无根树</h2>\n<p>无根树等价定义：</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个节点，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 条边的<strong>连通无向图</strong></li>\n<li>无向无环的连通图</li>\n<li>任意两个结点之间有且仅有一条简单路径的无向图</li>\n<li>任何边均为桥的连通图</li>\n<li>没有圈，且在任意不同两点间添加一条边之后所得图含唯一的一个圈的图</li>\n</ul>\n<h2 id=\"有根树\">有根树</h2>\n<p>有根树：无根树指定一个根节点</p>\n<ul>\n<li><strong>父节点（父亲）（parent node）</strong>：对于除根以外的每个结点，定义为从该结点到根路径上的第二个结点。 根结点没有父结点。</li>\n<li><strong>祖先（ancestor）</strong>：一个结点到根结点的路径上，除了它本身外的结点。 根结点的祖先集合为空。</li>\n<li><strong>子结点（孩子）（child node）</strong>：如果<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的父亲，那么<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 的子结点。子结点的顺序一般不加以区分（例外：二叉树）</li>\n<li><strong>兄弟（sibling）</strong>：同一个父亲的多个子结点互为兄弟。</li>\n<li><strong>后代（descendant）</strong>：子节点及其后代</li>\n<li><strong>子树（subtree）</strong>：删掉与父亲相连的边后，该结点所在的子图。</li>\n</ul>\n<h2 id=\"相关定义\">相关定义</h2>\n<ul>\n<li><strong>森林（forest）</strong>：每个连通分量（连通块）都是树的图。按照定义，一棵树也是森林。</li>\n<li><strong>结点的深度（depth）</strong>：到根结点的路径上的边数。</li>\n<li><strong>树的高度（height）</strong>：所有结点的深度的最大值。</li>\n</ul>\n<h2 id=\"特殊的树\">特殊的树</h2>\n<ul>\n<li><strong>链（chain/path graph）</strong>：满足与任一结点相连的边不超过<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 条的树称为链。</li>\n<li><strong>菊花/星星（star）</strong>：所有节点都与某一个节点相连（除自身）</li>\n<li>二叉树\n<ul>\n<li><strong>有根二叉树（rooted binary tree）</strong>：每个结点最多只有两个孩子的有根树称为二叉树。常常对两个孩子的顺序加以区分，分别称之为左孩子和右孩子。</li>\n<li><strong>完整二叉树（full/proper binary tree）</strong>：每个结点的子结点数量均为 0 或者 2 的二叉树。换言之，每个结点或者是树叶，或者左右子树均非空。</li>\n<li><strong>完全二叉树（complete binary tree）</strong>：只有最下面两层结点的度数可以小于 2，且最下面一层的结点都集中在该层最左边的连续位置上。</li>\n<li><strong>完美二叉树（满二叉树）（perfect binary tree）</strong>：所有叶结点的深度均相同的二叉树称为完美二叉树。</li>\n<li><strong>平衡二叉树（AVL树）</strong>：它是一棵空树或它的左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树</li>\n</ul>\n</li>\n<li><strong>生成树（spanning tree）</strong>：一个连通无向图的生成子图，同时要求是树。也即在图的边集中选择<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 条，将所有顶点连通。</li>\n</ul>\n<h2 id=\"二叉树计算公式\">二叉树计算公式</h2>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个节点的二叉树一共有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mi>n</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">!</mo></mrow><mrow><mi>n</mi><mo stretchy=\"false\">!</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">!</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{(2n)!}{n! (n+1)!}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mclose mtight\">!</span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span><span class=\"mclose mtight\">!</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mclose mtight\">)</span><span class=\"mclose mtight\">!</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 种（Catalan数）</li>\n<li>二叉树的第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 层最多有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">2^{k-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span>个节点（以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 起计数）</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>n</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>n</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">n_0,n_1,n_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 表示节点度数为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">0,1,2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span></span></span></span> 的节点个数，总节点数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><msub><mi>n</mi><mn>0</mn></msub><mo>+</mo><msub><mi>n</mi><mn>1</mn></msub><mo>+</mo><msub><mi>n</mi><mn>2</mn></msub><mo>=</mo><mn>0</mn><mo>×</mo><msub><mi>n</mi><mn>0</mn></msub><mo>+</mo><mn>1</mn><mo>×</mo><msub><mi>n</mi><mn>1</mn></msub><mo>+</mo><mn>2</mn><mo>×</mo><msub><mi>n</mi><mn>2</mn></msub><mo>=</mo><msub><mi>n</mi><mn>1</mn></msub><mo>+</mo><mn>2</mn><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">n=n_0+n_1+n_2=0\\times n_0+1\\times n_1+2\\times n_2=n_1+2n_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，由此还可推出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>n</mi><mn>0</mn></msub><mo>=</mo><msub><mi>n</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n_0=n_2+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个节点的完全二叉树的深度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">⌊</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy=\"false\">⌋</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lfloor log_2{n}\\rfloor + 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span></span><span class=\"mclose\">⌋</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n<h1 id=\"存储\">存储</h1>\n<h2 id=\"无根树\">无根树</h2>\n<p>vector存相邻节点最方便，类比图的存法</p>\n<h2 id=\"有根树\">有根树</h2>\n<p><s>一个只存在书上的</s>左孩子右兄弟表示法：每个节点记录第一个孩子节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>d</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">child[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> 和下一个兄弟节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>i</mi><mi>b</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">sib[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> ，跟链式前向星一样的</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//遍历</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> v = child[u]; ~v; v = sib[v]) &#123; <span class=\"comment\">//为空置为-1</span></span><br><span class=\"line\">\t<span class=\"comment\">//...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"二叉树\">二叉树</h2>\n<ul>\n<li>数组：左右孩子<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">child[i][0/1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></li>\n<li>指针：左右孩子指针，节点值<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">val</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span> 。<s>但是作为一个oi是自学c语言上手的人，有一说一，个人觉得指针表示法确实清晰，但确实不利好oi</s></li>\n</ul>\n<h1 id=\"遍历\">遍历</h1>\n<h2 id=\"二叉树\">二叉树</h2>\n<h3 id=\"先序遍历\">先序遍历</h3>\n<p>根+左子树+右子树</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span> <span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(u == <span class=\"number\">-1</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, u);</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(child[u][<span class=\"number\">0</span>]);</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(child[u][<span class=\"number\">1</span>]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"中序遍历\">中序遍历</h3>\n<p>左子树+根+右子树</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span> <span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(u == <span class=\"number\">-1</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(child[u][<span class=\"number\">0</span>]);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, u);</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(child[u][<span class=\"number\">1</span>]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"后序遍历\">后序遍历</h3>\n<p>左子树+右子树+根</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span> <span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(u == <span class=\"number\">-1</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(child[u][<span class=\"number\">0</span>]);</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(child[u][<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, u);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"二叉树特性\">二叉树特性</h3>\n<p>知中序+前/后序可知另一个：</p>\n<ul>\n<li>前序序列第一个是根，后序序列最后一个是根</li>\n<li>每个子树看成一颗新树</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//已知中序后续求先序</span></span><br><span class=\"line\"><span class=\"type\">char</span> post_order[<span class=\"number\">9</span>], in_order[<span class=\"number\">9</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> len;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> il, <span class=\"type\">int</span> ir, <span class=\"type\">int</span> pl, <span class=\"type\">int</span> pr)</span> <span class=\"comment\">//[il,ir]/[pl,pr]这颗子树</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">putchar</span>(post_order[pr]);</span><br><span class=\"line\">    <span class=\"type\">int</span> i;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (i = il; i &lt;= ir; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (post_order[pr] == in_order[i]) <span class=\"comment\">//找根节点，将中序中的树分开</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt; il)</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(il, i - <span class=\"number\">1</span>, pl, pl + i - il - <span class=\"number\">1</span>); <span class=\"comment\">//i-il是左子树的长度</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &lt; ir)</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(i + <span class=\"number\">1</span>, ir, pl + i - il, pr - <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%s&quot;</span>, in_order, post_order);</span><br><span class=\"line\">    len = <span class=\"built_in\">strlen</span>(post_order);</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(<span class=\"number\">0</span>, len - <span class=\"number\">1</span>, <span class=\"number\">0</span>, len - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>也就是可以求出这棵树了，以后序+中序为例</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> tree[N][<span class=\"number\">2</span>]; <span class=\"comment\">// tree[i][0/1]是左右子树的节点编号，空置-1</span></span><br><span class=\"line\"><span class=\"type\">int</span> porder[N],iorder[N]; <span class=\"comment\">// porder后序遍历，iorder中序遍历</span></span><br><span class=\"line\"><span class=\"comment\">// 递归处理porder[mid]为根节点的子树，子树的中序遍历范围是iorder[l...r]闭区间</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">solve</span><span class=\"params\">(<span class=\"type\">int</span> mid, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l == r) <span class=\"comment\">// 叶子节点</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> porder[mid];</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l &gt; r) <span class=\"comment\">// 空节点，返回编号-1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 找到根节点porder[mid]在中序遍历中的位置pos，从而[l,pos-1]和[pos+1,r]就是左右子树的中序范围</span></span><br><span class=\"line\">    <span class=\"type\">int</span> pos=l; </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(pos;pos&lt;=r;pos++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(iorder[pos]==porder[mid])</span><br><span class=\"line\">            <span class=\"keyword\">break</span>; </span><br><span class=\"line\">   \t<span class=\"comment\">// 递归求解右子树，根节点显然是后序的mid-1，中序范围[pos+1,r]</span></span><br><span class=\"line\">    tree[m[mid]][<span class=\"number\">1</span>]=<span class=\"built_in\">solve</span>(mid<span class=\"number\">-1</span>,pos+<span class=\"number\">1</span>,r);</span><br><span class=\"line\">    <span class=\"comment\">// 递归求解左子树，由于右子树共有r-pos+1个节点，则左子树的根节点在mid-1-r+pos</span></span><br><span class=\"line\">    tree[m[mid]][<span class=\"number\">0</span>]=<span class=\"built_in\">solve</span>(mid-r+pos<span class=\"number\">-1</span>,l,pos<span class=\"number\">-1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> m[mid];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//main函数</span></span><br><span class=\"line\"><span class=\"built_in\">memset</span>(tree, <span class=\"number\">-1</span>, <span class=\"built_in\">sizeof</span>(tree));</span><br><span class=\"line\"><span class=\"built_in\">solve</span>(n<span class=\"number\">-1</span>, <span class=\"number\">0</span>, n<span class=\"number\">-1</span>); <span class=\"comment\">// 后序的最后一个点是根节点</span></span><br></pre></td></tr></table></figure>\n<p>已知前序后序，中序不唯一</p>\n<ul>\n<li>观察可知，造成不唯一的原因是一棵子树只有一个子节点，即前序：根+子，后续：子+根</li>\n<li>只需要统计这样的子树有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">cnt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span></span></span></span> 个，答案是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mi>c</mi><mi>n</mi><mi>t</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">2^{cnt}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7935559999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">c</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span></span></span></span> （可能左可能右）</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">char</span> inorder[N];</span><br><span class=\"line\"><span class=\"type\">char</span> postorder[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%s&quot;</span>, inorder, postorder);</span><br><span class=\"line\">    <span class=\"type\">int</span> cnt = <span class=\"number\">0</span>, len1 = <span class=\"built_in\">strlen</span>(inorder), len2 = <span class=\"built_in\">strlen</span>(postorder);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; len1 - <span class=\"number\">1</span>; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt; len2; j++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (inorder[i] == postorder[j] &amp;&amp; inorder[i + <span class=\"number\">1</span>] == postorder[j - <span class=\"number\">1</span>]) </span><br><span class=\"line\">                cnt++; <span class=\"comment\">//根节点相同，遍历顺序相反</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, <span class=\"number\">1</span> &lt;&lt; cnt);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"无根树\">无根树</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> v : adj[u]) <span class=\"comment\">//遍历相邻节点</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v != from) <span class=\"comment\">//不走回头路</span></span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(v, u);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 开始遍历时</span></span><br><span class=\"line\"><span class=\"built_in\">dfs</span>(root, <span class=\"number\">-1</span>); <span class=\"comment\">// 如果担心在dfs中访问下标from的数组越界这里写dfs(root,0)</span></span><br></pre></td></tr></table></figure>\n","categories":["ACM","图论"],"tags":["ACM","图论"]},{"title":"【图论】树的最近公共祖先","url":"/posts/5d9beed0/","content":"<p>树的最近公共祖先（LCA）问题</p>\n<span id=\"more\"></span>\n<h1 id=\"概念和记法\">概念和记法</h1>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">LCA(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span> 是点集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 的最近公共祖先</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的祖先<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇔</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">\\Leftrightarrow LCA(u,v)=u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>A</mi><mo>∪</mo><mi>B</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>A</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>B</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">LCA(A\\cup B)=LCA(LCA(A),LCA(B))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">A</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∪</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">A</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo separator=\"true\">,</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">A,B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span></span></span></span> 是点集</li>\n<li>在树上任选三点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>u</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>u</mi><mn>3</mn></msub><mo separator=\"true\">,</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><msub><mi>u</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>u</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><msub><mi>u</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>u</mi><mn>3</mn></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><msub><mi>u</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>u</mi><mn>3</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">u_1,u_2,u_3,LCA(u_1,u_2),LCA(u_1,u_3),LCA(u_2,u_3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 中一定有两个是相等的。</li>\n<li>设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的最短距离，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">h(u)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">h</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span></span></span></span> 是深度，有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mn>2</mn><mo>×</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d(u,v)=h(u)+h(v)-2\\times h(LCA(u,v))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">h</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">h</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">h</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span> ，很好理解，画个图就行</li>\n<li>后续内容用<code>fa[i]</code> 相关的表示记录<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 节点的父亲节点</li>\n</ul>\n<h1 id=\"朴素算法\">朴素算法</h1>\n<ul>\n<li>预处理深度，深度高的先跳直到相同深度，然后一起往上跳直到相遇，预处理父亲节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，单次查询<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，但这个查询复杂度一般都无法接受</li>\n</ul>\n<h1 id=\"倍增改进\">倍增改进</h1>\n<p>预处理出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mi>a</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">fa[x][i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 的第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.824664em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span></span></span></span></span></span></span> 个祖先，跳的时候从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 大到小看<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mi>a</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">fa[u] [i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mi>a</mi><mo stretchy=\"false\">[</mo><mi>v</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">fa[v] [i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> ，除非相等或为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，否则跳上去。</p>\n<p>预处理<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，单次查询<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 。</p>\n<p>带权（求x, y距离），如果不带权去掉cost数组的处理就可以了：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">vector&lt;node&gt; tree[N];</span><br><span class=\"line\"><span class=\"type\">int</span> fa[N][<span class=\"number\">31</span>], cost[N][<span class=\"number\">31</span>], dep[N];</span><br><span class=\"line\"><span class=\"comment\">//fa[x][i]是x的第2^i个祖先节点，cost[x][i]是x到第2^i个祖先节点的长度</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> from)</span> <span class=\"comment\">//预处理</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fa[rt][<span class=\"number\">0</span>] = from; <span class=\"comment\">// 初始化：第2^0 = 1个祖先就是它的父亲节点，dep 更新</span></span><br><span class=\"line\">    dep[rt] = dep[from] + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; <span class=\"number\">31</span>; ++i)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        fa[rt][i] = fa[fa[rt][i - <span class=\"number\">1</span>]][i - <span class=\"number\">1</span>]; <span class=\"comment\">//第 2^i 的祖先节点是第 2^(i-1) 的祖先节点的第2^(i-1) 的祖先节点</span></span><br><span class=\"line\">        cost[rt][i] = cost[fa[rt][i - <span class=\"number\">1</span>]][i - <span class=\"number\">1</span>] + cost[rt][i - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> it : tree[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (it.to == from)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        cost[it.to][<span class=\"number\">0</span>] = it.val;</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(it.to, rt);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">lca</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> <span class=\"comment\">//求x,y的距离</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (dep[x] &gt; dep[y])</span><br><span class=\"line\">        <span class=\"built_in\">swap</span>(x, y);                     <span class=\"comment\">//y比x深度大</span></span><br><span class=\"line\">    <span class=\"type\">int</span> tmp = dep[y] - dep[x], ans = <span class=\"number\">0</span>; <span class=\"comment\">//先跳深度差</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; tmp; i++, tmp &gt;&gt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (tmp &amp; <span class=\"number\">1</span>) <span class=\"comment\">//长的像快速幂，跳的是深度差（二进制）1的个数</span></span><br><span class=\"line\">            ans += cost[y][i], y = fa[y][i];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (y == x)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;                         <span class=\"comment\">//x=y，则这就是他们的公共祖先了</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">30</span>; i &gt;= <span class=\"number\">0</span> &amp;&amp; y != x; --i) <span class=\"comment\">//否则一起往上跳，优先跳大的</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fa[x][i] != fa[y][i])           <span class=\"comment\">//跳到lca下面，再往上跳</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ans += cost[x][i] + cost[y][i]; <span class=\"comment\">//累加</span></span><br><span class=\"line\">            x = fa[x][i];</span><br><span class=\"line\">            y = fa[y][i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ans += cost[x][<span class=\"number\">0</span>] + cost[y][<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"comment\">// LCA是fa[x][0]=fa[y][0]=x=y，这里返回的是距离</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"离线：tarjan\">离线：tarjan</h1>\n<p>dfs整棵树：</p>\n<p>遍历过程中先将当前节点看作根节点，标记已访问，递归访问子节点；</p>\n<p>回溯时，更新子节点的并查集，并遍历所有关于当前节点的查询，如果另一个节点已经访问过，就记录答案为另一个节点的父亲节点，这是因为回溯过的点的父亲节点一定不会超过lca（感觉代码+想象回溯过程更好理解一点）。</p>\n<p>代码中用前向星建树，用前向星记录每个节点的询问（偶数编号+奇数编号建无向边，方便答案的输出，是图的基本概念那节建图部分提过的技巧）。</p>\n<p>预处理<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，所有询问<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n+m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，但常数大。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> n, m, s;</span><br><span class=\"line\"><span class=\"type\">int</span> fa[N]; <span class=\"comment\">//并查集</span></span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"type\">int</span> tot;</span><br><span class=\"line\"><span class=\"type\">int</span> lca[N &lt;&lt; <span class=\"number\">1</span>];</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> to, nxt;</span><br><span class=\"line\">&#125; edge[N &lt;&lt; <span class=\"number\">1</span>], query[N];</span><br><span class=\"line\"><span class=\"type\">int</span> head[N], qhead[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    edge[tot].to = v;</span><br><span class=\"line\">    edge[tot].nxt = head[u];</span><br><span class=\"line\">    head[u] = tot;</span><br><span class=\"line\">    tot++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_query</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    query[tot].to = v;</span><br><span class=\"line\">    query[tot].nxt = qhead[u];</span><br><span class=\"line\">    qhead[u] = tot;</span><br><span class=\"line\">    tot++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">father</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fa[x] == x ? x : fa[x] = <span class=\"built_in\">father</span>(fa[x]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">tarjan</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vst[rt] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[rt]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!vst[edge[i].to])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">tarjan</span>(edge[i].to);</span><br><span class=\"line\">            fa[edge[i].to] = rt; <span class=\"comment\">//回溯时将下面节点的并查集更新</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = qhead[rt]; ~i; i = query[i].nxt)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vst[query[i].to]) <span class=\"comment\">//回溯时更新所有节点的lca，即回溯的时候并查集的顶端必然不会超过lca</span></span><br><span class=\"line\">            lca[i ^ <span class=\"number\">1</span>] = lca[i] = <span class=\"built_in\">father</span>(query[i].to);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(n), <span class=\"built_in\">read</span>(m), <span class=\"built_in\">read</span>(s);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        head[i] = qhead[i] = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> u, v;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(u), <span class=\"built_in\">read</span>(v);</span><br><span class=\"line\">        <span class=\"built_in\">add_edge</span>(u, v);</span><br><span class=\"line\">        <span class=\"built_in\">add_edge</span>(v, u);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    tot = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(u), <span class=\"built_in\">read</span>(v);</span><br><span class=\"line\">        <span class=\"built_in\">add_query</span>(u, v);</span><br><span class=\"line\">        <span class=\"built_in\">add_query</span>(v, u);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        fa[i] = i; <span class=\"comment\">//初始化并查集</span></span><br><span class=\"line\">    <span class=\"built_in\">tarjan</span>(s);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++)</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, lca[i &lt;&lt; <span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"在线：欧拉序列rmq\">在线：欧拉序列RMQ</h1>\n<ul>\n<li>欧拉序列：树上dfs时，第一次访问和回溯的时候记录节点编号形成的长<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的序列，记为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>f</mi><mi>n</mi><mo stretchy=\"false\">[</mo><mi>d</mi><mi>f</mi><mi>n</mi><mi>t</mi><mi>o</mi><mi>t</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>r</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">dfn[dfntot]=rt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span></span></span></span></li>\n<li>时间戳：第一次出现或是最后一次出现的时间（序列位置）<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>d</mi><mi>f</mi><mi>n</mi><mi>t</mi><mi>o</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">pos[rt]=dfntot</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span></span></span></span></li>\n<li>从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 走到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 经过的深度最小的结点就是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi>C</mi><mi>A</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">LCA(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>求欧拉序<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，st表预处理<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，查询<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> dfn[N &lt;&lt; <span class=\"number\">1</span>], dep[N &lt;&lt; <span class=\"number\">1</span>], pos[N];</span><br><span class=\"line\"><span class=\"comment\">//dfn[i]=x表示欧拉序列第i位是x节点，dep[i]=x表示欧拉序列第i位的这个节点深度是x，pos[i]=x表示i节点第一次出现在在欧拉序列里的位置是x</span></span><br><span class=\"line\"><span class=\"type\">int</span> dfntot; <span class=\"comment\">//欧拉序列总数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> from, <span class=\"type\">int</span> depth)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    dfn[++dfntot] = rt;</span><br><span class=\"line\">    pos[rt] = dfntot;</span><br><span class=\"line\">    dep[dfntot] = depth;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[rt]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> to = edge[i].to;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (to == from)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(to, rt, depth + <span class=\"number\">1</span>);</span><br><span class=\"line\">        dfn[++dfntot] = rt;</span><br><span class=\"line\">        dep[dfntot] = depth;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> lg[N &lt;&lt; <span class=\"number\">1</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> st[N &lt;&lt; <span class=\"number\">1</span>][<span class=\"number\">25</span>];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init_log</span><span class=\"params\">()</span> <span class=\"comment\">// 预处理 lg 代替库函数 log2 来优化常数</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    lg[<span class=\"number\">0</span>] = lg[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= dfntot; i++)</span><br><span class=\"line\">        lg[i] = lg[i &gt;&gt; <span class=\"number\">1</span>] + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init_st</span><span class=\"params\">()</span> <span class=\"comment\">//初始化st表，存的是欧拉序区间中深度最小的dfn序值</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= dfntot; i++)</span><br><span class=\"line\">        st[i][<span class=\"number\">0</span>] = i;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt; <span class=\"number\">20</span>; j++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i + (<span class=\"number\">1</span> &lt;&lt; j) - <span class=\"number\">1</span> &lt;= dfntot; i++)</span><br><span class=\"line\">            st[i][j] = dep[st[i][j - <span class=\"number\">1</span>]] &lt; dep[st[i + (<span class=\"number\">1</span> &lt;&lt; (j - <span class=\"number\">1</span>))][j - <span class=\"number\">1</span>]] ?</span><br><span class=\"line\">                       st[i][j - <span class=\"number\">1</span>] : st[i + (<span class=\"number\">1</span> &lt;&lt; (j - <span class=\"number\">1</span>))][j - <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">RMQ</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> <span class=\"comment\">//查询公共祖先</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    x = pos[x], y = pos[y]; <span class=\"comment\">//节点第一次出现的dfn</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (y &lt; x)</span><br><span class=\"line\">        <span class=\"built_in\">swap</span>(x, y);</span><br><span class=\"line\">    <span class=\"type\">int</span> k = lg[y - x + <span class=\"number\">1</span>];</span><br><span class=\"line\">    x = st[x][k], y = st[y - (<span class=\"number\">1</span> &lt;&lt; k) + <span class=\"number\">1</span>][k]; <span class=\"comment\">//RMQ基操</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> dfn[dep[x] &lt; dep[y] ? x : y];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","图论"],"tags":["ACM","图论","LCA"]},{"title":"【图论】树的直径","url":"/posts/bc9b9473/","content":"<p>树的直径求解</p>\n<span id=\"more\"></span>\n<h1 id=\"定义\">定义</h1>\n<p>树上任意两点最短路的最大值</p>\n<h1 id=\"方法一：两次dfs\">方法一：两次DFS</h1>\n<p>条件：不能有负权边</p>\n<p>第一次任一点出发找最短路的最大值点，必然是直径的一个端点</p>\n<p>第二次dfs从那个端点找最大值</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; tree[N];</span><br><span class=\"line\"><span class=\"type\">int</span> d[N];</span><br><span class=\"line\"><span class=\"type\">int</span> cur; <span class=\"comment\">//记录第一次dfs的最远节点</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> fa)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> it : tree[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (it == fa)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        d[it] = d[rt] + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (d[it] &gt; d[cur])</span><br><span class=\"line\">            cur = it;</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(it, rt);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(n);</span><br><span class=\"line\">    <span class=\"type\">int</span> u, v;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(u), <span class=\"built_in\">read</span>(v);</span><br><span class=\"line\">        tree[u].<span class=\"built_in\">push_back</span>(v);</span><br><span class=\"line\">        tree[v].<span class=\"built_in\">push_back</span>(u);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    d[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(<span class=\"number\">1</span>, <span class=\"number\">-1</span>); <span class=\"comment\">//随便找一个节点开始</span></span><br><span class=\"line\">    d[cur] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(cur, <span class=\"number\">-1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, d[cur]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"方法二：树形dp\">方法二：树形dp</h1>\n<p>随便指定节点为根，dfs一个最远距离和次远距离，答案是所有节点最远+次远的最大值（代码道理更清楚）</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; tree[N];</span><br><span class=\"line\"><span class=\"type\">int</span> d; <span class=\"comment\">// 树的直径</span></span><br><span class=\"line\"><span class=\"type\">int</span> d1[N], d2[N]; <span class=\"comment\">// 最远距离、次远距离的值</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> fa)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    d1[rt] = d2[rt] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> it : tree[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (it == fa)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(it, rt); <span class=\"comment\">//每一支使得当前节点更新</span></span><br><span class=\"line\">        <span class=\"type\">int</span> tmp = d1[it] + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (tmp &gt; d1[rt]) <span class=\"comment\">//最大值更新</span></span><br><span class=\"line\">            d2[rt] = d1[rt], d1[rt] = tmp;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (tmp &gt; d2[rt]) <span class=\"comment\">//或者次大值更新</span></span><br><span class=\"line\">            d2[rt] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    d = <span class=\"built_in\">max</span>(d, d1[rt] + d2[rt]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","图论"],"tags":["ACM","图论","DFS","DP","树"]},{"title":"【图论】树的重心","url":"/posts/29dd9c49/","content":"<p>补档树的重心</p>\n<span id=\"more\"></span>\n<h1 id=\"定义\">定义</h1>\n<p>对于<strong>无根树</strong>上的每一个点，计算其所有子树中最大的子树节点数，这个值最小的点就是这棵树的重心</p>\n<h1 id=\"特性\">特性</h1>\n<ul>\n<li>树的重心至少一个最多两个，如果是两个它俩相邻。</li>\n<li>以树的重心为根时，所有子树的大小都不超过整棵树大小的一半。</li>\n<li>树中所有点到某个点的距离和中，到重心的距离和是最小的；如果有两个重心，那么到它们的距离和一样。</li>\n<li>把两棵树通过一条边相连得到一棵新的树，那么新的树的重心在连接原来两棵树的重心的路径上。</li>\n<li>在一棵树上添加或删除一个叶子，那么它的重心最多只移动一条边的距离。</li>\n</ul>\n<h1 id=\"代码\">代码</h1>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> sz[N], weight[N], centroid[<span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"comment\">//sz[i]是i节点（包括自己）的节点个数（带权），weight[i]是最大子树的大小</span></span><br><span class=\"line\"><span class=\"type\">int</span> cnt = <span class=\"number\">0</span>; <span class=\"comment\">// centroid[0...cnt]为所有重心</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    sz[rt] = w[rt]; <span class=\"comment\">//节点权值，如果不带权就是1</span></span><br><span class=\"line\">    weight[rt] = <span class=\"number\">0</span>; <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> v : tree[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == from)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(v, rt);</span><br><span class=\"line\">        sz[rt] += sz[v];</span><br><span class=\"line\">        weight[rt] = <span class=\"built_in\">max</span>(weight[rt], sz[v]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    weight[rt] = <span class=\"built_in\">max</span>(weight[rt], tot - sz[rt]);</span><br><span class=\"line\">    <span class=\"comment\">// dfs更新过了此时有根树的子树大小，还需要用上面的部分来更新</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (weight[rt] &lt;= (tot &gt;&gt; <span class=\"number\">1</span>))</span><br><span class=\"line\">        centroid[cnt++] = rt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","图论"],"tags":["ACM","树"]},{"title":"【图论】欧拉路和哈密顿图","url":"/posts/41115c82/","content":"<p>欧拉路的部分包括代码，哈密顿图是离散数学的内容</p>\n<span id=\"more\"></span>\n<h1 id=\"欧拉道路-欧拉回路\">欧拉道路&amp;欧拉回路</h1>\n<p>经过每条边且一个边只走一遍，区别是一个是回路一个是道路</p>\n<h2 id=\"理论\">理论</h2>\n<ul>\n<li>无向连通图的充分必要条件\n<ul>\n<li>欧拉道路：度数为奇数的节点数=0或2</li>\n<li>欧拉回路：没有奇数度的节点</li>\n</ul>\n</li>\n<li>有向连通图的充分必要条件\n<ul>\n<li>欧拉道路：所有点入度=出度 or 有一个点入度=出度+1，有一个点出度=入度+1，其余入度=出度</li>\n<li>欧拉回路：所有点入度=出度</li>\n</ul>\n</li>\n<li>构造：不断删边直到成为零图，删边的原则是若只有割边走割边，否则绝不走割边</li>\n</ul>\n<h2 id=\"方法\">方法</h2>\n<h3 id=\"dfs-非递归版\">dfs（非递归版）</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">stack&lt;<span class=\"type\">int</span>&gt; stk, ans; <span class=\"comment\">// dfs栈和答案栈</span></span><br><span class=\"line\"><span class=\"type\">bool</span> vst[M]; <span class=\"comment\">// 记录边是否访问过</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Euler</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tstk.<span class=\"built_in\">push</span>(<span class=\"number\">1</span>); <span class=\"comment\">// 起点</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (!stk.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> cur = stk.<span class=\"built_in\">top</span>();</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> i = head[cur];</span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span> (i &amp;&amp; vst[i])</span><br><span class=\"line\">\t\t\ti = edge[i].nxt; </span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (i) <span class=\"comment\">// 找到下一条能走的路</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tstk.<span class=\"built_in\">push</span>(edge[i].to);</span><br><span class=\"line\">\t\t\tvst[i] = vst[i ^ <span class=\"number\">1</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t\thead[cur] = edge[i].nxt;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t&#123; <span class=\"comment\">// 与x相连的所有边均已访问，模拟回溯过程，并记录</span></span><br><span class=\"line\">\t\t\tstk.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">\t\t\tans.<span class=\"built_in\">push</span>(cur); <span class=\"comment\">// 记录答案</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"hierholzers\">Hierholzers</h3>\n<p>求欧拉道路，倒序输出，字典序最小</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 将起点设为1，若找到奇数度的节点就设它为起点</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (g[x][i])</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tg[x][i]--, g[i][x]--;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">dfs</span>(i);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\tans.<span class=\"built_in\">push</span>(x);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"fluery\">Fluery</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">stack&lt;<span class=\"type\">int</span>&gt; stk;</span><br><span class=\"line\"><span class=\"type\">bool</span> vst[M]; <span class=\"comment\">// 边是否访问过</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tstk.<span class=\"built_in\">push</span>(u);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; i; i = edge[i].nxt)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (vst[i])</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\tvst[i] = vst[i ^ <span class=\"number\">1</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">dfs</span>(edge[i].to);</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Fleury</span><span class=\"params\">(<span class=\"type\">int</span> st)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tstk.<span class=\"built_in\">push</span>(st);</span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (!stk.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"type\">bool</span> flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> cur = stk.<span class=\"built_in\">top</span>();</span><br><span class=\"line\">\t\tstk.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[cur]; i; i = edge[i].nxt)</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(!vst[i])</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tflag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!flag)</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, u);</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">dfs</span>(u);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"哈密顿图\">哈密顿图</h1>\n<ul>\n<li>\n<p>哈密顿道路：经过每个节点的基本道路</p>\n</li>\n<li>\n<p>哈密顿圈：经过每个节点的回路</p>\n</li>\n<li>\n<p>哈密顿图：具有哈密顿圈的图</p>\n</li>\n<li>\n<p>必要条件：</p>\n<ul>\n<li>哈密顿图$G=(V, E)\\Rightarrow <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>任意</mtext></mrow><annotation encoding=\"application/x-tex\">任意</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">任</span><span class=\"mord cjk_fallback\">意</span></span></span></span>V$ 的非空子集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 都有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi><mo stretchy=\"false\">(</mo><mi>G</mi><mo>−</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mo>=</mo><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\omega(G-S)&lt;=|S|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span></span></span></span></li>\n<li>哈密顿圈<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span></span></span></span> ， <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mrow><mo fence=\"true\">(</mo><msubsup><mi>f</mi><mi>i</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msubsup><mo>−</mo><msubsup><mi>f</mi><mi>i</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msubsup><mo fence=\"true\">)</mo></mrow><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n}(i-2)\\left(f_{i}^{(1)}-f_{i}^{(2)}\\right)=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.80002em;vertical-align:-0.65002em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.4231360000000004em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.27686399999999994em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.4231360000000004em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.27686399999999994em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>，其中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>f</mi><mi>i</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msubsup></mrow><annotation encoding=\"application/x-tex\">f_{i}^{(1)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.321664em;vertical-align:-0.27686399999999994em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.4231360000000004em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.27686399999999994em;\"><span></span></span></span></span></span></span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>f</mi><mi>i</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msubsup></mrow><annotation encoding=\"application/x-tex\">f_{i}^{(2)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.321664em;vertical-align:-0.27686399999999994em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.4231360000000004em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.27686399999999994em;\"><span></span></span></span></span></span></span></span></span></span> 分别是含在圈 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span></span></span></span> 内部和外部的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 度面的数目。</li>\n</ul>\n</li>\n<li>\n<p>充分条件：</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>≥</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">n\\geq 3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 的简单图，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>∈</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mi>n</mi><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\forall u,v \\in V,f(u)+f(v)\\geq n\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span></span></span></span> 哈密顿图</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 阶简单图<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>∈</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\forall u,v \\in V,f(u)+f(v)\\geq n-1\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span></span></span></span> 图中有哈密顿道路</li>\n</ul>\n</li>\n<li>\n<p>充要条件：简单图是哈密顿图<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇔</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftrightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇔</span></span></span></span>图的闭包图是哈密顿图</p>\n</li>\n</ul>\n<h2 id=\"分枝界定法\">分枝界定法</h2>\n<p>精确解，不复杂的图</p>\n<ul>\n<li>消去操作：每行找最小元，同行减去；每列找最小元，同列减去；减去的数累和得到下界。</li>\n<li>第一行找最小元，分类讨论：\n<ul>\n<li>包含在最优解中：\n<ul>\n<li>将所在行列删去，最小元对称位置（指原矩阵中的对称位置）的元设为正无穷</li>\n<li>继续操作剩下的矩阵</li>\n</ul>\n</li>\n<li>不包含在最优解中：查看当前值是否最优，不是的话暂停搜索\n<ul>\n<li>将该元设为正无穷</li>\n<li>对剩下矩阵进行消去操作</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>重复以上操作，每次都选取当前的最优解</li>\n</ul>\n","categories":["ACM","图论"],"tags":["ACM","图论"]},{"title":"【图论】点分治","url":"/posts/de9da2e5/","content":"<p>点分治是解决树上统计问题的一种思想</p>\n<span id=\"more\"></span>\n<h1 id=\"条件\">条件</h1>\n<p>树上统计问题，常统计路径信息、节点信息</p>\n<p>一般是无根树</p>\n<h1 id=\"思想\">思想</h1>\n<p>选定根节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">rt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span></span></span></span> 则统计数据来自于：</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">rt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span></span></span></span> 参与（以路径为例则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 是端点/经过<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> ）</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">rt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span></span></span></span> 不参与，子树的统计结果</li>\n</ul>\n<p>根的选择：常选择重心，使得分治时的递归层数为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\log n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> ，复杂度则是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><msup><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msup><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log^2 n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.148448em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8984479999999999em;\"><span style=\"top:-3.1473400000000002em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 级别（不证明）</p>\n<p>常有容斥思想</p>\n<h1 id=\"题目\">题目</h1>\n<h2 id=\"路径统计\">路径统计</h2>\n<p><a href=\"https://www.luogu.com.cn/problem/P3806\">洛谷P3806 【模板】点分治1</a></p>\n<p>统计结果=经过<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">rt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span></span></span></span> 的答案+<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">rt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span></span></span></span> 的所有儿子的子树答案。</p>\n<p>第二部分递归处理，考虑如何求出第一部分。</p>\n<p>第一部分有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dist(u,v)=dist(u,rt)+dist(v,rt)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span></span></span></span> ，对于一颗树到根节点的距离一个dfs就可以解决。</p>\n<p>如果对于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> （见题意）求解对数，可以用双指针<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">l,r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span></span></span></span> ，先将所有的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">dist</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span></span></span></span> 放入一个数组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span> 并排序，当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mi>D</mi><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo><mo>&lt;</mo><mo>=</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">D[l]+D[r]&lt;=k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 时，总答案加上<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>−</mo><mi>l</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r-l+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<p>对于洛谷由于只考虑存在性，且多个询问，可以离线，对于每个距离用bool数组记录，找是否存在和为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 的其他值就可以了。</p>\n<p>我没有看懂的是很多题解做了个容斥，可能是在计数部分有所不同。</p>\n<h3 id=\"求重心\">求重心</h3>\n<p>很模板，只是多了vst数组</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> Rt,tot; <span class=\"comment\">// Rt重心，tot是求重心的树的节点总数</span></span><br><span class=\"line\"><span class=\"type\">int</span> sz[N],weight[N]; <span class=\"comment\">// sz[u]是节点u的儿子总数（看作有根），weight[u]是u的最大子树节点数（无根树）</span></span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N]; <span class=\"comment\">// 是否访问过，在这里因为要对子树操作所以需要做标记，只求重心不需要</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">get_root</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    sz[rt]=<span class=\"number\">1</span>;</span><br><span class=\"line\">    weight[rt]=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(v==from || vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"built_in\">get_root</span>(v,rt);</span><br><span class=\"line\">        sz[rt]+=sz[v];</span><br><span class=\"line\">        weight[rt]=<span class=\"built_in\">max</span>(weight[rt],sz[v]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    weight[rt]=<span class=\"built_in\">max</span>(weight[rt],tot-sz[rt]);</span><br><span class=\"line\">    <span class=\"comment\">//if(weight[rt]&lt;=(tot&gt;&gt;1))</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(weight[rt]&lt;weight[Rt])</span><br><span class=\"line\">        Rt=rt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"求到根节点的路径长\">求到根节点的路径长</h3>\n<p>普通dfs，但是由于这题用了桶排且卡了这个点，需要剪枝</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> d[N]; <span class=\"comment\">// d[u]表示u到Rt（树根，也是重心）的距离</span></span><br><span class=\"line\"><span class=\"type\">int</span> D[N]; <span class=\"comment\">// D[0...Dcnt-1]记录所有的距离值</span></span><br><span class=\"line\"><span class=\"type\">int</span> Dcnt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">get_dist</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(d[rt]&gt;=M) <span class=\"keyword\">return</span>; <span class=\"comment\">// 这题用了桶排，k有1e7可以开桶，但实际路径长会爆桶，这里做一个剪枝</span></span><br><span class=\"line\">    D[Dcnt++]=d[rt];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(v==from || vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        d[v]=d[rt]+w;</span><br><span class=\"line\">        <span class=\"built_in\">get_dist</span>(v,rt);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"分治\">分治</h3>\n<p><code>solve(rt)</code>求解以<code>rt</code>为根节点的树的答案，过程中分为两个部分，一方面调用<code>calc(rt)</code>计算以<code>rt</code>为根节点（第一部分，即“经过”）的答案，另一方面遍历所有子节点递归调用实现分治</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> tmp[N]; <span class=\"comment\">// 桶排卡memset，所以这里用tmp[0...tcnt-1]记录所有可以达到的路径长度，用来清空ok数组</span></span><br><span class=\"line\"><span class=\"type\">int</span> tcnt;</span><br><span class=\"line\"><span class=\"type\">bool</span> ok[M]; <span class=\"comment\">// ok[i]表示有路径长度为i的节点</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">calc</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    tcnt=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        Dcnt=<span class=\"number\">0</span>; <span class=\"comment\">// 清空先前求出的路径长</span></span><br><span class=\"line\">        d[v]=w;</span><br><span class=\"line\">        <span class=\"built_in\">get_dist</span>(v,rt); <span class=\"comment\">// 求解rt的子树的所有路径长</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;Dcnt;i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> j=<span class=\"number\">0</span>;j&lt;m;j++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(Q[j]&gt;=D[i])</span><br><span class=\"line\">                    ans[j]|=ok[Q[j]-D[i]]; <span class=\"comment\">// 是否存在和为Q[j]的点对</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;Dcnt;i++)</span><br><span class=\"line\">            tmp[tcnt++]=D[i],ok[D[i]]=<span class=\"literal\">true</span>; <span class=\"comment\">// 将v这颗子树的所有路径长标记为可行</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;tcnt;i++)</span><br><span class=\"line\">        ok[tmp[i]]=<span class=\"literal\">false</span>; <span class=\"comment\">// 恢复</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vst[rt]=ok[<span class=\"number\">0</span>]=<span class=\"literal\">true</span>; <span class=\"comment\">// 标记已访问，且路径长度为0是可行的（rt为路径端点）</span></span><br><span class=\"line\">    <span class=\"built_in\">calc</span>(rt); <span class=\"comment\">// 计算过rt的路径长（第一部分）</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        tot=weight[Rt=<span class=\"number\">0</span>]=sz[v]; <span class=\"comment\">// 准备求子树的重心，初始化节点总数</span></span><br><span class=\"line\">        <span class=\"built_in\">get_root</span>(v,<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"built_in\">solve</span>(Rt); <span class=\"comment\">// 分治求解子树</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"0-1路径统计\">0-1路径统计</h2>\n<p><a href=\"https://codeforces.com/problemset/problem/1156/D\">Problem - 1156D - Codeforces</a></p>\n<p>这题我一开始理解错题意了。。。但其实很简单，因为1之后不能跟0，那么只有00001111序列。</p>\n<p>对于根节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">rt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span></span></span></span> ，有以下几种拼接方法（以00、01、10、11表示到节点从下到上的序列）：</p>\n<p>根节点非端点：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>00</mn><mo>+</mo><mn>00</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>00</mn><mo>+</mo><mn>01</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>00</mn><mo>+</mo><mn>11</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>01</mn><mo>+</mo><mn>11</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>11</mn><mo>+</mo><mn>11</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">(00+00)\\times 2,(00+01),(00+11),(01+11),(11+11)\\times 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span></p>\n<p>根节点：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>00</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>11</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>01</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>10</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(00)\\times 2,(11)\\times 2,(01),(10)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span></p>\n<p><code>dfs(rt,from,last)</code>处理01个数，其中<code>last</code>是<code>rt</code>往上走两个的序列，遍历<code>rt</code>的子节点时有新边权，则有以下转换图：</p>\n<pre><code class=\"highlight mermaid\">flowchart LR\n00 -- 0 --&gt;00\n00 -- 1 --&gt;10 -- 1  --&gt;10 -- 0 --&gt;非法\n01 -- 0 --&gt;01\n11 -- 1 --&gt;11 -- 0 --&gt;01 -- 1 --&gt;非法</code></pre>\n<h3 id=\"求重心\">求重心</h3>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> Rt,tot; <span class=\"comment\">// Rt重心，tot是求重心的树的节点总数</span></span><br><span class=\"line\"><span class=\"type\">int</span> sz[N],weight[N]; <span class=\"comment\">// sz[u]是节点u的儿子总数（看作有根），weight[u]是u的最大子树节点数（无根树）</span></span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N]; <span class=\"comment\">// 是否访问过，在这里因为要对子树操作所以需要做标记，只求重心不需要</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">get_root</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    sz[rt]=<span class=\"number\">1</span>;</span><br><span class=\"line\">    weight[rt]=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(v==from || vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"built_in\">get_root</span>(v,rt);</span><br><span class=\"line\">        sz[rt]+=sz[v];</span><br><span class=\"line\">        weight[rt]=<span class=\"built_in\">max</span>(weight[rt],sz[v]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    weight[rt]=<span class=\"built_in\">max</span>(weight[rt],tot-sz[rt]);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(weight[rt]&lt;weight[Rt])</span><br><span class=\"line\">        Rt=rt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"dfs找01路径数\">dfs找01路径数</h3>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\">ll cnt[<span class=\"number\">4</span>]; <span class=\"comment\">// 当前这个儿子是00、01、10、11上来的（顺序是下到上）个数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">get01</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> from,<span class=\"type\">int</span> type)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//cout&lt;&lt;rt&lt;&lt;&#x27; &#x27;&lt;&lt;from&lt;&lt;&#x27;:&#x27;&lt;&lt;type&lt;&lt;endl;</span></span><br><span class=\"line\">    cnt[type]++;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(v==from || vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>((type==<span class=\"number\">1</span>&amp;&amp;w)||(type==<span class=\"number\">2</span>&amp;&amp;!w))</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!type&amp;&amp;w)</span><br><span class=\"line\">            <span class=\"built_in\">get01</span>(v,rt,<span class=\"number\">2</span>);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==<span class=\"number\">3</span>&amp;&amp;!w)</span><br><span class=\"line\">            <span class=\"built_in\">get01</span>(v,rt,<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">get01</span>(v,rt,type);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"统计过根节点的答案\">统计过根节点的答案</h3>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\">ll sum[<span class=\"number\">4</span>]; <span class=\"comment\">// 已经计算过的儿子是00、01、10、11上来的（顺序是下到上）个数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">calc</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        cnt[<span class=\"number\">0</span>]=cnt[<span class=\"number\">1</span>]=cnt[<span class=\"number\">2</span>]=cnt[<span class=\"number\">3</span>]=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">get01</span>(v,rt,(w&lt;&lt;<span class=\"number\">1</span>)|w);</span><br><span class=\"line\">        <span class=\"comment\">//端点是rt</span></span><br><span class=\"line\">        ans+=cnt[<span class=\"number\">0</span>]*<span class=\"number\">2</span>+cnt[<span class=\"number\">3</span>]*<span class=\"number\">2</span>+cnt[<span class=\"number\">1</span>]+cnt[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"comment\">//端点不是rt（这里写的是序列顺序，注意数组里的要反向）</span></span><br><span class=\"line\">        <span class=\"comment\">// (00+00)*2</span></span><br><span class=\"line\">        ans+=cnt[<span class=\"number\">0</span>]*sum[<span class=\"number\">0</span>]*<span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"comment\">// (00+01)</span></span><br><span class=\"line\">        ans+=cnt[<span class=\"number\">0</span>]*sum[<span class=\"number\">2</span>]+cnt[<span class=\"number\">2</span>]*sum[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"comment\">// (00+11)</span></span><br><span class=\"line\">        ans+=cnt[<span class=\"number\">0</span>]*sum[<span class=\"number\">3</span>]+cnt[<span class=\"number\">3</span>]*sum[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"comment\">// (01+11)</span></span><br><span class=\"line\">        ans+=cnt[<span class=\"number\">1</span>]*sum[<span class=\"number\">3</span>]+cnt[<span class=\"number\">3</span>]*sum[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"comment\">// (11+11)*2</span></span><br><span class=\"line\">        ans+=cnt[<span class=\"number\">3</span>]*sum[<span class=\"number\">3</span>]*<span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">4</span>;i++)</span><br><span class=\"line\">            sum[i]+=cnt[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"分治\">分治</h3>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//cout&lt;&lt;&quot;Solve &quot;&lt;&lt;rt&lt;&lt;endl;</span></span><br><span class=\"line\">    vst[rt]=<span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"built_in\">calc</span>(rt); <span class=\"comment\">// 计算过rt的合法路径条数（第一部分）</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p:G[rt])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v=p.first,w=p.second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(vst[v])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        tot=weight[Rt=<span class=\"number\">0</span>]=sz[v]; <span class=\"comment\">// 准备求子树的重心，初始化节点总数</span></span><br><span class=\"line\">        sum[<span class=\"number\">0</span>]=sum[<span class=\"number\">1</span>]=sum[<span class=\"number\">2</span>]=sum[<span class=\"number\">3</span>]=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">get_root</span>(v,<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"built_in\">solve</span>(Rt); <span class=\"comment\">// 分治求解子树</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","图论"],"tags":["ACM","分治"]},{"title":"【图论】环","url":"/posts/36145dce/","content":"<p>图论中的环相关内容</p>\n<span id=\"more\"></span>\n<p>并查集求最小环（无向图，出度只能为1）：连一条由A指向B的边，更新B的父节点，A到它的父节点的路径长=B到它的父节点的路径长+1，如果有两个点祖先节点相同，那么就可以构成一个环，长度为两个点到祖先节点长度之和+1。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//luoguP2661</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">father</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(fa[x]==x) <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">    <span class=\"type\">int</span> cur=fa[x]; <span class=\"comment\">//记录之前更新到的父亲节点</span></span><br><span class=\"line\">    <span class=\"type\">int</span> xf=<span class=\"built_in\">father</span>(fa[x]); <span class=\"comment\">//递归找父亲节点</span></span><br><span class=\"line\">    fa[x]=xf; <span class=\"comment\">//更新父亲节点</span></span><br><span class=\"line\">    cnt[x]+=cnt[cur]; </span><br><span class=\"line\">    <span class=\"comment\">//如果没有更新到最顶上的父亲节点就会更新值</span></span><br><span class=\"line\">    <span class=\"comment\">//如果已经更新到最顶上，加的是0</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> xf;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">unite</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span> <span class=\"comment\">//将x连到y，即x继承y的父亲节点</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> xf=<span class=\"built_in\">father</span>(x),yf=<span class=\"built_in\">father</span>(y);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(xf==yf)</span><br><span class=\"line\">        ans=<span class=\"built_in\">min</span>(ans,cnt[x]+cnt[y]+<span class=\"number\">1</span>); <span class=\"comment\">//这题求最小环，所以更新答案</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        fa[xf]=yf, cnt[x]=cnt[y]+<span class=\"number\">1</span>; <span class=\"comment\">//父亲节点+1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>记忆化搜索求简单链+环</p>\n","categories":["ACM","图论"],"tags":["ACM","图论"]},{"title":"【图论】生成树问题合集","url":"/posts/db7699d9/","content":"<p>包括了最小生成树、次小生成树、斯坦纳树和最小树形图的模板</p>\n<span id=\"more\"></span>\n<h1 id=\"最小生成树\">最小生成树</h1>\n<p>最小生成树（Minimum Spanning Tree，MST），字面意思，由连通图生成，包含所有节点，是一棵树，且边权和最小。</p>\n<h2 id=\"kruskal\">Kruskal</h2>\n<ul>\n<li>对边排序，从小到大如果端点不在同一集合里就加边到生成树里</li>\n<li>复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mi>log</mi><mo>⁡</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(m\\log m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，适用于稀疏图</li>\n<li>证明：归纳法证明任何时候该算法选择的边集都被某棵 MST 所包含\n<ul>\n<li>基础：对于算法刚开始时，显然成立（最小生成树存在）</li>\n<li>假设某时刻成立，当前边集为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span> ，令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 为这棵 MST，考虑下一条加入的边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">e</span></span></span></span></li>\n<li>如果<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>∈</mo><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">e\\in T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 则成立</li>\n<li>鸽了</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">kruskal</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> ans = <span class=\"number\">0</span>, cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">sort</span>(edge, edge + m);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> u = <span class=\"built_in\">father</span>(edge[i].u), v = <span class=\"built_in\">father</span>(edge[i].v); <span class=\"comment\">//并查集</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (u == v)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\tfa[u] =v;</span><br><span class=\"line\">\t\tans += edge[i].w;</span><br><span class=\"line\">\t\tcnt++;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (cnt == n - <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (cnt &lt; n - <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span>; <span class=\"comment\">//不连通</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"prim\">Prim</h2>\n<p>每次取到目前集合距离最小的点加入</p>\n<h3 id=\"暴力\">暴力</h3>\n<p>每次遍历所有点到当前点集的距离，找到最小的加入（标记已访问），更新它到其他点的最小距离。</p>\n<p>复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">prim</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    vst[<span class=\"number\">1</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++) <span class=\"comment\">//点是从1开始编号的</span></span><br><span class=\"line\">        dis[i] = a[<span class=\"number\">1</span>][i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> minc = INF;</span><br><span class=\"line\">        <span class=\"type\">int</span> pos = <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!vst[j] &amp;&amp; minc &gt; dis[j])</span><br><span class=\"line\">                minc = dis[j], pos = j;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (minc == INF)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>; <span class=\"comment\">//原图不连通</span></span><br><span class=\"line\">        ans += minc;</span><br><span class=\"line\">        vst[pos] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++) <span class=\"comment\">//更新其余点的最短距离</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!vst[j] &amp;&amp; dis[j] &gt; a[pos][j])</span><br><span class=\"line\">                dis[j] = a[pos][j];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"堆优化\">堆优化</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O((n+m)\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">priority_queue&lt;pii, vector&lt;pii&gt;, greater&lt;pii&gt;&gt; q;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">prim</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    dis[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> cnt = <span class=\"number\">0</span>, ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    q.<span class=\"built_in\">push</span>(<span class=\"built_in\">make_pair</span>(<span class=\"number\">0</span>, <span class=\"number\">1</span>));</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!q.<span class=\"built_in\">empty</span>() &amp;&amp; cnt &lt; n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> d = q.<span class=\"built_in\">top</span>().first, u = q.<span class=\"built_in\">top</span>().second;</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vst[u])</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        cnt++;</span><br><span class=\"line\">        ans += d;</span><br><span class=\"line\">        vst[u] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to, w = edge[i].val;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (w &lt; dis[v])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                dis[v] = w;</span><br><span class=\"line\">                q.<span class=\"built_in\">push</span>(<span class=\"built_in\">make_pair</span>(dis[v], v));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (cnt &lt; n - <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"次小生成树\">次小生成树</h1>\n<h2 id=\"非严格次小生成树\">非严格次小生成树</h2>\n<ul>\n<li>设MST的边集为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> ，剩余边集为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">E&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> ，则有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mo stretchy=\"false\">(</mo><msup><mi>u</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo separator=\"true\">,</mo><msup><mi>v</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo separator=\"true\">,</mo><msup><mi>w</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">)</mo><mo>∈</mo><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mtext>，</mtext><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>w</mi><mo stretchy=\"false\">)</mo><mo>∈</mo><mi>E</mi><mo separator=\"true\">,</mo><mtext>有</mtext><mi>w</mi><mo>≤</mo><msup><mi>w</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">\\forall (u&#x27;,v&#x27;,w&#x27;) \\in E&#x27;，(u,v,w)\\in E,\\text{有} w\\leq w&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord\">∀</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord cjk_fallback\">，</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord text\"><span class=\"mord cjk_fallback\">有</span></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span></li>\n<li>对于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的路径中最长的一条边，用<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msup><mi>u</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo separator=\"true\">,</mo><msup><mi>v</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo separator=\"true\">,</mo><msup><mi>w</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u&#x27;,v&#x27;,w&#x27;)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 替换它，得到一个权值和为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>M</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>=</mo><mi>M</mi><mo>−</mo><mi>w</mi><mo>+</mo><msup><mi>w</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">M&#x27;=M-w+w&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> ，对所有的替换取最小值</li>\n<li>其中最长的一条边用倍增lca来求就可以，板子里没用倍增</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1e3</span> + <span class=\"number\">10</span>, INF = <span class=\"number\">0x7fffffff</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"type\">int</span> dis[N];</span><br><span class=\"line\"><span class=\"type\">int</span> pre[N]; <span class=\"comment\">//记录路径</span></span><br><span class=\"line\"><span class=\"type\">int</span> Max[N][N];</span><br><span class=\"line\"><span class=\"type\">int</span> mp[N][N];</span><br><span class=\"line\"><span class=\"comment\">//Max[i][j] 表示在最小生成树中从 i 到 j 的路径中的最大边权</span></span><br><span class=\"line\"><span class=\"type\">bool</span> used[N][N]; <span class=\"comment\">//表示添加过i到j这条路了</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">Prim</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(vst, <span class=\"literal\">false</span>, <span class=\"built_in\">sizeof</span>(vst));</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(Max, <span class=\"number\">0</span>, <span class=\"built_in\">sizeof</span>(Max));</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(used, <span class=\"literal\">false</span>, <span class=\"built_in\">sizeof</span>(used));</span><br><span class=\"line\">    vst[<span class=\"number\">0</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    pre[<span class=\"number\">0</span>] = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++) <span class=\"comment\">//0开始编号的</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        dis[i] = mp[<span class=\"number\">0</span>][i];</span><br><span class=\"line\">        pre[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    dis[<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> tmp = INF, p = <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; n; j++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!vst[j] &amp;&amp; tmp &gt; dis[j])</span><br><span class=\"line\">                tmp = dis[j], p = j;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (tmp == INF)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        ans += tmp;</span><br><span class=\"line\">        vst[p] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        used[p][pre[p]] = used[pre[p]][p] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; n; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (vst[j] &amp;&amp; j != p) <span class=\"comment\">//更新最长边长度</span></span><br><span class=\"line\">                Max[j][p] = Max[p][j] = <span class=\"built_in\">max</span>(Max[j][pre[p]], dis[p]);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!vst[j] &amp;&amp; dis[j] &gt; mp[p][j])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                dis[j] = mp[p][j];</span><br><span class=\"line\">                pre[j] = p;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"严格次小生成树\">严格次小生成树</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//使用：跑MST，加边的时候调用insedge，并将一个全局used[i]函数标记为真</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Tr</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> to, nxt, val;</span><br><span class=\"line\">    &#125; e[M &lt;&lt; <span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> cnt, head[N];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> fa[N][<span class=\"number\">22</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> dep[N];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> maxx[N][<span class=\"number\">22</span>]; <span class=\"comment\">// 到祖先的路径上边权最大的边</span></span><br><span class=\"line\">    <span class=\"type\">int</span> minn[N][<span class=\"number\">22</span>]; <span class=\"comment\">// 到祖先的路径上边权次大的边，若不存在则为 -INF</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v, <span class=\"type\">int</span> val)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        e[++cnt].to = v;</span><br><span class=\"line\">        e[cnt].val = val;</span><br><span class=\"line\">        e[cnt].nxt = head[u];</span><br><span class=\"line\">        head[u] = cnt;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insedge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v, <span class=\"type\">int</span> val)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">add_edge</span>(u, v, val);</span><br><span class=\"line\">        <span class=\"built_in\">add_edge</span>(v, u, val);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> from)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        dep[rt] = dep[from] + <span class=\"number\">1</span>;</span><br><span class=\"line\">        fa[rt][<span class=\"number\">0</span>] = from;</span><br><span class=\"line\">        minn[rt][<span class=\"number\">0</span>] = -INF;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; <span class=\"number\">22</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            fa[rt][i] = fa[fa[rt][i - <span class=\"number\">1</span>]][i - <span class=\"number\">1</span>];</span><br><span class=\"line\">            <span class=\"type\">int</span> kk[<span class=\"number\">4</span>] = &#123;maxx[rt][i - <span class=\"number\">1</span>], maxx[fa[rt][i - <span class=\"number\">1</span>]][i - <span class=\"number\">1</span>],</span><br><span class=\"line\">                         minn[rt][i - <span class=\"number\">1</span>], minn[fa[rt][i - <span class=\"number\">1</span>]][i - <span class=\"number\">1</span>]&#125;;</span><br><span class=\"line\">            <span class=\"built_in\">sort</span>(kk, kk + <span class=\"number\">4</span>); <span class=\"comment\">//从四个值中取得最大值</span></span><br><span class=\"line\">            maxx[rt][i] = kk[<span class=\"number\">3</span>];</span><br><span class=\"line\">            <span class=\"type\">int</span> ptr = <span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (ptr &gt;= <span class=\"number\">0</span> &amp;&amp; kk[ptr] == kk[<span class=\"number\">3</span>])</span><br><span class=\"line\">                ptr--;</span><br><span class=\"line\">            minn[rt][i] = (ptr == <span class=\"number\">-1</span> ? -INF : kk[ptr]); <span class=\"comment\">// 取得严格次大值</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[rt]; i; i = e[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (e[i].to == from)</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            maxx[e[i].to][<span class=\"number\">0</span>] = e[i].val;</span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(e[i].to, rt);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">lca</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> <span class=\"comment\">//求lca(x,y)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (dep[x] &gt; dep[y])</span><br><span class=\"line\">            <span class=\"built_in\">swap</span>(x, y);</span><br><span class=\"line\">        <span class=\"type\">int</span> tmp = dep[y] - dep[x];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; tmp; i++, tmp &gt;&gt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (tmp &amp; <span class=\"number\">1</span>)</span><br><span class=\"line\">                y = fa[y][i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (y == x)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">21</span>; i &gt;= <span class=\"number\">0</span> &amp;&amp; y != x; --i) <span class=\"comment\">//否则一起往上跳，优先跳大的</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (fa[x][i] != fa[y][i])           <span class=\"comment\">//跳到lca下面，再往上跳</span></span><br><span class=\"line\">                x = fa[x][i], y = fa[y][i];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fa[x][<span class=\"number\">0</span>]; <span class=\"comment\">//注意这里返回的是父亲节点而不是本身</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b, <span class=\"type\">int</span> val)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> res = -INF;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">21</span>; i &gt;= <span class=\"number\">0</span>; i--)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (dep[fa[a][i]] &gt;= dep[b])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (val != maxx[a][i])</span><br><span class=\"line\">                    res = <span class=\"built_in\">max</span>(res, maxx[a][i]);</span><br><span class=\"line\">                <span class=\"keyword\">else</span></span><br><span class=\"line\">                    res = <span class=\"built_in\">max</span>(res, minn[a][i]);</span><br><span class=\"line\">                a = fa[a][i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; tr;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//主函数里</span></span><br><span class=\"line\"><span class=\"built_in\">Kruskal</span>();</span><br><span class=\"line\">ll ans = LINF;</span><br><span class=\"line\">tr.<span class=\"built_in\">dfs</span>(<span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"built_in\">rep</span>(i, <span class=\"number\">1</span>, m)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (used[i])</span><br><span class=\"line\">        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> _lca = tr.<span class=\"built_in\">lca</span>(edge[i].u, edge[i].v); <span class=\"comment\">// 找到路径上不等于 e[i].val 的最大边权</span></span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"type\">long</span> tmpa = tr.<span class=\"built_in\">query</span>(edge[i].u, _lca, edge[i].val);</span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"type\">long</span> tmpb = tr.<span class=\"built_in\">query</span>(edge[i].v, _lca, edge[i].val);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">max</span>(tmpa, tmpb) &gt; -INF) <span class=\"comment\">// 这样的边可能不存在，只在这样的边存在时更新答案</span></span><br><span class=\"line\">        ans = <span class=\"built_in\">min</span>(ans, sum - <span class=\"built_in\">max</span>(tmpa, tmpb) + edge[i].val);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lld\\n&quot;</span>, ans == LINF ? <span class=\"number\">-1</span> : ans);</span><br></pre></td></tr></table></figure>\n<h1 id=\"斯坦纳树\">斯坦纳树</h1>\n<h2 id=\"定义\">定义</h2>\n<p>给定n个点，试求连接此n个点，总长最短的直线段连接系统，并且任意两点都可由系统中的直线段组成的折线连接起来。</p>\n<h2 id=\"分析\">分析</h2>\n<p>模板题：无向连通图，可能自环和重边，给定k个关键点，求一个子图使得边权和最小。</p>\n<ul>\n<li>子图一定是树，否则一定可以去环使得边权和变小。这棵树就是最小斯坦纳树。</li>\n<li>设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dp(i,S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span> 表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为根，包含点集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 中所有点的最小权值和</li>\n<li>设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 的子集，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dp(i,S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span> 由<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>S</mi><mo>−</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dp(i,T)+dp(i,S-T)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span> 转移而来。</li>\n<li>松弛操作，对于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 的相邻节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> ：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>j</mi><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>w</mi><mo stretchy=\"false\">(</mo><mi>j</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(i,S)=min(f(i,S),f(j,S)+w(j,i))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<h2 id=\"步骤\">步骤</h2>\n<ul>\n<li>将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">dp</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span></span></span></span> 初始化为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mi>x</mi><mn>3</mn><mi>f</mi><mn>3</mn><mi>f</mi><mn>3</mn><mi>f</mi><mn>3</mn><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">0x3f3f3f3f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">0</span><span class=\"mord mathdefault\">x</span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span></span></span></span></li>\n<li>枚举给定点的子集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span>\n<ul>\n<li>对于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 枚举子集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> ，更新每个节点的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">dp</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span></span></span></span></li>\n<li>如果权值和被更新，说明这个点可行，加入<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>p</mi><mi>f</mi><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">spfa</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">a</span></span></span></span> 的队列</li>\n<li>进行<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>p</mi><mi>f</mi><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">spfa</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">a</span></span></span></span> 更新队列中点的相邻点的答案</li>\n</ul>\n</li>\n<li>答案是给定点中的任意点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">dp</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span></span></span></span> 值</li>\n</ul>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; k; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">read</span>(p[i]);</span><br><span class=\"line\">\tdp[p[i]][<span class=\"number\">1</span> &lt;&lt; i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> up = (<span class=\"number\">1</span> &lt;&lt; k) - <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> s1 = <span class=\"number\">0</span>; s1 &lt;= up; s1++) <span class=\"comment\">//枚举给定点的子集递推</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> s2 = s1 &amp; s1 - <span class=\"number\">1</span>; s2; s2 = s2 - <span class=\"number\">1</span> &amp; s1)\t\t\t<span class=\"comment\">//枚举当前点集的子集</span></span><br><span class=\"line\">\t\t\tdp[i][s1] = <span class=\"built_in\">min</span>(dp[i][s1], dp[i][s2] + dp[i][s1 ^ s2]); <span class=\"comment\">//dp(i,S)&lt;-dp(i,T)+dp(i,S_T)</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (dp[i][s1] &lt; INF)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tq.<span class=\"built_in\">push</span>(i);</span><br><span class=\"line\">\t\t\tvst[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">spfa</span>(s1); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//spfa的松弛操作：</span></span><br><span class=\"line\"><span class=\"comment\">// if (dp[v][S] &gt; dp[u][S] + w)</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \tdp[v][S] = dp[u][S] + w;</span></span><br><span class=\"line\"><span class=\"comment\">// \tif (!vst[v]) //如果不在队列里就加入</span></span><br><span class=\"line\"><span class=\"comment\">// \t\tq.push(v), vst[v] = true;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"最小树形图\">最小树形图</h1>\n<p>有向图的最小生成树，从根节点能到所有节点，且每条边权值和最小。</p>\n<p>朱刘算法（Edmonds 算法），<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nm)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> 。</p>\n<p>模板题：给定包含n个结点，m条有向边的一个图。输出以结点r为根的最小树形图每条边的权值之和，如果没有以r为根的最小树形图，输出-1。</p>\n<h2 id=\"步骤\">步骤</h2>\n<ul>\n<li>统计每个点的最小入边，加入答案</li>\n<li>如果有一个点找不到入边，说明不能生成最小树形图，返回-1</li>\n<li>每个点由最小入边找环缩点</li>\n<li>其余点不变，重构图，边权修改为原边权-到达节点最小入边</li>\n</ul>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> in[N], pre[N]; <span class=\"comment\">//in[i]记录每轮i点入边中最小的边权，pre[i]记录最小边权对应的端点编号</span></span><br><span class=\"line\"><span class=\"type\">int</span> vst[N], scc[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">Zhuliu</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">\t\t\tin[i] = INF; <span class=\"comment\">// 初始化</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"type\">int</span> u = edge[i].from, v = edge[i].to;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (u != v &amp;&amp; edge[i].val &lt; in[v]) <span class=\"comment\">// 遍历所有边，对每个点找到最小的入边</span></span><br><span class=\"line\">\t\t\t\tin[v] = edge[i].val, pre[v] = u;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)\t   <span class=\"comment\">// 判定无解</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (i != root &amp;&amp; in[i] == INF) <span class=\"comment\">//有一个点找不到入边了</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> sc = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">\t\t\tvst[i] = scc[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (i == root)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\t\tans += in[i];</span><br><span class=\"line\">\t\t\t<span class=\"type\">int</span> v = i;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (vst[v] != i &amp;&amp; !scc[v] &amp;&amp; v != root) <span class=\"comment\">// 找环，找回自己/找到一个缩过点的/找到根节点了都退出</span></span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tvst[v] = i;</span><br><span class=\"line\">\t\t\t\tv = pre[v];</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (!scc[v] &amp;&amp; v != root) <span class=\"comment\">//一定是找回自己</span></span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tscc[v] = ++sc; <span class=\"comment\">// 缩点</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> u = pre[v]; u != v; u = pre[u])</span><br><span class=\"line\">\t\t\t\t\tscc[u] = sc;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (sc == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>; <span class=\"comment\">// 无环，得到解</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (!scc[i])</span><br><span class=\"line\">\t\t\t\tscc[i] = ++sc;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++) <span class=\"comment\">//重构图</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"type\">int</span> u = edge[i].from, v = edge[i].to;</span><br><span class=\"line\">\t\t\tedge[i].from = scc[u], edge[i].to = scc[v];</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (scc[u] != scc[v])</span><br><span class=\"line\">\t\t\t\tedge[i].val -= in[v]; <span class=\"comment\">// 修改边权</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\troot = scc[root];</span><br><span class=\"line\">\t\tn = sc;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"注意\">注意</h1>\n<ul>\n<li>给坐标的注意精度</li>\n<li>最小生成森林，可跑并查集，连通块个数tot，则最大生成森林的边数为n-tot</li>\n<li>给出一些已知边，跑MST时将这些边权值取0的处理方法</li>\n</ul>\n","categories":["ACM","图论"],"tags":["ACM","图论"]},{"title":"【图论】网络流","url":"/posts/63820f1c/","content":"<p>网络流问题，包括最大流最小割、费用流</p>\n<span id=\"more\"></span>\n<p>学网络流可以去写著名的网络流24题（搜索引擎随便搜就能有整理和题解）<s>，反正我没写完</s>，网络流建模方法非常抽象（？）和有意思。</p>\n<h1 id=\"定义和记法\">定义和记法</h1>\n<ul>\n<li>\n<p><strong>容量网络</strong>：有向图，图的边$ (u, v)$ 有非负的权<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c(u, v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>，称<strong>容量</strong>，图中有一个被称为<strong>源</strong>的节点和一个被称为<strong>汇</strong>的节点。</p>\n</li>\n<li>\n<p>实际通过每条边的流量记为$ f(u, v)<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>，</mtext><mo>∗</mo><mo>∗</mo><mtext>残量网络</mtext><mo>∗</mo><mo>∗</mo><mtext>是一个结构和容量网络相同的有向图，边的权值为</mtext></mrow><annotation encoding=\"application/x-tex\">，**残量网络**是一个结构和容量网络相同的有向图，边的权值为</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">，</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">∗</span><span class=\"mord cjk_fallback\">残</span><span class=\"mord cjk_fallback\">量</span><span class=\"mord cjk_fallback\">网</span><span class=\"mord cjk_fallback\">络</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">∗</span><span class=\"mord cjk_fallback\">是</span><span class=\"mord cjk_fallback\">一</span><span class=\"mord cjk_fallback\">个</span><span class=\"mord cjk_fallback\">结</span><span class=\"mord cjk_fallback\">构</span><span class=\"mord cjk_fallback\">和</span><span class=\"mord cjk_fallback\">容</span><span class=\"mord cjk_fallback\">量</span><span class=\"mord cjk_fallback\">网</span><span class=\"mord cjk_fallback\">络</span><span class=\"mord cjk_fallback\">相</span><span class=\"mord cjk_fallback\">同</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">有</span><span class=\"mord cjk_fallback\">向</span><span class=\"mord cjk_fallback\">图</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord cjk_fallback\">边</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">权</span><span class=\"mord cjk_fallback\">值</span><span class=\"mord cjk_fallback\">为</span></span></span></span>c(u, v) − f(u, v)$。</p>\n</li>\n<li>\n<p>所有边上的流量集合被称为<strong>网络流</strong>。</p>\n</li>\n<li>\n<p>在容量网络中，<strong>可行流</strong>满足：</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>≤</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">0\\leq f(u, v)\\leq c(u, v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>非源汇点，总出量=总入量</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mtext>−</mtext><mi>f</mi><mo stretchy=\"false\">(</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(u, v) = −f(v, u)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n</li>\n<li>\n<p>割：划分成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 两个点集使得源点在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> ，汇点在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 。</p>\n</li>\n<li>\n<p>割的容量：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 所有边的流量之和。求过最大流后的最小割在残余网络中一定出满流，入零流。</p>\n</li>\n</ul>\n<h1 id=\"最大流-最小割\">最大流/最小割</h1>\n<ul>\n<li>\n<p>最大流量</p>\n</li>\n<li>\n<p>分为两类，增广路和预流推进</p>\n</li>\n<li>\n<p>增广路即找残差网络上能够从源点到汇点的路，建反图储存每一次增广路最大流，便于反悔</p>\n</li>\n<li>\n<p>最小割的点集找法：跑完最大流在残差网络从源点走残量大于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 的边，都是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 里的</p>\n</li>\n<li>\n<p>最大流的多解：跑完最大流在残差网络里找正环（原理待补）</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> vst[N], no[N];</span><br><span class=\"line\"><span class=\"type\">int</span> st[N], top;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> from, <span class=\"type\">bool</span> flag)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vst[u] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    st[top++] = u;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (edge[i].cap &lt;= edge[i].flow || v == from)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!vst[v])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">dfs</span>(v, u, edge[i ^ <span class=\"number\">1</span>].flow &lt; edge[i ^ <span class=\"number\">1</span>].cap))</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!no[v])</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!flag)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = st[--top];</span><br><span class=\"line\">            no[v] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v == u)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 跑完最大流后调用</span></span><br><span class=\"line\"><span class=\"built_in\">memset</span>(vis, <span class=\"literal\">false</span>, <span class=\"built_in\">sizeof</span>(vis));</span><br><span class=\"line\"><span class=\"built_in\">memset</span>(no, <span class=\"literal\">false</span>, <span class=\"built_in\">sizeof</span>(no));</span><br><span class=\"line\">top = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">bool</span> flag = <span class=\"built_in\">dfs</span>(end, end, <span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"ford-folkerson\">Ford-Folkerson</h2>\n<p>复杂度跟流量有关，一般不用</p>\n<h3 id=\"建图\">建图</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> to, nxt;</span><br><span class=\"line\">    ll cap, flow; <span class=\"comment\">//</span></span><br><span class=\"line\">&#125; edge[M];</span><br><span class=\"line\"><span class=\"type\">int</span> tot, head[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    tot = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(head, <span class=\"number\">-1</span>, <span class=\"built_in\">sizeof</span>(head));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v, <span class=\"type\">int</span> w, <span class=\"type\">int</span> rw = <span class=\"number\">0</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    edge[tot].to = v;</span><br><span class=\"line\">    edge[tot].cap = w;</span><br><span class=\"line\">    edge[tot].flow = <span class=\"number\">0</span>;</span><br><span class=\"line\">    edge[tot].nxt = head[u];</span><br><span class=\"line\">    head[u] = tot++;</span><br><span class=\"line\">    edge[tot].to = u;</span><br><span class=\"line\">    edge[tot].cap = rw; <span class=\"comment\">//反图</span></span><br><span class=\"line\">    edge[tot].flow = <span class=\"number\">0</span>;</span><br><span class=\"line\">    edge[tot].nxt = head[v];</span><br><span class=\"line\">    head[v] = tot++;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"暴力dfs求解\">暴力dfs求解</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u, ll flow)</span> <span class=\"comment\">//流入u的流量为flow</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u == t) <span class=\"comment\">//到汇点，返回增广答案</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> flow;</span><br><span class=\"line\">    vst[u] = <span class=\"literal\">true</span>; <span class=\"comment\">//标记访问</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vst[v] || edge[i].flow &gt;= edge[i].cap) <span class=\"comment\">//如果访问过了或者这条路没有流量了</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> res = <span class=\"built_in\">dfs</span>(v, <span class=\"built_in\">min</span>(edge[i].cap - edge[i].flow, flow)); <span class=\"comment\">//dfs找，更新路上最小流量</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res &gt; <span class=\"number\">0</span>) <span class=\"comment\">//记录这条增广路</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            edge[i].flow += res; <span class=\"comment\">//该路流量增加</span></span><br><span class=\"line\">            edge[i ^ <span class=\"number\">1</span>].flow -= res; <span class=\"comment\">//反图流量减少</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">FF</span><span class=\"params\">(<span class=\"type\">int</span> s, <span class=\"type\">int</span> t, <span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll res = <span class=\"number\">0</span>, ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">memset</span>(vst, <span class=\"number\">0</span>, <span class=\"built_in\">sizeof</span>(vst));</span><br><span class=\"line\">        res = <span class=\"built_in\">dfs</span>(s, INF); <span class=\"comment\">//dfs找增广路</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res &lt;= <span class=\"number\">0</span>)      <span class=\"comment\">//找不到增广路了</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        ans += res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"edmonds-karp\">Edmonds-Karp</h2>\n<p>BFS找增广路，每碰到汇点就增广，复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><msup><mi>m</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nm^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，一般不用。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> from, to, cap, flow;</span><br><span class=\"line\">    <span class=\"built_in\">Edge</span>(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v, <span class=\"type\">int</span> c, <span class=\"type\">int</span> f) : <span class=\"built_in\">from</span>(u), <span class=\"built_in\">to</span>(v), <span class=\"built_in\">cap</span>(c), <span class=\"built_in\">flow</span>(f) &#123;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">EK</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, m;           <span class=\"comment\">// n：点数，m：边数</span></span><br><span class=\"line\">    vector&lt;Edge&gt; edges; <span class=\"comment\">// edges：所有边的集合</span></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; G[N];   <span class=\"comment\">// G：点 x -&gt; x 的所有边在 edges 中的下标</span></span><br><span class=\"line\">    ll a[N];            <span class=\"comment\">// a：点 x -&gt; BFS 过程中最近接近点 x 的边给它的最大流</span></span><br><span class=\"line\">    <span class=\"type\">int</span> p[N];           <span class=\"comment\">// p：点 x -&gt; BFS 过程中最近接近点 x 的边</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(<span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">            G[i].<span class=\"built_in\">clear</span>();</span><br><span class=\"line\">        edges.<span class=\"built_in\">clear</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> from, <span class=\"type\">int</span> to, <span class=\"type\">int</span> cap)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        edges.<span class=\"built_in\">push_back</span>(<span class=\"built_in\">Edge</span>(from, to, cap, <span class=\"number\">0</span>));</span><br><span class=\"line\">        edges.<span class=\"built_in\">push_back</span>(<span class=\"built_in\">Edge</span>(to, from, <span class=\"number\">0</span>, <span class=\"number\">0</span>)); <span class=\"comment\">//反向边</span></span><br><span class=\"line\">        m = edges.<span class=\"built_in\">size</span>();</span><br><span class=\"line\">        G[from].<span class=\"built_in\">push_back</span>(m - <span class=\"number\">2</span>);</span><br><span class=\"line\">        G[to].<span class=\"built_in\">push_back</span>(m - <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">ll <span class=\"title\">Maxflow</span><span class=\"params\">(<span class=\"type\">int</span> s, <span class=\"type\">int</span> t)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        ll flow = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">memset</span>(a, <span class=\"number\">0</span>, <span class=\"built_in\">sizeof</span>(a));</span><br><span class=\"line\">            queue&lt;<span class=\"type\">int</span>&gt; Q;</span><br><span class=\"line\">            Q.<span class=\"built_in\">push</span>(s);</span><br><span class=\"line\">            a[s] = INF;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (!Q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"type\">int</span> x = Q.<span class=\"built_in\">front</span>();</span><br><span class=\"line\">                Q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; G[x].<span class=\"built_in\">size</span>(); i++)</span><br><span class=\"line\">                &#123; <span class=\"comment\">// 遍历以 x 作为起点的边</span></span><br><span class=\"line\">                    Edge &amp;e = edges[G[x][i]];</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (!a[e.to] &amp;&amp; e.cap &gt; e.flow)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        p[e.to] = G[x][i];                   <span class=\"comment\">// G[x][i]是最近接近点e.to的边</span></span><br><span class=\"line\">                        a[e.to] = <span class=\"built_in\">min</span>(a[x], e.cap - e.flow); <span class=\"comment\">// 最近接近点e.to的边赋给它的流</span></span><br><span class=\"line\">                        Q.<span class=\"built_in\">push</span>(e.to);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (a[t])</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>; <span class=\"comment\">// 如果汇点接受到了流，就退出 BFS</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!a[t])</span><br><span class=\"line\">                <span class=\"keyword\">break</span>; <span class=\"comment\">// 如果汇点没有接受到流，说明源点和汇点不在同一个连通分量上</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> u = t; u != s; u = edges[p[u]].from)</span><br><span class=\"line\">            &#123;                                 <span class=\"comment\">// 通过 u 追寻 BFS 过程中 s -&gt; t 的路径</span></span><br><span class=\"line\">                edges[p[u]].flow += a[t];     <span class=\"comment\">// 增加路径上边的 flow 值</span></span><br><span class=\"line\">                edges[p[u] ^ <span class=\"number\">1</span>].flow -= a[t]; <span class=\"comment\">// 减小反向路径的 flow 值</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            flow += a[t];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> flow;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; ek;</span><br></pre></td></tr></table></figure>\n<h2 id=\"dinic\">Dinic</h2>\n<ul>\n<li>每次都走最短的增广路，允许多条增广路一起增广。</li>\n<li>BFS分层，形成层次网络</li>\n<li>每次只走<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo stretchy=\"false\">[</mo><mi>v</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">level[u]=level[v]-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>的路，确保找到最短的增广路，且每条边只走一次，即一个可走弧优化和只走一次的剪枝</li>\n<li>bfs能走的时候，不断dfs增广路</li>\n<li>最坏复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><msup><mi>m</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nm^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> dep[N], Q[N];</span><br><span class=\"line\"><span class=\"type\">int</span> qhead, qtail;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">bfs</span><span class=\"params\">()</span> <span class=\"comment\">// bfs残量网络，返回是否搜到了汇点</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(dep, <span class=\"number\">-1</span>, (n + <span class=\"number\">1</span>) * <span class=\"built_in\">sizeof</span>(<span class=\"type\">int</span>));</span><br><span class=\"line\">    qhead = qtail = <span class=\"number\">0</span>;</span><br><span class=\"line\">    Q[qtail++] = s;</span><br><span class=\"line\">    dep[s] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (qhead &lt; qtail)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = Q[qhead++];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (edge[i].flow &gt;= edge[i].cap || ~dep[v])</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            dep[v] = dep[u] + <span class=\"number\">1</span>;</span><br><span class=\"line\">            Q[qtail++] = v;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ~dep[t]; <span class=\"comment\">//dep[t] != -1，就是搜到了汇点</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u, ll flow)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u == t)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> flow;</span><br><span class=\"line\">    ll tp = <span class=\"number\">0</span>; <span class=\"comment\">//本轮增广的总流量</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (edge[i].flow &lt; edge[i].cap &amp;&amp; dep[v] == dep[u] + <span class=\"number\">1</span>) <span class=\"comment\">// 允许走的弧</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ll res = <span class=\"built_in\">dfs</span>(v, <span class=\"built_in\">min</span>(edge[i].cap - edge[i].flow, flow)); <span class=\"comment\">//本次增广的最大流</span></span><br><span class=\"line\">            edge[i].flow += res;</span><br><span class=\"line\">            edge[i ^ <span class=\"number\">1</span>].flow -= res;</span><br><span class=\"line\">            flow -= res; <span class=\"comment\">//流量限制更新</span></span><br><span class=\"line\">            tp += res;   <span class=\"comment\">//增广的总流量增加</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (tp == <span class=\"number\">0</span>)     <span class=\"comment\">// 走不到汇点</span></span><br><span class=\"line\">        dep[u] = <span class=\"number\">-1</span>; <span class=\"comment\">// 剪枝，本轮增广不用走这里了</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> tp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">Dinic</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"built_in\">bfs</span>())</span><br><span class=\"line\">        ans += <span class=\"built_in\">dfs</span>(s, LINF);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>kuangbin的板子：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> Q[N];</span><br><span class=\"line\"><span class=\"type\">int</span> dep[N], cur[N], sta[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">bfs</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> qhead = <span class=\"number\">0</span>, qtail = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(dep, <span class=\"number\">-1</span>, <span class=\"built_in\">sizeof</span>(dep[<span class=\"number\">0</span>]) * (n + <span class=\"number\">1</span>));</span><br><span class=\"line\">    dep[s] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    Q[qtail++] = s;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (qhead &lt; qtail)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = Q[qhead++];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (edge[i].cap &gt; edge[i].flow &amp;&amp; dep[v] == <span class=\"number\">-1</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                dep[v] = dep[u] + <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (v == t)</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">                Q[qtail++] = v;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">dinic</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll maxflow = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"built_in\">bfs</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">            cur[i] = head[i];</span><br><span class=\"line\">        <span class=\"type\">int</span> u = s, qtail = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (~cur[s])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (u == t) <span class=\"comment\">//找到一条增广路</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                ll tp = LINF;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = qtail - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) <span class=\"comment\">//更新该增广路上的最大流</span></span><br><span class=\"line\">                    tp = <span class=\"built_in\">min</span>(tp, edge[sta[i]].cap - edge[sta[i]].flow);</span><br><span class=\"line\">                maxflow += tp;                       <span class=\"comment\">//更新总流量</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = qtail - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) <span class=\"comment\">//更新该增广路上的信息</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    edge[sta[i]].flow += tp;</span><br><span class=\"line\">                    edge[sta[i] ^ <span class=\"number\">1</span>].flow -= tp;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (edge[sta[i]].cap - edge[sta[i]].flow == <span class=\"number\">0</span>)</span><br><span class=\"line\">                        qtail = i; <span class=\"comment\">//如果有一条路后面没办法走了就从这里截断</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                u = edge[sta[qtail] ^ <span class=\"number\">1</span>].to; <span class=\"comment\">//最前面走不了的那条反路的到达，即正路的起始节点</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (~cur[u] &amp;&amp; edge[cur[u]].cap &gt; edge[cur[u]].flow &amp;&amp; dep[u] + <span class=\"number\">1</span> == dep[edge[cur[u]].to])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                sta[qtail++] = cur[u];</span><br><span class=\"line\">                u = edge[cur[u]].to;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">while</span> (u != s &amp;&amp; cur[u] == <span class=\"number\">-1</span>)</span><br><span class=\"line\">                    u = edge[sta[--qtail] ^ <span class=\"number\">1</span>].to;</span><br><span class=\"line\">                cur[u] = edge[cur[u]].nxt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> maxflow;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"isap\">ISAP</h2>\n<p>优化Dinic的反复bfs：每次找到的增广路上节点都将层数+1，直到断层或源点层数为n</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> Q[N];</span><br><span class=\"line\"><span class=\"type\">int</span> dep[N], cur[N], gap[N], st[N]; <span class=\"comment\">// gap[i]记录层数为i的有多少个节点，st是栈</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">bfs</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> qhead = <span class=\"number\">0</span>, qtail = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(dep, <span class=\"number\">-1</span>, <span class=\"built_in\">sizeof</span>(dep[<span class=\"number\">0</span>]) * (n + <span class=\"number\">1</span>));</span><br><span class=\"line\">    gap[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    dep[t] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    Q[qtail++] = t; <span class=\"comment\">//注意是倒着bfs</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (qhead != qtail)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = Q[qhead++];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (~dep[v])</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            Q[qtail++] = v;</span><br><span class=\"line\">            dep[v] = dep[u] + <span class=\"number\">1</span>;</span><br><span class=\"line\">            gap[dep[v]]++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">sap</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">bfs</span>();</span><br><span class=\"line\">    <span class=\"built_in\">memcpy</span>(cur, head, <span class=\"built_in\">sizeof</span>(head));</span><br><span class=\"line\">    <span class=\"type\">int</span> top = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> u = s;</span><br><span class=\"line\">    ll ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (dep[s] &lt; n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (u == t) <span class=\"comment\">// 找到一条增广路</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ll Min = LINF;</span><br><span class=\"line\">            <span class=\"type\">int</span> pos = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; top; i++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (Min &gt; edge[st[i]].cap - edge[st[i]].flow)</span><br><span class=\"line\">                &#123; <span class=\"comment\">// 找到该增广路的最大流</span></span><br><span class=\"line\">                    Min = edge[st[i]].cap - edge[st[i]].flow;</span><br><span class=\"line\">                    pos = i;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; top; i++) <span class=\"comment\">//更新路径上的流量信息</span></span><br><span class=\"line\">            &#123; </span><br><span class=\"line\">                edge[st[i]].flow += Min;</span><br><span class=\"line\">                edge[st[i] ^ <span class=\"number\">1</span>].flow -= Min;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ans += Min;</span><br><span class=\"line\">            top = pos;</span><br><span class=\"line\">            u = edge[st[top] ^ <span class=\"number\">1</span>].to;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">bool</span> flag = <span class=\"literal\">false</span>; <span class=\"comment\">// 标记是否能继续找增广路了</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = cur[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (edge[i].cap - edge[i].flow &amp;&amp; dep[v] + <span class=\"number\">1</span> == dep[u]) </span><br><span class=\"line\">            &#123; <span class=\"comment\">// dfs的迭代写法，找u出去可以拓展的增广路</span></span><br><span class=\"line\">                flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                cur[u] = i;</span><br><span class=\"line\">                st[top++] = i;</span><br><span class=\"line\">                u = v;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (flag)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> Min = n; <span class=\"comment\">// dfs完了所有边</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (edge[i].cap - edge[i].flow &amp;&amp; dep[edge[i].to] &lt; Min)</span><br><span class=\"line\">            &#123; <span class=\"comment\">//找残余网络中有剩余流量且层数最小的相邻节点</span></span><br><span class=\"line\">                Min = dep[edge[i].to];</span><br><span class=\"line\">                cur[u] = i;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        gap[dep[u]]--; <span class=\"comment\">// 当前节点层数更新前先更新该层节点数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!gap[dep[u]]) <span class=\"comment\">// 断层了，必然找不到增广路了，退出</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">        dep[u] = Min + <span class=\"number\">1</span>; <span class=\"comment\">// 当前节点层数+1</span></span><br><span class=\"line\">        gap[dep[u]]++;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (u != s)</span><br><span class=\"line\">            u = edge[st[--top] ^ <span class=\"number\">1</span>].to;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"对偶图\">对偶图</h2>\n<ul>\n<li>平面图中边分开的每个区域设成一个节点，每条边左右的区域连边，左右是同一区域连的就是自环，得到原图的对偶图</li>\n<li>对偶图上求解最短路=最大流=最小割</li>\n</ul>\n<h2 id=\"技巧\">技巧</h2>\n<ul>\n<li>技巧1：超级源点和超级汇点的建立</li>\n<li>技巧2：点有流量限制：拆点成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">u_{in}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">u_{out}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">u</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，入边接in，出边从out接，这两点之间连一条点流量限制的边。</li>\n<li>技巧3：容量的含义可以想到“限制”有关的题</li>\n</ul>\n<h1 id=\"费用流\">费用流</h1>\n<p>最小/大费用最大流：每条路有收费</p>\n<p>这里给出最小费用算法，最大费用将费用取相反数，结果再取相反数</p>\n<h2 id=\"spfa\">SPFA</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//建图：Edge多一个cost变量，建图时正边赋cost，反边赋-cost，其他不变</span></span><br><span class=\"line\">ll dis[N];</span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"type\">int</span> pre[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">spfa</span><span class=\"params\">(<span class=\"type\">int</span> s, <span class=\"type\">int</span> t)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    queue&lt;<span class=\"type\">int</span>&gt; q;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        dis[i] = INF;</span><br><span class=\"line\">        vst[i] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        pre[i] = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    dis[s] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    vst[s] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    q.<span class=\"built_in\">push</span>(s);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!q.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = q.<span class=\"built_in\">front</span>();</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        vst[u] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[u]; ~i; i = edge[i].nxt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> v = edge[i].to;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (edge[i].cap &gt; edge[i].flow &amp;&amp; dis[v] &gt; dis[u] + edge[i].cost)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                dis[v] = dis[u] + edge[i].cost;</span><br><span class=\"line\">                pre[v] = i;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!vst[v])</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    vst[v] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    q.<span class=\"built_in\">push</span>(v);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pre[t] == <span class=\"number\">-1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ll cost,flow;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">minCostMaxflow</span><span class=\"params\">()</span> <span class=\"comment\">//返回最大流，cost是最小费用</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll maxflow = <span class=\"number\">0</span>;</span><br><span class=\"line\">    cost = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"built_in\">spfa</span>(s, t))</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ll tp = LINF;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = pre[t]; ~i; i = pre[edge[i ^ <span class=\"number\">1</span>].to])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (tp &gt; edge[i].cap - edge[i].flow)</span><br><span class=\"line\">                tp = edge[i].cap - edge[i].flow;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = pre[t]; ~i; i = pre[edge[i ^ <span class=\"number\">1</span>].to])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            edge[i].flow += tp;</span><br><span class=\"line\">            edge[i ^ <span class=\"number\">1</span>].flow -= tp;</span><br><span class=\"line\">            cost += edge[i].cost * tp;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        maxflow += tp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> maxflow;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"最小费用可行流\">最小费用可行流</h2>\n<ul>\n<li>\n<p>考虑一张网络流图，每条边定义为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v,w,l,r)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">)</span></span></span></span>，代表从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的一条有向边，费用为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span></span></span></span> ，容量为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> 闭区间，源点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span></span></span></span> 汇点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> 已知，且保证源点没有入边、汇点没有出边，同时定义常规费用流图的边为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>c</mi><mi>a</mi><mi>p</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v,w,cap)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">p</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>现在我们需要求这张图的最小费用可行流（就是满足所有边的流量上下限制，同时费用最小）</p>\n</li>\n<li>\n<p>按照如下方式建立附加边和附加点：</p>\n<ul>\n<li>\n<p>建立附加源点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">SS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> ，和附加汇点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">TT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span></p>\n</li>\n<li>\n<p>对于原图中每一个点（包括源汇）<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> ，令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">d[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> 代表<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 点的所有入边的流量下界减去出边的流量下界</p>\n<ul>\n<li>如果<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">d[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> 是负数，那么从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span> 连一条边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>T</mi><mi>T</mi><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mo>−</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,TT,0,-d[u])</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">−</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">TT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span></li>\n<li>如果<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">d[u]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span></span></span></span> 是正数，那么从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">SS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 连一条边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>S</mi><mi>S</mi><mo separator=\"true\">,</mo><mi>u</mi><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(SS,u,0,d[u])</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">u</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">u</span></span></span></span></li>\n</ul>\n</li>\n<li>\n<p>对于原图中每一条边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v,w,l,r)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">)</span></span></span></span> ，连边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo separator=\"true\">,</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>r</mi><mo>−</mo><mi>l</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u,v,w,r-l)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n</ul>\n</li>\n<li>\n<p>连边<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mo separator=\"true\">,</mo><mi>s</mi><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>i</mi><mi>n</mi><mi>f</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(t,s,0,inf)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mclose\">)</span></span></span></span> （注意这里是原图的源汇点！不是附加的源汇点！！）</p>\n</li>\n<li>\n<p>这样以后，从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">SS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 到$ TT$ 跑新图的最小费用最大流，再加上原图中每条边的下界流量乘以费用（必须跑的部分），就是最小费用可行流的费用了s</p>\n</li>\n</ul>\n","categories":["ACM","图论"],"tags":["ACM","图论"]},{"title":"【字符串】KMP","url":"/posts/ab10ebbb/","content":"<p>KMP是判断字符串匹配的算法。</p>\n<span id=\"more\"></span>\n<p>目标：找到字符串中与模板串相同子串的匹配位置/次数</p>\n<p>理解：状态机，状态转移图，失配后不从头匹配。或者理解为，找失配函数=找最长前后缀</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 为失配函数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 为模板串，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi></mrow><annotation encoding=\"application/x-tex\">P</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span></span></span></span> 为需要匹配的串</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">match</span><span class=\"params\">(<span class=\"type\">char</span> *T,<span class=\"type\">char</span> *P,<span class=\"type\">int</span> *f)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> l1=<span class=\"built_in\">strlen</span>(T),j=<span class=\"number\">-1</span>,l2=<span class=\"built_in\">strlen</span>(P);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;l2;i++)<span class=\"comment\">//遍历匹配串</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//j：模板串中T[j]及之前的都已经与P[i-1]及之前匹配完成</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(~j&amp;&amp;T[j+<span class=\"number\">1</span>]!=P[i])<span class=\"comment\">//T[j]之前均匹配，如果T[j+1]与P[i]不匹配</span></span><br><span class=\"line\">            j=f[j];<span class=\"comment\">//根据失配函数找到上一个匹配位置</span></span><br><span class=\"line\">        <span class=\"comment\">//整个序列都没有匹配的/匹配到了跳出循环</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(T[j+<span class=\"number\">1</span>]==P[i])<span class=\"comment\">//如果是上述第二种情况</span></span><br><span class=\"line\">            j++;<span class=\"comment\">//模板串的匹配位置向后一位，即匹配到了原本的第j+1位</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(j==l1<span class=\"number\">-1</span>)<span class=\"comment\">//如果匹配到了最后一位</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,i-j+<span class=\"number\">1</span>);</span><br><span class=\"line\">            j=f[j];<span class=\"comment\">//最后一位已匹配的情况下，根据失配函数找到下一位开始的位置</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//寻找失配函数的过程：模板串的自身匹配</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">get_f</span><span class=\"params\">(<span class=\"type\">char</span> *T,<span class=\"type\">int</span> *f)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> len=<span class=\"built_in\">strlen</span>(T),j=<span class=\"number\">-1</span>;</span><br><span class=\"line\">    f[<span class=\"number\">0</span>]=f[<span class=\"number\">1</span>]=<span class=\"number\">-1</span>;<span class=\"comment\">//初始化</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;len;i++)<span class=\"comment\">//从第二位开始匹配</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//j：模板串T[j]及之前的都已经与T[i-1]匹配完成</span></span><br><span class=\"line\">        <span class=\"comment\">//以下同上</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(~j&amp;&amp;T[j+<span class=\"number\">1</span>]!=T[i])</span><br><span class=\"line\">            j=f[j];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(T[j+<span class=\"number\">1</span>]==T[i])</span><br><span class=\"line\">            j++;</span><br><span class=\"line\">        f[i]=j;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>最大公共前后缀-&gt;得到最小循环子串（这里原串可以是不完整的）</li>\n<li>最长前后缀，最短前后缀，重合前后缀，不重合前后缀的递推相关问题注意优化，跳fail的时候，不一定每次都从当前位置往前跳，类比kmp的原理可以考虑能不能从上一位遗留的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 更新</li>\n</ul>\n","categories":["ACM","字符串"],"tags":["ACM","字符串","KMP"]},{"title":"【字符串】Hash","url":"/posts/50381b03/","content":"<p>字符串哈希简介，当初按教学稿写的，应该还比较详细</p>\n<span id=\"more\"></span>\n<h1 id=\"简介\">简介</h1>\n<p>引入：给定<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>​​ 个字符串，求不同的字符串有多少个？</p>\n<p>暴力法：每次匹配两个字符串，假设字符串平均长度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>​ ，则最坏情况时间复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><msup><mi>m</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nm^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>​​​​​​​，复杂度过高。</p>\n<p>考虑如何优化，注意到中间出现了重复匹配，如果有相同的两个字符串，它们分别与其他字符串比较了一遍。如果相同的某字符串有一个标记a，与它不同的字符串有标记b,c,d…，那么就可以统计标记的个数来解决问题。</p>\n<p>标记的含义：相同字符串拥有同一种标记，不同字符串标记不同——考虑映射到正整数，对每个字符串进行映射，通过排序比较有多少相同的映射值，比较部分复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mi>log</mi><mo>⁡</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(m\\log m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span>​ 。</p>\n<p>字符串哈希本质是一种映射，方法很多。</p>\n<h1 id=\"map-unordered-map\">map/unordered_map</h1>\n<ul>\n<li>红黑树/哈希表，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span>/接近<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>，有序/无序</li>\n</ul>\n<h1 id=\"进制法哈希\">进制法哈希</h1>\n<h2 id=\"原理概述\">原理概述</h2>\n<ul>\n<li><strong>字符集</strong>中的<strong>每个字符</strong>对应<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">Base</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span></span></span></span>​​​ 进制下的一个数（不能为0，why？），则每一个字符串都可看作一个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">Base</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span></span></span></span>​​​​​​​​ 进制数，这样的方法得到的数值就是这个字符的哈希值，通过比较每个字符串的哈希值即可判断字符串是否相同</li>\n<li>实际应用中，要对上述哈希值通过取模将其限定在一定的范围（比如int），方便比较。</li>\n<li>一般将哈希函数记为：</li>\n</ul>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mi mathvariant=\"normal\">Σ</mi><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>×</mo><mi>B</mi><mi>a</mi><mi>s</mi><msup><mi>e</mi><mi>i</mi></msup><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"1em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>M</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(S)=\\Sigma_{i=0}^{n-1}S[i]\\times Base^i (\\mod M)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.131103em;vertical-align:-0.266995em;\"></span><span class=\"mord\"><span class=\"mord\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.433005em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266995em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1246639999999999em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:1em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<ul>\n<li>其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span>​ 首位从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>​ 开始编号。这里也有另一种记法<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mi mathvariant=\"normal\">Σ</mi><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>×</mo><mi>B</mi><mi>a</mi><mi>s</mi><msup><mi>e</mi><mrow><mi>n</mi><mo>−</mo><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>M</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(S)=\\Sigma_{i=0}^{n-1}S[i]\\times Base^{n-i-1} (\\mod M)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.131103em;vertical-align:-0.276864em;\"></span><span class=\"mord\"><span class=\"mord\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854239em;\"><span style=\"top:-2.4231360000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.1031310000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.276864em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mclose\">)</span></span></span></span>​​，是一个道理，不过最高次的位置不同。我们采用第一种记法。</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//一般不这么写，但是原理是这样</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">get_hash</span><span class=\"params\">(<span class=\"type\">const</span> string&amp; s)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"type\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; s.<span class=\"built_in\">size</span>(); ++i) &#123;</span><br><span class=\"line\">    res = (<span class=\"type\">long</span> <span class=\"type\">long</span>)(res * Base + s[i]) % mod;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"模数选择\">模数选择</h2>\n<p>尽量选择素数，注意，如果选择一个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span></span></span></span> 级别的数，随机<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">\\sqrt{10^9}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.04em;vertical-align:-0.08494599999999997em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9550540000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span></span></span><span style=\"top:-2.915054em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.08494599999999997em;\"><span></span></span></span></span></span></span></span></span>​​ 个串就有大概率出现至少一对哈希值相等的不同串（生日悖论）。常用模数有：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>19260817</mn></mrow><annotation encoding=\"application/x-tex\">19260817</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">6</span><span class=\"mord\">0</span><span class=\"mord\">8</span><span class=\"mord\">1</span><span class=\"mord\">7</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>212370440130137957</mn></mrow><annotation encoding=\"application/x-tex\">212370440130137957</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">3</span><span class=\"mord\">7</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">4</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mord\">7</span><span class=\"mord\">9</span><span class=\"mord\">5</span><span class=\"mord\">7</span></span></span></span> （<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{18}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span></span> 级别）。</p>\n<h2 id=\"哈希冲突\">哈希冲突</h2>\n<p>出现哈希值相等的不同串，这时便发生了哈希冲突，哈希值相同的不同字符串会被错判为相同字符串。冲突概率网上有严格推导。</p>\n<p>解决：</p>\n<ul>\n<li>双哈希：选择两个模数，对同一个字符串进行两次哈希求值，只有两个哈希值都相同的两个字符串才判定为相同。但是常数较大。</li>\n<li>模数选择：对于算法竞赛的规模，一般一个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{18}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span></span>​​ 级别的大质数（如何找？Miller-Rabin算法，或是直接记住），基本没有问题。另一种选择是使用<code>unsigned long long</code> ，溢出时会自动对<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>64</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{64}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">6</span><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span> 取模。</li>\n</ul>\n<h2 id=\"rabin-karp实现\">Rabin-Karp实现</h2>\n<h3 id=\"推导\">推导</h3>\n<p>引入：上述哈希有什么问题？单次计算一个字符串的哈希值复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span>​​​ ，如果多次询问一个字符串子串的哈希值，每次都需要重复计算。能不能让子串的哈希值由原字符串直接得到？</p>\n<p>将上述进制数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">Base</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span></span></span></span> 简记为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> ，记哈希函数为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span></span></span></span> ，则哈希函数展开即为：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mi>x</mi><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy=\"false\">]</mo><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>2</mn></mrow></msup><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">f(S)=S[0] + S[1]x + \\dots + S[n-2]x^{n-2} + S[n-1]x^{n-1}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">]</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>字符串<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 的从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 开头的后缀记为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Suffix(S,i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span>，记函数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> ：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy=\"false\">]</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>−</mo><mn>3</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>3</mn><mo stretchy=\"false\">]</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy=\"false\">]</mo><mi>x</mi><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mi><mi mathvariant=\"normal\">⋮</mi><mpadded height=\"+0em\" voffset=\"0em\"><mspace mathbackground=\"black\" width=\"0em\" height=\"1.5em\"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo><mi>x</mi><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>2</mn></mrow></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mi>x</mi><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nH(n)&amp;=0\\\\\nH(n-1)&amp;=f(Suffix(S,n-1))=S[n-1] \\\\\nH(n-2)&amp;=f(Suffix(S,n-2))=S[n-2]+S[n-1]x \\\\\nH(n-3)&amp;=f(Suffix(S,n-3))=S[n-3]+S[n-2]x+S[n-1]x^2 \\\\\n\\vdots \\\\\nH(1)&amp;=f(Suffix(S,1))=S[1]+S[2]x+\\dots+S[n-1]x^{n-2}\\\\\nH(0)&amp;=f(S)=S[0]+S[1]x+S[2]x^2+\\dots+S[n-1]x^{n-1}\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:11.232324000000002em;vertical-align:-5.366162000000002em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.866162000000001em;\"><span style=\"top:-8.713662000000001em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span><span style=\"top:-7.213662em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span><span style=\"top:-5.713661999999999em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span></span></span><span style=\"top:-4.189553999999999em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.029553999999999em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">⋮</span><span class=\"mord rule\" style=\"border-right-width:0em;border-top-width:1.5em;bottom:0em;\"></span></span></span></span><span style=\"top:-0.5054459999999983em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span><span style=\"top:1.0186620000000017em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.366162000000002em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.866162000000001em;\"><span style=\"top:-8.026162000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span></span></span><span style=\"top:-6.526162em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span><span style=\"top:-5.026161999999999em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord mathdefault\">x</span></span></span><span style=\"top:-3.5020539999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">]</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:0.18205400000000171em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">2</span><span class=\"mclose\">]</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:1.7061620000000017em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">2</span><span class=\"mclose\">]</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.366162000000002em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>易得递推式：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi>x</mi><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mn>0</mn><mo>≤</mo><mi>i</mi><mo>&lt;</mo><mi>n</mi><mspace linebreak=\"newline\"></mspace><mi>H</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">H(i)=H(i+1)x+S[i],0\\leq i&lt;n\\\\\nH(n)=0\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span></p>\n<p>我们可以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 求出一个字符串的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> ，利用<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> 可以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 求出该字符串任意子串的哈希值：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi>i</mi><mo>+</mo><mi>L</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mi>x</mi><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo>+</mo><mi>L</mi><mo stretchy=\"false\">]</mo><msup><mi>x</mi><mi>L</mi></msup><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>+</mo><mi>L</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><msup><mi>x</mi><mrow><mi>L</mi><mo>+</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">f(S[i..i+L])=S[i]+S[i+1]x+\\dots+S[i+L]x^{L}=H(i)-H(i+L+1)x^{L+1}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1413309999999999em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mclose\">]</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.141331em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.891331em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h3 id=\"方法\">方法</h3>\n<p>在以上推导的基础上，总结Rabin-Karp实现流程：</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>​ 递推预处理<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi>i</mi></msup><mo separator=\"true\">,</mo><mn>0</mn><mo>≤</mo><mi>x</mi><mo>≤</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">x^i, 0\\leq x\\leq N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.019104em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span>​</li>\n<li>对于每个字符串，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span>​ 求出一个字符串所有的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span>​</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>​​​​ 查询任意子串的哈希值。</li>\n</ul>\n<h3 id=\"代码实现\">代码实现</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"type\">unsigned</span> <span class=\"type\">long</span> <span class=\"type\">long</span> ull;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> x = <span class=\"number\">233</span>;</span><br><span class=\"line\">ull XP[N]; <span class=\"comment\">//XP[i]记录x^i的值</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">initXP</span><span class=\"params\">()</span> <span class=\"comment\">//预处理</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    XP[<span class=\"number\">0</span>]=<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;N;i++)</span><br><span class=\"line\">        XP[i]=XP[i<span class=\"number\">-1</span>]*x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"type\">size_t</span> SZ&gt; <span class=\"comment\">//模板初始化长度</span></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">HashLCP</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    ull H[SZ];</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(<span class=\"type\">const</span> <span class=\"type\">char</span>* s, <span class=\"type\">size_t</span> n=<span class=\"number\">0</span>)</span> <span class=\"comment\">//C风格字符串</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!XP[<span class=\"number\">0</span>])</span><br><span class=\"line\">            <span class=\"built_in\">initXP</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!n) </span><br><span class=\"line\">            n=<span class=\"built_in\">strlen</span>(s);</span><br><span class=\"line\">        H[<span class=\"number\">0</span>]=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=n<span class=\"number\">-1</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">            H[i]=s[i]-<span class=\"string\">&#x27;a&#x27;</span>+<span class=\"number\">1</span>+H[i+<span class=\"number\">1</span>]*x;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(<span class=\"type\">const</span> string s)</span> <span class=\"comment\">//string</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">init</span>(s.<span class=\"built_in\">c_str</span>(),s.<span class=\"built_in\">length</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> ull <span class=\"title\">hash</span><span class=\"params\">(<span class=\"type\">int</span> i,<span class=\"type\">int</span> j)</span> <span class=\"comment\">//返回子串哈希值</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> H[i]-H[j+<span class=\"number\">1</span>]*XP[j-i+<span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> ull <span class=\"title\">hash</span><span class=\"params\">()</span> <span class=\"comment\">//返回整个字符串的哈希值</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> H[<span class=\"number\">0</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">HashLCP &lt;N&gt; hs;</span><br></pre></td></tr></table></figure>\n<h3 id=\"其他\">其他</h3>\n<p>注意：上面有提到哈希函数有两种写法，这里介绍的是后缀形式的，前缀形式同理，掌握一种即可。</p>\n<p>周期串的性质：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>−</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[0,len-i-1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[i,len-1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 相同</p>\n","categories":["ACM","字符串"],"tags":["ACM","Hash"]},{"title":"【字符串】Manacher","url":"/posts/6c18e1bb/","content":"<p>Manacher（马拉车算法），当初按教学稿写的，应该还比较详细</p>\n<span id=\"more\"></span>\n<h1 id=\"引入\">引入</h1>\n<p><strong>给定一个字符串，如何判断它是不是回文串？</strong></p>\n<p>根据定义写出朴素算法：枚举可能成为回文串对称中心（奇偶）的位置，从中间向两边找，如果两边是不同字符说明不是回文串。</p>\n<p><strong>给定一个字符串，如何找出它所有的回文子串？</strong></p>\n<p>枚举每一个子串，判断它是否为回文子串。枚举花费<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 。</p>\n<p>时间复杂度太高，如何优化？</p>\n<p><strong>考虑回文串的特点。</strong></p>\n<p>观察如下两个回文串：</p>\n<ul>\n<li>回文串abccba：得到信息？bccb 也是回文串，cc也是回文串，以两个c 中间位置为中心最长可以延展长为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn></mrow><annotation encoding=\"application/x-tex\">6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span></span></span></span> 的回文串。</li>\n<li>回文串abcba：得到信息？bcb 也是回文串，c 也是回文串，以c 为中心最长可以延展长为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn></mrow><annotation encoding=\"application/x-tex\">5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span></span></span></span> 的回文串。</li>\n</ul>\n<p>结论（非证明）：一个回文串的，每一个关于<strong>该回文串中心</strong>对称的子串，都是回文串。</p>\n<p>基于此，一个字符串，我们延展每一个字符（奇数长度回文串的中心）和每一个空位（偶数长度回文串的中心），去找以它为中心的最长回文串，就可以得到字符串所有的回文子串的信息。</p>\n<p>复杂度仍然不友好。</p>\n<p><strong>继续观察回文串的特点。</strong></p>\n<p>考虑回文串abaccaba，按以上的说法，我们先发现以左边的b可以延伸最长aba回文串，我们随后发现以cc为重心最长沿伸abaccaba回文串，而根据回文串的特点，我们已经可以判断，必有以右边的b为重心的aba回文串。</p>\n<p>即，我们考虑，回文串中的回文串能给我们什么信息？</p>\n<p>给出一些记号：</p>\n<ul>\n<li>为方便奇偶统一处理，在每两个字符中间插入一个奇怪的特殊符号，比如<code>S=&quot;abccba&quot;</code>  我们将其转变为<code>Ma=&quot;$#a#b#c#c#b#a#\\0&quot;</code></li>\n</ul>\n<img data-src=\"/posts/6c18e1bb/image-20230312155824982.png\" class=\"\" title=\"image-20230312155824982\">\n<ul>\n<li>记<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 为字符串第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 个字符为中心可以延展的最长回文串半径长度</li>\n<li>记<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span> 为延展回文串时访问到的最右端字符位置，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">id</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span> 为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span> 对应的那趟延展的回文串的中心位置</li>\n</ul>\n<p>扫一遍字符串，考虑当前正在第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 个字符，想获取以它为中心的回文串的信息<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> ：</p>\n<ul>\n<li>若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>x</mi><mo>≤</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">mx\\leq i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ，以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为中心的潜在回文串，与先前获知的任何回文串都没有关系，当前已知的所有回文串都不能给我们提供任何跟<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 有关的信息，那么只能朴素的由<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为中心向两边延伸，自己去获取信息。</li>\n</ul>\n<img data-src=\"/posts/6c18e1bb/image-20230312160652139.png\" class=\"\" title=\"image-20230312160652139\">\n<ul>\n<li>若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi><mo>&lt;</mo><mi>i</mi><mo>&lt;</mo><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">id&lt;i&lt;mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span> ，联想上面的例子，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 在一个已知的回文串内，它有对称点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn><mo>⋅</mo><mi>i</mi><mi>d</mi><mo>−</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">k=2\\cdot id-i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span></li>\n</ul>\n<img data-src=\"/posts/6c18e1bb/image-20230312160337197.png\" class=\"\" title=\"image-20230312160337197\">\n<p>根据上面的观察，我们想当然的希望<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i]=Mp[k]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span></span></span></span> ，这样就可以省去<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[k]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span></span></span></span> 长度的沿伸代价，但是这个结论成立吗？</p>\n<ul>\n<li>若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">Mp[k]&gt;mx-i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ：</li>\n</ul>\n<img data-src=\"/posts/6c18e1bb/image-20230312161450143.png\" class=\"\" title=\"image-20230312161450143\">\n<p>以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 为中心延展超出当前<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mi>d</mi><mo separator=\"true\">,</mo><mi>m</mi><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(id,mx)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span></span></span></span> 回文串的部分，是不能提供任何信息的，我们不知道<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mi>d</mi><mo separator=\"true\">,</mo><mi>m</mi><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(id,mx)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span></span></span></span> 串的左右是什么样子，因此我们只能得到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 或<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为中心，延展<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">mx-i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 长度的部分（即红框部分）一定是回文串。</p>\n<ul>\n<li>若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo><mo>≤</mo><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">Mp[k]\\leq mx-i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ：</li>\n</ul>\n<img data-src=\"/posts/6c18e1bb/image-20230312162107692.png\" class=\"\" title=\"image-20230312162107692\">\n<p>由于在大回文串内，我们显然可以得到以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为中心一定能够沿伸<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[k]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span></span></span></span> 长度的回文串。</p>\n<p>综上，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi><mo>&lt;</mo><mi>i</mi><mo>&lt;</mo><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">id&lt;i&lt;mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span> 时，依靠对称点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn><mo>⋅</mo><mi>i</mi><mi>d</mi><mo>−</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">k=2\\cdot id-i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ，我们得知以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为中心一定能够沿伸<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\min(Mp[k],mx-i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">min</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 长度的回文串，接着<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\min(Mp[k],mx-i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">min</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 长度继续向外沿伸判断回文串即可。</p>\n<h1 id=\"马拉车\">马拉车</h1>\n<ul>\n<li>作用：找出字符串里所有回文串</li>\n<li>暴力回文：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，枚举回文中心后向外拓展，根据上述原理进行改进。</li>\n<li>记法同上：\n<ul>\n<li>偶数和奇数长度的回文字符须不同处理，因此在每个字符中间插入一个特殊符号，方便统一处理</li>\n<li>记<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span>​ 为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 点能扩展出的最长回文长度，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span>​ 为目前访问到过（找回文串）的最右字符位置，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">id</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span>​ 为该回文串的对称中心位置。</li>\n</ul>\n</li>\n<li>从首位遍历字符串，循环变量为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​​ ，初始 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">id</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span>​​ 置<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>​ ；</li>\n<li>在上述原理对应的过程中，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 必然在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">id</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span>​​ 右边，因此不需要考虑<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>&lt;</mo><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">i&lt;id</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span> 的情况。\n<ul>\n<li>当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi><mo>&lt;</mo><mi>i</mi><mo>&lt;</mo><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">id&lt;i&lt;mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span> 时， <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 关于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">id</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span> 的对称点为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mo>=</mo><mn>2</mn><mo>×</mo><mi>i</mi><mi>d</mi><mo>−</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">j=2\\times id-i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> , 可以得到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>≥</mo><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i] \\geq \\min(Mp[j], mx-i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">min</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> ，以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i]=\\min(Mp[j], mx-i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">min</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 为半径，以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 为中心向两边沿伸（省去<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>m</mi><mi>x</mi><mo>−</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[1,\\min(Mp[j], mx-i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">min</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 长度的沿伸）判断回文串，同步更新<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Mp[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 。</li>\n<li>当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>&gt;</mo><mo>=</mo><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">i&gt;=mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span>​ 时，右边的情况未知，只能以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 为中心，从半径<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 开始向外沿伸判断回文串</li>\n</ul>\n</li>\n<li>延展完成后，如果最右边界<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mi>m</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">i+Mp[i]&gt; mx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span></span></span></span> ，则更新<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>x</mi><mo>=</mo><mi>i</mi><mo>+</mo><mi>M</mi><mi>p</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>i</mi><mi>d</mi><mo>=</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">mx=i+Mp[i], id=i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 。</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* luoguP3805 */</span></span><br><span class=\"line\"><span class=\"comment\">/** Manacher **/</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *给小写字符串，长度11e6内</span></span><br><span class=\"line\"><span class=\"comment\"> *求最长回文串长度</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N=<span class=\"number\">1e7</span>+<span class=\"number\">1e6</span>+<span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"type\">char</span> str[N];</span><br><span class=\"line\"><span class=\"type\">char</span> Ma[N&lt;&lt;<span class=\"number\">1</span>]; <span class=\"comment\">//存储预处理过的字符串</span></span><br><span class=\"line\"><span class=\"type\">int</span> Mp[N&lt;&lt;<span class=\"number\">1</span>]; <span class=\"comment\">//Mp[i]表示某位置延展的最长回文串半径</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Manacher</span><span class=\"params\">(<span class=\"type\">char</span> str[],<span class=\"type\">int</span> len)</span> </span>&#123; <span class=\"comment\">//C风格字符串，len是该字符串长度</span></span><br><span class=\"line\">    <span class=\"comment\">//预处理</span></span><br><span class=\"line\">    <span class=\"type\">int</span> l=<span class=\"number\">0</span>;</span><br><span class=\"line\">    Ma[l++]=<span class=\"string\">&#x27;$&#x27;</span>;</span><br><span class=\"line\">    Ma[l++]=<span class=\"string\">&#x27;#&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;len;i++) &#123;</span><br><span class=\"line\">        Ma[l++]=str[i];</span><br><span class=\"line\">        Ma[l++]=<span class=\"string\">&#x27;#&#x27;</span>;</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">    Ma[l]=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">//算法主体，注意，为了代码更好写，这里的Mp[i]是实际最长回文半径+1</span></span><br><span class=\"line\">    <span class=\"type\">int</span> mx=<span class=\"number\">0</span>,id=<span class=\"number\">0</span>; <span class=\"comment\">//mx, id置初始值</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;l;i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i&gt;=mx) Mp[i]=<span class=\"number\">1</span>; <span class=\"comment\">//目前延展最远的回文串不能提供有效信息</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> Mp[i]=<span class=\"built_in\">min</span>(Mp[(id&lt;&lt;<span class=\"number\">1</span>)-i],mx-i); <span class=\"comment\">//用对称点的回文半径更新Mp[i]</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(Ma[i+Mp[i]]==Ma[i-Mp[i]]) Mp[i]++; <span class=\"comment\">//半径从Mp[i]开始延展直到遇见到不相等字符</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i+Mp[i]&gt;mx) &#123; <span class=\"comment\">//如果从i向右找回文串找到的最远位置已经超过了mx，更新mx和id</span></span><br><span class=\"line\">            mx=i+Mp[i]; <span class=\"comment\">//当前中心+最远半径</span></span><br><span class=\"line\">            id=i; <span class=\"comment\">//当前中心</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s&quot;</span>,str);</span><br><span class=\"line\">    <span class=\"type\">int</span> len=<span class=\"built_in\">strlen</span>(str);</span><br><span class=\"line\">    <span class=\"built_in\">Manacher</span>(str,len);</span><br><span class=\"line\">    <span class=\"type\">int</span> ans=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;(len&lt;&lt;<span class=\"number\">1</span>)+<span class=\"number\">2</span>;i++)</span><br><span class=\"line\">        ans=<span class=\"built_in\">max</span>(ans,Mp[i]<span class=\"number\">-1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,ans);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","字符串"],"tags":["ACM","字符串"]},{"title":"【字符串】基本知识","url":"/posts/19ac30dc/","content":"<p>介绍字符串的基本知识、string模板的使用</p>\n<span id=\"more\"></span>\n<h1 id=\"名词\">名词</h1>\n<ul>\n<li>字符集：一个字符集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Σ</mi></mrow><annotation encoding=\"application/x-tex\">\\Sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">Σ</span></span></span></span> 是一个建立了全序关系的集合，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Σ</mi></mrow><annotation encoding=\"application/x-tex\">\\Sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">Σ</span></span></span></span> 中的任意两个不同的元素<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05278em;\">β</span></span></span></span> 都拥有确定的大小关系。字符集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Σ</mi></mrow><annotation encoding=\"application/x-tex\">\\Sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">Σ</span></span></span></span> 中的元素称为字符。</li>\n<li>字符串：字符串<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span>​ 是将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>​ 个字符按一定顺序排列形成的序列，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>​ 为字符串的长度，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">|S|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span></span></span></span>​ ，用<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">S[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span>​ 表示第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 个字符，此处<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>​ 还是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>​ 开始计数需要提前约定。</li>\n<li>子串：原字符串连续的一部分，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi>j</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>i</mi><mo>≤</mo><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">S[i...j], i\\leq j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span>​​，表示原字符串中从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">S[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span>​​ 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">S[j]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span></span></span></span>​​ 这一段组成的新字符串。有时也会用<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi>j</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>i</mi><mo>&gt;</mo><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">S[i..j], i&gt;j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span>​​ ， 来表示空串。</li>\n<li>子序列：从原字符串中将若干元素提取出来并不改变相对位置形成的序列，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">[</mo><msub><mi>p</mi><mn>1</mn></msub><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">[</mo><msub><mi>p</mi><mn>2</mn></msub><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">[</mo><msub><mi>p</mi><mi>k</mi></msub><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mn>1</mn><mo>≤</mo><msub><mi>p</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>p</mi><mn>2</mn></msub><mo>&lt;</mo><mo>⋯</mo><mo>&lt;</mo><msub><mi>p</mi><mi>k</mi></msub><mo>≤</mo><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">S[p_1], S[p_2],...,S[p_k], 1\\leq p_1&lt;p_2&lt;\\dots&lt;p_k\\leq |S|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304100000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span></span></span></span>​ 。</li>\n<li>前缀：指从串首开始到某个位置<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 结束的一个特殊子串。字符串<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 的以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 结尾的前缀记为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Preffix(S,i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span>​ 。</li>\n<li>后缀：指从某个位置<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 开始到串尾结束的一个特殊子串。字符串<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span>​ 的从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>​ 开头的后缀记为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Suffix(S,i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span>。​​</li>\n<li>真前缀、真后缀：类比集合中真子集与子集的关系，即除去原字符串本身的所有前缀子串、后缀子串。</li>\n<li>字典序：以第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 个字符作为第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 关键字进行大小比较，空字符小于字符集内任何字符（即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>&lt;</mo><mi>a</mi><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a&lt;aa</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">a</span></span></span></span> ）。</li>\n<li>回文串：正着写和倒着写相同的字符串，即满足<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo separator=\"true\">,</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>S</mi><mo stretchy=\"false\">[</mo><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo>+</mo><mn>1</mn><mo>−</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\forall 1\\leq i\\leq |S|, S[i]=S[|S|+1-i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">∀</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79549em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">[</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span>​​的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span>​ （<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 从0开始编号）。</li>\n</ul>\n<p>来源：<a href=\"https://oi-wiki.org/string/basic/\">https://oi-wiki.org/string/basic/</a></p>\n<h1 id=\"char-c-风格字符串\">char、C 风格字符串</h1>\n<p>略</p>\n<h1 id=\"string\">string</h1>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//声明</span></span><br><span class=\"line\"><span class=\"built_in\">string</span>();</span><br><span class=\"line\"><span class=\"built_in\">string</span> (<span class=\"type\">const</span> string&amp; str);</span><br><span class=\"line\"><span class=\"built_in\">string</span> (<span class=\"type\">const</span> string&amp; str, <span class=\"type\">size_t</span> pos, <span class=\"type\">size_t</span> len = npos); <span class=\"comment\">//从str中pos位置截取len长度</span></span><br><span class=\"line\"><span class=\"built_in\">string</span> (<span class=\"type\">const</span> <span class=\"type\">char</span>* s); <span class=\"comment\">//C风格字符串</span></span><br><span class=\"line\"><span class=\"built_in\">string</span> (<span class=\"type\">const</span> <span class=\"type\">char</span>* s, <span class=\"type\">size_t</span> n); <span class=\"comment\">//C风格字符串截取前n个字符</span></span><br><span class=\"line\"><span class=\"built_in\">string</span> (<span class=\"type\">size_t</span> n, <span class=\"type\">char</span> c); <span class=\"comment\">//n个字符c</span></span><br><span class=\"line\"><span class=\"built_in\">string</span> (begin, end); <span class=\"comment\">//begin和end是迭代器，截取[begin, end)部分字符</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//迭代器，可以用迭代器遍历字符串</span></span><br><span class=\"line\">str.<span class=\"built_in\">begin</span>(); str.<span class=\"built_in\">end</span>(); <span class=\"comment\">//获得首、尾迭代器</span></span><br><span class=\"line\">str.<span class=\"built_in\">rbegin</span>(); str.<span class=\"built_in\">rend</span>(); <span class=\"comment\">//获得反向首位迭代器</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//空间</span></span><br><span class=\"line\">str.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//为空返回1，不空返回0</span></span><br><span class=\"line\">str.<span class=\"built_in\">size</span>(); str.<span class=\"built_in\">length</span>(); <span class=\"comment\">//返回字符串实际长度</span></span><br><span class=\"line\">str.<span class=\"built_in\">max_size</span>(); <span class=\"comment\">//返回字符串最大容量</span></span><br><span class=\"line\">str.<span class=\"built_in\">capacity</span>(); <span class=\"comment\">//已分配内存中最多容纳字符个数</span></span><br><span class=\"line\">str.<span class=\"built_in\">resize</span>(x); <span class=\"comment\">//将字符串长度置为x</span></span><br><span class=\"line\">str.<span class=\"built_in\">empty</span>(); <span class=\"comment\">//清空字符串</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//访问及修改</span></span><br><span class=\"line\">str[i]; str.<span class=\"built_in\">at</span>(i); <span class=\"comment\">//第i位（起始是第0位）</span></span><br><span class=\"line\">str.<span class=\"built_in\">front</span>(); str.<span class=\"built_in\">back</span>(); <span class=\"comment\">//字符串首位/末位</span></span><br><span class=\"line\">str += str1; str += <span class=\"string\">&quot;abc&quot;</span>; str += <span class=\"string\">&#x27;str&#x27;</span>; <span class=\"comment\">//用+将字符/字符串添加到str末尾</span></span><br><span class=\"line\">str.<span class=\"built_in\">append</span>(...); <span class=\"comment\">//省略部分内容同string的构造，将其添加到str末尾</span></span><br><span class=\"line\">str.<span class=\"built_in\">assign</span>(...); <span class=\"comment\">//省略部分内容同string的构造，将str重置为省略部分所代表的内容</span></span><br><span class=\"line\">str.<span class=\"built_in\">push_back</span>(c); str.<span class=\"built_in\">pop_back</span>(); <span class=\"comment\">//向字符串末尾添加字符c/删除末尾字符</span></span><br><span class=\"line\">str.<span class=\"built_in\">insert</span>(pos, str1); <span class=\"comment\">//向str的pos下标前的位置插入字符串str1</span></span><br><span class=\"line\">str.<span class=\"built_in\">insert</span>(pos, str1, pos1, len); <span class=\"comment\">//向str的pos下标前的位置插入字符串str1从pos1位置截取len个字符</span></span><br><span class=\"line\">str.<span class=\"built_in\">insert</span>(pos, s); str.<span class=\"built_in\">insert</span> (pos, s, n); <span class=\"comment\">//s是字符指针</span></span><br><span class=\"line\">str.<span class=\"built_in\">insert</span>(pos, n, c); <span class=\"comment\">//向pos位置前插入n个字符c，此处的pos可以是下标或迭代器</span></span><br><span class=\"line\">str.<span class=\"built_in\">insert</span>(pos, begin, end); <span class=\"comment\">//pos、begin、end均为迭代器</span></span><br><span class=\"line\"></span><br><span class=\"line\">str.<span class=\"built_in\">erase</span>(pos, len); <span class=\"comment\">//删除pos下标起的len个字符</span></span><br><span class=\"line\">str.<span class=\"built_in\">erase</span>(pos); str.<span class=\"built_in\">erase</span>(pos, begin, end); <span class=\"comment\">//这里均为迭代器，删除指向位置或左闭右开区间的字符</span></span><br><span class=\"line\">str.<span class=\"built_in\">replace</span>(pos, len, s); <span class=\"comment\">//pos起的len个字符，可替代成两个迭代器；s是string或字符指针，格式与上述其他方法基本相同</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//一些方法</span></span><br><span class=\"line\"><span class=\"comment\">//&lt; &gt; &gt;= &lt;= == !=: 可以直接以字典序比较字符串</span></span><br><span class=\"line\">str.<span class=\"built_in\">c_str</span>(); <span class=\"comment\">//返回字符指针，即将string转换成C风格字符串</span></span><br><span class=\"line\">str.<span class=\"built_in\">find</span>(s); <span class=\"comment\">//s是string或字符指针或字符串常量，返回str里找到这个字符串的第一个下标，没有找到返回string::npos</span></span><br><span class=\"line\">str.<span class=\"built_in\">rfind</span>(s); <span class=\"comment\">//同find，不过查找顺序从后往前</span></span><br><span class=\"line\">str.<span class=\"built_in\">substr</span>(pos1, len); <span class=\"comment\">//返回pos1下标起的len个字符组成的子串，len省略则为pos1下标到结尾的子串</span></span><br><span class=\"line\"><span class=\"built_in\">atoi</span>(str); <span class=\"built_in\">stoi</span>(str); <span class=\"comment\">//字符串转int，返回数值。stoi会检查溢出，atoi不检查，溢出就输出最大值/最小值</span></span><br><span class=\"line\"><span class=\"comment\">//stol, stoll, stoull, stof, stod, stold同理</span></span><br></pre></td></tr></table></figure>\n<p>读入：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">cin&gt;&gt;str; <span class=\"comment\">//遇空格/换行终止</span></span><br><span class=\"line\"><span class=\"built_in\">getline</span>(cin, str); <span class=\"comment\">//读取一行，包含空格</span></span><br><span class=\"line\">cin.<span class=\"built_in\">getline</span>(s, n); <span class=\"comment\">//s是字符指针，读取n个字符到s指向的字符数组中</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"stringstream\">stringstream</h1>\n<p>字符串流，实现其他类型的字符串格式化</p>\n<p>头文件：<sstream></p>\n<p>比C 风格的sprintf、sscanf安全</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">stringstream ss1;</span><br><span class=\"line\"><span class=\"function\">stringstream <span class=\"title\">ss</span><span class=\"params\">(str)</span></span>; <span class=\"comment\">//将字符串str装入字符串流ss</span></span><br><span class=\"line\">ss &lt;&lt; x; <span class=\"comment\">//将x装入输入流，x可以是任意类型</span></span><br><span class=\"line\">ss &gt;&gt; str; <span class=\"comment\">//取出ss流的开头写入str，返回bool类型，表示是否成功写入</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//清空：进行多次不同类型转换之前必须清空字符串流</span></span><br><span class=\"line\">ss.<span class=\"built_in\">clear</span>(); <span class=\"comment\">//不释放内存</span></span><br><span class=\"line\">ss.<span class=\"built_in\">str</span>(<span class=\"string\">&quot;&quot;</span>); <span class=\"comment\">//释放内存</span></span><br></pre></td></tr></table></figure>\n","categories":["ACM","字符串"],"tags":["ACM","字符串"]},{"title":"【工具】Github科学上网的问题","url":"/posts/ff590f75/","content":"<p>用steam++科学上Github但是有问题，先把问题和解决放这，回头有空再看。</p>\n<span id=\"more\"></span>\n<p>逃难回家后没有校园网后Github成了玄学访问，steam++科学上网但是出了问题。</p>\n<h1 id=\"steam\">steam++</h1>\n<p>微软商店可搜，开源软件，Github和Gitee均有，<a href=\"https://gitee.com/rmbgame/SteamTools/releases\">Gitee仓库链接</a>（显然Github都有问题了不可能再去Github下了），可以加速steam和游戏，也可以加速Github，绝！</p>\n<h1 id=\"问题一：connection-denied-time-out\">问题一：connection denied、time out</h1>\n<p>看到timeout就自觉开了steam++，发现github能访问能ping通，那肯定是git的问题了，报错大概是：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh: connect to host github.com port 22: Connection refused</span><br></pre></td></tr></table></figure>\n<p>看大佬博客，将git远程连接改成了https，结果就是端口433拒绝访问，没有区别。</p>\n<p>最后看了另一篇博客，大佬解释是dns污染了，改了电脑的<code>C:\\Windows\\System32\\drivers\\etc\\hosts</code>文件，加了一行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">140.82.113.4 github.com</span><br></pre></td></tr></table></figure>\n<p>就能科学访问了。</p>\n<h1 id=\"问题二：分支不匹配\">问题二：分支不匹配</h1>\n<p>在上面之后继续push，报错大概是：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">src refspec 分支名 does not match any</span><br></pre></td></tr></table></figure>\n<p>git remote检查了远程仓库关联，没有问题。</p>\n<p>百度了一下，发现因为是非空分支忘记pull了，先pull了一下，毫无作用.jpg，再push依旧是这个错</p>\n<p>又搜了搜，说重新关联一下远程仓库，尽管那篇博客给的原因跟我的情况并不符合，但反正重开yyds，所以：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote remove origin</span><br><span class=\"line\">git remote add origin git@github.com:XXX/XXX.github.io.git</span><br></pre></td></tr></table></figure>\n<p>然后好了…好了…就挺令人迷惑的…</p>\n<h1 id=\"问题三\">问题三</h1>\n<p>第二天开电脑（虚拟机），发现什么网站都登不上了…？！</p>\n<p>担心是昨天改hosts的原因，把hosts改回来了，不行！</p>\n<p>把steam++打开，压根就打不开！</p>\n<p>最后windows网络诊断给的是<code>远程计算机或设备将不接受连接</code>，百度了解决了，<code>win+R</code>输入并打开<code>inetcpl.cpl</code>即Internet选项，在上面一栏连接中打开局域网设置，全部取消勾选：</p>\n<img data-src=\"/posts/ff590f75/image-20221206202825826.png\" class=\"\" title=\"image-20221206202825826\">\n<p>然后好了…好了…依然令人迷惑…</p>\n<h1 id=\"参考博客\">参考博客</h1>\n<p><a href=\"https://zhuanlan.zhihu.com/p/521340971\">解决问题一</a></p>\n","categories":["工具"],"tags":["工具"]},{"title":"【工具】下载网页视频的方法（m3u8）","url":"/posts/1af5f277/","content":"<p>介绍下载网页视频的方法，尤其是m3u8格式</p>\n<span id=\"more\"></span>\n<p>最近在找一个冷门电影，光靠百度是真的没找到还能下的种子（也许开迅雷会员能下但显然我没有会员也懒得买），但是居然发现有一个网站能在线播放，遂尝试下载。</p>\n<h1 id=\"普通网页下载视频方法\">普通网页下载视频方法</h1>\n<p>今年研开课也提到了，非常简单，但只能用于没有对视频加密的网站，具体方法就是点击视频播放框审查元素（图里的是不能直接下的因为blob加密，但是样式反正就是video的元素）：</p>\n<img data-src=\"/posts/1af5f277/image-20230113193652351.png\" class=\"\" title=\"image-20230113193652351\">\n<p>src里就是视频下载链接，点开即送。</p>\n<p>或者F12选择网络-媒体，media类型的元素里也能找到链接，双击即可下载（图里没有但是这个位置）：</p>\n<img data-src=\"/posts/1af5f277/image-20230113193830277.png\" class=\"\" title=\"image-20230113193830277\">\n<h1 id=\"m3u8\">m3u8</h1>\n<p>有些网站用的是m3u8格式的视频，如果你播放，会发现F12网络-全部，那里会出现很多.ts文件，点开可下载，但是只是视频片段：</p>\n<img data-src=\"/posts/1af5f277/image-20230113193956195.png\" class=\"\" title=\"image-20230113193956195\">\n<p>原理贴一下网上的：</p>\n<blockquote>\n<p>视频网站采用流媒体传输协议，将一段视频切成无数个小段，这几个小段就是ts格式的视频文件，一段一段的网站上播放。</p>\n<p>这样做的好处是观看更加流畅，因为他会根据网络状况自动切换视频的清晰度，在网络状况不稳定的情况下，对保障流畅播放非常有帮助。</p>\n<p>服务器采集编码传输视频到切片器，切片器对视频创建索引文件，并且切割成n个ts文件，这2个文件传输到http服务器上，网站/客户端根据索引文件查找http服务器上的ts文件，连续播放这n个ts文件。</p>\n<p>网站需要拿到索引文件，去按照url链接下载在http服务器中的ts文件，类似于爬虫，索引文件就是m3u8文件。</p>\n</blockquote>\n<p>所以我们仔细找，或者过滤一下m3u8：</p>\n<img data-src=\"/posts/1af5f277/image-20230113194654871.png\" class=\"\" title=\"image-20230113194654871\">\n<p>就能找到索引文件的下载链接了，记住这个链接。有了这个索引文件，貌似一些下载器可以把完整视频下载下来，但是计算机人怎么能在自己电脑乱下软件呢（不是）</p>\n<p>blob加密的不用管，也是直接找m3u8就好了。</p>\n<h2 id=\"ffmpeg\">ffmpeg</h2>\n<p>搜索解决方案时找到一个神奇的东西ffmpeg，不记得什么时候见过它了但是貌似以前不止一次缺过这个东西的dll…</p>\n<p>电脑有pip的用pip install，装anaconda的进anaconda环境的命令行用conda install，linux用sudo apt-get install…</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">conda install ffmpeg</span><br></pre></td></tr></table></figure>\n<p>然后：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ffmpeg -i m3u8的链接 想保存为的视频名.保存为的视频后缀</span><br></pre></td></tr></table></figure>\n<p>经过漫长的等待。。。。建议短视频用，电影就算了，CPU都能烤肉了时间，反正我扔云服务器上去跑了，瞬间跑满：</p>\n<img data-src=\"/posts/1af5f277/image-20230113203544000.png\" class=\"\" title=\"image-20230113203544000\">\n<p>注：停止是按q</p>\n<h2 id=\"potplayer\">potplayer</h2>\n<p>右键打开链接直接播放，但是至于怎么保存还不知道。。。</p>\n<h2 id=\"偶然搜到的链接\">偶然搜到的链接</h2>\n<p>知乎里贴的：<a href=\"https://tools.thatwind.com/tool/m3u8downloader\">https://tools.thatwind.com/tool/m3u8downloader</a> ，网页即用，非常省事，但是我感觉没有ffmpeg的转换结果清晰。</p>\n","categories":["工具"],"tags":["工具"]},{"title":"【工具】Windows中应用太靠边无法移动的解决方法","url":"/posts/a5a04d3f/","content":"<p>偶尔会遇到应用程序在电脑边缘只露一个边框导致无法移动的情况，解决方法如下。</p>\n<span id=\"more\"></span>\n<p>出现下图这种情况，首先选中该软件，可以从任务栏点击图标，也可以按下<code>Alt</code>后不断按<code>tab</code>直到选中该应用：</p>\n<img data-src=\"/posts/a5a04d3f/image-20221101225050743.png\" class=\"\" title=\"image-20221101225050743\">\n<p>然后按下<code>Alt+space</code>：</p>\n<img data-src=\"/posts/a5a04d3f/image-20221101225249638.png\" class=\"\" title=\"image-20221101225249638\">\n<p>鼠标点击移动或按下键盘<code>M</code>，使用上下左右方向键就可以移动这个应用的位置了！</p>\n","categories":["工具"],"tags":["工具"]},{"title":"【思想】二分","url":"/posts/27caafe8/","content":"<p>二分是解决有单调性问题的一种方法。</p>\n<span id=\"more\"></span>\n<h1 id=\"二分答案\">二分答案</h1>\n<ul>\n<li>条件：单调闭区间</li>\n<li>题面：最大值的最小值，最小值的最大值。</li>\n<li>套路：二分+判断函数，二分提供一个mid值，判断函数根据mid值操作并返回是否符合题目条件，从而得到该mid值是否成立，判断二分往哪个区间取。（注：二分的是答案区间）</li>\n<li>技巧1：注意特定值符合条件时（即条件不是不等式），判断函数返回计算值，在二分中判断该值符合条件/大于/小于条件分别如何处理</li>\n<li>技巧2：对于一组数据里有多组数据需要进行相同处理，最终需要得到某组数据的位置，可以二分这些数据，减少处理时间</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">check</span><span class=\"params\">(T x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    T ans=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;n;i++)</span><br><span class=\"line\">        <span class=\"comment\">//处理操作；//注意该操作中千万不能改变原数组的值，否则后面的二分就失败了</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans&gt;=m;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//整数二分</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span><span class=\"comment\">//求最小值的最大值</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll lb=<span class=\"number\">0</span>,rb=INF;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(rb-lb&gt;<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        ll mid=(lb+rb)/<span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">check</span>(mid)) lb=mid;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> rb=mid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lld&quot;</span>,lb);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//实数二分</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">double</span> lb=<span class=\"number\">0</span>,rb=INF;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(rb-lb&gt;eps) &#123; </span><br><span class=\"line\">        ll mid=(lb+rb)/<span class=\"number\">2.0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">check</span>(mid)) lb=mid;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> rb=mid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lld&quot;</span>,lb);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"三分\">三分</h1>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(r-l&gt;eps)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"type\">double</span> lmid=l+(r-l)/<span class=\"number\">3</span>,rmid=r-(r-l)/<span class=\"number\">3</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(<span class=\"built_in\">f</span>(lmid)&lt;=<span class=\"built_in\">f</span>(rmid)) l=lmid;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> r=rmid;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%.5lf&quot;</span>,r);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","思想"],"tags":["ACM","二分"]},{"title":"【思想】双指针","url":"/posts/1d472151/","content":"<p>双指针，又称尺取法，常解决与单调性有关的区间问题</p>\n<span id=\"more\"></span>\n<p>根本不知道这玩意是种算法系列…</p>\n<h1 id=\"概念\">概念</h1>\n<p>其实就是维护区间的两端<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">l,r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span></span></span></span> ，在满足条件的情况下让<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 不断向右移动直到不符合条件，再让<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">l</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span> 移动。</p>\n<p>显然这种方法的特性是当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> 满足条件时，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\forall i\\in [l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 都满足条件，因此可以解决一些满足特定条件的计数问题。</p>\n<p>所谓“单调性”即为，当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">l</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span> 开始移动时，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 不可能向左移动，即若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> 满足条件但<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r+1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 不满足条件（非边界条件），那么<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\forall i\\in [l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l+1,i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 必不可能满足条件。</p>\n<p>佬说，因为单调性的存在，能用双指针解决的问题一般可以找到单调性，并用二分解决。</p>\n<p>复健时候的题目会放上来，并不是入门的好材料，咕咕咕</p>\n<h1 id=\"题目\">题目</h1>\n<h2 id=\"cf1611f\">CF1611F</h2>\n<p><a href=\"https://codeforces.com/contest/1611/problem/F\">Problem - F - Codeforces</a></p>\n<h3 id=\"题意\">题意</h3>\n<p>给定数组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> ，长为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> ，给定常数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> ，寻找最长的区间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,y]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span></span></span></span> 使得<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mi>x</mi></mrow><mi>i</mi></msubsup><msub><mi>a</mi><mi>j</mi></msub><mo>≥</mo><mo>−</mo><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">\\forall i\\in [x,y],\\sum_{j=x}^i a_j\\geq -S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.400382em;vertical-align:-0.43581800000000004em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.964564em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\">x</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> ，即区间内的所有前缀和都<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><mo>−</mo><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">\\geq -S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span></p>\n<h3 id=\"分析\">分析</h3>\n<p>肯定需要先处理出前缀和数组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> ，问题变成了找最长区间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,y]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span></span></span></span> 使得<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>≥</mo><mo>−</mo><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">\\forall i\\in [x,y],d[i]-d[x-1]\\geq -S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span></p>\n<p>因为题目规模，估计复杂度最多在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> （不纠结log的指数），考虑在枚举一个左端点时如何在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\log n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的时间内找到最远的右端点</p>\n<p>为了找更长的区间，固定左端点，如果<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> 满足题意，显然更小的区间都满足题意（左端点仍是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">l</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span> ）；若此时<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r+1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 不满足题意，为了更长没有必要把<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 向左移动，因此这里其实已经是双指针了。</p>\n<p>注意到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>−</mo><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">d[x-1]-S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> 是个定值，问题还可改写为找最长区间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,y]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span></span></span></span> 使得<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">{</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mi mathvariant=\"normal\">∣</mi><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">}</mo><mo>≥</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>−</mo><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">\\min \\{d[i]|i\\in[x,y]\\}\\geq d[x-1]-S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">min</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span><span class=\"mclose\">}</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> ，区间最值…RMQ，到此问题解决了，最终复杂度ST表预处理<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，双指针复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 。</p>\n<p>当然也可以二分找右端点，不如双指针简单。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\">ll st[N][<span class=\"number\">20</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> n,s;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;<span class=\"number\">20</span>;j++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n&amp;&amp;i+(<span class=\"number\">1</span>&lt;&lt;(j<span class=\"number\">-1</span>))&lt;=n;i++)</span><br><span class=\"line\">            st[i][j]=<span class=\"built_in\">min</span>(st[i][j<span class=\"number\">-1</span>],st[i+(<span class=\"number\">1</span>&lt;&lt;(j<span class=\"number\">-1</span>))][j<span class=\"number\">-1</span>]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k=<span class=\"built_in\">log</span>(y-x+<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">min</span>(st[x][k],st[y-(<span class=\"number\">1</span>&lt;&lt;k)+<span class=\"number\">1</span>][k]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin&gt;&gt;n&gt;&gt;s;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>,tmp;i&lt;=n;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        cin&gt;&gt;tmp;</span><br><span class=\"line\">        st[i][<span class=\"number\">0</span>]=st[i<span class=\"number\">-1</span>][<span class=\"number\">0</span>]+tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">init</span>();</span><br><span class=\"line\">    <span class=\"type\">int</span> l=<span class=\"number\">1</span>,r=<span class=\"number\">1</span>,ans=<span class=\"number\">-1</span>,x,y;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(l&lt;=n&amp;&amp;r&lt;=n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l&gt;r)</span><br><span class=\"line\">            r=l;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">query</span>(l,r)&lt;st[l<span class=\"number\">-1</span>][<span class=\"number\">0</span>]-s)</span><br><span class=\"line\">            l++;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(r-l+<span class=\"number\">1</span>&gt;ans)</span><br><span class=\"line\">                x=l,y=r,ans=r-l+<span class=\"number\">1</span>;</span><br><span class=\"line\">            r++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(~ans)</span><br><span class=\"line\">        cout&lt;&lt;x&lt;&lt;<span class=\"string\">&#x27; &#x27;</span>&lt;&lt;y&lt;&lt;<span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        cout&lt;&lt;<span class=\"string\">&quot;-1\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","思想"],"tags":["ACM","双指针"]},{"title":"【思想】前缀和、差分、倍增","url":"/posts/4952d95b/","content":"<p>前缀和、差分和倍增，没啥关系，只是单列太简短了…</p>\n<span id=\"more\"></span>\n<h1 id=\"前缀和\">前缀和</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>a</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">sum[i]=a[i]+sum[i-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>l</mi></mrow><mi>r</mi></msubsup><mi>a</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=l}^{r}a[i]=sum[r]-sum[l-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></p>\n<h1 id=\"差分\">差分</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>a</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mi>a</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">d[i]=a[i]-a[i-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></p>\n<p>区间修改<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,y]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span></span></span></span> ，那么<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,y]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span></span></span></span> 之间的数相对关系不变，差分数组的值不变，唯一变的是差分数组第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 项（表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的差，改变了）和第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">y+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 项：以区间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,y]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span></span></span></span> 加<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span></span></span></span> 为例，差分数组的修改为：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mo>=</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>y</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>−</mo><mo>=</mo><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">d[x]+=c,d[y+1]-=c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span><span class=\"mord\">+</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>x</mi></msubsup><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mi>a</mi><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">a[x]=\\sum_{i=1}^{x}d[i]+a[0]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mclose\">]</span></span></span></span></p>\n<p>另一种利用差分数组获得第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 项的值的方法：差分数组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> 初始化为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，区间修改对<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> 进行，而新的第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span>项值为：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo><mo>+</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>x</mi></msubsup><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">a[x]+\\sum_{i=1}^{x}d[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span></p>\n<h1 id=\"倍增\">倍增</h1>\n<ul>\n<li>原理：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>8</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding=\"application/x-tex\">1,2,4,8,...2^i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.019104em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span></span></span></span></span></span></span> 能表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><msup><mn>2</mn><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[1,2^{i+1})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 中的所有数</li>\n<li>核心：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>a</mi><mo stretchy=\"false\">[</mo><mi>a</mi><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">a[x][i]=a[a[x][i-1]][i-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></li>\n<li>将规模从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 降到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，查询时遍历二进制每一位累和答案即可。</li>\n</ul>\n","categories":["ACM","思想"],"tags":["ACM"]},{"title":"【数学】不定方程","url":"/posts/383dc95c/","content":"<p>b不定方程的相关内容，包括n元一次不定方程、毕达哥拉斯定理、费马大定理、佩尔方程。</p>\n<span id=\"more\"></span>\n<h1 id=\"一次不定方程\">一次不定方程</h1>\n<p>转化为一元线性同余方程</p>\n<h1 id=\"n-元一次不定方程\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 元一次不定方程</h1>\n<p>转化为多元线性同余方程</p>\n<h1 id=\"毕达哥拉斯定理\">毕达哥拉斯定理</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">x^2+y^2=z^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> ，当<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo separator=\"true\">,</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\gcd(x,y,z)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 时被称为本原的毕达哥拉斯三元组。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>本原的毕达哥拉斯三元组</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo separator=\"true\">,</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mtext>且</mtext><mi>y</mi><mtext>为偶数</mtext><mo>⇔</mo><mi mathvariant=\"normal\">∃</mi><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mo>&gt;</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mtext>互素，不同奇偶</mtext><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>x</mi><mo>=</mo><msup><mi>m</mi><mn>2</mn></msup><mo>−</mo><msup><mi>n</mi><mn>2</mn></msup><mo separator=\"true\">,</mo><mi>y</mi><mo>=</mo><mn>2</mn><mi>m</mi><mi>n</mi><mo separator=\"true\">,</mo><mi>z</mi><mo>=</mo><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">本原的毕达哥拉斯三元组(x,y,z)且y为偶数\\Leftrightarrow\\exist m,n(m&gt;n,m,n互素，不同奇偶),x=m^2-n^2,y=2mn,z=m^2+n^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord cjk_fallback\">本</span><span class=\"mord cjk_fallback\">原</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">毕</span><span class=\"mord cjk_fallback\">达</span><span class=\"mord cjk_fallback\">哥</span><span class=\"mord cjk_fallback\">拉</span><span class=\"mord cjk_fallback\">斯</span><span class=\"mord cjk_fallback\">三</span><span class=\"mord cjk_fallback\">元</span><span class=\"mord cjk_fallback\">组</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mord cjk_fallback\">且</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord cjk_fallback\">为</span><span class=\"mord cjk_fallback\">偶</span><span class=\"mord cjk_fallback\">数</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∃</span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord cjk_fallback\">互</span><span class=\"mord cjk_fallback\">素</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord cjk_fallback\">不</span><span class=\"mord cjk_fallback\">同</span><span class=\"mord cjk_fallback\">奇</span><span class=\"mord cjk_fallback\">偶</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></p>\n<h1 id=\"费马大定理\">费马大定理</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi>n</mi></msup><mo>+</mo><msup><mi>y</mi><mi>n</mi></msup><mo>=</mo><msup><mi>z</mi><mi>n</mi></msup><mo separator=\"true\">,</mo><mi>n</mi><mo>≥</mo><mn>3</mn><mo separator=\"true\">,</mo><mi>n</mi><mo>∈</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">x^n+y^n=z^n,n\\geq 3,n\\in N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.747722em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.858832em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.858832em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 无非<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 整数解</p>\n<h1 id=\"佩尔方程\">佩尔方程</h1>\n<h2 id=\"第一类佩尔方程\">第一类佩尔方程</h2>\n<p>形如：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>d</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x^2-dy^2=1,d&gt;1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> 是完全平方数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> 无解</p>\n<p>解有迭代公式：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>n</mi></msub><mo>=</mo><msub><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><mi>d</mi><msub><mi>y</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>y</mi><mn>1</mn></msub><mspace linebreak=\"newline\"></mspace><msub><mi>y</mi><mi>n</mi></msub><mo>=</mo><msub><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>y</mi><mn>1</mn></msub><mo>+</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_{n}=x_{n-1} x_{1}+d y_{n-1} y_{1}\\\\\ny_{n}=x_{n-1} y_{1}+y_{n-1} x_{1}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.791661em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.791661em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p>推导：设特解<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1,y_1),(x_2,y_2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，则有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>2</mn><mn>2</mn></msubsup><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x_{1}^{2}-d y_{1}^{2}=1,x_{2}^{2}-d y_{2}^{2}=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622159999999998em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0622159999999998em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0622159999999998em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0622159999999998em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mo fence=\"true\">(</mo><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><mo fence=\"true\">)</mo></mrow><mrow><mo fence=\"true\">(</mo><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>2</mn><mn>2</mn></msubsup><mo fence=\"true\">)</mo></mrow><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\left(x_{1}^{2}-d y_{1}^{2}\\right)\\left(x_{2}^{2}-d y_{2}^{2}\\right)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.20001em;vertical-align:-0.35001em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span><br>\n展开，有</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>y</mi><mn>2</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup><mo>+</mo><msup><mi>d</mi><mn>2</mn></msup><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>y</mi><mn>2</mn><mn>2</mn></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mo lspace=\"0em\" rspace=\"0em\">=</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo stretchy=\"false\">(</mo><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup><mo>+</mo><msup><mi>d</mi><mn>2</mn></msup><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>y</mi><mn>2</mn><mn>2</mn></msubsup><mo stretchy=\"false\">)</mo><mo>−</mo><mi>d</mi><mo stretchy=\"false\">(</mo><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>y</mi><mn>2</mn><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mo lspace=\"0em\" rspace=\"0em\">=</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><msup><mrow><mo fence=\"true\">(</mo><msub><mi>x</mi><mn>1</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi>d</mi><msub><mi>y</mi><mn>1</mn></msub><msub><mi>y</mi><mn>2</mn></msub><mo fence=\"true\">)</mo></mrow><mn>2</mn></msup><mo>−</mo><mi>d</mi><msup><mrow><mo fence=\"true\">(</mo><msub><mi>x</mi><mn>1</mn></msub><msub><mi>y</mi><mn>2</mn></msub><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><msub><mi>y</mi><mn>1</mn></msub><mo fence=\"true\">)</mo></mrow><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mo lspace=\"0em\" rspace=\"0em\">=</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n&amp;x_{1}^{2} x_{2}^{2}-d x_{1}^{2} y_{2}^{2}-d y_{1}^{2} x_{2}^{2}+d^{2} y_{1}^{2} y_{2}^{2}\\\\=&amp;(x_{1}^{2} x_{2}^{2}+d^{2} y_{1}^{2} y_{2}^{2})-d(x_{1}^{2} y_{2}^{2}+y_{1}^{2} x_{2}^{2})\\\\\n=&amp;\\left(x_{1} x_{2}+d y_{1} y_{2}\\right)^{2}-d\\left(x_{1} y_{2}+x_{2} y_{1}\\right)^{2}\\\\\n=&amp;1\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.162224em;vertical-align:-2.831112em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.331112em;\"><span style=\"top:-5.467004em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.942896em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span></span></span><span style=\"top:-2.328888em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span></span></span><span style=\"top:-0.8288880000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.831112em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.331112em;\"><span style=\"top:-5.467004em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.942896em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.328888em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-0.8288880000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.831112em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>逐次迭代可得上述迭代公式。</p>\n<h3 id=\"暴力迭代法\">暴力迭代法</h3>\n<p>从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">y=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 开始枚举验证，每次<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord\">1</span></span></span></span> 。</p>\n<h3 id=\"矩阵迭代法\">矩阵迭代法</h3>\n<p>第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个迭代解用矩阵表示如下：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mi>k</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>y</mi><mi>k</mi></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mo>=</mo><msup><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>d</mi><msub><mi>y</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>y</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>y</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\left[\\begin{array}{l}x_{k} \\\\ y_{k}\\end{array}\\right]=\\left[\\begin{array}{ll}x_{1} &amp; d y_{1} \\\\ y_{1} &amp; x_{1}\\end{array}\\right]^{k-1}\\left[\\begin{array}{l}x_{1} \\\\ y_{1}\\end{array}\\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.639038em;vertical-align:-0.95003em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.689008em;\"><span style=\"top:-3.9029000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span></span></span></span></span></p>\n<p>求出第一个特解后用矩阵快速幂求得第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个解。</p>\n<h2 id=\"第二类佩尔方程\">第二类佩尔方程</h2>\n<p>形如：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><mi>k</mi><mo separator=\"true\">,</mo><mi>d</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x^2-dy^2=k,d&gt;1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<p>解有迭代公式：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>p</mi><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><mi>d</mi><mi>q</mi><msub><mi>y</mi><mn>1</mn></msub><mspace linebreak=\"newline\"></mspace><mi>y</mi><mo>=</mo><mi>p</mi><msub><mi>y</mi><mn>1</mn></msub><mo>+</mo><mi>q</mi><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x=p x_{1}+d q y_{1}\\\\y=p y_{1}+q x_{1}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p>其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>p</mi><mo separator=\"true\">,</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(p,q)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span></span></span></span> 是第二类佩尔方程的一个特解，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1,y_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 是第一类佩尔方程的最小特解。</p>\n<p>推导：根据上述，有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>p</mi><mn>2</mn></msup><mo>−</mo><mi>d</mi><msup><mi>q</mi><mn>2</mn></msup><mo>=</mo><mi>k</mi><mo separator=\"true\">,</mo><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">p^2-dq^2=k,x_{1}^{2}-d y_{1}^{2}=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0622159999999998em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0622159999999998em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mo fence=\"true\">(</mo><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><mo fence=\"true\">)</mo></mrow><mrow><mo fence=\"true\">(</mo><msup><mi>p</mi><mn>2</mn></msup><mo>−</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup><mo fence=\"true\">)</mo></mrow><mo>=</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">\\left(x_{1}^{2}-d y_{1}^{2}\\right)\\left(p^{2}-d y^{2}\\right)=k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.20001em;vertical-align:-0.35001em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span></p>\n<p>展开，有</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>p</mi><mn>2</mn></msup><mo>−</mo><mi>d</mi><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>q</mi><mn>2</mn></msup><mo>−</mo><mi>d</mi><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>p</mi><mn>2</mn></msup><mo>+</mo><msup><mi>d</mi><mn>2</mn></msup><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>q</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mo lspace=\"0em\" rspace=\"0em\">=</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo stretchy=\"false\">(</mo><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>p</mi><mn>2</mn></msup><mo>+</mo><msup><mi>d</mi><mn>2</mn></msup><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>q</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo><mo>−</mo><mi>d</mi><mo stretchy=\"false\">(</mo><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>q</mi><mn>2</mn></msup><mo>+</mo><msubsup><mi>y</mi><mn>1</mn><mn>2</mn></msubsup><msup><mi>p</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mo lspace=\"0em\" rspace=\"0em\">=</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><msup><mrow><mo fence=\"true\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mi>p</mi><mo>+</mo><mi>d</mi><msub><mi>y</mi><mn>1</mn></msub><mi>q</mi><mo fence=\"true\">)</mo></mrow><mn>2</mn></msup><mo>−</mo><mi>d</mi><msup><mrow><mo fence=\"true\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mi>q</mi><mo>+</mo><mi>p</mi><msub><mi>y</mi><mn>1</mn></msub><mo fence=\"true\">)</mo></mrow><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mo lspace=\"0em\" rspace=\"0em\">=</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mi>k</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n&amp;x_{1}^{2} p^{2}-d x_{1}^{2} q^{2}-d y_{1}^{2} p^{2}+d^{2} y_{1}^{2} q^{2}\\\\=&amp;(x_{1}^{2} p^{2}+d^{2} y_{1}^{2} q^{2})-d(x_{1}^{2} q^{2}+y_{1}^{2} p^{2})\\\\\n=&amp;\\left(x_{1} p+d y_{1} q\\right)^{2}-d\\left(x_{1} q+p y_{1}\\right)^{2}\\\\\n=&amp;k\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.162224em;vertical-align:-2.831112em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.331112em;\"><span style=\"top:-5.467004em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.942896em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span></span></span><span style=\"top:-2.328888em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span></span></span><span style=\"top:-0.8288880000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.831112em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.331112em;\"><span style=\"top:-5.467004em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.942896em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.328888em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-0.8288880000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.831112em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>逐次迭代可得上述迭代公式。</p>\n<p>对于每一组特解<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>p</mi><mo separator=\"true\">,</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(p,q)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span></span></span></span> ，第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个迭代解用矩阵表示如下：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mi>k</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>y</mi><mi>k</mi></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mo>=</mo><msup><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi>p</mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>d</mi><mi>q</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi>q</mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi>p</mi></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>y</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\left[\\begin{array}{l}x_{k} \\\\ y_{k}\\end{array}\\right]=\\left[\\begin{array}{ll}p &amp; d q \\\\ q&amp; p\\end{array}\\right]^{k-1}\\left[\\begin{array}{l}x_{1} \\\\ y_{1}\\end{array}\\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.639038em;vertical-align:-0.95003em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.689008em;\"><span style=\"top:-3.9029000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span></span></span></span></span></p>\n<p>求出第一个特解后用矩阵快速幂求得第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个解。</p>\n","categories":["ACM","数学"],"tags":["ACM","数论"]},{"title":"【数学】FFT和FWT","url":"/posts/1b02eb9e/","content":"<p>FFT和FWT原理和代码</p>\n<span id=\"more\"></span>\n<p>曾经写过一篇牛头不对马嘴的傅里叶级数的课程小论文，摘取一点放出来（FFT），FWT只有代码</p>\n<h1 id=\"fft\">FFT</h1>\n<h2 id=\"原理\">原理</h2>\n<h3 id=\"傅里叶级数\">傅里叶级数</h3>\n<h4 id=\"三角形式\">三角形式</h4>\n<p>​\t\t$$f(x)=\\frac{a_0}{2}+\\sum_{k=1}^{\\infty}{(a_k\\cos kx+b_k\\sin kx)}$$ ，其中</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>a</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mi>π</mi></mfrac><msubsup><mo>∫</mo><mrow><mo>−</mo><mi>π</mi></mrow><mi>π</mi></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi>d</mi><mi>x</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>a</mi><mi>n</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mi>π</mi></mfrac><msubsup><mo>∫</mo><mrow><mo>−</mo><mi>π</mi></mrow><mi>π</mi></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi>cos</mi><mo>⁡</mo><mi>n</mi><mi>x</mi><mi>d</mi><mi>x</mi><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo>…</mo><mtext> </mtext><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>b</mi><mi>n</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mi>π</mi></mfrac><msubsup><mo>∫</mo><mrow><mo>−</mo><mi>π</mi></mrow><mi>π</mi></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi>sin</mi><mo>⁡</mo><mi>n</mi><mi>x</mi><mi>d</mi><mi>x</mi><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo>…</mo><mtext> </mtext><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\na_0&amp;=\\frac{1}{\\pi}\\int_{-\\pi}^{\\pi}f(x) dx, \\\\a_n&amp;=\\frac{1}{\\pi}\\int_{-\\pi}^{\\pi}f(x)\\cos nx dx,  (n=0,1,2\\dots), \\\\b_n&amp;=\\frac{1}{\\pi}\\int_{-\\pi}^{\\pi}f(x)\\sin nx dx, (n=0,1,2\\dots) .\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:8.053719000000001em;vertical-align:-3.7768595000000005em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.2768595000000005em;\"><span style=\"top:-6.2768595000000005em;\"><span class=\"pstrut\" style=\"height:3.414292em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.5922865em;\"><span class=\"pstrut\" style=\"height:3.414292em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-0.9077134999999996em;\"><span class=\"pstrut\" style=\"height:3.414292em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7768595000000005em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.2768595000000005em;\"><span style=\"top:-6.2768595000000005em;\"><span class=\"pstrut\" style=\"height:3.414292em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.414292em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-3.5922865em;\"><span class=\"pstrut\" style=\"height:3.414292em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.414292em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">cos</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-0.9077134999999996em;\"><span class=\"pstrut\" style=\"height:3.414292em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.414292em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">sin</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7768595000000005em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h4 id=\"指数形式\">指数形式</h4>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mi>c</mi><mn>0</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant=\"normal\">∞</mi></munderover><mrow><mo fence=\"true\">(</mo><msub><mi>c</mi><mi>n</mi></msub><msup><mi>e</mi><mrow><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup><mo>+</mo><msub><mi>c</mi><mrow><mo>−</mo><mi>n</mi></mrow></msub><msup><mi>e</mi><mrow><mo>−</mo><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup><mo fence=\"true\">)</mo></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant=\"normal\">∞</mi></mrow></munderover><msub><mi>c</mi><mi>n</mi></msub><msup><mi>e</mi><mrow><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">f(t)=c_{0}+\\sum_{n=1}^{\\infty}\\left(c_{n} e^{i \\omega_{n} t}+c_{-n} e^{-i \\omega_{n} t}\\right)=\\sum_{n=-\\infty}^{+\\infty} c_{n} e^{i \\omega_{n} t}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9185100000000004em;vertical-align:-1.267113em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.882887em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.267113em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.25833100000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0666720000000005em;vertical-align:-1.308336em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7583360000000003em;\"><span style=\"top:-1.8999949999999999em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.308336em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h3 id=\"傅里叶变换\">傅里叶变换</h3>\n<h4 id=\"傅里叶积分定理\">傅里叶积分定理</h4>\n<p>对于 $$T$$ 为周期的周期函数 $$f(t)$$ ，考虑 $$T\\rightarrow+\\infty$$ ，则在 $$[-\\frac{T}{2}, \\frac{T}{2}]$$ 上的周期函数 $$f(t)$$ 可以表示任意符合傅里叶级数展开条件的函数，此时 $$\\omega=\\frac{2\\pi}{T}\\rightarrow 0$$ ，则 $$\\omega_n=n\\omega=(n+1)\\omega-n\\omega$$ 是连续变化的，即 $$\\omega_n=n\\Delta \\omega$$ ，则</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>n</mi></msub><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">Δ</mi><mi>ω</mi></mrow><mrow><mn>2</mn><mi>π</mi></mrow></mfrac><msubsup><mo>∫</mo><mrow><mo>−</mo><mi>T</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><mrow><mi>T</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup><mi>d</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">c_{n}=\\frac{\\Delta \\omega}{2 \\pi} \\int_{-T / 2}^{T / 2} f(t) e^{-i \\omega_{n} t} dt\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.72485em;vertical-align:-1.0869499999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">Δ</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6379000000000004em;\"><span style=\"top:-1.7880500000000004em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mtight\">/</span><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mtight\">/</span><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0869499999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span></span></span></span></span></p>\n<p>代回原式可得，</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>π</mi></mrow></mfrac><munderover><mo>∑</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant=\"normal\">∞</mi></mrow></munderover><mrow><mo fence=\"true\">(</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi>T</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><mrow><mi>T</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup><mi>d</mi><mi>t</mi><mo fence=\"true\">)</mo></mrow><msup><mi>e</mi><mrow><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup><mi mathvariant=\"normal\">Δ</mi><mi>ω</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>π</mi></mrow></mfrac><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant=\"normal\">∞</mi></mrow></msubsup><mrow><mo fence=\"true\">(</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant=\"normal\">∞</mi></mrow></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup><mi>d</mi><mi>t</mi><mo fence=\"true\">)</mo></mrow><msup><mi>e</mi><mrow><mi>i</mi><msub><mi>ω</mi><mi>n</mi></msub><mi>t</mi></mrow></msup><mi>d</mi><mi>ω</mi></mrow><annotation encoding=\"application/x-tex\">f(t)=\\frac{1}{2 \\pi} \\sum_{-\\infty}^{+\\infty}\\left(\\int_{-T / 2}^{T / 2} f(t) e^{-i \\omega_n t} d t\\right) e^{i \\omega_n t} \\Delta \\omega=\\frac{1}{2 \\pi} \\int_{-\\infty}^{+\\infty}\\left(\\int_{-\\infty}^{+\\infty} f(t) e^{-i \\omega_n t} d t\\right) e^{i \\omega_n t} d \\omega\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0666720000000005em;vertical-align:-1.308336em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7583360000000003em;\"><span style=\"top:-1.8999949999999999em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.308336em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6379000000000004em;\"><span style=\"top:-1.7880500000000004em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mtight\">/</span><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mtight\">/</span><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0869499999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mord\">Δ</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.491512em;vertical-align:-0.970281em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5212310000000002em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5212310000000002em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span></span></span></span></span></p>\n<h4 id=\"傅里叶变换\">傅里叶变换</h4>\n<p>​\t\t记 $$F(\\omega)=\\int_{-\\infty}^{+\\infty} f(t) e^{-i \\omega t} d t$$ ，任何一个函数 $$f(t)$$ 都可以通过变换得到 $$F(\\omega)$$ ，</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi><mo stretchy=\"false\">[</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>=</mo><mi>F</mi><mo stretchy=\"false\">(</mo><mi>ω</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant=\"normal\">∞</mi></mrow></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>i</mi><mi>ω</mi><mi>t</mi></mrow></msup><mi>d</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\\psi[f(t)]=F(\\omega) =\\int_{-\\infty}^{+\\infty} f(t) e^{-i \\omega t} d t\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.491512em;vertical-align:-0.970281em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5212310000000002em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.874664em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span></span></span></span></span></p>\n<p>这个对函数的变换称为傅里叶变换，称 $$F(\\omega)$$ 是 $$f(t)$$ 的象函数，称 $$f(t)$$ 是 $$F(\\omega)$$ 的象原函数，称 $$|F(\\omega)|$$ 为 $$f(t)$$ 的振幅谱，$$\\arg{F(\\omega)} $$ 为函数 $$f(t)$$ 的相位谱。</p>\n<p>由以上变换易得傅里叶逆变换</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>ψ</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">[</mo><mi>F</mi><mo stretchy=\"false\">(</mo><mi>ω</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>π</mi></mrow></mfrac><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant=\"normal\">∞</mi></mrow></msubsup><mi>F</mi><mo stretchy=\"false\">(</mo><mi>ω</mi><mo stretchy=\"false\">)</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>ω</mi><mi>t</mi></mrow></msup><mi>d</mi><mi>ω</mi></mrow><annotation encoding=\"application/x-tex\">\\psi^{-1}[F(\\omega)]=f(t)=\\frac{1}{2 \\pi} \\int_{-\\infty}^{+\\infty} F(\\omega) e^{i \\omega t} d \\omega\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.491512em;vertical-align:-0.970281em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5212310000000002em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span></span></span></span></span></p>\n<h3 id=\"多项式\">多项式</h3>\n<h4 id=\"系数表达法\">系数表达法</h4>\n<p>我们一般将 $$N-1$$ 次多项式记为 $$A(x) =\\sum_{n=0}^{N-1}a_n x^n$$ ，它由 $$n$$ 个系数 $$a_0, a_1, \\dots, a_n$$ 唯一确定，称系数表达法。</p>\n<h4 id=\"点值表达法\">点值表达法</h4>\n<p>我们还常用另一种记法，令 $$y_i=A(x_i), i=0,1,\\dots, N-1$$ ，相当于在多项式的时域上取 $$N$$ 个点： $$(x_0, y_0), (x_1,y_1), \\dots, (x_{N-1}, y_{N-1})$$ ，这些点也可以唯一确定该多项式，称点值表达法</p>\n<h4 id=\"傅里叶逆变换-idft\">傅里叶逆变换（IDFT）</h4>\n<p>对于 $$N-1$$ 次多项式 $$A(x) =\\sum_{n=0}^{N-1}a_n x^n$$ ，取 $$x_k=e^{\\frac{2 \\pi i k}{N}}=\\omega_N^k(k=0,1, \\ldots N-1)$$ ，其中 $$i$$ 是虚数单位，设 $$y_{k}=A(x_k)=\\sum_{n=0}^{N-1}a_n\\omega_N^{kn}$$ ，由前文傅里叶逆变换类比</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></munderover><mo stretchy=\"false\">(</mo><msubsup><mi>ω</mi><mi>N</mi><mrow><mo>−</mo><mi>n</mi></mrow></msubsup><msup><mo stretchy=\"false\">)</mo><mi>k</mi></msup><msub><mi>y</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_{n}=\\frac{1}{N} \\sum_{k=0}^{N-1} (\\omega_N^{-n})^ky_{k}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.1304490000000005em;vertical-align:-1.302113em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.8478869999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.302113em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8213309999999999em;\"><span style=\"top:-2.416338em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.28366199999999997em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p>逆变换相当于多项式 $$B(x)=\\sum_{k=0}^{N-1}\\frac{y_k}{N}x^k$$ 在 $${\\omega_N^{-j}}, j=0,1,\\cdots,N-1$$ 的点值表示。</p>\n<h3 id=\"单位根\">单位根</h3>\n<p>代数中，若 $$w^n=1$$ ，则称 $$w$$ 为 $$n$$ 次单位根。</p>\n<p>在复平面上，以原点为圆心，$$1$$ 为半径作单位圆，将单位圆 $$n$$ 等分，从原点以 $$n$$ 等分点为终点作向量，称辐角为正且最小的向量表示的复数 $$\\omega_n=e^{\\frac{2 \\pi i}{n}} $$ 为主 $$n$$ 次单位根，由复数的运算性质得 $$\\omega_n^n=1$$ 。</p>\n<p>从辐角为正且最小的开始编号，结合复数的运算性质得</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>ω</mi><mi>n</mi><mi>k</mi></msubsup><mo>=</mo><msup><mi>e</mi><mfrac><mrow><mn>2</mn><mi>π</mi><mi>i</mi><mi>k</mi></mrow><mi>n</mi></mfrac></msup><mo>=</mo><mi>cos</mi><mo>⁡</mo><mrow><mo fence=\"true\">(</mo><mfrac><mrow><mn>2</mn><mi>π</mi><mi>k</mi></mrow><mi>n</mi></mfrac><mo fence=\"true\">)</mo></mrow><mo>+</mo><mi>i</mi><mo>⋅</mo><mi>sin</mi><mo>⁡</mo><mrow><mo fence=\"true\">(</mo><mfrac><mrow><mn>2</mn><mi>π</mi><mi>k</mi></mrow><mi>n</mi></mfrac><mo fence=\"true\">)</mo></mrow><mo separator=\"true\">,</mo><mspace width=\"1em\"/><mi>k</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\\omega_n^k=e^{\\frac{2 \\pi i k}{n}}=\\cos \\left(\\frac{2 \\pi k}{n}\\right)+i \\cdot \\sin \\left(\\frac{2 \\pi k}{n}\\right), \\quad k=0,1, \\ldots n-1,\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.146108em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991079999999998em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.02902em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.02902em;\"><span style=\"top:-3.4130000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8800285714285714em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.2255000000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.344em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"mop\">cos</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"mop\">sin</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span></span></span></span></span></p>\n<p>引理1：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>ω</mi><mrow><mi>d</mi><mi>n</mi></mrow><mrow><mi>d</mi><mi>k</mi></mrow></msubsup><mo>=</mo><msup><mrow><mo fence=\"true\">(</mo><msup><mi>e</mi><mfrac><mrow><mn>2</mn><mi>π</mi><mi>i</mi></mrow><mrow><mi>d</mi><mi>n</mi></mrow></mfrac></msup><mo fence=\"true\">)</mo></mrow><mrow><mi>d</mi><mi>k</mi></mrow></msup><mo>=</mo><msup><mi>e</mi><mfrac><mrow><mn>2</mn><mi>π</mi><mi>i</mi><mi>k</mi></mrow><mi>n</mi></mfrac></msup><mo>=</mo><msubsup><mi>w</mi><mi>n</mi><mi>k</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">\\omega_{dn}^{d k}=\\left(e^{\\frac{2\\pi i}{d n}}\\right)^{d k}=e^{\\frac{2 \\pi i k}{n}}=w_{n}^{k}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.146108em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991079999999998em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.039028em;vertical-align:-0.65002em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0115599999999998em;\"><span style=\"top:-3.4130000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8550857142857142em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.2255000000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.344em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3890079999999998em;\"><span style=\"top:-3.6029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.02902em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.02902em;\"><span style=\"top:-3.4130000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8800285714285714em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.2255000000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.344em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.146108em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991079999999998em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p>引理2：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>ω</mi><mi>n</mi><mfrac><mi>n</mi><mn>2</mn></mfrac></msubsup><mo>=</mo><msup><mrow><mo fence=\"true\">(</mo><msup><mi>e</mi><mfrac><mrow><mn>2</mn><mi>π</mi><mi>i</mi></mrow><mi>n</mi></mfrac></msup><mo fence=\"true\">)</mo></mrow><mfrac><mi>n</mi><mn>2</mn></mfrac></msup><mo>=</mo><msup><mi>e</mi><mrow><mi>π</mi><mi>i</mi></mrow></msup><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\omega_{n}^{\\frac{n}{2}}=\\left(e^{\\frac{2\\pi i}{n}}\\right)^{\\frac{n}{2}}=e^{\\pi i}=-1 \n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.186272em;vertical-align:-0.11659200000000003em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.06968em;\"><span style=\"top:-2.883408em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.5856em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6915428571428572em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.2255000000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.344em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.11659200000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.037em;vertical-align:-0.65002em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0115599999999998em;\"><span style=\"top:-3.4130000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8550857142857142em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.2255000000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.344em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3869799999999999em;\"><span style=\"top:-3.9029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6915428571428572em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.2255000000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.344em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8746639999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathdefault mtight\">i</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span></span></p>\n<p>引理3：$$n$$ 为偶数，$$n$$ 个 $$n$$ 次单位复数根组成的集合即为 $$\\frac{n}{2}$$ 个 $$\\frac{n}{2}$$ 次单位复数根组成的集合。</p>\n<p>证明：即证$$0\\leq k\\leq n-1, 0\\leq j\\leq \\frac{n}{2}-1$$ 且 $$k, j\\in N$$ ， $${(\\omega_n^{k})^2}={\\omega_{\\frac{n}{2}}^{j}}$$.</p>\n<p>由引理1和引理2易得 $$\\omega_n^{j+\\frac{n}{2}}=\\omega_n^j\\omega_n^{\\frac{n}{2}}=-\\omega_n^j$$ ， 因此 $${(\\omega_n^{k})^2}={(\\omega_{n}^{j})^2}={\\omega_{n}^{2j}}={\\omega_{\\frac{n}{2}}^{j}}$$ ，证毕。</p>\n<h2 id=\"实现\">实现</h2>\n<p>快速求解多项式</p>\n<h3 id=\"分治算法\">分治算法</h3>\n<p>令 $$A_{0}(x)=a_{0}+a_{2} x+a_{4} x^{2}+\\cdots a_{n-2} x^{n / 2-1},A_{1}(x)=a_{1}+a_{3} x+a_{5} x^{2}+\\cdots a_{n-1} x^{n / 2-1}$$,</p>\n<p>则 $$ A(x)=a_{0}+a_{1} x+a_{2} x^{2}+a_{3} x^{3} \\cdots a_{n-1} x^{n-1} =A_{0}\\left(x^{2}\\right)+x A_{1}\\left(x^{2}\\right)$$</p>\n<p>求 $$ A(x)$$ 在 $${\\omega_N^k}, ~k=0, 1, \\cdots, N-1$$ 处的值相当于求 $$A_0$$ 和 $$A_1$$ 在 $${(\\omega_N^k)^2}, ~k=0, 1, \\cdots, N-1$$ 的值，由引理3得，上述操作相当于求 $$A_0$$ 和 $$A_1$$ 在 $${\\omega_{\\frac{N}{2}}^{j}}, 0\\leq j\\leq \\frac{N}{2}-1$$ 的值，于是将问题规模缩小呈原来的一半，分别对二者在 $$\\frac{N}{2}$$ 上进行FFT，直到只剩一个常数项</p>\n<p>算法复杂度为 $$O(n \\log n)$$</p>\n<p>特别说明，对于 $$N$$ 非 $$2$$ 的整次幂的FFT，只需补充为 $$0$$ 的项即可，不影响结果。</p>\n<p>另外，通过逆变换的式子我们能看出，它也可以使用FFT分治算法计算，只不过点值取了倒数。</p>\n<p>朴素的快速傅里叶变换分治算法的实现代码如下：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> complex&lt;<span class=\"type\">double</span>&gt; comp; <span class=\"comment\">//comp即复数类型</span></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> MAXN = <span class=\"number\">1000005</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">const</span> comp <span class=\"title\">I</span><span class=\"params\">(<span class=\"number\">0</span>, <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">double</span> PI = <span class=\"built_in\">acos</span>(<span class=\"number\">-1</span>); <span class=\"comment\">//定义常量 i 和 pi</span></span><br><span class=\"line\">comp A[MAXN * <span class=\"number\">3</span>], B[MAXN * <span class=\"number\">3</span>], tmp[MAXN * <span class=\"number\">3</span>], ans[MAXN * <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">fft</span><span class=\"params\">(comp F[], <span class=\"type\">int</span> N, <span class=\"type\">int</span> sgn = <span class=\"number\">1</span>)</span> <span class=\"comment\">//F是系数数组，N是数组长度</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123; <span class=\"comment\">//由于IDFT与DFT在运算形式上几乎一样，我们使用一个函数来完成运算，用sgn=1表示DFT，sgn=-1表示IDFT</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (N == <span class=\"number\">1</span>) <span class=\"keyword\">return</span>; <span class=\"comment\">//递归边界</span></span><br><span class=\"line\">    <span class=\"built_in\">memcpy</span>(tmp, F, <span class=\"built_in\">sizeof</span>(comp) * N); <span class=\"comment\">//数组拷贝一份</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; N; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i&amp;<span class=\"number\">1</span>) <span class=\"comment\">//奇数项</span></span><br><span class=\"line\">            *(F + i / <span class=\"number\">2</span> + N / <span class=\"number\">2</span>) = tmp[i]; <span class=\"comment\">//将奇数项放到数组后半部分</span></span><br><span class=\"line\">    \t<span class=\"keyword\">else</span></span><br><span class=\"line\">            *(F+i/<span class=\"number\">2</span>) = tmp[i]; <span class=\"comment\">//将偶数项放到数组前半部分</span></span><br><span class=\"line\">    <span class=\"built_in\">fft</span>(F, N / <span class=\"number\">2</span>, sgn), <span class=\"built_in\">fft</span>(F + N / <span class=\"number\">2</span>, N / <span class=\"number\">2</span>, sgn); <span class=\"comment\">//分治FFT处理偶数项和奇数项</span></span><br><span class=\"line\">    comp Wn=<span class=\"built_in\">exp</span>(<span class=\"number\">2</span> * PI / N * sgn * I), w=<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">//Wn为单位根，w表示幂</span></span><br><span class=\"line\">    <span class=\"type\">int</span> n=N&gt;&gt;<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;n;i++,w*=Wn)<span class=\"comment\">//这里的w相当于公式中的k</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        tmp[i]=F[i]+w*F[i+n],</span><br><span class=\"line\">        tmp[i+n]=F[i]-w*F[i+n]; <span class=\"comment\">//引理3</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">memcpy</span>(F, tmp, <span class=\"built_in\">sizeof</span>(comp) * N);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"蝴蝶变换\">蝴蝶变换</h3>\n<p>分治算法已经有了理想的复杂度，但是算法实现时有反复的数组复制操作，我们尝试优化常数，考虑能否提前确定序列中每个元素最终的位置。以 $$N=8$$ 为例：</p>\n<img data-src=\"/posts/1b02eb9e/image-20230319002713392.png\" class=\"\" title=\"image-20230319002713392\">\n<p>观察易得，最终序列的元素下标是原序列元素下标二进制的翻转，又称蝴蝶变换（暂未找到严格证明），由此我们可以提前确定序列中每个元素的位置，迭代进行快速傅里叶变换，不需要递归写法了，优化了常数。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> complex&lt;<span class=\"type\">double</span>&gt; comp; <span class=\"comment\">//comp即复数类型</span></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> MAXN = <span class=\"number\">1000005</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">const</span> comp <span class=\"title\">I</span><span class=\"params\">(<span class=\"number\">0</span>, <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">double</span> PI = <span class=\"built_in\">acos</span>(<span class=\"number\">-1</span>); <span class=\"comment\">//定义常量 i 和 pi</span></span><br><span class=\"line\">comp A[MAXN * <span class=\"number\">3</span>], B[MAXN * <span class=\"number\">3</span>], tmp[MAXN * <span class=\"number\">3</span>], ans[MAXN * <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> rev[MAXN * <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">fft</span><span class=\"params\">(comp F[], <span class=\"type\">int</span> N, <span class=\"type\">int</span> sgn = <span class=\"number\">1</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> bit = __lg(N); <span class=\"comment\">//二进制的最高位</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; N; ++i) <span class=\"comment\">//蝴蝶变换</span></span><br><span class=\"line\">    &#123;   <span class=\"comment\">//rev[i]记录的是a_i最终序列的位置</span></span><br><span class=\"line\">        rev[i] = (rev[i &gt;&gt; <span class=\"number\">1</span>] &gt;&gt; <span class=\"number\">1</span>) | ((i &amp; <span class=\"number\">1</span>) &lt;&lt; (bit - <span class=\"number\">1</span>));</span><br><span class=\"line\">        <span class=\"comment\">//记i的二进制为head+tail，+代表拼接而不是加法</span></span><br><span class=\"line\">        <span class=\"comment\">//其中tail是最后一位即i&amp;1，head是前面那些位即i&gt;&gt;1</span></span><br><span class=\"line\">        <span class=\"comment\">//需要得到tail+rev(head部分)，tail部分即为tail&lt;&lt;(bit-1)</span></span><br><span class=\"line\">        <span class=\"comment\">//rev[i&gt;&gt;1]为rev(head部分)+0（最后一位），因此rev(head部分)为rev[i&gt;&gt;1]&gt;&gt;1</span></span><br><span class=\"line\">        <span class=\"comment\">//从而二者作或运算即最终结果</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; rev[i]) <span class=\"comment\">//避免反复交换</span></span><br><span class=\"line\">            <span class=\"built_in\">swap</span>(F[i], F[rev[i]]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> l = <span class=\"number\">1</span>; l &lt; N; l &lt;&lt;= <span class=\"number\">1</span>) <span class=\"comment\">//枚举合并前的区间长度</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        comp Wn = <span class=\"built_in\">exp</span>(sgn * PI / l * I); <span class=\"comment\">//单位根</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; N; i += (l&lt;&lt;<span class=\"number\">1</span>) ) <span class=\"comment\">//遍历起始点</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"function\">comp <span class=\"title\">w</span><span class=\"params\">(<span class=\"number\">1</span>,<span class=\"number\">0</span>)</span></span>; <span class=\"comment\">//幂</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = i; k &lt; i + l; ++k, w *= Wn)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                comp g = F[k], h = F[k + l] * w;</span><br><span class=\"line\">                F[k] = g + h, F[k + l] = g - h;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"应用：多项式乘法-卷积\">应用：多项式乘法（卷积）</h2>\n<p>对于$$A(x) =\\sum_{n=0}^{N-1}a_n x^n, B(x) =\\sum_{n=0}^{N-1}b_n x^n$$ ，有</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>A</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi>B</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mn>2</mn><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>C</mi><mi>i</mi></msub><msup><mi>x</mi><mi>i</mi></msup><mo separator=\"true\">,</mo><mtext> 其中 </mtext><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence=\"true\">(</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mi>i</mi></munderover><msub><mi>a</mi><mi>k</mi></msub><msub><mi>b</mi><mrow><mi>i</mi><mo>−</mo><mi>k</mi></mrow></msub><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">C(x)=A(x)B(x)=\\sum_{i=0}^{2 n-1} C_{i} x^{i}, \\text { 其中 } C_{i}=\\left(\\sum_{k=0}^{i} a_{k} b_{i-k}\\right)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0787820000000004em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord text\"><span class=\"mord\"> </span><span class=\"mord cjk_fallback\">其中</span><span class=\"mord\"> </span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.1137820000000005em;vertical-align:-1.302113em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8116690000000002em;\"><span style=\"top:-1.8478869999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.302113em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span></span></span></span></span></p>\n<p>计算的时间复杂度是 $$O(n^2)$$ ，这种形式系数下，没有优化的方法，考虑改变系数的形式进行优化。在多项式的时域上取 $$N$$ 个点： $$(x_0, A(x_0)), (x_1, A(x_1)), \\dots, (x_{N-1}, A(x_{N-1}))$$ 和 $$(x_0, B(x_0)), (x_1, B(x_1)), \\dots, (x_{N-1}, B(x_{N-1}))$$ ，可以通过 $$O(n)$$ 的计算得到 $$(x_0, C(x_0)), (x_1, C(x_1)), \\dots, (x_{N-1}, C(x_{N-1}))$$ ，因此这 $$N$$ 个点唯一确定多项式 $$C(x)$$ 的系数，由前面知识可得通过傅里叶逆变换（IDFT）可以确定该系数。</p>\n<p>实现了快速傅里叶变换，多项式乘法 $$C(x)=A(x)B(x)$$ ，其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">C(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span></span></span></span> 的次数是 $$N-1$$ ，计算可以取 $$N$$ 个点： $${\\omega_N^k}, ~k=0, 1, \\cdots, N-1$$ ，计算出 $$C(x)$$ 在上述点的值，通过傅里叶逆变换确定 $$C(x)$$ 的系数。由上文我们知道快速傅里叶变换的复杂度是 $$O(n \\log n)$$ ，其余读入、乘积、输出操作复杂度均为 $$O(n)$$ ，总复杂度通过快速傅里叶变换优化到 $$O(n \\log n)$$ 。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n = <span class=\"built_in\">read</span>(), m = <span class=\"built_in\">read</span>(), N = <span class=\"number\">1</span> &lt;&lt; __lg(n + m + <span class=\"number\">1</span>) + <span class=\"number\">1</span>; </span><br><span class=\"line\">    <span class=\"comment\">//读入n,m，将N-1补成2的整次幂</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt;= n; ++i)</span><br><span class=\"line\">        A[i] = <span class=\"built_in\">read</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt;= m; ++i)</span><br><span class=\"line\">        B[i] = <span class=\"built_in\">read</span>();</span><br><span class=\"line\">    <span class=\"comment\">//读入两个多项式的系数</span></span><br><span class=\"line\">    <span class=\"built_in\">fft</span>(A, N), <span class=\"built_in\">fft</span>(B, N);</span><br><span class=\"line\">    <span class=\"comment\">//分别计算点值</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; N; ++i)</span><br><span class=\"line\">        ans[i] = A[i] * B[i]; <span class=\"comment\">//计算乘积多项式的点值</span></span><br><span class=\"line\">    <span class=\"built_in\">fft</span>(ans, N, <span class=\"number\">-1</span>); <span class=\"comment\">//傅里叶逆变换</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt;= n + m; ++i)</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, <span class=\"built_in\">int</span>(ans[i].<span class=\"built_in\">real</span>() / N + <span class=\"number\">0.1</span>)); <span class=\"comment\">// +0.1规避浮点误差</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"fwt\">FWT</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mi>W</mi><mi>T</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>F</mi><mi>W</mi><mi>T</mi><mo stretchy=\"false\">(</mo><mi>A</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mi>F</mi><mi>W</mi><mi>T</mi><mo stretchy=\"false\">(</mo><mi>B</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">FWT(C)=FWT(A)\\times FWT(B)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">A</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mclose\">)</span></span></span></span> ，对于或、与、异或运算</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">FWT_or</span><span class=\"params\">(<span class=\"type\">int</span> *a, <span class=\"type\">int</span> opt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; N; i &lt;&lt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> p = i &lt;&lt; <span class=\"number\">1</span>, j = <span class=\"number\">0</span>; j &lt; N; j += p)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = <span class=\"number\">0</span>; k &lt; i; ++k)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (opt == <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t\t\t\ta[i + j + k] = (a[j + k] + a[i + j + k]) % MOD;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t\t\ta[i + j + k] = (a[i + j + k] + MOD - a[j + k]) % MOD;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">FWT_and</span><span class=\"params\">(<span class=\"type\">int</span> *a, <span class=\"type\">int</span> opt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; N; i &lt;&lt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> p = i &lt;&lt; <span class=\"number\">1</span>, j = <span class=\"number\">0</span>; j &lt; N; j += p)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = <span class=\"number\">0</span>; k &lt; i; ++k)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (opt == <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t\t\t\ta[j + k] = (a[j + k] + a[i + j + k]) % MOD;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t\t\ta[j + k] = (a[j + k] + MOD - a[i + j + k]) % MOD;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">FWT_xor</span><span class=\"params\">(<span class=\"type\">int</span> *a, <span class=\"type\">int</span> opt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; N; i &lt;&lt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> p = i &lt;&lt; <span class=\"number\">1</span>, j = <span class=\"number\">0</span>; j &lt; N; j += p)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = <span class=\"number\">0</span>; k &lt; i; ++k)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"type\">int</span> X = a[j + k], Y = a[i + j + k];</span><br><span class=\"line\">\t\t\t\ta[j + k] = (X + Y) % MOD;</span><br><span class=\"line\">\t\t\t\ta[i + j + k] = (X + MOD - Y) % MOD;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (opt == <span class=\"number\">-1</span>) <span class=\"comment\">//如果不是在模意义下的话，开一个long long，然后把逆元变成直接除二就好了。</span></span><br><span class=\"line\">\t\t\t\t\ta[j + k] = <span class=\"number\">1ll</span> * a[j + k] * inv2 % MOD, a[i + j + k] = <span class=\"number\">1ll</span> * a[i + j + k] * inv2 % MOD;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"其他快速变换-待补\">其他快速变换（待补）</h1>\n<h2 id=\"快速数论变换-ntt\">快速数论变换（NTT）</h2>\n<p>快速傅里叶变换利用了单位复根的特殊性质，大大减少了运算，但是每个复数系数的实部和虚部是一个正弦及余弦函数，因此大部分系数都是浮点数，计算量会比较大，且浮点数的计算可能会导致误差。在离散正交变换的理论中，已经证明在复数域内，具有循环卷积特性的唯一变换是DFT，所以在复数域中不存在具有循环卷积性质的更简单的离散正交变换，因此提出了以数论为基础的具有循环卷积性质的快速数论变换（NTT）。</p>\n<h2 id=\"mtt\">MTT</h2>\n<p>由于NTT仅能针对特定模数，通过数论的相关知识推导，得到找到三个符合要求的模数，在这三个模数意义下分别FFT然后利用中国剩余定理合并一下，即三模数NTT，用发明的人的首字母记作MTT算法。</p>\n<h2 id=\"快速沃尔什变换-fwt-快速莫比乌斯变换-fmt\">快速沃尔什变换（FWT）/ 快速莫比乌斯变换（FMT）</h2>\n<p>快速傅里叶变换可以用来优化卷积，而对于 $$C_{k}=\\sum_{i+j=k} A_{i} * B_{j}$$ ，如果换成 $$i|j, i&amp;j, \\cdots$$ 等逻辑运算，就不能使用快速傅里叶变换了，但是受其思想启发，对于每种逻辑运算构造不同的运算方法，再还原到结果的系数，且运算中所有系数均为整数，运算速度相对较快。</p>\n","categories":["ACM","数学"],"tags":["ACM","FFT","FWT"]},{"title":"【数学】乘性函数","url":"/posts/aaa64465/","content":"<p>乘性函数相关内容，主要欧拉函数相关。</p>\n<span id=\"more\"></span>乘性函数\n<h1 id=\"基本定义与性质\">基本定义与性质</h1>\n<ul>\n<li>\n<p>算数函数：定义在所有正整数上的函数</p>\n</li>\n<li>\n<p>乘性函数（积性函数）：算数函数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span></span></span></span> ，任意两个互素的正整数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>, 均有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo></mrow><annotation encoding=\"application/x-tex\">f(m n)=</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(m) f(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>完全乘性（完全积性）函数：乘性函数去掉互素的条件。</p>\n</li>\n<li>\n<p>任意正整数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的素数幂分解 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><msub><mi>p</mi><mn>1</mn></msub><msup><mrow></mrow><msub><mi>a</mi><mn>1</mn></msub></msup><mo>⋅</mo><msubsup><mi>p</mi><mn>2</mn><msub><mi>a</mi><mn>2</mn></msub></msubsup><mo>⋯</mo><msub><mi>p</mi><mi>s</mi></msub><msup><mrow></mrow><msub><mi>a</mi><mi>s</mi></msub></msup></mrow><annotation encoding=\"application/x-tex\">n=p_{1}{ }^{a_{1}} \\cdot p_{2}^{a_2} \\cdots p_{s}{ }^{a_{s}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.858832em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0126em;vertical-align:-0.266308em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.746292em;\"><span style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.1449000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266308em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span></span></span></span> 是乘性函数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>f</mi><mrow><mo fence=\"true\">(</mo><msub><mi>p</mi><mn>1</mn></msub><msup><mrow></mrow><msub><mi>a</mi><mn>1</mn></msub></msup><mo fence=\"true\">)</mo></mrow><mo>⋅</mo><mi>f</mi><mrow><mo fence=\"true\">(</mo><msub><mi>p</mi><mn>2</mn></msub><msup><mrow></mrow><msub><mi>a</mi><mn>2</mn></msub></msup><mo fence=\"true\">)</mo></mrow><mo>⋯</mo><mi>f</mi><mrow><mo fence=\"true\">(</mo><msubsup><mi>p</mi><mi>s</mi><msub><mi>a</mi><mi>s</mi></msub></msubsup><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow f(n)=f\\left(p_{1}{ }^{a_{1}}\\right) \\cdot f\\left(p_{2}{ }^{a_{2}}\\right) \\cdots f\\left(p_{s}^{a_s}\\right)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span></span></span></span></p>\n</li>\n<li>\n<p>积性函数的和还是积性函数</p>\n</li>\n<li>\n<p>举例：</p>\n<ul>\n<li>欧拉函数</li>\n<li>gcd：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>m</mi><mo>×</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo>×</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mi mathvariant=\"normal\">gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo>×</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\operatorname{gcd}(i, m \\times n)=\\operatorname{gcd}(i \\times m) \\times \\operatorname{gcd}(i \\times n), m, n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">g</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">d</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">g</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">d</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">g</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">d</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 互质</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"欧拉函数\">欧拉函数</h1>\n<ul>\n<li>欧拉函数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\varphi(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ：不超过 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 且与 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 互素的正整数的个数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>∈</mo><msup><mi>N</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">n\\in N^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.688696em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.688696em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 是素数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇔</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>p</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\Leftrightarrow\\varphi(p)=p-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 是素数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>∈</mo><msup><mi>N</mi><mo>∗</mo></msup><mo>⇒</mo><mi>φ</mi><mrow><mo fence=\"true\">(</mo><msup><mi>p</mi><mi>a</mi></msup><mo fence=\"true\">)</mo></mrow><mo>=</mo><msup><mi>p</mi><mi>a</mi></msup><mo>−</mo><msup><mi>p</mi><mrow><mi>a</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">a\\in N^*\\Rightarrow \\varphi\\left(p^{a}\\right)=p^{a}-p^{a-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.688696em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.688696em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.858832em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span>\n<ul>\n<li>证明：与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>p</mi><mi>a</mi></msup></mrow><annotation encoding=\"application/x-tex\">p^a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.858832em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span></span></span></span></span></span></span></span></span> 不互素的只有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo separator=\"true\">,</mo><mn>2</mn><mi>p</mi><mo separator=\"true\">,</mo><mn>3</mn><mi>p</mi><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msup><mi>p</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p,2p,3p,\\cdots,p^{k-1}p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.043548em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">p</span></span></span></span> ，等比求和减去即可</li>\n</ul>\n</li>\n<li>任意正整数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的素数幂分解 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><msubsup><mi>p</mi><mn>1</mn><msub><mi>a</mi><mn>1</mn></msub></msubsup><mo>⋅</mo><msubsup><mi>p</mi><mn>2</mn><msub><mi>a</mi><mn>2</mn></msub></msubsup><mo>⋯</mo><msub><mi>p</mi><mi>s</mi></msub><msup><mrow></mrow><msub><mi>a</mi><mi>s</mi></msub></msup><mo>⇒</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>n</mi><mo>⋅</mo><mrow><mo fence=\"true\">(</mo><mn>1</mn><mo>−</mo><mfrac><mn>1</mn><msub><mi>p</mi><mn>1</mn></msub></mfrac><mo fence=\"true\">)</mo></mrow><mo>⋅</mo><mrow><mo fence=\"true\">(</mo><mn>1</mn><mo>−</mo><mfrac><mn>1</mn><msub><mi>p</mi><mn>2</mn></msub></mfrac><mo fence=\"true\">)</mo></mrow><mo>⋯</mo><mrow><mo fence=\"true\">(</mo><mn>1</mn><mo>−</mo><mfrac><mn>1</mn><msub><mi>p</mi><mi>s</mi></msub></mfrac><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">n=p_{1}^{a_{1}} \\cdot p_{2}^{a_2} \\cdots p_{s}{ }^{a_{s}}\\Rightarrow \\varphi(n)=n \\cdot\\left(1-\\frac{1}{p_{1}}\\right) \\cdot\\left(1-\\frac{1}{p_{2}}\\right) \\cdots\\left(1-\\frac{1}{p_{s}}\\right)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0126em;vertical-align:-0.266308em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.746292em;\"><span style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.1449000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266308em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0126em;vertical-align:-0.266308em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.746292em;\"><span style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.1449000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266308em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.80002em;vertical-align:-0.65002em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.80002em;vertical-align:-0.65002em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span></span></span></span>\n<ul>\n<li>证明：上一定理还可写成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>φ</mi><mrow><mo fence=\"true\">(</mo><msup><mi>p</mi><mi>a</mi></msup><mo fence=\"true\">)</mo></mrow><mo>=</mo><msup><mi>p</mi><mi>a</mi></msup><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mfrac><mn>1</mn><mi>p</mi></mfrac><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\varphi\\left(p^{a}\\right)=p^{a}(1-\\frac{1}{p})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.326216em;vertical-align:-0.481108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span></span> ，由欧拉函数是积性函数可得上式。</li>\n<li>推论：当 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 为奇数时, 有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>φ</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\varphi(2 n)=\\varphi(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>&gt;</mo><mn>2</mn><mo separator=\"true\">,</mo><mi>n</mi><mo>∈</mo><msup><mi>N</mi><mo>∗</mo></msup><mo>⇒</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">n&gt;2,n\\in N^*\\Rightarrow \\varphi(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.688696em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.688696em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 是偶数</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>∈</mo><msup><mi>N</mi><mo>∗</mo></msup><mo separator=\"true\">,</mo><msub><mo>∑</mo><mrow><mi>d</mi><mo>∣</mo><mi>n</mi></mrow></msub><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>d</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n\\in N^*,\\sum_{d\\mid n}\\varphi(d)=n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.22471em;vertical-align:-0.47471em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.688696em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.22528999999999993em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mrel mtight\">∣</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.47471em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span></li>\n<li>欧拉定理： <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 是一正整数, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 是一个整数且 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">(a, m)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>, 那么 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo>≡</mo></mrow><annotation encoding=\"application/x-tex\">a^{\\varphi(m)} \\equiv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">φ</span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">m</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo stretchy=\"false\">(</mo><mtext> </mtext><mo lspace=\"0.22em\" rspace=\"0.22em\"><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow></mo><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">1(\\bmod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace\" style=\"margin-right:0.05555555555555555em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.05555555555555555em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>p</mi><mo>=</mo><mn>0</mn><mo>⇒</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mi>p</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>⋅</mo><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">x\\mod p=0\\Rightarrow \\varphi(xp)=\\varphi(x)\\cdot p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> ，证明如下：\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,x]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span></span></span></span> 中与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 不互质的数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>+</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">y+x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 仍不互质，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>+</mo><mi>c</mi><mi>x</mi><mo separator=\"true\">,</mo><mi>c</mi><mo>≤</mo><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">y+cx,c\\leq p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304100000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 仍与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 不互质，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,x]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span></span></span></span> 区间中与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 不互质的数在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mi>c</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">+cx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">x</span></span></span></span> 后仍不互质。前面素数性质可证<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,x]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span></span></span></span> 中与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 互质的数在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mi>c</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">+cx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">x</span></span></span></span> 后仍互质。所以可得上述结论。</li>\n</ul>\n</li>\n</ul>\n<p>注：以下均来自kuangbin的模板</p>\n<h2 id=\"分解质因数法\">分解质因数法</h2>\n<p>上面第四条定理</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">Euler</span><span class=\"params\">(<span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">getFactors</span>(n); <span class=\"comment\">// 前面提过的分解质因数</span></span><br><span class=\"line\">    <span class=\"type\">int</span> ret = n;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; fatCnt; i++)</span><br><span class=\"line\">        ret = ret / factor[i][<span class=\"number\">0</span>] * (factor[i][<span class=\"number\">0</span>] - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"递推法\">递推法</h2>\n<p>将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\varphi(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 先置为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ，把<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">ki</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">i</span></span></span></span> 的原始<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>φ</mi></mrow><annotation encoding=\"application/x-tex\">\\varphi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">φ</span></span></span></span> 乘上这个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 做出的贡献。</p>\n<p>过程中，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>φ</mi></mrow><annotation encoding=\"application/x-tex\">\\varphi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">φ</span></span></span></span> 没有赋值说明是素数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> euler[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">getEuler</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(euler, <span class=\"number\">0</span>, <span class=\"built_in\">sizeof</span>(euler));</span><br><span class=\"line\">    euler[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt; N; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!euler[i])</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = i; j &lt; N; j += i)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!euler[j])</span><br><span class=\"line\">                    euler[j] = j;</span><br><span class=\"line\">                euler[j] = euler[j] / i * (i - <span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"求单个欧拉函数\">求单个欧拉函数</h2>\n<p>找素因子，用公式</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">euler</span><span class=\"params\">(<span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> ans = n;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i * i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (n % i == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ans -= ans / i;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (n % i == <span class=\"number\">0</span>)</span><br><span class=\"line\">                n /= i;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n &gt; <span class=\"number\">1</span>)</span><br><span class=\"line\">        ans -= ans / n;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"线性筛\">线性筛</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> check[N + <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> phi[N + <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> prime[N + <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> tot; <span class=\"comment\">//素数的个数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">phi_and_prime_table</span><span class=\"params\">(<span class=\"type\">int</span> N)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(check, <span class=\"literal\">false</span>, <span class=\"built_in\">sizeof</span>(check));</span><br><span class=\"line\">    phi[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    tot = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= N; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!check[i])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            prime[tot++] = i;</span><br><span class=\"line\">            phi[i] = i - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; tot; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i * prime[j] &gt; N)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            check[i * prime[j]] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i % prime[j] == <span class=\"number\">0</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                phi[i * prime[j]] = phi[i] * prime[j]; <span class=\"comment\">// 利用性质</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                phi[i * prime[j]] = phi[i] * (prime[j] - <span class=\"number\">1</span>); <span class=\"comment\">// 积性函数</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数学"],"tags":["ACM","数论"]},{"title":"【数学】博弈论","url":"/posts/dd7c09d3/","content":"<p>几个典型的博弈论问题</p>\n<span id=\"more\"></span>\n<p>博弈：每个人都会走当前最优策略，所以每个人都会尽量给对方创造必败态，给自己创造必胜态。</p>\n<h1 id=\"巴什博弈\">巴什博弈</h1>\n<h2 id=\"定义\">定义</h2>\n<p>只有一堆物品，共<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个，两人轮流从这堆物品中取物，规定每次至少取一个，最多取m个，最后取完这堆物品的人获胜。</p>\n<h2 id=\"结论\">结论</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">n\\neq 0(\\mod m+1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>，先手肯定获胜</p>\n<h2 id=\"证明\">证明</h2>\n<p>关于严格证明这里不多提，自己可以分析一下，每次给对手留剩<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">m+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的倍数，最后一轮自己一定获胜，所以就看第一次取，自己能否构建这个局势（剩下<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">m+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的倍数个物品），使得对手必输。每次后手走的时候都是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">m+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的局面，那么无论他怎么走，先手都可以使这个局面一直保持，最后一轮，后手一定拿不完，剩下的一定能一次拿完。</p>\n<h1 id=\"尼姆博弈\">尼姆博弈</h1>\n<p><s>讲到这个不得不想起大一微积分课老师搞的课前小游戏。。。现在想想好尴尬。。。（如果同学看到要掉码了救命）</s></p>\n<h2 id=\"定义\">定义</h2>\n<p>有任意堆物品，每堆物品的个数也任意，双方轮流取物品，每次只能从一堆中取至少一个物品，取到最后一件物品的人获胜。</p>\n<h2 id=\"结论\">结论</h2>\n<p>把每堆物品数全部异或起来，若值为0，则先手必败，否则先手必胜。</p>\n<h2 id=\"证明\">证明</h2>\n<p>也是不严格证明，我们将每堆物品数异或起来为0这个状态称为必败态，顾名思义，这个状态下，谁取谁必败。因为当这个状态时，经过两人轮流取物，后者始终可以维持这个必败态，即A取完后，B一定可以取一个数，使得取完后每堆物品数异或起来仍为0。这样一直到最后一轮，B取完一定会使每堆数都为0，此时同样也是必败态（异或起来为0），这时B获胜，A面对所有堆都为0这个状态取，直接失败。所以当每堆物品数全部异或起来，若值为0，此时已是必败态，先手必败；若值不为0，则先手一定会取一个数使得每堆数异或起来为0，达到必败态，从而后手必败。</p>\n<h1 id=\"斐波那契博弈-k倍动态减法\">斐波那契博弈（k倍动态减法）</h1>\n<h2 id=\"定义\">定义</h2>\n<p>有一堆物品，共n个，两人轮流取物，先手可取任意件，但不能不取，也不能把物品取完，之后每次取的物品数不能超过上一次的两倍，且至少为1件，取走最后一件物品的人获胜。</p>\n<h2 id=\"结论\">结论</h2>\n<p>当且仅当n不是斐波那契数时，先手胜。</p>\n<h2 id=\"证明\">证明</h2>\n<ul>\n<li>\n<p>Zeckendorf 定理（齐肯多夫定理）：任何正整数可以表示为若干个不连续的Fibonacci数之和。</p>\n</li>\n<li>\n<p>非斐波那契数：分解，每次都取最小堆，保证了下一个堆的最后一个一定是我取。</p>\n</li>\n<li>\n<p>斐波那契数：先手取不完，后手开始取一定能保证自己拿到最后一个（若剩非斐波那契，同上；若是斐波那契，一定能一下取完）</p>\n</li>\n<li>\n<p>这里面利用数学关系能严格证明。</p>\n</li>\n</ul>\n<h2 id=\"扩展：k倍动态减法\">扩展：k倍动态减法</h2>\n<h3 id=\"定义\">定义</h3>\n<p>有一堆物品，共n个，两人轮流取物，先手可取任意件，但不能不取，也不能把物品取完，之后每次取的物品数不能超过上一次的k倍，且至少为1件，取走最后一件物品的人获胜。</p>\n<p>和斐波那契博弈一样，只不过拿的不是2倍了，而是一个任意的k倍，当k为2时就是完全的斐波那契博弈了。</p>\n<h2 id=\"结论\">结论</h2>\n<p>我们手动构建一个a数列，若n是该数列中的数时，先手必败，否则后手必败。即该数列是必败态。</p>\n<ul>\n<li>当 k = 1 时，必败态为 n = 2 ^ i, 因为我们把数按二进制分解后，拿掉二进制的最后一个1，那么对方必然不能拿走倒数第二位的1，因为他不能拿的比你多。你只要按照这个策略对方一直都不可能拿完。所以你就会赢。而当分解的二进制中只有一个1时，因为第一次先手不能全部取完，所以后手一定有办法取到最后一个1，所以必败！<br>\n举个例子，当 n = 6 = （110）时:<br>\n第一轮：先手第一次取最右边的1，即2个，此时还剩4（100）个，后手能取1或2个；<br>\n第二轮：假如上轮后手取的两个，先手再取两个直接赢了<br>\n假如后手取了一个，那么还剩三个，自己只能去1个，以后也只能取一个，所以必胜！</li>\n<li>当 k = 2 时，赤裸裸的Fibonacci博弈了，具体这儿不多说，自己再上述博客已写的很明白了。其实n经拆解后也可以表示成二进制的形式，用 k = 1时的方法来理解，比如 n = 11 = 7 + 3 + 1，可表示成 10101；</li>\n<li>当 k 取任意非零正值时，重点来了：<br>\n犹如Fibonacci博弈，我们首先要求一个数列，将n分解成数列中一些项的和，然后就可以按Fibonacci博弈的解决方法来完成，也可以按二进制的方法来理解，每次取掉最后一个1 还是符合上面的条件。我们用a数组表示要被求的数列，b数组中的b[i]保存 a[0…i] 组合能够构造的最大数字。这儿有点难理解，所谓构造就是指n分解为Fib数相加的逆过程。举例说明，当k = 2 时，a[N]={1, 2, 3, 5, 8, 13, 21, 33…} （Fibonacci数组）；那么b[3] 即 1、2、 3 能够构造的最大数字，答案是4，有点匪夷所思？或许你会问为什么不是5、6或者其它的什么，其实是这样的 ，4 能分解成 1+3 是没有争议的，但5能分解成2+3吗? 不能，因为5本身也是Fibonacci数；6虽然能分解，但不是分解成1+2+3，而是分解成1+5。<br>\n经过上述，我们知道b[i] 是 a[0…i] 能够构造出的最大数字，那么a[i +1] = b[i]+1；因为a数组（Fib数组）所存的数字都是不可构造的（取到它本身就是必败态），显然a[0…i]构造的最大数字 + 1 即为下一个不可构造的数字了(a[i + 1])。<br>\n然后关于b[i]的计算，既然是a[0…i]构造最大数字，那么 a[i]是一定要选用的（这儿需要一定的推理，a[i]构造数字时，相邻的j个是不能同时用的，就像上述的2、3不能构造出5一样，推理请自己完成），那么要选用的下一项只能递减寻找，直到找到 a[t] 满足 a[t] * K &lt; a[i] ，而b[t]就是a[0…t]所能构造的最大数字，再加上a[i], 即为a[0…i]能构造的最大数字，于是b[i] = b[t] + a[i]。<br>\n求得数列后，之后的工作就简单了，跟Fibonacci博弈一样一样的，如果n=数列中的数，则必败，否则必胜；必胜时还要求输出第一步取法，其实就是分解的数列中最小的一个，将见代码。</li>\n</ul>\n<h1 id=\"威佐夫博弈\">威佐夫博弈</h1>\n<h2 id=\"定义\">定义</h2>\n<p>有两堆物品，数量分别为a个和b个，两人轮流取物，每次可以从一堆中取出任意个，也可以从两堆中取出相同数量的物品，每次至少要取一个，最后取完所有物品的人获胜。</p>\n<h2 id=\"结论\">结论</h2>\n<p>我们规定两堆数量为a和b且a &lt; b，若a和b的差值乘上1.618恰好是a的值，则次为必败态，先手必败。有时追求精度可记<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mi>n</mi><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mn>5</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>2</mn><mo stretchy=\"false\">)</mo><mo>∗</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mo>−</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">w = (int)[( (sqrt(5)+1) / 2) * (b-a)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mopen\">[</span><span class=\"mopen\">(</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord\">5</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span>，若w == a，则先手必败，否则先手必胜。</p>\n<h1 id=\"sg函数\">SG函数</h1>\n<p>解决公平组合游戏（Impartial Combinatorial Games，ICG）问题的一种方法</p>\n<h2 id=\"条件\">条件</h2>\n<ul>\n<li>两名玩家，轮流操作，无法操作者输</li>\n<li>每次操作在一个有限集合中选</li>\n<li>合法操作只取决于游戏局面且一定，与玩家无关</li>\n</ul>\n<h2 id=\"定义\">定义</h2>\n<p>设$sg(x)=\\text{mex} ({sg(y)|x\\rightarrow y})  $ ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>mex</mtext></mrow><annotation encoding=\"application/x-tex\">\\text{mex}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord text\"><span class=\"mord\">mex</span></span></span></span></span> 函数不用多说（一个集合中未出现的最小自然数），<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 状态可以一步操作到的状态，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 状态可以转移到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0,sg(x)-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 状态。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">sg(x)=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 为必败态；<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo mathvariant=\"normal\">≠</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">sg(x)\\neq 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 为必胜态，因为可以执行操作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">x\\rightarrow 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，使得对手必败。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// mex函数打表</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">mex</span><span class=\"params\">(<span class=\"keyword\">auto</span> v)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    unordered_set&lt;<span class=\"type\">int</span>&gt; S;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> e : v)</span><br><span class=\"line\">        S.<span class=\"built_in\">insert</span>(e);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>;; ++i)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (S.<span class=\"built_in\">find</span>(i) == S.<span class=\"built_in\">end</span>())</span><br><span class=\"line\">            <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"sprague-grundy定理\">Sprague-Grundy定理</h2>\n<p>ICG中每一局都是一些子游戏的组合。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mo>⊕</mo><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mo>⊕</mo><mo>⋯</mo><mi>s</mi><mi>g</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sg(x)=sg(x_1+x_2+\\cdots +x_n)=sg(x_1)\\oplus sg(x_2)\\oplus\\cdots sg(x_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⊕</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⊕</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p>状态<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">sg</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span></span></span></span> 值异或和不为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，则一定可以转移到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">sg</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span></span></span></span> 值异或和为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 的状态，即使对手必败。</p>\n<p>反过来，状态<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">sg</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span></span></span></span> 值异或为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ，则只能转移到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">sg</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span></span></span></span> 值异或和不为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 的状态，即对手必胜。</p>\n","categories":["ACM","数学"],"tags":["ACM","博弈论"]},{"title":"【数学】同余基本概念与快速幂","url":"/posts/ad294995/","content":"<p>同余基本概念与快速幂</p>\n<span id=\"more\"></span>\n<h1 id=\"基本概念与性质\">基本概念与性质</h1>\n<ul>\n<li>定义：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>≡</mo><mi>b</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a\\equiv b(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>定义的等价条件：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>∣</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>⇔</mo><mi mathvariant=\"normal\">∃</mi><mi>k</mi><mo>∈</mo><mi>N</mi><mo separator=\"true\">,</mo><mi>a</mi><mo>=</mo><mi>b</mi><mo>+</mo><mi>k</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m\\mid (a-b)\\Leftrightarrow \\exist k\\in N,a=b+km</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">∃</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">m</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo><mi>c</mi><mo>∈</mo><mi>N</mi><mo separator=\"true\">,</mo><mi>a</mi><mo>±</mo><mi>c</mi><mo>≡</mo><mi>b</mi><mo>±</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>a</mi><mi>c</mi><mo>≡</mo><mi>b</mi><mi>c</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow c\\in N,a\\pm c\\equiv b\\pm c(\\mod m),ac\\equiv bc(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">±</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">±</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo><msup><mi>a</mi><mi>n</mi></msup><mo>≡</mo><msup><mi>b</mi><mi>n</mi></msup><mo separator=\"true\">,</mo><mi>n</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow a^n\\equiv b^n,n&gt;0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>≡</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mtext>整系数多项式</mtext></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow f(a)\\equiv f(b),f(x)整系数多项式</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mord cjk_fallback\">整</span><span class=\"mord cjk_fallback\">系</span><span class=\"mord cjk_fallback\">数</span><span class=\"mord cjk_fallback\">多</span><span class=\"mord cjk_fallback\">项</span><span class=\"mord cjk_fallback\">式</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow\\gcd(a,m)=\\gcd(b,m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo separator=\"true\">,</mo><mi>d</mi><mo>∣</mo><mi>m</mi><mo>⇒</mo><mi>a</mi><mo>≡</mo><mi>b</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>d</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">,d\\mid m\\Rightarrow a\\equiv b(\\mod d)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>同余是等价关系（自反、对称、传递）</li>\n<li>模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 剩余类：将整数分成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 个集合使得任意两个整数模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 同余</li>\n<li>模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 完全剩余系：从模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 的每个剩余类中选一个数，构成的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 个数的集合</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>≡</mo><mi>b</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>c</mi><mo>≡</mo><mi>d</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo><mo>⇒</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>c</mi><mi>y</mi><mo>≡</mo><mi>b</mi><mi>x</mi><mo>+</mo><mi>d</mi><mi>y</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>N</mi><mo separator=\"true\">,</mo><mi>a</mi><mi>c</mi><mo>≡</mo><mi>b</mi><mi>d</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a\\equiv b(\\mod m),c\\equiv d(\\mod m)\\Rightarrow ax+cy\\equiv bx+dy(\\mod m),x,y\\in N,ac\\equiv bd(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65819em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>c</mi><mo>≡</mo><mi>b</mi><mi>c</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi><mo>⇒</mo><mi>a</mi><mo>≡</mo><mi>b</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mi mathvariant=\"normal\">/</mi><mi>d</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">ac\\equiv bc(\\mod m),\\gcd(c,m)=d\\Rightarrow a\\equiv b(\\mod m/d)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>b</mi><mo>≡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mi mathvariant=\"normal\">%</mi><mi>m</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mi mathvariant=\"normal\">%</mi><mi>m</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">ab\\equiv(a\\%m)(b\\%m)(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mord\">%</span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mord\">%</span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<h1 id=\"乘法改加法\">乘法改加法</h1>\n<p>防止乘法溢出的方法，原理跟计组里的乘法器很像：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 计算a*b mod m，防止溢出</span></span><br><span class=\"line\"><span class=\"comment\">// 其中里面的取模为了更快还可以改成if(ans &gt; m) ans -= m;</span></span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">multi_add</span><span class=\"params\">(ll a, ll b, ll m)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    a %= m;</span><br><span class=\"line\">    b %= m;</span><br><span class=\"line\">    ll ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (b &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b &amp; <span class=\"number\">1</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ans += a;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(ans &gt; m)</span><br><span class=\"line\">                ans -= m;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        b &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">        a &lt;&lt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(a &gt; m)</span><br><span class=\"line\">            a -= m;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"逆元\">逆元</h1>\n<p>定义：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>a</mi><mi>x</mi><mo>≡</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,m)=1,ax\\equiv 1(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 的解即为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 的逆。</p>\n<p>分数逆元：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>a</mi><mi>b</mi></mfrac><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo>=</mo><mi>a</mi><mo>⋅</mo><msup><mi>b</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">\\frac{a}{b}\\mod m=a\\cdot b^{-1} \\mod m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span></p>\n<h2 id=\"方法一：费马小定理\">方法一：费马小定理</h2>\n<p>定理：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>m</mi><mtext>为素数</mtext><mo>⇒</mo><msup><mi>a</mi><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>≡</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo><mo>⇔</mo><mi>a</mi><mo>⋅</mo><msup><mi>a</mi><mrow><mi>m</mi><mo>−</mo><mn>2</mn></mrow></msup><mo>≡</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,m)=1,m为素数\\Rightarrow a^{m-1}\\equiv 1(\\mod m)\\Leftrightarrow a\\cdot a^{m-2}\\equiv 1(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord cjk_fallback\">为</span><span class=\"mord cjk_fallback\">素</span><span class=\"mord cjk_fallback\">数</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>用快速幂求<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mi>p</mi><mo>−</mo><mn>2</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">a^{p-2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> 即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> ll <span class=\"title\">inv</span><span class=\"params\">(<span class=\"type\">int</span> a)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"built_in\">qpow</span>(a, m - <span class=\"number\">2</span>, m); &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"方法二：拓展欧几里得\">方法二：拓展欧几里得</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>⋅</mo><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>≡</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a\\cdot inv(a)\\equiv 1(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，拓展欧几里得解出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>x</mi><mo>+</mo><mi>m</mi><mi>y</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">ax+my=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 答案，注意防止负数即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> ll <span class=\"title\">inv</span><span class=\"params\">(ll a)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll x, y, d;</span><br><span class=\"line\">    <span class=\"built_in\">exgcd</span>(a, m, d, x, y);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> d == <span class=\"number\">1</span> ? (x % m + m) % m : <span class=\"number\">-1</span>; <span class=\"comment\">// 不互质无解</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"方法三：线性递推\">方法三：线性递推</h2>\n<p>将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 表示为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>=</mo><mi>k</mi><mi>x</mi><mo>+</mo><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">m=kx+y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> ，其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mo stretchy=\"false\">⌊</mo><mi>m</mi><mi mathvariant=\"normal\">/</mi><mi>x</mi><mo stretchy=\"false\">⌋</mo><mo separator=\"true\">,</mo><mi>y</mi><mo>=</mo><mi>m</mi><mi mathvariant=\"normal\">%</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">k=\\lfloor m/x\\rfloor,y=m\\%x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord mathdefault\">m</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">⌋</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord\">%</span><span class=\"mord mathdefault\">x</span></span></span></span> 。则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mi>x</mi><mo>+</mo><mi>y</mi><mo>≡</mo><mn>0</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">kx+y\\equiv 0(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65819em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，同乘<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">inv(x)inv(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> ，则有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>⋅</mo><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≡</mo><mn>0</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">k\\cdot inv(y)+inv(x)\\equiv 0(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，得<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≡</mo><mo>−</mo><mi>k</mi><mo>⋅</mo><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">inv(x)\\equiv -k\\cdot inv(y)(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><mi>k</mi><mo>⋅</mo><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><mo stretchy=\"false\">⌊</mo><mi>m</mi><mi mathvariant=\"normal\">/</mi><mi>x</mi><mo stretchy=\"false\">⌋</mo><mo>⋅</mo><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>m</mi><mi mathvariant=\"normal\">%</mi><mi>x</mi><mo stretchy=\"false\">)</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">inv(x)=-k\\cdot inv(y)=-\\lfloor m/x\\rfloor\\cdot inv(m\\%x)\\mod m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">⌊</span><span class=\"mord mathdefault\">m</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">⌋</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mord\">%</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> ，即一个数的逆元可由一个比它小的数的推出来。把负数消掉即可。</p>\n<p><strong>注：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 可以不是素数</strong></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// inv[1...last]是1...last的逆元</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(ll inv[], ll last, ll m)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    inv[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ll i = <span class=\"number\">2ll</span>; i &lt;= last;i++)</span><br><span class=\"line\">        inv[i] = (m - m / i) * inv[m % i] % m;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"阶乘逆元\">阶乘逆元</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// fac[i]=i!, inv[i]=inv(i!)</span></span><br><span class=\"line\"><span class=\"type\">int</span> fac[N],inv[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(<span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fac[<span class=\"number\">0</span>]=<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">        fac[i]=<span class=\"number\">1ll</span>*fac[i<span class=\"number\">-1</span>]*i%mod;</span><br><span class=\"line\">    inv[n]=<span class=\"built_in\">qpow</span>(fac[n],mod<span class=\"number\">-2</span>); <span class=\"comment\">// 快速幂</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=n<span class=\"number\">-1</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">        inv[i]=<span class=\"number\">1ll</span>*inv[i+<span class=\"number\">1</span>]*(i+<span class=\"number\">1</span>)%mod;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"快速幂\">快速幂</h1>\n<h2 id=\"普通快速幂\">普通快速幂</h2>\n<p>形式：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi>n</mi></msup><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">x^n \\mod m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span></p>\n<p>原理：将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 拆成二进制，原式变为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mrow><msub><mi>n</mi><mn>0</mn></msub><mo>×</mo><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msub><mi>n</mi><mn>1</mn></msub><mo>×</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>n</mi><mi>k</mi></msub><mo>×</mo><msup><mn>2</mn><mi>k</mi></msup></mrow></msup><mo>=</mo><msup><mi>x</mi><mrow><msub><mi>n</mi><mn>0</mn></msub><mo>×</mo><msup><mn>2</mn><mn>0</mn></msup></mrow></msup><mo>⋅</mo><msup><mi>x</mi><mrow><msub><mi>n</mi><mn>1</mn></msub><mo>×</mo><msup><mn>2</mn><mn>1</mn></msup></mrow></msup><mo>⋯</mo><msup><mi>x</mi><mrow><msub><mi>n</mi><mi>k</mi></msub><mo>×</mo><msup><mn>2</mn><mi>k</mi></msup></mrow></msup><mo>=</mo><mo stretchy=\"false\">(</mo><msup><mi>x</mi><msup><mn>2</mn><mn>0</mn></msup></msup><msup><mo stretchy=\"false\">)</mo><msub><mi>n</mi><mn>0</mn></msub></msup><mo>⋅</mo><mo stretchy=\"false\">(</mo><msup><mi>x</mi><msup><mn>2</mn><mn>1</mn></msup></msup><msup><mo stretchy=\"false\">)</mo><msub><mi>n</mi><mn>1</mn></msub></msup><mo>⋯</mo><mo stretchy=\"false\">(</mo><msup><mi>x</mi><msup><mn>2</mn><mi>k</mi></msup></msup><msup><mo stretchy=\"false\">)</mo><msub><mi>n</mi><mi>k</mi></msub></msup></mrow><annotation encoding=\"application/x-tex\">x^{n_0\\times 2^{0}+n_1\\times 2^{1}+\\cdots+n_k\\times 2^{k}}=x^{n_0\\times 2^{0}}\\cdot x^{n_1\\times 2^{1}}\\cdots x^{n_k\\times 2^{k}}=(x^{2^{0}})^{n_0}\\cdot(x^{2^{1}})^{n_1}\\cdots(x^{2^{k}})^{n_k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.01192em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01192em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mbin mtight\">+</span><span class=\"minner mtight\">⋯</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9270285714285713em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9869199999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9869199999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.01192em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9869199999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01192em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9270285714285713em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.23692em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9869199999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.26192em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9869199999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01192em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9270285714285713em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> ，每次计算都取模，结果不变。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 快速幂：计算x^n mod m</span></span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">qpow</span><span class=\"params\">(ll x, ll n, ll m)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll ans = <span class=\"number\">1ll</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (n &amp; <span class=\"number\">1</span>)</span><br><span class=\"line\">            ans = ans * x % m;</span><br><span class=\"line\">        x = x * x % m;</span><br><span class=\"line\">        n &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"矩阵快速幂\">矩阵快速幂</h2>\n<p>形式：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的矩阵<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span> 的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 次方：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mi>k</mi></msup></mrow><annotation encoding=\"application/x-tex\">A^k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></p>\n<p>与普通快速幂原理一样。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">matrix</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    ll a[N][N];</span><br><span class=\"line\">    ll m;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">matrix</span>(<span class=\"type\">int</span> x = <span class=\"number\">0</span>, ll mod) : <span class=\"built_in\">n</span>(x), <span class=\"built_in\">m</span>(mod) &#123;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">build</span><span class=\"params\">()</span> <span class=\"comment\">// 读入矩阵</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%lld&quot;</span>, &amp;m);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">                <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%lld&quot;</span>, &amp;a[i][j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> <span class=\"comment\">// 矩阵初始化为单位矩阵</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">            a[i][i] = <span class=\"number\">1ll</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    matrix <span class=\"keyword\">operator</span>*(<span class=\"type\">const</span> matrix &amp;b)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        matrix nxt;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> k = <span class=\"number\">1</span>; k &lt;= n; k++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">                    nxt.a[i][j] = (nxt.a[i][j] + a[i][k] % m * b.a[k][j] % m) % m;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nxt;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\">matrix <span class=\"title\">matrix_qpow</span><span class=\"params\">(matrix A, ll k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">matrix <span class=\"title\">ans</span><span class=\"params\">(A.n, A.m)</span></span>;</span><br><span class=\"line\">    ans.<span class=\"built_in\">init</span>();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (k)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k &amp; <span class=\"number\">1</span>)</span><br><span class=\"line\">            ans = ans * A;</span><br><span class=\"line\">        A = A * A;</span><br><span class=\"line\">        k &gt;&gt;= <span class=\"number\">1ll</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数学"],"tags":["ACM","数论"]},{"title":"【数学】同余方程解法合集","url":"/posts/803cb37b/","content":"<p>包括（一元、多元）线性同余方程（组）、高次同余方程的解法模板。</p>\n<span id=\"more\"></span>\n<h1 id=\"线性同余方程\">线性同余方程</h1>\n<h2 id=\"一元线性同余方程\">一元线性同余方程</h2>\n<p>形式：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>x</mi><mo>≡</mo><mi>b</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">ax\\equiv b(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，求解<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> ，引入逆元后可转化为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>≡</mo><mi>b</mi><msup><mi>a</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x\\equiv ba^{-1}(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>等价式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>x</mi><mo>+</mo><mi>m</mi><mi>y</mi><mo>=</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">ax+my=b,y\\in N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span></p>\n<p>有解：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,m)=d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo>∣</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">d\\mid b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 则有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> 个模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 不同余的解，否则无解</p>\n<p>解法：转化为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>x</mi><mo>+</mo><mi>m</mi><mi>y</mi><mo>=</mo><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">ax+my=d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> ，则乘<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mi mathvariant=\"normal\">/</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">b/d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">d</span></span></span></span> 即可得到原式的解。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 求解ax+my=b的x，即ax==b(mod m)，答案存在ans[0...d-1]中，返回值d为答案个数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">mod_equation</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b, <span class=\"type\">int</span> m)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">exgcd</span>(a, m, d, x, y);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (b % d) <span class=\"comment\">// 无解</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    x = x * (b / d) % m;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; d; i++)</span><br><span class=\"line\">        ans[i] = (x + i * m / d) % m;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> d;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"一元线性同余方程组\">一元线性同余方程组</h2>\n<p>形如：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.3599999999999999em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>≡</mo><msub><mi>a</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><msub><mi>m</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>≡</mo><msub><mi>a</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><msub><mi>m</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi><mi mathvariant=\"normal\">⋮</mi><mpadded height=\"+0em\" voffset=\"0em\"><mspace mathbackground=\"black\" width=\"0em\" height=\"1.5em\"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>≡</mo><msub><mi>a</mi><mi>n</mi></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><msub><mi>m</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding=\"application/x-tex\">\\begin{cases}\nx\\equiv a_1&amp;(\\mod m_1)\\\\\nx\\equiv a_2&amp;(\\mod m_2)\\\\\n&amp;\\vdots \\\\\nx\\equiv a_n&amp;(\\mod m_n)\\\\\n\\end{cases}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.252000000000001em;vertical-align:-2.876em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2500200000000006em;\"><span style=\"top:-1.2999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-1.2949899999999999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.58999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.8849900000000002em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.17999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.2049900000000004em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-3.1500100000000004em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.29501em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.59001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.885010000000001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-5.180010000000001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-5.205010000000001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-5.50002em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.3760000000000003em;\"><span style=\"top:-5.868em;\"><span class=\"pstrut\" style=\"height:3.5em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-4.428000000000001em;\"><span class=\"pstrut\" style=\"height:3.5em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.4960000000000004em;\"><span class=\"pstrut\" style=\"height:3.5em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.056em;\"><span class=\"pstrut\" style=\"height:3.5em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.876em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:1em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.3760000000000003em;\"><span style=\"top:-6.0555em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-4.615500000000001em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.6835000000000004em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">⋮</span><span class=\"mord rule\" style=\"border-right-width:0em;border-top-width:1.5em;bottom:0em;\"></span></span></span></span><span style=\"top:-1.2435em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.876em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<h3 id=\"方法一：两两相消\">方法一：两两相消</h3>\n<p>先看两个方程：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.3599999999999999em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>≡</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><msub><mi>m</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>≡</mo><msub><mi>a</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><msub><mi>m</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding=\"application/x-tex\">\\begin{cases}\nx\\equiv a_1(\\mod m_1)\\\\\nx\\equiv a_2(\\mod m_2)\\\\\n\\end{cases}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.0000299999999998em;vertical-align:-1.25003em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em;\"><span style=\"top:-3.69em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>转化为</p>\n<p class='katex-block katex-error' title='ParseError: KaTeX parse error: No such environment: numcases at position 7: \\begin{̲n̲u̲m̲c̲a̲s̲e̲s̲}̲{}\nx+m_1k_1=a_1…'>\\begin{numcases}{}\nx+m_1k_1=a_1\\tag{1}\\\\\nx+m_2k_2=a_2\\\\\n\\end{numcases}\n</p>\n<p>则得到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>−</mo><msub><mi>m</mi><mn>1</mn></msub><msub><mi>k</mi><mn>1</mn></msub><mo>=</mo><msub><mi>a</mi><mn>2</mn></msub><mo>−</mo><msub><mi>m</mi><mn>2</mn></msub><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_1-m_1k_1=a_2-m_2k_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mn>1</mn></msub><msub><mi>k</mi><mn>1</mn></msub><mo>−</mo><msub><mi>m</mi><mn>2</mn></msub><msub><mi>k</mi><mn>2</mn></msub><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">m_1k_1-m_2k_2=a_1-a_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，则有解的等价条件为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mo>∣</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd(m_1,m_2)\\mid(a_1-a_2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 。用上一节的一元线性同余方程解法解出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">k_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的一个特解<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>k</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">k&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> ，于是通解<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub><mo>=</mo><msup><mi>k</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>+</mo><mfrac><mrow><mi>c</mi><msub><mi>m</mi><mn>2</mn></msub></mrow><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mfrac><mo separator=\"true\">,</mo><mi>c</mi><mo>∈</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">k_1=k&#x27;+\\frac{cm_2}{\\gcd(m_1,m_2)},c\\in N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.835222em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2314919999999998em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7114919999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span><span class=\"mtight\">c</span><span class=\"mtight\">d</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">c</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 。代入<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 式可得，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><mo>−</mo><msub><mi>m</mi><mn>1</mn></msub><msup><mi>k</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>+</mo><mfrac><mrow><mi>c</mi><msub><mi>m</mi><mn>1</mn></msub><msub><mi>m</mi><mn>2</mn></msub></mrow><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">x=a_1-m_1k&#x27;+\\frac{cm_1m_2}{\\gcd(m_1,m_2)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.901892em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2314919999999998em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7114919999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span><span class=\"mtight\">c</span><span class=\"mtight\">d</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">c</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 。于是转换为了新的同余方程：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>≡</mo><msub><mi>a</mi><mn>1</mn></msub><mo>−</mo><msub><mi>m</mi><mn>1</mn></msub><msup><mi>k</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x\\equiv a_1-m_1k&#x27;(\\mod \\text{lcm}(m_1,m_2))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46375em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span> 。依次合并即可解得最终答案。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 求解 x==a[] mod m[]，数组从0开始编号，共n个式子</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">mod_equations</span><span class=\"params\">(<span class=\"type\">int</span> a[], <span class=\"type\">int</span> m[], <span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> a1 = a[<span class=\"number\">0</span>], a2, m1 = m[<span class=\"number\">0</span>], m2, k1, k, d;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        a2 = a[i], m2 = m[i];</span><br><span class=\"line\">        <span class=\"type\">int</span> k2, tmp;</span><br><span class=\"line\">        <span class=\"built_in\">exgcd</span>(m1, m2, d, k1, k2);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((a2 - a1) % d)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        tmp = m2 / d;</span><br><span class=\"line\">        k1 = (k1 * (a2 - a1) / d % tmp + tmp) % tmp; <span class=\"comment\">// 特解k&#x27;，保证最小正数</span></span><br><span class=\"line\">        a1 += m1 * k1;</span><br><span class=\"line\">        m1 *= m2 / d;</span><br><span class=\"line\">        a1 = (a1 + m1) % m1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a1; <span class=\"comment\">// 通解是a1+cm1,c是整数</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"方法二：中国剩余定理\">方法二：中国剩余定理</h3>\n<p>条件：原方程组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>m</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">m_1,m_2\\cdots m_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> <strong>互素</strong></p>\n<p>定理：有模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo>=</mo><msub><mi>m</mi><mn>1</mn></msub><mo>⋅</mo><msub><mi>m</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>m</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">M=m_1\\cdot m_2\\cdots m_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.59445em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的唯一解</p>\n<p>推导：令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>M</mi><mi>i</mi></msub><mo>=</mo><mi>M</mi><mi mathvariant=\"normal\">/</mi><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">M_i=M/m_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，由互素知<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>M</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>m</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\gcd(M_i,m_i)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，又<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>M</mi><mi>i</mi></msub><mo>⋅</mo><msubsup><mi>M</mi><mi>i</mi><mrow><mo>−</mo><mn>1</mn></mrow></msubsup><mo>≡</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><msub><mi>m</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">M_i\\cdot M_i^{-1}\\equiv 1(\\mod m_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.131103em;vertical-align:-0.276864em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854239em;\"><span style=\"top:-2.4231360000000004em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span><span style=\"top:-3.1031310000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.276864em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，则通解为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>M</mi><mo>+</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>a</mi><mi>i</mi></msub><msub><mi>M</mi><mi>i</mi></msub><msubsup><mi>M</mi><mi>i</mi><mrow><mo>−</mo><mn>1</mn></mrow></msubsup></mrow><annotation encoding=\"application/x-tex\">cM+\\sum_{i=1}^{n}a_iM_iM_i^{-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.153949em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854239em;\"><span style=\"top:-2.4231360000000004em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span><span style=\"top:-3.1031310000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.276864em;\"><span></span></span></span></span></span></span></span></span></span> 。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 中国剩余定理解一元线性同余方程组，数组从0标号</span></span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">CRT</span><span class=\"params\">(<span class=\"type\">int</span> a[], <span class=\"type\">int</span> m[], <span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll M = <span class=\"number\">1ll</span>, ans = <span class=\"number\">0</span>, tmp;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">        M *= m[i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        tmp = M / m[i];</span><br><span class=\"line\">        ans = (ans + a[i] * tmp % M * <span class=\"built_in\">inv</span>(tmp) % M) % M;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"多元线性同余方程\">多元线性同余方程</h2>\n<p>形如：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>n</mi></msub><msub><mi>x</mi><mi>n</mi></msub><mo>≡</mo><mi>b</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a_1x_1+a_2x_2+\\cdots+a_nx_n\\equiv b(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.61375em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>由<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><mi>y</mi><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a_1x+a_2y=\\gcd(a_1,a_2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 有解可知左式能表达<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>c</mi><mo>∈</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">c\\gcd(a_1,a_2),c\\in N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> ；引入<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mi>x</mi><mo>+</mo><msub><mi>a</mi><mn>3</mn></msub><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">gcd(a_1,a_2)x+a_3y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 可以表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>3</mn></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>c</mi><mo>∈</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">c\\gcd(a_1,a_2,a_3),c\\in N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 。以此类推，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>n</mi></msub><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_1x_1+a_2x_2+\\cdots+a_nx_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></p>\n<p>可以表达<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>c</mi><mo>∈</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">c\\gcd(a_1,a_2,\\cdots,a_n),c\\in N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> ，因此有解的条件为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>∣</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\gcd(a_1,a_2,\\cdots, a_n,m)\\mid b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 。</p>\n<p>一个很好理解的推导：我们将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 添加到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 数列中，仍设数量为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 。设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><msub><mi>d</mi><mn>1</mn></msub><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d=\\gcd(a_1,a_2,\\cdots, a_n),d_1=\\gcd(a_1,a_2,\\cdots, a_{n-1})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，于是有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">\\gcd(d_1,a_n)=d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> ，则原式转化为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><msub><mi>d</mi><mn>1</mn></msub><mi>k</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a_nx_n+d_1k=b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> ，可以通过前面一元线性同余方程的解法解出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>n</mi></msub><mo separator=\"true\">,</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">x_n,k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ，则问题转化为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>d</mi><mn>1</mn></msub><mo>∗</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">a_1x_1+a_2x_2+\\cdots+a_{n-1}x_{n-1}=d_1*k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>，仍采取相同的解法。</p>\n<p>但<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 求每次的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span></span></span></span> 显然不现实。设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d_i=\\gcd(a_1,a_2,\\cdots,a_{i})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo stretchy=\"false\">[</mo><mn>1...</mn><mi>n</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">x[1...n]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">]</span></span></span></span> 表示解（从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 标号，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">[</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">a[n+1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> ）则可以求解<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub><msub><mi>X</mi><mi>i</mi></msub><mo>+</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">d_iX_i+a_{i+1}y_i=d_{i+1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span> 的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">X_i,y_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 。观察最后一个式子：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>n</mi></msub><msub><mi>X</mi><mi>n</mi></msub><mo>+</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><msub><mi>y</mi><mi>n</mi></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">d_{n}X_{n}+a_{n+1}y_{n}=d_{n+1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span> ，要求解答案，等式两边乘上<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo>=</mo><mfrac><mi>b</mi><msub><mi>d</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub></mfrac></mrow><annotation encoding=\"application/x-tex\">c=\\frac{b}{d_{n+1}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.366873em;vertical-align:-0.486765em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173142857142857em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20252142857142857em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.486765em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> ，所以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>y</mi><mi>n</mi></msub><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">x_{n+1}=y_{n}c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\">c</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo>−</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>d</mi><mi>n</mi></msub><msub><mi>X</mi><mi>n</mi></msub><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">b-a_{n+1}x_{n+1}=d_{n}X_{n}c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\">c</span></span></span></span> ；则前一个式子<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>X</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mi>n</mi></msub><msub><mi>y</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>d</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_{n-1}X_{n-1}+a_{n}y_{n-1}=d_{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，要求解答案，等式两边乘上<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>c</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>=</mo><mi>c</mi><msub><mi>X</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">c&#x27;=cX_{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，依次求解即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 求解a1x1+a2x2+...+anxn==b mod m，a从1开始标号</span></span><br><span class=\"line\"><span class=\"type\">int</span> X[N], y[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">mod_Xn_equation</span><span class=\"params\">(<span class=\"type\">int</span> a[], <span class=\"type\">int</span> b, <span class=\"type\">int</span> m, <span class=\"type\">int</span> n, <span class=\"type\">int</span> x[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    a[n + <span class=\"number\">1</span>] = m;</span><br><span class=\"line\">    <span class=\"type\">int</span> d = a[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= n + <span class=\"number\">1</span>; i++)</span><br><span class=\"line\">        d = <span class=\"built_in\">exgcd</span>(d, a[i], X[i - <span class=\"number\">1</span>], y[i - <span class=\"number\">1</span>]); <span class=\"comment\">// 这个exgcd返回求解的ax+by=d的</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (b % d)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> c = b / d;</span><br><span class=\"line\">    x[n + <span class=\"number\">1</span>] = y[n] * c;</span><br><span class=\"line\">    y[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = n; i &gt;= <span class=\"number\">1</span>; i--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        c = (c * X[i] % m + m) % m;</span><br><span class=\"line\">        x[i] = (y[i - <span class=\"number\">1</span>] * c % m + m) % m;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"高次同余方程\">高次同余方程</h1>\n<p>只考虑：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mi>x</mi></msup><mo>≡</mo><mi>b</mi><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a^x\\equiv b(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>为保持统一，放一下手写哈希</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// (x,y)的HASH</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MOD 76543</span></span><br><span class=\"line\"><span class=\"type\">int</span> hs[MOD], head[MOD], nxt[MOD], id[MOD], top;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k = x % MOD;</span><br><span class=\"line\">    hs[top] = x, id[top] = y, nxt[top] = head[k], head[k] = top++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k = x % MOD;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head[k]; i != <span class=\"number\">-1</span>; i = nxt[i])</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hs[i] == x)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> id[i];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"bsgs算法\">BSGS算法</h2>\n<p>条件：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,m)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<p>令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>k</mi><mi>s</mi><mo>−</mo><mi>t</mi><mo separator=\"true\">,</mo><mi>s</mi><mo>=</mo><mo stretchy=\"false\">⌈</mo><msqrt><mi>m</mi></msqrt><mo stretchy=\"false\">⌉</mo><mo separator=\"true\">,</mo><mn>0</mn><mo>≤</mo><mi>t</mi><mo>&lt;</mo><mi>s</mi><mo separator=\"true\">,</mo><mn>0</mn><mo>&lt;</mo><mi>k</mi><mo>≤</mo><mi>s</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x=ks-t,s=\\lceil \\sqrt m\\rceil,0\\leq t&lt;s,0&lt;k\\leq s+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">s</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.05028em;vertical-align:-0.25em;\"></span><span class=\"mopen\">⌈</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8002800000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathdefault\" style=\"padding-left:0.833em;\">m</span></span><span style=\"top:-2.76028em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.23972em;\"><span></span></span></span></span></span><span class=\"mclose\">⌉</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65418em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> （<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span></span></span></span> 的取值有严格证明这样复杂度最低），则原式变为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mi>k</mi><mi>s</mi></mrow></msup><mo>≡</mo><mi>b</mi><msup><mi>a</mi><mi>t</mi></msup><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a^{ks}\\equiv ba^{t}(\\mod m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.043556em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span></span></span></span> ，枚举可能的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> ，存下<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><msup><mi>a</mi><mi>t</mi></msup></mrow><annotation encoding=\"application/x-tex\">ba^t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7935559999999999em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span></span></span></span></span></span></span></span></span> 的哈希值，再枚举左边的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 算<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mi>k</mi><mi>s</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">a^{ks}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span></span></span></span></span></span></span></span> 查表。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 普通BSGS: a^x==b mod m, gcd(a,m)=1</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">BSGS</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b, <span class=\"type\">int</span> m)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(b == <span class=\"number\">1</span> || m == <span class=\"number\">1</span>) <span class=\"comment\">// 注意这里的特判</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> s = <span class=\"built_in\">sqrt</span>(m) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(head,<span class=\"number\">-1</span>,<span class=\"built_in\">sizeof</span>(head));</span><br><span class=\"line\">    top=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, tmp = b; i &lt; s; i++, tmp = tmp * a % m)</span><br><span class=\"line\">        <span class=\"built_in\">insert</span>(tmp, i);</span><br><span class=\"line\">    <span class=\"type\">int</span> as = <span class=\"built_in\">qpow</span>(a, s, m); <span class=\"comment\">// 快速幂算a^s</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>, tmp = as; i &lt;= s + <span class=\"number\">1</span>; i++, tmp = tmp * as % m)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> qry = <span class=\"built_in\">find</span>(tmp);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (qry == <span class=\"number\">-1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> i * s - qry;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"扩展bsgs算法\">扩展BSGS算法</h2>\n<p>条件：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi><mo mathvariant=\"normal\">≠</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,m)=d\\neq 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<p>等价变换为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mi>x</mi></msup><mo>+</mo><mi>m</mi><mi>y</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a^x+my=b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.747722em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> ，有解的条件是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo>∣</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">d\\mid b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 。两边同除<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> ，则变为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>a</mi><mi>d</mi></mfrac><msup><mi>a</mi><mrow><mi>x</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mi>y</mi><mfrac><mi>m</mi><mi>d</mi></mfrac><mo>=</mo><mfrac><mi>b</mi><mi>d</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{a}{d}a^{x-1}+y\\frac{m}{d}=\\frac{b}{d}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1591079999999998em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> ，不断检查<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mfrac><mi>m</mi><mi>d</mi></mfrac><mo separator=\"true\">,</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd(\\frac{m}{d},a)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.095em;vertical-align:-0.345em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mclose\">)</span></span></span></span> 并除掉，直到为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，记每次除的数乘积为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span> ，则原式变为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><msup><mi>a</mi><mi>k</mi></msup><mi>D</mi></mfrac><msup><mi>a</mi><mrow><mi>x</mi><mo>−</mo><mi>k</mi></mrow></msup><mo>+</mo><mi>y</mi><mfrac><mi>m</mi><mi>D</mi></mfrac><mo>=</mo><mfrac><mi>b</mi><mi>D</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{a^k}{D}a^{x-k}+y\\frac{m}{D}=\\frac{b}{D}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3879199999999998em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0429199999999998em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9270285714285713em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> ，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mi>x</mi><mo>−</mo><mi>k</mi></mrow></msup><mo>≡</mo><mfrac><mi>b</mi><mi>D</mi></mfrac><mi>i</mi><mi>n</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mfrac><msup><mi>a</mi><mi>k</mi></msup><mi>D</mi></mfrac><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mfrac><mi>m</mi><mi>D</mi></mfrac><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a^{x-k}\\equiv \\frac{b}{D}inv(\\frac{a^k}{D})(\\mod \\frac{m}{D})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3879199999999998em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0429199999999998em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9270285714285713em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.095em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span></span> ，用BSGS求解即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">exBSGS</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b, <span class=\"type\">int</span> m)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (b == <span class=\"number\">1</span> || m == <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> k = <span class=\"number\">0</span>, atmp = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> tmp = __gcd(m, a);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (tmp == <span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(b % tmp)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        b /= tmp, m /= tmp, k++;</span><br><span class=\"line\">        atmp = atmp * (a / tmp) % m;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b == atmp)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> k;</span><br><span class=\"line\">    &#125; <span class=\"comment\">// 此时b=b/D, m=m/D, atmp=a^k / D</span></span><br><span class=\"line\">    <span class=\"type\">int</span> ans = <span class=\"built_in\">BSGS</span>(a, b * <span class=\"built_in\">inv</span>(atmp, m) % m, m);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans == <span class=\"number\">-1</span> ? ans  + k;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数学"],"tags":["ACM","数论"]},{"title":"【数学】摩尔投票","url":"/posts/e527845/","content":"<p>m摩尔投票是解决绝对众数的算法。</p>\n<span id=\"more\"></span>\n<p>其实好像也不完全算数学…但就归给数学吧。以前见过但没写过题，力扣每日一题惊到我了居然真的有题…</p>\n<h1 id=\"概念\">概念</h1>\n<p>绝对众数：在一个集合中，某一个元素的出现次数比其他所有元素的出现次数之和还多，这个元素就为这个集合的绝对众数。</p>\n<p>即，绝对众数的出现次数大于集合元素数的一半。</p>\n<h1 id=\"普通摩尔投票\">普通摩尔投票</h1>\n<p>原理很简单，扫一遍数组，用<code>m</code>记当前考虑的绝对众数，维护<code>cnt</code>，每遇到<code>m</code>就<code>cnt++</code>，否则<code>cnt--</code>。每扫一个新数时，如果<code>cnt=0</code>就说明先前的区间里的<code>m</code>已经没有优势，所以新数可以成为绝对众数的候选，将<code>m</code>改为新数。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> m = <span class=\"number\">0</span>, cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; ++i)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (cnt == <span class=\"number\">0</span>)</span><br><span class=\"line\">        m = a[i];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (m == a[i])</span><br><span class=\"line\">        cnt++;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        cnt--;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但这个算法得出来的<code>m</code>不一定是绝对众数（一个集合可能没有绝对众数），一定要验证，原理简单写一下：</p>\n<p>设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mo stretchy=\"false\">{</mo><mi>x</mi><mi mathvariant=\"normal\">∣</mi><msub><mi>a</mi><mi>x</mi></msub><mo>=</mo><mi>i</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">index_i=\\{x|a_x=i\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">x</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">}</span></span></span></span> ，即保存数的下标集合，为了验证数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 是否为绝对众数，只需检查集合<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">index_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的大小是否大于数组长度的一半即可。</p>\n<h1 id=\"拓展摩尔投票\">拓展摩尔投票</h1>\n<p>选出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个数，每个数的个数都超过集合总元素数的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{k+1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2484389999999999em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> m[N], cnt[N];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> e : nums) &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> i = <span class=\"built_in\">find</span>(m, m + N, e) - m;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i != N) &#123; <span class=\"comment\">// 是候选</span></span><br><span class=\"line\">        cnt[i]++;</span><br><span class=\"line\">        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> j = <span class=\"built_in\">find</span>(cnt, cnt + N, <span class=\"number\">0</span>) - cnt;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j != N) &#123; <span class=\"comment\">// 存在一个位置可以称为新的候选</span></span><br><span class=\"line\">        m[j] = e;</span><br><span class=\"line\">        cnt[j] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> &amp;c : cnt) <span class=\"comment\">// 既不是候选又不能成为新的候选，每个候选的cnt都要-1</span></span><br><span class=\"line\">        c--;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>同样也需要验证每个数。</p>\n<h1 id=\"区间绝对众数\">区间绝对众数</h1>\n<p>线段树建树<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，线段树查询<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，区间绝对众数验证<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 。</p>\n<p>考虑线段树的两个节点，分别记录了一个区间的<code>cnt</code>和<code>m</code>，那么两个区间合并时，如果两边的<code>m</code>相同，那<code>cnt</code>直接相加即可；否则取<code>cnt</code>大的一边的<code>m</code>作为大区间的<code>m</code>，子区间<code>cnt</code>差绝对值作为大区间的<code>cnt</code>：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Node</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> m, cnt;</span><br><span class=\"line\">    Node <span class=\"keyword\">operator</span> + (<span class=\"type\">const</span> Node&amp; rhs) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(m == rhs.m) </span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;m, cnt + rhs.cnt&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(cnt &gt; rhs.cnt)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;m, cnt - rhs.cnt&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;rhs.m, rhs.cnt - cnt&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>在定义了节点加法运算后，线段树写起来就非常普通了，这里不贴代码了。</p>\n<p>对于区间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> ，线段树求得<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">index</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">x</span></span></span></span> 数组定义同普通摩尔投票，那么区间中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 的个数可以这样求：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">count_seg</span><span class=\"params\">(<span class=\"type\">int</span> m,<span class=\"type\">int</span> l,<span class=\"type\">int</span> r)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">upper_bound</span>(cnt[rt].<span class=\"built_in\">begin</span>(), cnt[rt].<span class=\"built_in\">end</span>(), r) </span><br><span class=\"line\">        - <span class=\"built_in\">upper_bound</span>(cnt[rt].<span class=\"built_in\">begin</span>(), cnt[rt].<span class=\"built_in\">end</span>(), l - <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>只要验证个数大于区间的一半即可：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">count_seg</span>(m, l, r) &gt;= (r - l + <span class=\"number\">1</span>) * <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n","categories":["ACM","数学"],"tags":["ACM"]},{"title":"【数学】素数基本概念、性质、定理、猜想","url":"/posts/79660f7e/","content":"<p>素数相关的基本概念、性质、定理、猜想和梅森素数。</p>\n<span id=\"more\"></span>\n<h1 id=\"基本概念与性质\">基本概念与性质</h1>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">&gt;1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>，正整数，除了<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 和本身不能被其他数整除</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo>&gt;</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>d</mi><mo>∈</mo><msup><mi>N</mi><mo>∗</mo></msup><mo separator=\"true\">,</mo><mi>p</mi><mtext>是素数，</mtext><mi>d</mi><mi mathvariant=\"normal\">∣</mi><mi>p</mi><mo>⇒</mo><mi>d</mi><mo>=</mo><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">d&gt;1,d\\in N^*,p是素数，d|p\\Rightarrow d=p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.688696em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord cjk_fallback\">是</span><span class=\"mord cjk_fallback\">素</span><span class=\"mord cjk_fallback\">数</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">d</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 是素数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi mathvariant=\"normal\">∣</mi><mi>a</mi><mi>b</mi><mo>⇒</mo><mi>p</mi><mi mathvariant=\"normal\">∣</mi><mi>a</mi><mspace width=\"1em\"/><mi>o</mi><mi>r</mi><mspace width=\"1em\"/><mi>p</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">p|ab\\Rightarrow p|a\\quad or\\quad p|b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span></span></span></span></li>\n<li>素数无穷多</li>\n<li>每个大于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的正整数都有一个素因子</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 是合数，则必有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≤</mo><msqrt><mi>n</mi></msqrt></mrow><annotation encoding=\"application/x-tex\">\\leq \\sqrt n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.04em;vertical-align:-0.23972em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8002800000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathdefault\" style=\"padding-left:0.833em;\">n</span></span><span style=\"top:-2.76028em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.23972em;\"><span></span></span></span></span></span></span></span></span> 的素因子</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo>⇒</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\gcd(m,n)=1\\Rightarrow \\gcd(m,n+m)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> （反证法）</li>\n</ul>\n<h1 id=\"定理与猜想\">定理与猜想</h1>\n<h2 id=\"猜想\">猜想</h2>\n<ul>\n<li>伯特兰猜想：任意正整数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> （大于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ），存在素数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>&lt;</mo><mi>p</mi><mo>&lt;</mo><mn>2</mn><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n&lt;p&lt;2n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">n</span></span></span></span></li>\n<li>孪生素数猜想：存在无穷多的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">p+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 的素数对</li>\n<li>哥德巴赫猜想：每个大于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 的正偶数可以写成两个素数之和</li>\n</ul>\n<h2 id=\"素数定理\">素数定理</h2>\n<ul>\n<li>\n<p>定义<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>π</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\pi(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span></span></span></span> 表示小于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 的素数个数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>π</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mi>x</mi><mrow><mi>ln</mi><mo>⁡</mo><mi>x</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\pi(x)=\\frac{x}{\\ln x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">n</span></span><span class=\"mspace mtight\" style=\"margin-right:0.19516666666666668em;\"></span><span class=\"mord mathdefault mtight\">x</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n</li>\n<li>\n<p>推论：定义<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">p_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 为第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个素数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mi>n</mi></msub><mo>∼</mo><mi>n</mi><mi>ln</mi><mo>⁡</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">p_n \\sim n\\ln n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∼</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">ln</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span></p>\n</li>\n</ul>\n<h2 id=\"算术基本定理\">算术基本定理</h2>\n<ul>\n<li>\n<p>定理：每个大于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的正整数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 都可以被唯一的写成素数的乘积<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><msup><msub><mi>p</mi><mn>1</mn></msub><msub><mi>α</mi><mn>1</mn></msub></msup><msup><msub><mi>p</mi><mn>2</mn></msub><msub><mi>α</mi><mn>2</mn></msub></msup><mo>⋯</mo><msup><msub><mi>p</mi><mi>k</mi></msub><msub><mi>α</mi><mi>k</mi></msub></msup><mo separator=\"true\">,</mo><msub><mi>p</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>p</mi><mn>2</mn></msub><mo>&lt;</mo><mo>⋯</mo><mo>&lt;</mo><msub><mi>p</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">n={p_1}^{\\alpha_1}{p_2}^{\\alpha_2}\\cdots{p_k}^{\\alpha_k},p_1&lt;p_2&lt;\\cdots&lt;p_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.858832em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.0037em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.0037em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:-0.0037em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 且是素数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>α</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>α</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><msub><mi>α</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\alpha_1,\\alpha_2,\\cdots \\alpha_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是正整数。</p>\n</li>\n<li>\n<p>设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">d(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的正因子个数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\phi(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">ϕ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的所有因子之和，则有</p>\n<p class='katex-block katex-error' title='ParseError: KaTeX parse error: Expected group after &#039;\\frac&#039; at end of input: … \n\\phi(n)=\\frac'>d(n)=(\\alpha_1+1)(\\alpha_2+1)\\cdots(\\alpha_k+1)\\\\ \n\\phi(n)=\\frac</p>\n</li>\n</ul>\n","categories":["ACM","数学"],"tags":["ACM","数论","素数"]},{"title":"【数学】素数筛法、判断法与数的分解","url":"/posts/c620b1db/","content":"<p>素数筛法（埃式筛、欧拉筛、区间筛）、素数判断法（朴素、模6、Miller-Rabin及改进）、数的分解（朴素、Pollard-rho）</p>\n<span id=\"more\"></span>\n<h1 id=\"素数筛法\">素数筛法</h1>\n<h2 id=\"埃式筛法\">埃式筛法</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nloglogn)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> b[N];</span><br><span class=\"line\"><span class=\"type\">bool</span> prime[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt;= x; i++)</span><br><span class=\"line\">        prime[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    b[<span class=\"number\">0</span>] = b[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= x; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b[i])</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = i &lt;&lt; <span class=\"number\">1</span>; j &lt;= x; j += i)</span><br><span class=\"line\">                prime[j] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"欧拉筛法\">欧拉筛法</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>过程：以<code>check[i]=0</code>记<code>i</code>为素数。筛<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 时，已知质数<code>prime[0...tot]</code>，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>×</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">i\\times prime[j]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span></span></span></span> 一定不是质数，如果超出了要求的范围，或<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mi mathvariant=\"normal\">∣</mi><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">prime[j]|i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">i</span></span></span></span> 时<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 不再增加。</p>\n<p>停止条件的原因：对于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mi mathvariant=\"normal\">∣</mi><mi>i</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>=</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo>×</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">prime[j]|i,i=prime[j]\\times k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ，未来一定会筛到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>×</mo><mi>i</mi><mo>=</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo>×</mo><mi>k</mi><mo>×</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">x=prime[j+1]\\times i=prime[j] \\times k\\times prime[j+1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 。</p>\n<p>未来<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 一定会增到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>i</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>=</mo><mi>k</mi><mo>×</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mi>k</mi><mo>×</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i&#x27;=k\\times prime[j+1]&gt;k\\times prime[j]=i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">i</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ，这一轮一定会筛到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>×</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">i\\times prime[j+1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 筛去。</p>\n<p>跳出循环时<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">prime[j]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span></span></span></span> 正是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">[</mo><mi>j</mi><mo stretchy=\"false\">]</mo><mo>×</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">prime[j]\\times i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 的最小质因子。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> MAX_L = (<span class=\"number\">1e7</span>) + <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> a, b;</span><br><span class=\"line\"><span class=\"type\">bool</span> check[MAX_L]; <span class=\"comment\">//检查某个数是否是素数，初始化置false</span></span><br><span class=\"line\"><span class=\"type\">int</span> prime[MAX_L];</span><br><span class=\"line\"><span class=\"type\">int</span> tot = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">sieve</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= x; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!check[i])</span><br><span class=\"line\">            prime[tot++] = i; <span class=\"comment\">//i是素数，添加到prime中</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; tot; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (prime[j] * i &gt; x)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            check[prime[j] * i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i % prime[j] == <span class=\"number\">0</span>)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>; <span class=\"comment\">//已被筛过，可以不往下筛了</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"区间筛素数\">区间筛素数</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span> ，小数区间推大数区间</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"type\">long</span> <span class=\"type\">long</span> ll;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> MAX_L = (<span class=\"number\">1e8</span>) + <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> MAX_SQRTB = (<span class=\"number\">1e4</span>) + <span class=\"number\">2</span>;</span><br><span class=\"line\">ll a, b;</span><br><span class=\"line\"><span class=\"type\">bool</span> isprime[MAX_L];           <span class=\"comment\">//[a,b)区间，用isprime[i-a]=true表示i为素数</span></span><br><span class=\"line\"><span class=\"type\">bool</span> isprime_small[MAX_SQRTB]; <span class=\"comment\">//[2,sqrt(b))区间</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">segment_sieve</span><span class=\"params\">(ll x, ll y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ll i = <span class=\"number\">0</span>; (ll)i * i &lt; y; i++)</span><br><span class=\"line\">        isprime_small[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ll i = <span class=\"number\">0</span>; i &lt; y - x; i++)</span><br><span class=\"line\">        isprime[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; (ll)i * i &lt; y; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isprime_small[i])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (ll j = <span class=\"number\">2</span> * i; (ll)j * j &lt; y; j += i)</span><br><span class=\"line\">                isprime_small[j] = <span class=\"literal\">false</span>; <span class=\"comment\">//从2开始筛[2,sqrt(b))区间</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (ll j = <span class=\"built_in\">max</span>((ll)<span class=\"number\">2</span>, (x + i - <span class=\"number\">1</span>) / i) * i; j &lt; y; j += i)</span><br><span class=\"line\">                <span class=\"comment\">//max找离x最近的i的倍数，如果没有就是2倍i</span></span><br><span class=\"line\">                isprime[j - a] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"素数判断法\">素数判断法</h1>\n<h2 id=\"朴素判断法\">朴素判断法</h2>\n<ul>\n<li>\n<p>复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\sqrt n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.05028em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8002800000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathdefault\" style=\"padding-left:0.833em;\">n</span></span><span style=\"top:-2.76028em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.23972em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>。</p>\n</li>\n<li>\n<p>优化：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 之后，只有奇数有可能是素数，所以先判<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≤</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\leq 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 的情况，然后从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">i=3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 每次循环<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">i+=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord\">+</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span></p>\n</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= <span class=\"built_in\">sqrt</span>(n); i++)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x % i == <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"模6判断法\">模6判断法</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> num[<span class=\"number\">5</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">prime</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x &lt;= <span class=\"number\">4</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num[x]; <span class=\"comment\">//4以下直接判断</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x % <span class=\"number\">6</span> != <span class=\"number\">1</span> &amp;&amp; x % <span class=\"number\">6</span> != <span class=\"number\">5</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; <span class=\"comment\">//6k+2, 6k+3, 6k+4分别有因数2，3，2</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">5</span>; i * i &lt;= x; i += <span class=\"number\">6</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x % i == <span class=\"number\">0</span> || x % (i + <span class=\"number\">2</span>) == <span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; <span class=\"comment\">//i从5开始，以6递增，判断是不是6k+5或6k+1的因数</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;          <span class=\"comment\">//都不是，就是素数</span></span><br><span class=\"line\">&#125; <span class=\"comment\">//以及对于大数小数k*k&lt;x和k&lt;sqrt(x)差不多快</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"miller-rabin判断法\">Miller-Rabin判断法</h2>\n<p>由费马小定理，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mtext>是素数</mtext><mo separator=\"true\">,</mo><mi>p</mi><mo>∤</mo><mi>a</mi><mo>⇒</mo><msup><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>≡</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">n是素数,p\\nmid a \\Rightarrow a^{n-1}\\equiv 1(\\mod n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.99253em;vertical-align:-0.25142em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord cjk_fallback\">是</span><span class=\"mord cjk_fallback\">素</span><span class=\"mord cjk_fallback\">数</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel amsrm\">∤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≡</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，反过来不一定。但是概率小，重复操作约30次差不多能保证判断正确。复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// qpow(x,n,m): 计算x^n mod m</span></span><br><span class=\"line\"><span class=\"comment\">// 记得srand</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">Miller_Rabin</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x &lt; <span class=\"number\">2</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x == <span class=\"number\">2</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((x &amp; <span class=\"number\">1</span>) == <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">30</span>; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> base = <span class=\"built_in\">rand</span>() % (x - <span class=\"number\">1</span>) + <span class=\"number\">1</span>; <span class=\"comment\">// 随机[1,x)的数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">qpow</span>(base, x - <span class=\"number\">1</span>, x) != <span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"改进miller-rabin判断法\">改进Miller-Rabin判断法</h2>\n<p>二次探测定理：如果 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 是一个素数, 且 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>&lt;</mo><mi>x</mi><mo>&lt;</mo><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">0&lt;x&lt;p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span>, 则方程 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mi mathvariant=\"normal\">%</mi><mi>p</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x^{2} \\% p=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mord\">%</span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的解为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 或 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>p</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x=p-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 通过 a^(n−1)=1(mod n)来判断 n 是不是素数，并进行二次判断</span></span><br><span class=\"line\"><span class=\"comment\">// 合数返回true</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">check</span><span class=\"params\">(ll a, ll n, ll x, ll t)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll ret = <span class=\"built_in\">qpow</span>(a, x, n); <span class=\"comment\">// 快速幂</span></span><br><span class=\"line\">    ll last = ret;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= t; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ret = <span class=\"built_in\">multi_add</span>(ret, ret, n); <span class=\"comment\">// 乘法改加法防止溢出</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ret == <span class=\"number\">1</span> &amp;&amp; last != <span class=\"number\">1</span> &amp;&amp; last != n - <span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>; <span class=\"comment\">//合数</span></span><br><span class=\"line\">        last = ret;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ret != <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">Miller_Rabin</span><span class=\"params\">(ll n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n &lt; <span class=\"number\">2</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"number\">2</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((n &amp; <span class=\"number\">1</span>) == <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    ll x = n - <span class=\"number\">1</span>, t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> ((x &amp; <span class=\"number\">1</span>) == <span class=\"number\">0</span>)</span><br><span class=\"line\">        x &gt;&gt;= <span class=\"number\">1</span>, t++;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">8</span>; i++) <span class=\"comment\">// 8次差不多了</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">check</span>(<span class=\"built_in\">rand</span>() % (n - <span class=\"number\">1</span>) + <span class=\"number\">1</span>, n, x, t))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"数的分解\">数的分解</h1>\n<h2 id=\"普通整数分解\">普通整数分解</h2>\n<ul>\n<li>枚举因子试除</li>\n<li>素数打表试除（kuangbin的模板）</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// prime[i]中存的是第i个素数</span></span><br><span class=\"line\">ll factor[<span class=\"number\">100</span>][<span class=\"number\">2</span>]; <span class=\"comment\">// factor[i][0]表示给定的数第i个素因子，[1]表示系数</span></span><br><span class=\"line\"><span class=\"type\">int</span> fatCnt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">getFactors</span><span class=\"params\">(ll x)</span> <span class=\"comment\">// 返回素因子个数</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fatCnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">    ll tmp = x;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; prime[i] &lt;= tmp / prime[i]; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        factor[fatCnt][<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (tmp % prime[i] == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            factor[fatCnt][<span class=\"number\">0</span>] = prime[i];</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (tmp % prime[i] == <span class=\"number\">0</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                factor[fatCnt][<span class=\"number\">1</span>]++;</span><br><span class=\"line\">                tmp /= prime[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            fatCnt++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (tmp != <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        factor[fatCnt][<span class=\"number\">0</span>] = tmp;</span><br><span class=\"line\">        factor[fatCnt++][<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fatCnt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"大整数分解：pollard-rho\">大整数分解：Pollard-rho</h2>\n<p>本质：随机因子检查</p>\n<p>Pollard的伪随机数生成器：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>c</mi><mo stretchy=\"false\">)</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">f(x)=(x^2+c)\\mod N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> ，随机数序列：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>⋯</mo><mtext> </mtext><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{x,f(x),f(f(x))\\cdots\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mclose\">}</span></span></span></span> 。可以修改参数打表画图得到，这个序列会进入循环，常类似<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">ρ</span></span></span></span> 型，即经过一些数才进入循环</p>\n<p>（这是kuangbin的模板）</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">ll factor[<span class=\"number\">100</span>]; <span class=\"comment\">//质因素分解结果（刚返回时时无序的）</span></span><br><span class=\"line\"><span class=\"type\">int</span> tol;        <span class=\"comment\">//质因素的个数，编号 0∼tol-1</span></span><br><span class=\"line\"><span class=\"comment\">//找出一个因子</span></span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">pollard_rho</span><span class=\"params\">(ll x, ll c)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll i = <span class=\"number\">1</span>, k = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"built_in\">srand</span>(<span class=\"built_in\">time</span>(<span class=\"literal\">NULL</span>));</span><br><span class=\"line\">    ll x0 = <span class=\"built_in\">rand</span>() % (x - <span class=\"number\">1</span>) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    ll y = x0;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        i++;</span><br><span class=\"line\">        x0 = (<span class=\"built_in\">multi_add</span>(x0, x0, x) + c) % x;</span><br><span class=\"line\">        ll d = __gcd(y - x0, x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (d != <span class=\"number\">1</span> &amp;&amp; d != x)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> d;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (y == x0)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == k)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            y = x0;</span><br><span class=\"line\">            k += k;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//对 n 进行素因子分解，存入 factor; k 设置为 107 左右即可</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">findfac</span><span class=\"params\">(ll n, <span class=\"type\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">Miller_Rabin</span>(n))</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        factor[tol++] = n;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ll p = n;</span><br><span class=\"line\">    <span class=\"type\">int</span> c = k;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (p &gt;= n)</span><br><span class=\"line\">        p = <span class=\"built_in\">pollard_rho</span>(p, c--); <span class=\"comment\">//值变化，防止死循环 k findfac(p,k);</span></span><br><span class=\"line\">    <span class=\"built_in\">findfac</span>(p, k);</span><br><span class=\"line\">    <span class=\"built_in\">findfac</span>(n / p, k);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数学"],"tags":["ACM","数论","素数"]},{"title":"【数学】组合数的计算","url":"/posts/b00103b3/","content":"<p>组合数的计算方法（递推、消分母分子、阶乘+逆元、卢卡斯定理）</p>\n<span id=\"more\"></span>\n<h1 id=\"递推\">递推</h1>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; N; ++i) </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt;= i; ++j)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!j) c[i][j] = <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> c[i][j] = (c[i<span class=\"number\">-1</span>][j] + c[i<span class=\"number\">-1</span>][j<span class=\"number\">-1</span>]) % MOD;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"消分母分子\">消分母分子</h1>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">ll <span class=\"title\">C</span><span class=\"params\">(ll n,ll k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"number\">2</span>*k&gt;n) k=n-k;</span><br><span class=\"line\">    ll s=<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(ll i=<span class=\"number\">1</span>,j=n; i&lt;=k; i++,j--)</span><br><span class=\"line\">        s=s*j/i;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"预处理阶乘-逆元\">预处理阶乘+逆元</h1>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> fac[N],inv[N]; <span class=\"comment\">// 阶乘和阶乘逆元</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(<span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fac[<span class=\"number\">0</span>]=<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">        fac[i]=<span class=\"number\">1ll</span>*fac[i<span class=\"number\">-1</span>]*i%mod;</span><br><span class=\"line\">    inv[n]=<span class=\"built_in\">qpow</span>(fac[n],mod<span class=\"number\">-2</span>); <span class=\"comment\">// 快速幂</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=n<span class=\"number\">-1</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">        inv[i]=<span class=\"number\">1ll</span>*inv[i+<span class=\"number\">1</span>]*(i+<span class=\"number\">1</span>)%mod;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 求C(x,y)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">C</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x&lt;y || y&lt;<span class=\"number\">0</span>)<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1ll</span>*fac[x]*inv[x-y]%mod*inv[y]%mod;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"卢卡斯定理\">卢卡斯定理</h1>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义求解</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">C</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b, <span class=\"type\">int</span> mod)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (b &gt; a) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> res = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>, j = a; i &lt;= b; ++i, --j) &#123;</span><br><span class=\"line\">        res = (ll)res * j % mod;</span><br><span class=\"line\">        res = (ll)res * <span class=\"built_in\">qpow</span>(i, mod - <span class=\"number\">2</span>) % mod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">lucas</span><span class=\"params\">(ll a, ll b, ll mod)</span> </span>&#123;               <span class=\"comment\">// 注意ll参数类型</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (a &lt; mod &amp;&amp; b &lt; mod) <span class=\"keyword\">return</span> <span class=\"built_in\">C</span>(a, b, mod);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (ll)<span class=\"built_in\">C</span>(a % mod, b % mod, mod) * <span class=\"built_in\">lucas</span>(a / mod, b / mod, mod) % mod;     <span class=\"comment\">// 递归让其到mod范围内求解</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"其他内容\">其他内容</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>&lt;</mo><mn>4</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">x&lt;4\\times 10^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>，最多有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>11</mn></mrow><annotation encoding=\"application/x-tex\">11</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">1</span></span></span></span> 个不同的质因子</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>m</mi><mo>=</mo><mn>0</mn></mrow><mi>b</mi></msubsup><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mtext>，</mtext><mi>F</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>2</mn><mo>×</mo><mi>F</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">F(a,b)=\\sum_{m=0}^{b}C(a,m)，F(a,b)=2\\times F(a-1,b)-C(a-1,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2887179999999998em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9890079999999999em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">)</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span></p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mn>2</mn><mo>×</mo><mi>F</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>F</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned} 2\\times F(a-1,b)&amp;=C(a-1,0)\\times 2+C(a-1,1)\\times 2+C(a-1,2)\\times 2+...C(a-1,b)\\times 2\\\\&amp;=C(a,0)+C(a,1)+C(a,2)+C(a,3)+...+C(a,b)+C(a-1,b)\\\\&amp;=F(a,b)+C(a-1,b)\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.500000000000002em;vertical-align:-2.000000000000001em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5000000000000004em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.6599999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.000000000000001em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5000000000000004em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">2</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span><span style=\"top:-1.6599999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.000000000000001em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n","categories":["ACM","数学"],"tags":["ACM","组合数学"]},{"title":"【数据库】SQL","url":"/posts/ff5818ad/","content":"<p>学习数据库系统概念（第六版）笔记，第三、四章SQL</p>\n<span id=\"more\"></span>\n<p>SQL不区分大小写，字符串中大小写保留</p>\n<h1 id=\"数据定义\">数据定义</h1>\n<p>关系模式、属性取值类型、完整性约束</p>\n<h2 id=\"数据类型\">数据类型</h2>\n<h3 id=\"基本类型\">基本类型</h3>\n<ul>\n<li><code>char(n)</code>，不足可能会添空格导致判断等于时有问题</li>\n<li><code>varchar(n)</code>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 是最大值</li>\n<li><code>int</code></li>\n<li><code>smallint</code></li>\n<li><code>numeric(p,d)</code>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 个数字，小数点后<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> 位</li>\n<li><code>real, double</code></li>\n<li><code>float(n)</code>，精度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 位</li>\n</ul>\n<h3 id=\"日期\">日期</h3>\n<ul>\n<li><code>date</code>，年（四位）月日，<code>'2023-02-16'</code></li>\n<li><code>time</code>，时分秒，<code>22:03:04</code>，可以<code>time(p)</code>指定秒的位数，可以<code>time with timezone</code>加时区信息</li>\n<li><code>timestamp</code>，date time，<code>'2023-02-16 22:03:04.45'</code>位数和时区信息同time</li>\n<li><code>interval</code> ，加减时间间隔，<code>DATE '2020-07-20' + interval '1 31' hour_second</code>结果是<code>2020-07-20 00:01:31</code></li>\n<li><code>cast e as t</code>将字符串<code>e</code>转换成类型<code>t</code>（以上三种类型）</li>\n<li><code>extract (year/month/day/hour/minute/second/timezone_hour/timezone_minute from e)</code></li>\n</ul>\n<h3 id=\"大对象\">大对象</h3>\n<ul>\n<li><code>clob blob</code>（后者是二进制）</li>\n</ul>\n<h3 id=\"用户定义类型\">用户定义类型</h3>\n<ul>\n<li>独特类型、结构化数据类型（不学）</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> type AA <span class=\"keyword\">as</span> <span class=\"type\">numeric</span>(<span class=\"number\">12</span>, <span class=\"number\">2</span>) <span class=\"keyword\">final</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"域\">域</h3>\n<p>与用户定义类型类似，但是可以加约束，还可以加<code>constraint</code></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> domain AAA <span class=\"type\">char</span>(<span class=\"number\">20</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"索引\">索引</h3>\n<p>数据结构，不用扫描关系中的所有元组就能找到给定值对应的元组</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> index xxx <span class=\"keyword\">on</span> R(A1)</span><br></pre></td></tr></table></figure>\n<h2 id=\"基本模式定义\">基本模式定义</h2>\n<h3 id=\"创建\">创建</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> R1(</span><br><span class=\"line\">    A1, D1 <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>, </span><br><span class=\"line\">    A2, D2 <span class=\"keyword\">check</span> (A2 <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>),</span><br><span class=\"line\">    A3, D3 <span class=\"keyword\">default</span> <span class=\"number\">0</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (Ai1, Ai2,...),</span><br><span class=\"line\">    <span class=\"keyword\">foreign</span> key (Aj1, Aj2,...) <span class=\"keyword\">references</span> R2</span><br><span class=\"line\">    \t<span class=\"keyword\">on</span> <span class=\"keyword\">delete</span> cascade</span><br><span class=\"line\">    \t<span class=\"keyword\">on</span> <span class=\"keyword\">update</span> <span class=\"keyword\">set</span> <span class=\"keyword\">null</span> <span class=\"operator\">/</span> <span class=\"keyword\">default</span>,</span><br><span class=\"line\">    <span class=\"keyword\">unique</span> (Ak1, Ak2,...),</span><br><span class=\"line\">\t<span class=\"keyword\">check</span> (Al <span class=\"keyword\">in</span> (<span class=\"string\">&#x27;A&#x27;</span>,<span class=\"string\">&#x27;B&#x27;</span>,...)));</span><br></pre></td></tr></table></figure>\n<ul>\n<li>参照完整性(外码)约束：在一个关系中给定属性集上的取值也在另一关系的特定属性集的取值中出现\n<ul>\n<li><code>on delete/update cascade</code> 级联删除/更新，即<code>R2</code>中删掉/更新后<code>R1</code>中的同步删除/更新元组；如果是<code>set null/default</code>，约束违反时置<code>null</code>或默认值</li>\n<li><code>references</code>后可以是显式的子句，但必须是候选码（主码或unique）</li>\n</ul>\n</li>\n<li>完整性约束：保证用户对数据库所做的修改不会破坏数据一致性，单表约束：\n<ul>\n<li><code>not null</code>：禁止插入空值</li>\n<li><code>check</code>：可写最后也可写里面，可以是谓词/子查询（实际中基本没有支持子查询的）</li>\n<li><code>unique</code>：形成候选码</li>\n<li>主码</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"去除\">去除</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> R1;</span><br></pre></td></tr></table></figure>\n<h3 id=\"增删属性\">增删属性</h3>\n<p>（不是都支持）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> R1 <span class=\"keyword\">add</span> A1 D1;</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">drop</span> A1;</span><br></pre></td></tr></table></figure>\n<h1 id=\"查询\">查询</h1>\n<p>理解来说顺序是<code>from</code>、<code>select</code>、<code>where</code></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">distinct</span> A1 <span class=\"keyword\">as</span> A11, A2<span class=\"operator\">*</span><span class=\"number\">1.5</span>, R3.<span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> R1 <span class=\"keyword\">as</span> R11, R2, ...</span><br><span class=\"line\"><span class=\"keyword\">where</span> E1 <span class=\"keyword\">and</span> E2 ...</span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span> A1 <span class=\"keyword\">desc</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>select</code>设置属性\n<ul>\n<li><code>distinct</code>去重（不加不去重）</li>\n<li>属性可使用<code>+ - * /</code></li>\n<li><code>*</code>是全部</li>\n</ul>\n</li>\n<li><code>where</code>后谓词语句\n<ul>\n<li>可用<code>and or not</code>连接</li>\n<li>可用<code>&lt; &lt;= &gt; &gt;= = &lt;&gt;</code></li>\n<li>可用<code>A1 between 100 and 1000</code> ，也有<code>not between</code></li>\n<li>字符串用<code>like</code>模式匹配，<code>%</code>匹配任意子串，<code>_</code>匹配任意字符，字符串中的%_\\前使用<code>\\</code>并在字符串后加<code>escape \\</code>来转义</li>\n<li>字符串还可用<code>upper(s)</code>、<code>lower(s)</code>转大小写</li>\n<li>可用元组比较<code>(A1, A2, ...) = (666, 'abc', ...)</code> ，如果是不等号元组各项用且连接</li>\n<li>可使用<code>A1 (not) in ('666', '111')</code> 表示集合关系，这个集合可以是子查询的结果，属性也可以是元组形式<code>(A1, A2, ...)</code></li>\n</ul>\n</li>\n<li><code>from</code>后\n<ul>\n<li><code>R1,R2,...</code>是笛卡尔积，使用<code>R1.ID R2.ID</code>区分不同关系的同名属性</li>\n<li><code>R1 natural join R2</code> 是自然连接，同名属性只出现一次，小心同名不同义</li>\n<li><code>R1 join R2 using (Ai, Aj,...)</code>是指定列的“自然连接”，忽略没有指定的同名属性</li>\n<li><code>R1 join R2 on R1.Ai=R2.Ai</code>是指定列同值的“连接”，同名属性重复出现（效果与笛卡尔积+where一样）</li>\n<li><code>(natural) left/right/full outer join</code>是左/右/全外（自然）连接：保留失配元组，出现在左/右/全部关系中的元组会被全部保留，另一个关系没有对应元组的会在结果中被填入<code>null</code>信息</li>\n</ul>\n</li>\n<li><code>order by</code>设置显示次序\n<ul>\n<li>默认升序，降序是<code>desc</code></li>\n<li>可以多个值排序</li>\n</ul>\n</li>\n<li><code>as</code>可以重命名</li>\n</ul>\n<h2 id=\"子查询\">子查询</h2>\n<ul>\n<li>至少比某一个大、比所有都大这类表述：<code>&gt; some (...)</code>、<code>&gt; all (...)</code>连接子查询</li>\n<li>相关子查询（correlated subquery）：子查询中可以使用外层查询的相关名字</li>\n<li>标量子查询（scalar subquery）：子查询结果是单个属性的单个元组，可以出现在select、where、having中</li>\n<li><code>exists(...)</code>表示子查询是否非空，将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mn>1</mn><mo>⊆</mo><mi>R</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">R1\\subseteq R2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">2</span></span></span></span> 写成<code>not exists (R1 except R2)</code></li>\n<li><code>unique(...)</code>表示子查询是否有重复元组</li>\n<li><code>with Rtemp(value) as (...)</code>可以创建临时关系<code>Rtemp</code></li>\n</ul>\n<h2 id=\"集合运算\">集合运算</h2>\n<ul>\n<li>\n<p>用在查询结果间</p>\n</li>\n<li>\n<p>并：<code>union</code>自动去重，保留重复用<code>union all</code></p>\n</li>\n<li>\n<p>交：<code>intersect</code>自动去重，保留重复用<code>intersect all</code></p>\n</li>\n<li>\n<p>差：<code>except</code>自动去重，保留重复用<code>except all</code></p>\n</li>\n</ul>\n<h2 id=\"聚集函数\">聚集函数</h2>\n<ul>\n<li>平均值：<code>select avg(A1)</code></li>\n<li>最值：<code>select min(A1),max(A1)</code></li>\n<li>求和：<code>select sum(A1)</code></li>\n<li>计数：<code>count(A1)</code>，<code>count(*)</code>计算元组个数但不能去重</li>\n<li>可在属性前加<code>distinct</code>对聚集属性去重</li>\n<li>除了<code>count(*)</code>，都忽略<code>null</code>值</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> A1,<span class=\"built_in\">avg</span>(A2)</span><br><span class=\"line\"><span class=\"keyword\">from</span> R1,...</span><br><span class=\"line\"><span class=\"keyword\">where</span> ...</span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span> A1</span><br><span class=\"line\"><span class=\"keyword\">having</span> ...;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>理解执行顺序：from、where、group by、having、select</li>\n<li><code>group by</code>对前面得到的元组按属性分组，<code>select</code> 的属性必须出现在<code>order by</code>后</li>\n<li>如果需要根据分组的某些属性要求筛选分组则用<code>having</code>子句，该子句可用聚集函数</li>\n</ul>\n<h1 id=\"修改\">修改</h1>\n<h2 id=\"插入\">插入</h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> R1 <span class=\"keyword\">values</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;ABC&#x27;</span>, ...);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> R1 (A2, A1, ...) <span class=\"keyword\">values</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;ABC&#x27;</span>, ...);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> R1 子查询</span><br></pre></td></tr></table></figure>\n<p>用子查询要注意会不会死循环</p>\n<h2 id=\"删除\">删除</h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> R1;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> R1 <span class=\"keyword\">where</span> ...;</span><br></pre></td></tr></table></figure>\n<p>删除元组而不是删除表，where跟查询的where一样</p>\n<h2 id=\"更新\">更新</h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> R1</span><br><span class=\"line\"><span class=\"keyword\">set</span> A1<span class=\"operator\">=</span>...</span><br><span class=\"line\"><span class=\"keyword\">where</span> ...;</span><br></pre></td></tr></table></figure>\n<p>where跟查询的where一样，set可用标量子查询赋值，还可用<code>case</code>：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">case</span> </span><br><span class=\"line\">\t<span class=\"keyword\">when</span> E1 <span class=\"keyword\">then</span> A1<span class=\"operator\">=</span>...</span><br><span class=\"line\">\t<span class=\"keyword\">when</span> E2 <span class=\"keyword\">then</span> A2<span class=\"operator\">=</span>...</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> A2<span class=\"operator\">=</span>...</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<p>注意update的顺序</p>\n<h1 id=\"视图\">视图</h1>\n<ul>\n<li>虚关系，即概念上包含查询结果，不是逻辑关系的一部分，但对用户所见</li>\n<li>用户不知道数据库原貌</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">view</span> v <span class=\"keyword\">as</span></span><br><span class=\"line\">\t<span class=\"keyword\">SQL</span>语句</span><br></pre></td></tr></table></figure>\n<ul>\n<li>SQL语句可以嵌套其他视图，在实际执行时不断找到语句中的视图并展开\n<ul>\n<li>depend directly on 某视图</li>\n<li>depend on间接</li>\n<li>recursive递归</li>\n</ul>\n</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 可当作普通关系被SQL语句使用，虚关系、虚表</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 也可加括号写全属性</li>\n<li>物化视图：允许物理存储视图关系，如果使用到的关系发生了变化，物化视图结果就过期了，需要维护，好处是查询已保存的结果更快（尤其对于那些大型数据库）</li>\n<li>视图更新：一般不允许通过修改视图修改数据库（不在视图里的约束值、多关系、修改值不在视图里等），可更新（update 、insert、delete）的条件如下：\n<ul>\n<li>from只有一个关系</li>\n<li>select只有属性名，不是表达式、聚集或distinct，且没有被select的其他属性没有约束（主码、null）</li>\n<li>没有group by或having</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"授权\">授权</h1>\n<ul>\n<li>给用户授权读取、插入、更新、删除数据</li>\n</ul>\n<h2 id=\"授予\">授予</h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">grant</span> 权限列表</span><br><span class=\"line\"><span class=\"keyword\">on</span> 关系名<span class=\"operator\">/</span>视图名</span><br><span class=\"line\"><span class=\"keyword\">to</span> 用户<span class=\"operator\">/</span>角色列表</span><br></pre></td></tr></table></figure>\n<ul>\n<li>权限可以是<code>select insert update delete</code>，其中update/insert可以带括号指明属性列表</li>\n<li>外码权限<code>references(A1)</code></li>\n<li>视图创建者要有对应权限，使用者不需要</li>\n<li>用户可以是<code>public</code>，指系统的所有用户和未来的所有用户</li>\n<li>加<code>with grant option</code>这个角色可以将在这个关系上获得的权限授予其他角色</li>\n</ul>\n<h2 id=\"收回\">收回</h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">revoke</span> 权限列表</span><br><span class=\"line\"><span class=\"keyword\">on</span> 关系名<span class=\"operator\">/</span>视图名</span><br><span class=\"line\"><span class=\"keyword\">from</span> 用户<span class=\"operator\">/</span>角色列表</span><br></pre></td></tr></table></figure>\n<ul>\n<li>默认级联收回，防止级联收回用户后加<code>restrict</code></li>\n<li>角色授予权限的收回，权限叫<code>grant option</code></li>\n</ul>\n<h2 id=\"角色\">角色</h2>\n<ul>\n<li>有角色集</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> role r1</span><br></pre></td></tr></table></figure>\n<ul>\n<li>用户被分配角色，user1的角色是r1，r2继承r1的所有权限</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">grant</span> r1 <span class=\"keyword\">to</span> user1</span><br><span class=\"line\"><span class=\"keyword\">grant</span> r1 <span class=\"keyword\">to</span> r2</span><br></pre></td></tr></table></figure>\n","categories":["数据库"],"tags":["数据库"]},{"title":"【数据库】关系代数、查询处理和优化","url":"/posts/fd277cbd/","content":"<p>学习数据库系统概念（第六版）笔记，第六章形式化关系查询语言-关系代数，第十二章查询处理（部分），第十三章查询优化（部分）</p>\n<span id=\"more\"></span>\n<h1 id=\"关系代数\">关系代数</h1>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">and</th>\n<th style=\"text-align:center\">or</th>\n<th style=\"text-align:center\">not</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∧</mo></mrow><annotation encoding=\"application/x-tex\">\\wedge</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.55556em;vertical-align:0em;\"></span><span class=\"mord\">∧</span></span></span></span></td>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∨</mo></mrow><annotation encoding=\"application/x-tex\">\\vee</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.55556em;vertical-align:0em;\"></span><span class=\"mord\">∨</span></span></span></span></td>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">¬</mi></mrow><annotation encoding=\"application/x-tex\">\\neg</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">¬</span></span></span></span></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"选择-select\">选择（select）</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>σ</mi><mtext>属性的数学关系</mtext></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sigma_\\text{属性的数学关系}(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord text mtight\"><span class=\"mord cjk_fallback mtight\">属性的数学关系</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> ：返回关系<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> 中满足某些属性数学关系的<strong>行</strong></p>\n<p>注意，如果跟SQL对应，这里对应的是where</p>\n<h2 id=\"投影-project\">投影（project）</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">Π</mi><mrow><mo stretchy=\"false\">{</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><msub><mi>A</mi><mi>m</mi></msub><mo stretchy=\"false\">}</mo></mrow></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Pi_{\\{A_1,A_2,\\cdots A_m\\}}(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1052em;vertical-align:-0.3551999999999999em;\"></span><span class=\"mord\"><span class=\"mord\">Π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34480000000000005em;\"><span style=\"top:-2.5198em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"minner mtight\">⋯</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3551999999999999em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> ：输出关系<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> 中所有行的属性<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><msub><mi>A</mi><mi>m</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{A_1,A_2,\\cdots A_m\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> ，去重</p>\n<p>注意：SQL中对应的是select，不会去重</p>\n<h2 id=\"并-union-交-intersect-差-difference\">并（union）&amp;交（intersect）&amp;差（difference）</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub><mo>∪</mo><msub><mi>R</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">R_1\\cup R_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∪</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub><mo>∩</mo><msub><mi>R</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">R_1\\cap R_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∩</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub><mo>−</mo><msub><mi>R</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">R_1-R_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 属性个数相同，属性对应的域相同</p>\n<h2 id=\"自然连接-natural-join\">自然连接（natural join）</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub><mo>⋈</mo><msub><mi>R</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">R_1\\Join R_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⋈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，在相同名字的属性取值相同的元组</p>\n<p>等价于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">Π</mi><mrow><mi>R</mi><mn>1</mn><mo>∪</mo><mi>R</mi><mn>2</mn></mrow></msub><mo stretchy=\"false\">(</mo><msub><mi>σ</mi><mrow><mi>R</mi><mn>1.</mn><mi>A</mi><mn>1</mn><mo>=</mo><mi>R</mi><mn>2.</mn><mi>A</mi><mn>1</mn><mo>∧</mo><mi>R</mi><mn>1.</mn><mi>A</mi><mn>2</mn><mo>=</mo><mi>R</mi><mn>2.</mn><mi>A</mi><mn>2</mn><mo>∧</mo><mo>⋯</mo><mi>R</mi><mn>1.</mn><mi>A</mi><mi>m</mi><mo>=</mo><mi>R</mi><mn>2.</mn><mi>A</mi><mi>m</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mn>1</mn><mo>×</mo><mi>R</mi><mn>2</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Pi_{R1\\cup R2}(\\sigma_{R1.A1=R2.A1\\wedge R1.A2=R2.A2\\wedge\\cdots R1.Am=R2.Am}(R1\\times R2))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">Π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">∪</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">.</span><span class=\"mord mathdefault mtight\">A</span><span class=\"mord mtight\">1</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">2</span><span class=\"mord mtight\">.</span><span class=\"mord mathdefault mtight\">A</span><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">∧</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">.</span><span class=\"mord mathdefault mtight\">A</span><span class=\"mord mtight\">2</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">2</span><span class=\"mord mtight\">.</span><span class=\"mord mathdefault mtight\">A</span><span class=\"mord mtight\">2</span><span class=\"mbin mtight\">∧</span><span class=\"minner mtight\">⋯</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">.</span><span class=\"mord mathdefault mtight\">A</span><span class=\"mord mathdefault mtight\">m</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mtight\">2</span><span class=\"mord mtight\">.</span><span class=\"mord mathdefault mtight\">A</span><span class=\"mord mathdefault mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"笛卡尔积-cartesian-product\">笛卡尔积（Cartesian product）</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub><mo>×</mo><msub><mi>R</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">R_1\\times R_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，两个关系组成的元组对</p>\n<p>有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub><msub><mo>⋈</mo><mi>θ</mi></msub><msub><mi>R</mi><mn>2</mn></msub><mo>=</mo><msub><mi>σ</mi><mi>θ</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>R</mi><mn>1</mn></msub><mo>×</mo><msub><mi>R</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">R_1 \\Join_\\theta R_2=\\sigma_\\theta(R_1 \\times R_2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\">⋈</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">θ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">θ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"assignment\">assignment</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mo>←</mo><msub><mi>R</mi><mn>1</mn></msub><mo>⋈</mo><msub><mi>R</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">R\\leftarrow R_1\\Join R_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">←</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⋈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></p>\n<h2 id=\"更名-rename\">更名（rename）</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>ρ</mi><mrow><mi>R</mi><mo stretchy=\"false\">(</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow></msub><mo stretchy=\"false\">(</mo><mi>E</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\rho_{R(A_1,A_2,\\cdots A_n)}(E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1052em;vertical-align:-0.3551999999999999em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34480000000000005em;\"><span style=\"top:-2.5198em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"minner mtight\">⋯</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3551999999999999em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span> 将表达式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 的结果更名为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span></p>\n<h1 id=\"关系运算的执行？\">关系运算的执行？</h1>\n<h1 id=\"查询优化\">查询优化</h1>\n<h2 id=\"等价规则\">等价规则</h2>\n<p>两种不同形式的表达式是等价的</p>\n<h2 id=\"启发式优化\">启发式优化</h2>\n<p>尽早执行选择、投影运算</p>\n","categories":["数据库"],"tags":["数据库"]},{"title":"【数据库】关系数据理论","url":"/posts/ba7ec3b2/","content":"<p>学习数据库系统概念（第六版）笔记，第八章关系数据库设计与ER模型</p>\n<span id=\"more\"></span>\n<h1 id=\"函数依赖\">函数依赖</h1>\n<ul>\n<li>由某些属性推出其他一些属性</li>\n<li>一个模式中所有实例都满足的函数依赖，称该函数依赖在某模式上成立</li>\n<li>超码<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span></span></span></span> ：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>→</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">K\\rightarrow R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> 在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">r(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> 上成立</li>\n<li>平凡的：整体确定部分，如某集合一定能推出它的子集</li>\n<li>闭包<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>F</mi><mo>+</mo></msup></mrow><annotation encoding=\"application/x-tex\">F^+</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.771331em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span></span></span></span>：从函数依赖集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span> 中能推导出的所有函数依赖的集合</li>\n</ul>\n<h1 id=\"范式\">范式</h1>\n<h2 id=\"1nf\">1NF</h2>\n<ul>\n<li>属性都是原子的</li>\n</ul>\n<h2 id=\"2nf\">2NF</h2>\n<ul>\n<li>\n<p>1NF且每一个非主属性完全函数依赖于任何一个候选码</p>\n</li>\n<li>\n<p>主属性：所有候选码的属性称为主属性，不包含在任何候选码中的属性称为非主属性或非码属性</p>\n</li>\n<li>\n<p>完全函数依赖：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">X\\rightarrow Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">Y</span></span></span></span> ，不存在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span></span></span></span> 的真子集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">X&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> 使得<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>→</mo><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">X&#x27;\\rightarrow Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">Y</span></span></span></span> ，称<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">Y</span></span></span></span> 完全函数依赖于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span></span></span></span> ，否则是不完全函数依赖</p>\n</li>\n<li>\n<p>即，查看每一个非主属性是否存在不完全函数依赖主码</p>\n</li>\n</ul>\n<h2 id=\"3nf\">3NF</h2>\n<ul>\n<li>2NF且非主属性不传递依赖于码</li>\n</ul>\n<h2 id=\"bcnf\">BCNF</h2>\n<ul>\n<li>\n<p>所有非主属性对每一个码都是完全函数依赖。</p>\n</li>\n<li>\n<p>所有的主属性对每一个不包含它的码,也是完全函数依赖。</p>\n</li>\n<li>\n<p>没有任何属性完全函数依赖于非码的任何一组属性</p>\n</li>\n</ul>\n","categories":["数据库"],"tags":["数据库"]},{"title":"【数据库】事务","url":"/posts/b58fa409/","content":""},{"title":"【数据库】关系模型","url":"/posts/6107c5d/","content":"<p>学习数据库系统概念（第六版）笔记，第二章关系模型</p>\n<span id=\"more\"></span>\n<h1 id=\"关系数据库的结构\">关系数据库的结构</h1>\n<ul>\n<li>关系（relation）指代表（table）</li>\n</ul>\n<h2 id=\"属性-attribute\">属性（attribute）</h2>\n<ul>\n<li>列</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">A_1,A_2,\\cdots A_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></li>\n<li>域（domain）：每个属性允许取值的集合\n<ul>\n<li>域如果不可再分则域是原子的（atomic）</li>\n<li>每个域都有空值（null）</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"关系模式-relation-schema\">关系模式（relation schema）</h2>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">R=(A_1,A_2,\\cdots A_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，每个属性有其域</li>\n</ul>\n<h2 id=\"关系实例-relation-instance\">关系实例（relation instance）</h2>\n<ul>\n<li>\n<p>一行数据、一个元组</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">r(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>元组顺序无关紧要</p>\n</li>\n</ul>\n<h1 id=\"数据库模式\">数据库模式</h1>\n<ul>\n<li>数据库实例：数据库中数据在某一时刻的快照（如一张表）</li>\n<li>数据库模式：数据库的逻辑结构（如<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> ）</li>\n</ul>\n<h1 id=\"码\">码</h1>\n<p>属性的子集</p>\n<h2 id=\"超码-superkey\">超码（superkey）</h2>\n<p>唯一标识元组的一个或多个属性的集合</p>\n<h2 id=\"候选码-candidate-key\">候选码（candidate key）</h2>\n<p>最小超码，任意真子集都不能称为超码</p>\n<h2 id=\"主码-primary-key\">主码（primary key）</h2>\n<p>数据库设计者选中主要用来区分元组的<strong>候选码</strong>，一般选基本不变化的属性</p>\n<h2 id=\"外码-foreign-key\">外码（foreign key）</h2>\n<p>关系模式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 包含的关系模式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的主码<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><msub><mi>A</mi><mi>m</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{A_1,A_2,\\cdots A_m\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span> 是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 参照<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的外码，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是外码<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span> 的参照关系，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是被参照关系，表述又称可以生命从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的外码约束</p>\n<p>注意外码不能只引用主码的一部分</p>\n<h1 id=\"模式图\">模式图</h1>\n<p>箭头指示外码，下划线是主码</p>\n<img data-src=\"/posts/6107c5d/image-20230215214128155.png\" class=\"\" title=\"image-20230215214128155\">\n<h1 id=\"关系查询语言\">关系查询语言</h1>\n<ul>\n<li>从数据库中请求获取信息的语言</li>\n<li>过程化语言：给出获取信息的过程，指导系统执行操作，如关系代数</li>\n<li>非过程化语言：只描述所需信息</li>\n<li>SQL既过程化也非过程化</li>\n</ul>\n<h1 id=\"完整性约束-sql中还会提\">完整性约束（SQL中还会提）</h1>\n<h2 id=\"实体完整性约束\">实体完整性约束</h2>\n<ul>\n<li>关系中的每个元组都是可识别的和唯一的</li>\n<li>即关系数据库中所有的表都必须有主键，且表中的记录必须有主键值，主键值均不相同</li>\n</ul>\n<h2 id=\"参照完整性约束-子集依赖\">参照完整性约束（子集依赖）</h2>\n<p>定义外键与被参照的主键之间的引用规则</p>\n<h2 id=\"用户定义完整性约束\">用户定义完整性约束</h2>\n<p>某一具体应用所涉及的数据必须满足应用语义的要求</p>\n","categories":["数据库"],"tags":["数据库"]},{"title":"【数据库】数据库设计与ER模型","url":"/posts/6a563374/","content":"<p>学习数据库系统概念（第六版）笔记，第七章数据库设计与ER模型，概念性的东西，不细致</p>\n<span id=\"more\"></span>\n<h1 id=\"设计过程\">设计过程</h1>\n<ul>\n<li>高层数据模型转低层</li>\n<li>用户需求规格说明</li>\n<li>概念设计：ER模型，定义实体、实体的属性、实体的联系、实体和联系的约束，检查避免冗余、不完整两个缺陷</li>\n<li>功能需求规格说明：描述操作/事务</li>\n<li>逻辑设计：概念映射到数据模型，通常是ER到关系数据模型</li>\n<li>物理设计：指明数据库的物理特征，包括文件组织格式、索引结构</li>\n</ul>\n<h1 id=\"er模型\">ER模型</h1>\n<ul>\n<li>实体-联系</li>\n</ul>\n<h2 id=\"实体集\">实体集</h2>\n<ul>\n<li>实体：事物、对象，客观存在，可相互区分</li>\n<li>实体集：相同属性的实体集合</li>\n<li>实体集的外延：实体集的实体的集合</li>\n</ul>\n<h2 id=\"联系集\">联系集</h2>\n<ul>\n<li>相同类型联系的集合</li>\n<li>实体集参与联系集，联系集的参与实体集的个数称度</li>\n<li>联系实例</li>\n<li>实体在联系中扮演的功能称实体的角色</li>\n<li>可以具有描述性属性</li>\n<li>联系集的超码是参与的实体集的主码集合的并</li>\n</ul>\n<h2 id=\"属性\">属性</h2>\n<ul>\n<li>简单、复合属性（可划分成更小部分）</li>\n<li>单值、多值</li>\n<li>派生：由基属性计算而来，不单独存储</li>\n</ul>\n<h2 id=\"弱实体集\">弱实体集</h2>\n<ul>\n<li>没有足够属性形成主码的实体集，必须与另一个乘坐标识实体集（属主实体集）关联，联系称标识性联系</li>\n<li>弱实体集存在依赖于标识实体集</li>\n<li>标识实体集拥有它所标识的弱实体集</li>\n<li>标识性联系集没有属性，是（弱）多对一（标），弱实体集是全部参与</li>\n<li>弱实体集有分辨符，主码=分辨符+标识实体集的主码</li>\n</ul>\n<h2 id=\"约束\">约束</h2>\n<h3 id=\"基数约束\">基数约束</h3>\n<p>映射基数：一个实体通过一个联系集能关联的实体的个数</p>\n<h3 id=\"参与约束\">参与约束</h3>\n<p>实体集中的每个实体都参与到某联系集的至少一个联系中，是全部参与，否则是部分参与</p>\n<h1 id=\"er模型转换为关系模型\">ER模型转换为关系模型</h1>\n<ul>\n<li>复杂属性：复合属性展开，多值改为多条，派生用方法</li>\n<li>弱实体集主码=分辨符+标识实体集的主码，而联系时冗余的不需给出</li>\n<li>联系集（只考虑二元联系）\n<ul>\n<li>一对一：任何一个实体集的主码都可以</li>\n<li>多对多：所有主码的并集</li>\n<li>一对多：多的那方的主码</li>\n<li>外码约束</li>\n<li>全部参与的，可以合并</li>\n</ul>\n</li>\n</ul>\n","categories":["数据库"],"tags":["数据库"]},{"title":"【数据库】引言","url":"/posts/c27b6885/","content":"<p>学习数据库系统概念（第六版）笔记，第一章引言</p>\n<span id=\"more\"></span>\n<h1 id=\"数据库系统\">数据库系统</h1>\n<ul>\n<li>数据库管理系统（DataBase-Management System，DBMS）：包含关于某个企业的信息\n<ul>\n<li>一个互相关联的数据的集合（database）</li>\n<li>用于访问数据的程序</li>\n<li>方便、高效地存储信息的途径</li>\n</ul>\n</li>\n<li>设计目的：</li>\n</ul>\n<h1 id=\"数据库系统的目的\">数据库系统的目的</h1>\n<ul>\n<li>\n<p>以前：文件处理系统</p>\n<ul>\n<li>数据冗余（redundancy）和不一致（inconsistency）：一个数据在不同的文件中都有记录，数据冗余；不同副本没法同步更新数据不一致</li>\n<li>数据访问困难：获取符合某些条件的数据每次都要写一个新程序</li>\n<li>数据孤立：数据分散在不同格式的文件中</li>\n<li>完整性问题：数据满足的一致性约束，很难修改与添加</li>\n<li>原子性问题：一切操作应当是原子的，文件处理系统很难做到</li>\n<li>并发访问异常：一个数据被多个程序同时访问，对数据的修改和读取出现异常</li>\n<li>安全性问题：无法保证某些信息不会被某些程序访问</li>\n</ul>\n</li>\n<li>\n<p>设计目的</p>\n<ul>\n<li>管理高价值（Highly valuable）、相对庞大（Relatively large）、多用户/应用并发访问的数据集</li>\n<li>为用户提供抽象视图，隐藏数据存储和维护的部分细节</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"数据视图\">数据视图</h1>\n<h2 id=\"数据抽象\">数据抽象</h2>\n<ul>\n<li>物理层（Physical level）：记录如何存（索引、文件组织等）</li>\n<li>逻辑层（Logical level）：数据库里的数据和数据关系</li>\n<li>视图层（View level）：应用程序，隐藏了数据类型的细节</li>\n</ul>\n<img data-src=\"/posts/c27b6885/abc.jpg\" class=\"\" title=\"abc\">\n<h2 id=\"数据模型\">数据模型</h2>\n<p>概念：描述数据（Data）、数据联系（Data relationships）、数据语义（Data semantics）、一致性约束（Data constraints）的工具集</p>\n<h3 id=\"关系模型-relational-model\">关系模型（Relational model）</h3>\n<ul>\n<li>用表的集合存储数据和数据间联系</li>\n<li>多个列，每列唯一列名</li>\n<li>简单、坚实的数学基础（可用集合论描述）\n<ul>\n<li>举例：<img data-src=\"/posts/c27b6885/a.svg\" class=\"\" title=\"a\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"实体联系模型-entity-relationship-data-model\">实体联系模型（Entity-Relationship data model）</h3>\n<ul>\n<li>主要用于数据库设计</li>\n</ul>\n<h3 id=\"半结构化数据模型-semi-structured-data-model-xml\">半结构化数据模型（Semi-structured data model ）（XML）</h3>\n<h3 id=\"基于对象的数据模型-object-based-data-model\">基于对象的数据模型（Object-based data model）</h3>\n<h3 id=\"其他模型\">其他模型</h3>\n<ul>\n<li>网状数据模型（Network data model）</li>\n<li>层次数据模型（Hierarchical data model）</li>\n</ul>\n<h2 id=\"实例与模式-instances-and-schemas\">实例与模式（<strong>Instances and</strong> <strong>Schemas</strong> ）</h2>\n<ul>\n<li>实例（instance）：程序中变量在某一时刻的值对应于数据库模式的一个实例</li>\n<li>模式（schema）：物理模式、逻辑模式</li>\n<li>物理数据独立性：物理模式改了逻辑模式不需重写</li>\n</ul>\n<h1 id=\"数据库语言\">数据库语言</h1>\n<h2 id=\"数据定义语言-data-definition-language-ddl\">数据定义语言（Data Definition Language）（DDL）</h2>\n<ul>\n<li>数据库模式的一系列定义</li>\n<li>DDL输出到数据字典中，包括元数据（数据库模式、完整性约束、授权）</li>\n</ul>\n<h2 id=\"数据操纵语言-data-manipulation-language-dml\">数据操纵语言（Data Manipulation Language）（DML）</h2>\n<ul>\n<li>\n<p>访问或操纵按照某种数据模型组织起来的数据</p>\n</li>\n<li>\n<p>过程化DML、声明式DML</p>\n</li>\n</ul>\n<h1 id=\"数据库设计\">数据库设计</h1>\n<ul>\n<li>概念设计：ER图</li>\n<li>逻辑设计：决定数据库模式</li>\n<li>物理设计</li>\n</ul>\n<h1 id=\"数据库系统\">数据库系统</h1>\n<ul>\n<li>存储管理</li>\n<li>查询处理</li>\n<li>事务管理：原子性+一致性</li>\n</ul>\n","categories":["数据库"],"tags":["数据库"]},{"title":"【数据结构】ST表-RMQ问题","url":"/posts/e62206d1/","content":"<p>RMQ(Range Maximum(Minimum) Query)问题，查询区间最大值或最小值，相比线段树，为静态查询，复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<span id=\"more\"></span>\n<h1 id=\"作用\">作用</h1>\n<p>查询区间最大值或最小值</p>\n<h1 id=\"复杂度\">复杂度</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 预处理，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 查询</p>\n<h1 id=\"算法：倍增思想\">算法：倍增思想</h1>\n<p>以最大值为例，最小值取<code>min</code>同理</p>\n<h2 id=\"预处理\">预处理</h2>\n<ul>\n<li><code>Max[i][j]​</code>表示从<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 位置开始的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>j</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.824664em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span></span></span></span></span></span></span> 个数中的最大值（最小值同理），即表示区间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>+</mo><msup><mn>2</mn><mi>j</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[ i , i+2^j )</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 的最大值</li>\n<li>将<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>+</mo><msup><mn>2</mn><mi>j</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[ i , i+2^j )</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 区间拆成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>+</mo><msup><mn>2</mn><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[ i,i+2^{j-1} )</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>​ 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>i</mi><mo>+</mo><msup><mn>2</mn><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></msup><mo separator=\"true\">,</mo><mi>i</mi><mo>+</mo><msup><mn>2</mn><mi>j</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[i+2^{j-1},i+2^j )</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.019104em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 两个区间，则大区间的最大值是小区间最大值的最大值</li>\n<li>更新方程：<code>Max[i][j]=max(Max[i][j-1] , Max[i+2^&#123;j-1&#125;][j-1])</code>​​ ​</li>\n</ul>\n<h2 id=\"查询\">查询</h2>\n<ul>\n<li>\n<p>查询<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[ l , r ]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> 区间最大值：取区间长度的对数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mi>r</mi><mo>−</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">k=\\log_{2} (r-l+1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>，查询结果为<code>max(Max[l][k], Max[r-2^k+1][k])</code></p>\n</li>\n<li>\n<p>上述第二项<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>−</mo><msup><mn>2</mn><mi>k</mi></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r-2^k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.932438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的由来：尝试找右短点为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的区间。设左端点为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> ，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>+</mo><msup><mn>2</mn><mi>k</mi></msup><mo>=</mo><mi>r</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x+2^k =r+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>（左闭右开区间），解得左端点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>r</mi><mo>−</mo><msup><mn>2</mn><mi>k</mi></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x=r-2^k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.932438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>​</p>\n</li>\n</ul>\n<h1 id=\"模板\">模板</h1>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span>            <span class=\"comment\">// 初始化，st[i][0]中记录了数组的初始值</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;<span class=\"number\">20</span>;j++)    <span class=\"comment\">// 区间长度不超过(1&lt;&lt;19)(524288，够用了)</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i+(<span class=\"number\">1</span>&lt;&lt;j)<span class=\"number\">-1</span>&lt;=n;i++)</span><br><span class=\"line\">            st[i][j]=<span class=\"built_in\">max</span>(st[i][j<span class=\"number\">-1</span>],st[i+(<span class=\"number\">1</span>&lt;&lt;(j<span class=\"number\">-1</span>))][j<span class=\"number\">-1</span>]); <span class=\"comment\">// 更新最大值</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">RMQ</span><span class=\"params\">(<span class=\"type\">int</span> l,<span class=\"type\">int</span> r)</span>   <span class=\"comment\">// 查询区间[l,r]的最大值</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k=<span class=\"built_in\">log2</span>(r-l+<span class=\"number\">1</span>); <span class=\"comment\">// 求左端点（算法中细说了）</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">max</span>(st[l][k],st[r-(<span class=\"number\">1</span>&lt;&lt;k)+<span class=\"number\">1</span>][k]);    <span class=\"comment\">// 得到最大值</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span>             <span class=\"comment\">// 普通RMQ问题主函数 </span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(n),<span class=\"built_in\">read</span>(m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(st[i][<span class=\"number\">0</span>]);    <span class=\"comment\">// 原始值写入st[i][0]</span></span><br><span class=\"line\">    <span class=\"built_in\">init</span>();                <span class=\"comment\">// 初始化</span></span><br><span class=\"line\">    <span class=\"type\">int</span> l,r;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;m;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(l),<span class=\"built_in\">read</span>(r);   <span class=\"comment\">// 查询</span></span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,<span class=\"built_in\">RMQ</span>(l,r));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"二维rmq问题\">二维RMQ问题</h1>\n<h2 id=\"目标\">目标</h2>\n<p>查询<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>×</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a\\times b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 矩阵中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 大小的矩阵中的最大值</p>\n<h2 id=\"修改一维st表\">修改一维ST表</h2>\n<ul>\n<li><code>Max[i][j][k]</code> 表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(i,j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span> 为左上角，边长为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span> 的正方形矩阵中的最大值</li>\n<li>递推：<code>Max[i][j][k]=max(Max[i][j][k-1], Max[i][j+2^&#123;k-1&#125;][k-1], Max[i+2^&#123;k-1&#125;][j][k-1], Max[i+2^&#123;k-1&#125;][j+2^&#123;k-1&#125;][k-1])</code>，即将大正方形拆成上下左右四个小正方形</li>\n<li>查询：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x,y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> 为左上角，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 为边长，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">k=\\log_{2} n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.93858em;vertical-align:-0.24414em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>，结果为<code>max(Max[x][y][k], Max[x][y+n-2^k+1][k], Max[x+n-2^k+1][y][k], Max[x+n-2^k+1][y+n-2^k+1][k]</code>，区间端点的推到与一维类似</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> k=<span class=\"number\">1</span>;k&lt;=(<span class=\"type\">int</span>)<span class=\"built_in\">log2</span>(<span class=\"built_in\">min</span>(a,b))+<span class=\"number\">1</span>;k++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i+(<span class=\"number\">1</span>&lt;&lt;k)<span class=\"number\">-1</span>&lt;=a;i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j+(<span class=\"number\">1</span>&lt;&lt;k)<span class=\"number\">-1</span>&lt;=b;j++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                stmax[i][j][k]=<span class=\"built_in\">max</span>(stmax[i][j][k<span class=\"number\">-1</span>], <span class=\"built_in\">max</span>(stmax[i][j+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][k<span class=\"number\">-1</span>],</span><br><span class=\"line\">                        <span class=\"built_in\">max</span>(stmax[i+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][j][k<span class=\"number\">-1</span>], stmax[i+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][j+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][k<span class=\"number\">-1</span>])));</span><br><span class=\"line\">                stmin[i][j][k]=<span class=\"built_in\">min</span>(stmin[i][j][k<span class=\"number\">-1</span>], <span class=\"built_in\">min</span>(stmin[i][j+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][k<span class=\"number\">-1</span>],</span><br><span class=\"line\">                        <span class=\"built_in\">min</span>(stmin[i+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][j][k<span class=\"number\">-1</span>], stmin[i+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][j+(<span class=\"number\">1</span>&lt;&lt;(k<span class=\"number\">-1</span>))][k<span class=\"number\">-1</span>])));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">RMQ</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k=<span class=\"built_in\">log2</span>(n+<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> maxn=<span class=\"built_in\">max</span>(stmax[x][y][k],<span class=\"built_in\">max</span>(stmax[x][y+n-(<span class=\"number\">1</span>&lt;&lt;k)][k],</span><br><span class=\"line\">                 <span class=\"built_in\">max</span>(stmax[x+n-(<span class=\"number\">1</span>&lt;&lt;k)][y][k],stmax[x+n-(<span class=\"number\">1</span>&lt;&lt;k)][y+n-(<span class=\"number\">1</span>&lt;&lt;k)][k])));</span><br><span class=\"line\">    <span class=\"type\">int</span> minn=<span class=\"built_in\">min</span>(stmin[x][y][k],<span class=\"built_in\">min</span>(stmin[x][y+n-(<span class=\"number\">1</span>&lt;&lt;k)][k],</span><br><span class=\"line\">                 <span class=\"built_in\">min</span>(stmin[x+n-(<span class=\"number\">1</span>&lt;&lt;k)][y][k],stmin[x+n-(<span class=\"number\">1</span>&lt;&lt;k)][y+n-(<span class=\"number\">1</span>&lt;&lt;k)][k])));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> maxn-minn;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(a),<span class=\"built_in\">read</span>(b),<span class=\"built_in\">read</span>(n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=a;i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=b;j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">read</span>(stmax[i][j][<span class=\"number\">0</span>]);</span><br><span class=\"line\">            stmin[i][j][<span class=\"number\">0</span>]=stmax[i][j][<span class=\"number\">0</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"built_in\">init</span>();</span><br><span class=\"line\">    <span class=\"type\">int</span> ans=inf;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=a-n+<span class=\"number\">1</span>;i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=b-n+<span class=\"number\">1</span>;j++)</span><br><span class=\"line\">            ans=<span class=\"built_in\">min</span>(ans,<span class=\"built_in\">RMQ</span>(i,j));</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,ans);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"其他\">其他</h1>\n<p>log也可以预处理，毕竟现在题目基本不卡常所以不重要。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\">lg[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++)</span><br><span class=\"line\">    lg[i] = lg[i / <span class=\"number\">2</span>] + <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<h1 id=\"题目\">题目</h1>\n<p>Uva1618</p>\n<p>洛谷P2216 二维RMQ</p>\n<p>洛谷P1816</p>\n<p>洛谷P2880</p>\n","categories":["ACM","数据结构"],"tags":["ACM","ST表","数据结构"]},{"title":"【数据结构】单调队列与单调栈","url":"/posts/da66e1f8/","content":"<p>单调队列和单调栈利用队列和栈两个基本的数据结构维护一个单调序列，用来解决具有单调性的问题</p>\n<span id=\"more\"></span>\n<h1 id=\"单调队列\">单调队列</h1>\n<ul>\n<li>\n<p>维护一个队列，使得队列里的元素具有单调性</p>\n</li>\n<li>\n<p>很好想，看新来的元素是否能插入队尾（即插入后是否还符合单调性质），若不行就弹出队尾元素并继续上述判断，直到可以插入队尾</p>\n</li>\n<li>\n<p>滑动窗口：设定这个队列维护的长度不超过<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> （窗口长度）</p>\n<ul>\n<li>\n<p>每次插入了元素之后，检查队首元素是否还在窗口范围内，不在则出队</p>\n</li>\n<li>\n<p>特别注意，这里不是队列的长度而是队列中元素在原来线性数组中的元素距离。由元素入队的顺序可知，只要检查队首与队尾元素的距离即可</p>\n</li>\n</ul>\n</li>\n<li>\n<p>应用：任意固定长度区间的最值，时间复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//以单调最小值为例</span></span><br><span class=\"line\"><span class=\"type\">int</span> head = <span class=\"number\">1</span>, tail = <span class=\"number\">0</span>; <span class=\"comment\">//当head&gt;=tail时队不空</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (head &lt;= tail &amp;&amp; q[tail] &gt;= a[i])</span><br><span class=\"line\">        tail--;</span><br><span class=\"line\">    <span class=\"comment\">//如果队尾元素比a[i]大，那么队尾元素有生之年都不可能成为最小值,出队</span></span><br><span class=\"line\">    <span class=\"comment\">//队列长度由后面操作控制，不需担心超过窗口范围</span></span><br><span class=\"line\">    q[++tail] = a[i]; <span class=\"comment\">//a[i]入队</span></span><br><span class=\"line\">    p[tail] = i;      <span class=\"comment\">//记录队尾元素的坐标</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (p[head] &lt;= i - k)</span><br><span class=\"line\">        head++; <span class=\"comment\">//如果队首已经不在窗口范围内，出队</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt;= k)</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[head]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//单调最大值</span></span><br><span class=\"line\">head = <span class=\"number\">1</span>, tail = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (head &lt;= tail &amp;&amp; q[tail] &lt;= a[i])</span><br><span class=\"line\">        tail--;</span><br><span class=\"line\">    q[++tail] = a[i];</span><br><span class=\"line\">    p[tail] = i;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (p[head] &lt;= i - k)</span><br><span class=\"line\">        head++;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt;= k)</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[head]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"单调栈\">单调栈</h1>\n<ul>\n<li>\n<p>维护一个具有单调性的栈，原理与单调队列基本相同</p>\n</li>\n<li>\n<p>应用：找向右/左沿伸一直小的位置（换种说法，某个元素作为最值的区间范围）</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (top &gt; <span class=\"number\">0</span> &amp;&amp; a[stk[top]] &lt; a[i])</span><br><span class=\"line\">        top--;    <span class=\"comment\">// 维护一个单调递减的栈</span></span><br><span class=\"line\">    pos[i][<span class=\"number\">0</span>] = stk[top] + <span class=\"number\">1</span>; <span class=\"comment\">// i左边一直比a[i]小的最远延伸位置</span></span><br><span class=\"line\">    stk[++top] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">top = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = n; i &gt; <span class=\"number\">0</span>; i--)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (top &gt; <span class=\"number\">0</span> &amp;&amp; a[stk[top]] &gt; a[i])</span><br><span class=\"line\">        top--;</span><br><span class=\"line\">    pos[i][<span class=\"number\">1</span>] = top ? stk[top] - <span class=\"number\">1</span> : n; <span class=\"comment\">// i右边一直比a[i]大的最远延伸位置</span></span><br><span class=\"line\">    stk[++top] = i;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"题目\">题目</h1>\n<p>解决题目的关键是找单调的特征，然后应用以上两种数据结构。两种结构有时候都可以用，有时不行，要具体分析题目中的单调性质。</p>\n<h2 id=\"单调队列\">单调队列</h2>\n<p>POJ2823/P3865 模板</p>\n<p>洛谷P2251 滑动窗口</p>\n<h2 id=\"单调栈\">单调栈</h2>\n<p>Uva1619 单调队列写的，求最小值覆盖区间</p>\n<p>洛谷P4697</p>\n<p>洛谷P6801</p>\n<p>洛谷P5923 没看懂。。。</p>\n","categories":["ACM","数据结构"],"tags":["ACM","数据结构","单调结构"]},{"title":"【数据结构】并查集","url":"/posts/2e7813af/","content":"<p>并查集是一种对父亲节点信息有记录的数据结构，常与图论结合</p>\n<span id=\"more\"></span>\n<h1 id=\"模板\">模板</h1>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//初始化</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++) </span><br><span class=\"line\">    fa[i]=i;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//查找</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">father</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fa=fa[x]==x?x:<span class=\"built_in\">father</span>(fa[x]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//合并</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">unite</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">    fa[<span class=\"built_in\">father</span>(x)]=<span class=\"built_in\">father</span>(y);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"题型\">题型</h1>\n<ul>\n<li>\n<p>判断一共有几个根节点：循环一遍判断<code>father(i)</code> 是否等于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span></p>\n</li>\n<li>\n<p>特殊题型1：种类（关系）并查集：有几个种类就将数组开到几倍<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> ，这样每一段<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>​ 个数组表示一个种类。注意：虚拟节点和真实节点，注意合并的顺序</p>\n</li>\n<li>\n<p>特殊题型2：并查集删边：可离线的情况下，倒序添加边。</p>\n</li>\n</ul>\n<h1 id=\"题目\">题目</h1>\n<p>洛谷P1892 团伙 种类并查集</p>\n<p>洛谷P1955 程序自动分析</p>\n<p>洛谷P3958 奶酪</p>\n<p>洛谷P3144 Closing the Farm S 并查集删边后联通问题（离线）</p>\n<p>洛谷P1653 并查集应用，WA40</p>\n<p>洛谷P3144 并查集倒序加边</p>\n<h2 id=\"洛谷p1525-关押犯罪\">洛谷P1525 关押犯罪</h2>\n<p>种类并查集+贪心</p>\n<p><a href=\"https://www.luogu.com.cn/problem/P1525\">NOIP2010 提高组] 关押罪犯 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)</a></p>\n<h3 id=\"题意\">题意</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 个点，给出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 对关系，即点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 有关系值<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span></span></span></span> ，将点分为两组，使得每组中存在的点关系值的最大值最小。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mo>≤</mo><mn>20000</mn><mo separator=\"true\">,</mo><mi>M</mi><mo>≤</mo><mn>100000</mn></mrow><annotation encoding=\"application/x-tex\">N\\leq20000,M\\leq 100000</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span></p>\n<h3 id=\"分析\">分析</h3>\n<p>很简单的贪心，尽量拆大的关系，实在拆不了就可以输出了。分配时用并查集记录已分配的关系。</p>\n<p>（本人oi菜鸡时期码风，见谅）</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> fa[N];</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">node</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> u,v,c;</span><br><span class=\"line\">&#125;edge[M];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">cmp</span><span class=\"params\">(<span class=\"type\">const</span> node&amp; a,<span class=\"type\">const</span> node&amp; b)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a.c&gt;b.c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">father</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fa[x]=(fa[x]==x)?fa[x]:<span class=\"built_in\">father</span>(fa[x]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">check</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">father</span>(x)==<span class=\"built_in\">father</span>(y);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">unite</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fa[x]=y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;m;i++)</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>,&amp;edge[i].u,&amp;edge[i].v,&amp;edge[i].c);</span><br><span class=\"line\">    <span class=\"built_in\">sort</span>(edge,edge+m,cmp);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=(n&lt;&lt;<span class=\"number\">1</span>);i++)</span><br><span class=\"line\">        fa[i]=i;</span><br><span class=\"line\">    <span class=\"type\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;m;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">check</span>(edge[i].u,edge[i].v)||<span class=\"built_in\">check</span>(edge[i].u+n,edge[i].v+n))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,edge[i].c);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            fa[<span class=\"built_in\">father</span>(edge[i].u)]=<span class=\"built_in\">father</span>(edge[i].v+n);</span><br><span class=\"line\">            fa[<span class=\"built_in\">father</span>(edge[i].v)]=<span class=\"built_in\">father</span>(edge[i].u+n);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(i==m) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数据结构"],"tags":["ACM","数据结构","并查集"]},{"title":"【数据结构】树状数组","url":"/posts/b289bb13/","content":"<p>树状数组将线性结构转化成树状结构，在单点修改和前缀和（可以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 求得区间和）方面表现优异（log级），相比线段树，应用范围窄，代码短，好写。</p>\n<span id=\"more\"></span>\n<h1 id=\"基本知识\">基本知识</h1>\n<ul>\n<li>一个数字（非0）与它的相反数与，结果是二进制下这个数最靠右的1的位置，操作称作lowbit。</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">lowbit</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> x &amp; -x; &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>树状数组的存放规则：第k位存放从k往前数lowbit(k)个数的和</li>\n</ul>\n<img data-src=\"/posts/b289bb13/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84.png\" class=\"\" title=\"树状数组\">\n<ul>\n<li>\n<p>复杂度：空间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>，查询&amp;修改时间复杂度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>基本都可以用线段树解决，没有线段树灵活</p>\n</li>\n</ul>\n<h1 id=\"基本操作：单点修改-区间查询\">基本操作：单点修改，区间查询</h1>\n<h2 id=\"目标\">目标</h2>\n<p>对于一个数组，支持在线单点修改操作与区间和查询操作</p>\n<h2 id=\"单点修改\">单点修改</h2>\n<p>下标不断+自己的lowbit，更新该下标的值，直到n为止</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x &lt; <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (x &lt;= n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        tree[x] += k;</span><br><span class=\"line\">        x += <span class=\"built_in\">lowbit</span>(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"区间查询\">区间查询</h2>\n<p>查询<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,x]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span></span></span></span> 区间和，x作为下标不断减去自己的lowbit，直到0 ，每次将<code>tree[x]</code>加入答案中，利用前缀和可以求出任意区间<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,y]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span></span></span></span> 的和<code>query(y)-query(x-1)</code></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (x &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        sum += tree[x];</span><br><span class=\"line\">        x -= <span class=\"built_in\">lowbit</span>(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"改进：实现区间修改与区间查询\">改进：实现区间修改与区间查询</h1>\n<ul>\n<li>\n<p>设差分数组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，则每个点的值<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_i=\\sum_{i=1}^{n}d_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 。</p>\n</li>\n<li>\n<p>区间修改<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> ：每个元素<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">+k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>l</mi></msub><mo>←</mo><msub><mi>d</mi><mi>l</mi></msub><mo>+</mo><mi>k</mi><mo separator=\"true\">,</mo><msub><mi>d</mi><mrow><mi>r</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>←</mo><msub><mi>d</mi><mrow><mi>r</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>−</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">d_l\\leftarrow d_l+k,d_{r+1}\\leftarrow d_{r+1}-k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">←</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">←</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ，将差分数组建成树状数组，则区间修改对应修改单点值。</p>\n</li>\n<li>\n<p>单点查询：求<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,x]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span></span></span></span> 区间和即可</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 第一种写法：用差分值直接建树，对于每次查询输出就可以</span></span><br><span class=\"line\"><span class=\"comment\">//原始值</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    cin &gt;&gt; val;</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(i, val);</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(i + <span class=\"number\">1</span>, -val);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//修改[l,r]+k</span></span><br><span class=\"line\"><span class=\"built_in\">update</span>(l, k);</span><br><span class=\"line\"><span class=\"built_in\">update</span>(r+<span class=\"number\">1</span>, -k);</span><br><span class=\"line\"><span class=\"comment\">//查询x</span></span><br><span class=\"line\">cout &lt;&lt; <span class=\"built_in\">query</span>(x) &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第二种写法：储存原始值，每次查询输出原始值+差分数组值</span></span><br><span class=\"line\"><span class=\"comment\">//原始值</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    cin &gt;&gt; a[i];</span><br><span class=\"line\"><span class=\"comment\">//修改操作同第一种</span></span><br><span class=\"line\"><span class=\"comment\">//查询x</span></span><br><span class=\"line\">cout &lt;&lt; a[x] + <span class=\"built_in\">query</span>(x) &lt;&lt; endl;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>区间查询：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>i</mi></msubsup><msub><mi>d</mi><mi>j</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>d</mi><mi>i</mi></msub><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>i</mi><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n}a_i=\\sum_{i=1}^{n}\\sum_{j=1}^{i}d_j=\\sum_{i=1}^{n}(n-i+1)d_i=(n+1)\\sum_{i=1}^{n}d_i-\\sum_{i=1}^{n}id_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.400382em;vertical-align:-0.43581800000000004em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.964564em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，维护两个树状数组，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">id_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，修改相应单点修改的参数就可以了。</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 将树状数组封装成结构体，T1是差分数组，T2是id_i，修改[l,r]+k</span></span><br><span class=\"line\">T1.<span class=\"built_in\">update</span>(l, k);</span><br><span class=\"line\">T1.<span class=\"built_in\">update</span>(r + <span class=\"number\">1</span>, -k);</span><br><span class=\"line\">T2.<span class=\"built_in\">update</span>(l, l * k);</span><br><span class=\"line\">T2.<span class=\"built_in\">update</span>(r + <span class=\"number\">1</span>, (r + <span class=\"number\">1</span>) * (-k));</span><br><span class=\"line\"><span class=\"comment\">// [1,x]区间和查询</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (x + <span class=\"number\">1</span>) * T1.<span class=\"built_in\">query</span>(x) - T2.<span class=\"built_in\">query</span>(x);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"题目\">题目</h1>\n<p>洛谷P5459</p>\n<h2 id=\"洛谷p6186\">洛谷P6186</h2>\n<p><a href=\"https://www.luogu.com.cn/problem/P6186\">洛谷P6186 [NOI Online #1 提高组] 冒泡排序</a></p>\n<p>逆序对与冒泡排序性质的研究+权值树状数组，两种方法</p>\n<p>题解首发于CSDN博客2022.1.8 <a href=\"https://blog.csdn.net/default012/article/details/122723046?spm=1001.2014.3001.5501\">NOI Online #1 提高组] 冒泡排序：【冒泡排序】与【逆序对】问题default111的博客-CSDN博客</a></p>\n<h3 id=\"题意\">题意</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 元排列<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">p_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，两种操作：</p>\n<p><code>1 x</code>：交换当前排列中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 位置的数。</p>\n<p><code>2 x</code>：输出当前排列经过<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 轮冒泡排序交换后的逆序对个数。</p>\n<h3 id=\"输入输出\">输入输出</h3>\n<p>输入：单组数据，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 排列长度，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 操作数，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 元排列，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 个操作。</p>\n<p>输出：每个一行，操作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 的结果。</p>\n<h3 id=\"数据范围\">数据范围</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>≤</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>m</mi><mo>≤</mo><mn>2</mn><mi>e</mi><mn>5</mn></mrow><annotation encoding=\"application/x-tex\">2\\leq n,m\\leq 2e5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304100000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">5</span></span></span></span> ，操作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">int</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span></span></span></span> 范围，其他输入数保证合法。</p>\n<h3 id=\"分析\">分析</h3>\n<p>开始毫无头绪，我太笨了，看题解都看了好久，把两种方法整理一下TAT</p>\n<p>从逆序对和冒泡排序的本质出发：</p>\n<ul>\n<li>\n<p><strong>逆序对</strong>，对于数组中的一个数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 来说，向左找逆序对的个数为它左边比它大的数的个数。</p>\n</li>\n<li>\n<p><strong>冒泡排序</strong>的一轮，本质是对于每个数，如果左边没有比它大的，会向右换到第一个比它大的数左边；反过来说，如果一个数左边有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 个比它大的数，那么每轮让左边最近的大数交换到右边，逆序对个数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 轮后（即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 轮），它开始向右交换。</p>\n</li>\n</ul>\n<p>记原排列为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">[</mo><mn>1...</mn><mi>n</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">a[1...n]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">]</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">b[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">a[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 左边比它大的数的个数，则逆序对的个数为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n} b[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span> 。</p>\n<p>考虑操作二，每一轮冒泡排序，若<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo stretchy=\"false\">[</mo><mn>1...</mn><mi>n</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">b[1...n]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">]</span></span></span></span> 不为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 则减<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>，则第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 轮的逆序对个数为：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo>∑</mo><mrow><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mi>x</mi></mrow></munder><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mi>x</mi><munder><mo>∑</mo><mrow><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mi>x</mi></mrow></munder><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n} b[i]-\\sum_{i=1}^{n}min(b[i],x)=\\sum_{b[i]&gt;x} b[i]-x\\sum_{b[i]&gt;x} 1\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.5660100000000003em;vertical-align:-1.516005em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.808995em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span><span class=\"mopen mtight\">[</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mclose mtight\">]</span><span class=\"mrel mtight\">&gt;</span><span class=\"mord mathdefault mtight\">x</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.516005em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.5660100000000003em;vertical-align:-1.516005em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.808995em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">b</span><span class=\"mopen mtight\">[</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mclose mtight\">]</span><span class=\"mrel mtight\">&gt;</span><span class=\"mord mathdefault mtight\">x</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.516005em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span></span></span></span></span></p>\n<ul>\n<li>\n<p>方法一：右边的式子是很明显的两颗权值线段树！</p>\n</li>\n<li>\n<p>方法二：观察第一个式子，第一项可以在读入数据时建立权值线段树求解得到；第二项<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>≥</mo><mi>x</mi><mtext>的个数</mtext></mrow><annotation encoding=\"application/x-tex\">f(x)=\\sum_{i=1}^{n}min(b[i],x)=f(x-1)+b[i]\\geq x的个数</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">个</span><span class=\"mord cjk_fallback\">数</span></span></span></span> 得到。因为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>&lt;</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">0\\leq b[i]&lt;n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> ，开一个桶<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo stretchy=\"false\">[</mo><mi>c</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">d[c]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">]</span></span></span></span> 记录<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo stretchy=\"false\">[</mo><mn>1...</mn><mi>n</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mo>=</mo><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">b[1...n]==c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span></span></span></span> 的个数，则<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>+</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>x</mi></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mi>n</mi><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>x</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f(x)=f(x-1)+\\sum_{i=x}^{n-1}d[i]=f(x-1)+n-\\sum_{i=0}^{x-1}d[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.253718em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\">x</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.253718em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span>，其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">f(0)=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>。有了<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mi>n</mi><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>x</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f(x)-f(x-1)=n-\\sum_{i=0}^{x-1}d[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.253718em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span>，建一棵线段树/树状数组，每次求区间和就可以得到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span></span></span></span> 了！而如果我们把线段树/树状数组略作修改，将第一个节点设为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n} b[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span></span></span></span>，并依次加入<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>x</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mi>d</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^{x-1}d[i]-n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.253718em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954008em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 节点，就可以通过一个直接的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1...</mn><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1...x]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">]</span></span></span></span> 区间求和得到答案！</p>\n</li>\n</ul>\n<p>至此，仅操作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> ，即对于一个序列求任意轮冒泡排序后逆序对个数的问题解决了。</p>\n<p>操作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 会产生什么影响呢？只交换相邻两个，只能影响到它们俩有关的量。</p>\n<ul>\n<li>方法一：直接更新两棵权值线段树就好了！</li>\n<li>方法二：考虑交换<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>a</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">a[i],a[i+1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> （同步交换<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 数组），初始逆序对个数发生<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>±</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\pm 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">±</span><span class=\"mord\">1</span></span></span></span> 的改变；另外相当于把<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> 的两个相邻的桶<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>d</mi><mo stretchy=\"false\">[</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo><mtext>和</mtext><mi>d</mi><mo stretchy=\"false\">[</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mtext>，或</mtext><mi>d</mi><mo stretchy=\"false\">[</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo><mtext>和</mtext><mi>d</mi><mo stretchy=\"false\">[</mo><mi>b</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(d[b[i]]和d[b[i]-1]，或d[b[i+1]]和d[b[i+1]+1])</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mclose\">]</span><span class=\"mord cjk_fallback\">和</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord cjk_fallback\">或</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mclose\">]</span><span class=\"mord cjk_fallback\">和</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">b</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span></span></span></span> ，做了修改（左+1右-1或反过来），那么只需要修改左边那个桶对应的上述树状数组的节点值即可！</li>\n</ul>\n<p>至此，分析完了（吐血）。</p>\n<h3 id=\"代码\">代码</h3>\n<p>注意long long</p>\n<h4 id=\"方法一\">方法一</h4>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> n,m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N],b[N]; <span class=\"comment\">// a是原始排列，b是左边比它大的数的个数</span></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">BIT</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    ll tree[N];</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">lowbit</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> x &amp; (-x); &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123; <span class=\"built_in\">memset</span>(tree,<span class=\"number\">0</span>,<span class=\"built_in\">sizeof</span>(tree)); &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> val=<span class=\"number\">1</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!x)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        <span class=\"comment\">//cout&lt;&lt;x&lt;&lt;&#x27; &#x27;&lt;&lt;val&lt;&lt;&quot;:\\n&quot;;</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(x&lt;=n)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//cout&lt;&lt;x&lt;&lt;endl;</span></span><br><span class=\"line\">            tree[x]+=val;</span><br><span class=\"line\">            x+=<span class=\"built_in\">lowbit</span>(x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> ll <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        ll sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(x&gt;<span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            sum+=tree[x];</span><br><span class=\"line\">            x-=<span class=\"built_in\">lowbit</span>(x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> ll <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> l,<span class=\"type\">int</span> r)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(r)-<span class=\"built_in\">query</span>(l<span class=\"number\">-1</span>); &#125;</span><br><span class=\"line\">&#125;origin,number;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(n),<span class=\"built_in\">read</span>(m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(a[i]);</span><br><span class=\"line\">        b[i]=i<span class=\"number\">-1</span>-origin.<span class=\"built_in\">query</span>(a[i]<span class=\"number\">-1</span>); <span class=\"comment\">// 求左边比a[i]大的数的个数</span></span><br><span class=\"line\">        origin.<span class=\"built_in\">update</span>(a[i]); <span class=\"comment\">// 插入a[i]</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    origin.<span class=\"built_in\">init</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        origin.<span class=\"built_in\">update</span>(b[i],b[i]); <span class=\"comment\">// \\sum b[i]</span></span><br><span class=\"line\">        number.<span class=\"built_in\">update</span>(b[i]); <span class=\"comment\">// \\sum 1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> op,x;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(op),<span class=\"built_in\">read</span>(x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(op==<span class=\"number\">2</span>)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lld\\n&quot;</span>,x&gt;=n?<span class=\"number\">0</span>:origin.<span class=\"built_in\">query</span>(x+<span class=\"number\">1</span>,n)-x*number.<span class=\"built_in\">query</span>(x+<span class=\"number\">1</span>,n));</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a[x]&gt;a[x+<span class=\"number\">1</span>])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                origin.<span class=\"built_in\">update</span>(b[x+<span class=\"number\">1</span>],-b[x+<span class=\"number\">1</span>]);</span><br><span class=\"line\">                number.<span class=\"built_in\">update</span>(b[x+<span class=\"number\">1</span>],<span class=\"number\">-1</span>);</span><br><span class=\"line\">                b[x+<span class=\"number\">1</span>]--;</span><br><span class=\"line\">                origin.<span class=\"built_in\">update</span>(b[x+<span class=\"number\">1</span>],b[x+<span class=\"number\">1</span>]);</span><br><span class=\"line\">                number.<span class=\"built_in\">update</span>(b[x+<span class=\"number\">1</span>],<span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                origin.<span class=\"built_in\">update</span>(b[x],-b[x]);</span><br><span class=\"line\">                number.<span class=\"built_in\">update</span>(b[x],<span class=\"number\">-1</span>);</span><br><span class=\"line\">                b[x]++;</span><br><span class=\"line\">                origin.<span class=\"built_in\">update</span>(b[x],b[x]);</span><br><span class=\"line\">                number.<span class=\"built_in\">update</span>(b[x],<span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">swap</span>(a[x],a[x+<span class=\"number\">1</span>]);</span><br><span class=\"line\">            <span class=\"built_in\">swap</span>(b[x],b[x+<span class=\"number\">1</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法二\">方法二</h4>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> n,m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N],b[N],d[N]; <span class=\"comment\">// a是原始排列，b是左边比它大的数的个数，d是桶</span></span><br><span class=\"line\">ll tree[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> x,ll val=<span class=\"number\">1</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!x)</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"comment\">//cout&lt;&lt;x&lt;&lt;&#x27; &#x27;&lt;&lt;val&lt;&lt;&quot;:\\n&quot;;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(x&lt;=n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//cout&lt;&lt;x&lt;&lt;endl;</span></span><br><span class=\"line\">        tree[x]+=val;</span><br><span class=\"line\">        x+=<span class=\"built_in\">lowbit</span>(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> ll <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(x&gt;<span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        sum+=tree[x];</span><br><span class=\"line\">        x-=<span class=\"built_in\">lowbit</span>(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(n),<span class=\"built_in\">read</span>(m);</span><br><span class=\"line\">    ll cnt=<span class=\"number\">0</span>; <span class=\"comment\">// 记录初始逆序对个数</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(a[i]);</span><br><span class=\"line\">        b[i]=i<span class=\"number\">-1</span>-<span class=\"built_in\">query</span>(a[i]<span class=\"number\">-1</span>); <span class=\"comment\">// 求左边比a[i]大的数的个数</span></span><br><span class=\"line\">        <span class=\"built_in\">update</span>(a[i]); <span class=\"comment\">// 插入a[i]</span></span><br><span class=\"line\">        d[b[i]]++;</span><br><span class=\"line\">        cnt+=b[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(tree,<span class=\"number\">0</span>,<span class=\"built_in\">sizeof</span>(tree));</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(<span class=\"number\">1</span>,cnt); <span class=\"comment\">// 第一个节点记录原逆序对数a</span></span><br><span class=\"line\">    cnt=<span class=\"number\">0</span>; <span class=\"comment\">// 用来求d数组的和</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;n;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        cnt+=d[i];</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(i+<span class=\"number\">2</span>,cnt-n); <span class=\"comment\">// 注意第一个节点已经加过了，所以是i+2</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> op,x;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(op),<span class=\"built_in\">read</span>(x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(op==<span class=\"number\">2</span>)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lld\\n&quot;</span>,x&gt;=n?<span class=\"number\">0</span>:<span class=\"built_in\">query</span>(x+<span class=\"number\">1</span>));</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a[x]&gt;a[x+<span class=\"number\">1</span>])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"built_in\">update</span>(<span class=\"number\">1</span>,<span class=\"number\">-1</span>); <span class=\"comment\">// 总数-1</span></span><br><span class=\"line\">                b[x+<span class=\"number\">1</span>]--;</span><br><span class=\"line\">                <span class=\"built_in\">update</span>(b[x+<span class=\"number\">1</span>]+<span class=\"number\">2</span>); <span class=\"comment\">// 左+1右-1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"built_in\">update</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">                <span class=\"built_in\">update</span>(b[x]+<span class=\"number\">2</span>,<span class=\"number\">-1</span>); <span class=\"comment\">// 左-1右+1</span></span><br><span class=\"line\">                b[x]++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">swap</span>(a[x],a[x+<span class=\"number\">1</span>]);</span><br><span class=\"line\">            <span class=\"built_in\">swap</span>(b[x],b[x+<span class=\"number\">1</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数据结构"],"tags":["ACM","数据结构","树状数组"]},{"title":"【数据结构】线段树合集","url":"/posts/55f00861/","content":"<p>线段树是很实用的数据结构，除普通线段树外，有动态开点线段树、权值线段树、可持久化线段树，以及适用于多种题型，可以是其他算法的优化方法，十分灵活。</p>\n<span id=\"more\"></span>\n<h1 id=\"普通线段树\">普通线段树</h1>\n<ul>\n<li>维护区间的特殊信息</li>\n<li>本质：将区间不断分成左右两部分，每个区间是一个节点，利用二叉树结构维护区间信息，所以父节点u 的子节点编号是2u 和2u+1 ，区间[L,R] 的左右区间是[L,mid] 和(mid,R]</li>\n<li>建树：递归建左右区间</li>\n<li>维护/查询操作：当前区间为[L,R] ，须更新区间为[l,r] ，先求出L,R 的中间值mid ，有三种情况：\n<ul>\n<li>若维护/查询区间是左区间[L,mid] 的子区间，就以[l,r] 递归维护/查询左区间</li>\n<li>若维护/查询区间是右区间(mid,R] 的子区间，就以[l,r] 递归维护/查询右区间</li>\n<li>若维护/查询区间横跨mid ，则分别以[l,mid],(mid,r] 递归维护/查询左右区间</li>\n<li>维护操作在上述操作结束后，进行<code>pushup</code> 操作，即用子区间更新后的信息来维护当前区间的信息</li>\n</ul>\n</li>\n<li>4倍空间</li>\n</ul>\n<h2 id=\"lazy标记\">lazy标记</h2>\n<ul>\n<li>更新具有连续性，例如，先+1，再+2，可以在需要时直接+3，而不用分两步。</li>\n<li>对于系列更新操作，若不查询/若不更新到子节点，即不需要使用更新后的值，那就没有必要更新，也不需要告诉子节点“需要更新”。</li>\n<li>因此我们把需要更新的内容记录在区间对应的节点<code>lazy</code>上，等到需要的时候再将更新内容传递给子节点。</li>\n<li>传递过程是向下的，因此我写做<code>pushdown</code>。</li>\n<li>即，维护和查询时，先边界，再<code>pushdown</code>，再递归，（更新操作就再<code>pushup</code>）</li>\n</ul>\n<p>带lazy标记的普通线段树代码（节点信息以数组存储，没有写成结构体）：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> L[N &lt;&lt; <span class=\"number\">2</span>], R[N &lt;&lt; <span class=\"number\">2</span>];</span><br><span class=\"line\">ll sum[N &lt;&lt; <span class=\"number\">2</span>], lazy[N &lt;&lt; <span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">ls</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> x &lt;&lt; <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">rs</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> x &lt;&lt; <span class=\"number\">1</span> | <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">push_up</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span> </span>&#123; sum[rt] = (sum[<span class=\"built_in\">ls</span>(rt)] + sum[<span class=\"built_in\">rs</span>(rt)]) % mod; &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">push_down</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!lazy[rt])</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    lazy[<span class=\"built_in\">ls</span>(rt)] += lazy[rt], lazy[<span class=\"built_in\">rs</span>(rt)] += lazy[rt];</span><br><span class=\"line\">    sum[<span class=\"built_in\">ls</span>(rt)] += lazy[rt] * (R[<span class=\"built_in\">ls</span>(rt)] - L[<span class=\"built_in\">ls</span>(rt)] + <span class=\"number\">1</span>);</span><br><span class=\"line\">    sum[<span class=\"built_in\">rs</span>(rt)] += lazy[rt] * (R[<span class=\"built_in\">rs</span>(rt)] - L[<span class=\"built_in\">rs</span>(rt)] + <span class=\"number\">1</span>);</span><br><span class=\"line\">    lazy[rt] = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">build</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    L[rt] = l, R[rt] = r;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l == r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%lld&quot;</span>, &amp;sum[rt]);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = (l + r) &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(<span class=\"built_in\">ls</span>(rt), l, mid);</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">    <span class=\"built_in\">push_up</span>(rt);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, ll val)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (L[rt] == l &amp;&amp; R[rt] == r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        lazy[rt] += val;</span><br><span class=\"line\">        sum[rt] += val * (r - l + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">push_down</span>(rt);</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = (L[rt] + R[rt]) &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r &lt;= mid)</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(<span class=\"built_in\">ls</span>(rt), l, r, val);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (l &gt; mid)</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(<span class=\"built_in\">rs</span>(rt), l, r, val);</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">update</span>(<span class=\"built_in\">ls</span>(rt), l, mid, val), <span class=\"built_in\">update</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r, val);</span><br><span class=\"line\">    <span class=\"built_in\">push_up</span>(rt);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (L[rt] == l &amp;&amp; R[rt] == r)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sum[rt];</span><br><span class=\"line\">    <span class=\"built_in\">push_down</span>(rt);</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = (L[rt] + R[rt]) &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r &lt;= mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">ls</span>(rt), l, r);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt; mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">rs</span>(rt), l, r);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">ls</span>(rt), l, mid) + <span class=\"built_in\">query</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>乘法和加法同时维护pushdown的修改：\n<ul>\n<li>两个懒标记</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">[</mo><mi>l</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>=</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">[</mo><mi>l</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>∗</mo><mi>l</mi><mi>a</mi><mi>z</mi><mi>y</mi><mi>m</mi><mo stretchy=\"false\">[</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">]</mo><mo>+</mo><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">[</mo><mi>l</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>−</mo><mi>L</mi><mo stretchy=\"false\">[</mo><mi>l</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>∗</mo><mi>l</mi><mi>a</mi><mi>z</mi><mi>y</mi><mi>a</mi><mo stretchy=\"false\">[</mo><mi>r</mi><mi>t</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">sum[ls(rt)]=sum[ls(rt)]*lazym[rt]+(R[ls(rt)]-L[ls(rt)]+1)*lazya[rt]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">]</span></span></span></span></li>\n<li>孩子乘法标记*=父亲乘法标记</li>\n<li>孩子加法标记=孩子加法标记*父亲乘法标记+父亲加法标记</li>\n<li>父亲加法标记=0，乘法标记=1</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"离散化\">离散化</h1>\n<p>对于所有的修改操作，离线处理，将涉及的区间映射到小范围的连续的数，对小范围建线段树处理</p>\n<h1 id=\"动态开点线段树\">动态开点线段树</h1>\n<ul>\n<li>不在一开始就把树建好，而是每更新/询问到一个不存在的区间时开新节点记录这个区间的信息</li>\n<li>动态开点时要单独记录每个节点的左右孩子信息，不能直接用二叉树的性质，因为并不是每个区间都有子节点（不一定是二叉树）</li>\n<li>由上述内容可知，动态开点线段树没有单独的建树过程，而是在修改过程中按需建树</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// cnt是动态开点的节点下标</span></span><br><span class=\"line\"><span class=\"comment\">// ls/rs是储存左右节点下标的数组</span></span><br><span class=\"line\"><span class=\"comment\">// 初始调用时，int rt=0; update(rt,...);</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">pushup</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span> </span>&#123; a[rt] = a[ls[rt]] + a[rs[rt]]; &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span>&amp; rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> pos, <span class=\"type\">int</span> val)</span> <span class=\"comment\">// 在pos位置插入元素val，注意是&amp;rt</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!rt)</span><br><span class=\"line\">        rt = ++cnt;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l == r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        a[rt] += val;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pos &lt;= mid)</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(ls[rt], l, mid, pos, val);</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">update</span>(rs[rt], mid + <span class=\"number\">1</span>, r, pos, val);</span><br><span class=\"line\">    <span class=\"built_in\">pushup</span>(rt);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>查询</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!rt || x &gt; y)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l==x&amp;&amp;r==y)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a[rt];</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(y&lt;=mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(ls[rt], l, mid, x, y);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x&gt;mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(rs[rt], mid + <span class=\"number\">1</span>, r, x, y);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(ls[rt], l, mid, x, mid) + <span class=\"built_in\">query</span>(rs[rt], mid + <span class=\"number\">1</span>, r, mid + <span class=\"number\">1</span>, y);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"权值线段树\">权值线段树</h1>\n<ul>\n<li>权值线段树：维护区间内各元素出现次数</li>\n<li>作用\n<ul>\n<li>数列第k大/小</li>\n<li>某个数的数列中排名</li>\n<li>比某个数大的最小值/比某个数小的最大值</li>\n</ul>\n</li>\n<li>维护信息：叶子节点（元素出现次数），其他节点（子节点元素总数）</li>\n<li>注意：本节的线段树实现没有记录L[rt] 和R[rt] 。</li>\n<li>更新</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">pushup</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span> </span>&#123; a[rt] = a[<span class=\"built_in\">ls</span>(rt)] + a[<span class=\"built_in\">rs</span>(rt)]; &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> k, <span class=\"type\">int</span> cnt)</span> <span class=\"comment\">// 值为k的数多了cnt个</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l == r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        a[rt] += cnt; <span class=\"comment\">// 动态开点：先前没有这个节点</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k &lt;= mid)</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(<span class=\"built_in\">ls</span>(rt), l, mid, k, cnt);</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">update</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r, k, cnt);</span><br><span class=\"line\">    <span class=\"built_in\">pushup</span>(rt);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>查询元素val的个数：</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> val)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l==r)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a[rt];</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(val&lt;=mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">ls</span>(rt), l, mid, val);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r, val);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>查询第k大：注意mid的值，左边比右边多1，因此是k-mid</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> k)</span> <span class=\"comment\">// 查询第k大的数</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l == r)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> l;</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k &lt; mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r, k); <span class=\"comment\">// 右半部找第k大</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">ls</span>(rt), l, mid, k - mid); <span class=\"comment\">// 右边比k个数多，在左边继续找</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>查询区间[x,y] 有多少个数</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> rt, <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l == x &amp;&amp; r == y)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a[rt];</span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (y &lt;= mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">ls</span>(rt), l, mid, x, y);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x &gt; mid)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r, x, y);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(<span class=\"built_in\">ls</span>(rt), l, mid, x, mid) + <span class=\"built_in\">query</span>(<span class=\"built_in\">rs</span>(rt), mid + <span class=\"number\">1</span>, r, mid + <span class=\"number\">1</span>, y);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"可持久化线段树\">可持久化线段树</h3>\n<h1 id=\"zkw线段树\">zkw线段树</h1>\n<p>核心：自底向上</p>\n<p>考虑一颗满二叉树作为线段树，可以发现叶子节点的规律：</p>\n<img data-src=\"/posts/55f00861/image-20230421203835091.png\" class=\"\" title=\"image-20230421203835091\">\n<p>叶子节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 的节点编号是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>+</mo><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">p+8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span></span></span></span> 。</p>\n<p>一般地，设需要维护的区间为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,n]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">]</span></span></span></span> ，由于查询的需要（后面会说），需要扩展<strong>线段树维护的区间</strong>到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0,n+1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span>，则补齐满二叉树有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mo>=</mo><mo stretchy=\"false\">⌈</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">⌉</mo></mrow><annotation encoding=\"application/x-tex\">h=\\lceil\\log_2 (n+2)\\rceil</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">⌈</span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mclose\">⌉</span></span></span></span> 层（<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 开始计数） ，叶子节点的序号为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo>+</mo><msup><mn>2</mn><mi>h</mi></msup><mo separator=\"true\">,</mo><msup><mn>2</mn><mi>h</mi></msup><mo>−</mo><mn>1</mn><mo>+</mo><msup><mn>2</mn><mi>h</mi></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0+2^h,2^{h}-1+2^h]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.043548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">h</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">h</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.099108em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">h</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> ，即叶子节点的起始序号为第一个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><mi>n</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\geq n+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 的幂次方<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 。对应区间序号<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo>+</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>+</mo><mi>m</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0+m,m-1+m]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">]</span></span></span></span>，我们想要的区间是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo>+</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1+m,n+m]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7777700000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mclose\">]</span></span></span></span> ，则有建树：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">build</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// m = 1 &lt;&lt; ceil(_lg(n + 2));</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(m; m &lt;= n + <span class=\"number\">1</span>; m &lt;&lt;= <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        tree[i + m] = a[i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = m - <span class=\"number\">1</span>; i; i--)</span><br><span class=\"line\">        tree[i] = tree[<span class=\"built_in\">ls</span>(i)] + tree[<span class=\"built_in\">rs</span>(i)];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>单点修改：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> pos, <span class=\"type\">int</span> val)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = pos + m; i; i &gt;&gt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">        tree[i] += val;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>查询区间和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[l,r]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">]</span></span></span></span> ，首先扩充成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(l-1,r+1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> ，根据下面算法手推一下更好理解。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(l += m<span class=\"number\">-1</span>, r += m+<span class=\"number\">1</span>; l ^ r ^ <span class=\"number\">1</span>; l &gt;&gt;= <span class=\"number\">1</span>, r &gt;&gt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (~l &amp; <span class=\"number\">1</span>) ans += tree[l ^ <span class=\"number\">1</span>]; <span class=\"comment\">// 左端点是左儿子</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r &amp; <span class=\"number\">1</span>) ans += tree[r ^ <span class=\"number\">1</span>]; <span class=\"comment\">// 右端点是右儿子</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数据结构"],"tags":["ACM","数据结构","线段树"]},{"title":"【数学】整除","url":"/posts/ddc0be66/","content":"<p>开数论坑了TAT</p>\n<p>本文介绍整除、最小公倍数、最大公约数和扩展欧几里得算法等基础知识。</p>\n<span id=\"more\"></span>\n<p>退役边缘人，近期整理下模板啦~</p>\n<h1 id=\"基本概念与性质\">基本概念与性质</h1>\n<ul>\n<li>偶数、奇数</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mo>:</mo><mi>a</mi><mo>=</mo><mi>q</mi><mi>b</mi><mo>+</mo><mi>r</mi><mo separator=\"true\">,</mo><mn>0</mn><mo>≤</mo><mi>r</mi><mo>&lt;</mo><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mi mathvariant=\"normal\">∣</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\mod: a=qb+r,0\\leq r&lt;|b|\\neq 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>，记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mi>a</mi><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">r=a\\mod b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mo separator=\"true\">,</mo><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>c</mi><mo>⇒</mo><mi mathvariant=\"normal\">∀</mi><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo separator=\"true\">,</mo><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mi>x</mi><mo>+</mo><mi>c</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">a|b,a|c\\Rightarrow \\forall x,y,a|bx+cy</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 称公因子，最大的记作<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span>（对应有最小公倍数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>c</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">lcm(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span>）。</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mo separator=\"true\">,</mo><mi>b</mi><mi mathvariant=\"normal\">∣</mi><mi>c</mi><mo>⇒</mo><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">a|b,b|c\\Rightarrow a|c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">c</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mo>⇔</mo><mi>m</mi><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>m</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">m\\neq 0,a|b\\Leftrightarrow ma|mb</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">b</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mo separator=\"true\">,</mo><mi>b</mi><mi mathvariant=\"normal\">∣</mi><mi>a</mi><mo>⇒</mo><mi>a</mi><mo>=</mo><mo>±</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a|b,b|a\\Rightarrow a=\\pm b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">±</span><span class=\"mord mathdefault\">b</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mo separator=\"true\">,</mo><mi>b</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn><mo>⇒</mo><mi mathvariant=\"normal\">∣</mi><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mo>≤</mo><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">a|b,b\\neq 0\\Rightarrow |a|\\leq |b|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mord\">∣</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">∣</mi><mi>m</mi><mo separator=\"true\">,</mo><mi>b</mi><mi mathvariant=\"normal\">∣</mi><mi>m</mi><mo>⇒</mo><mi>l</mi><mi>c</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">∣</mi><mi>m</mi><mo separator=\"true\">;</mo><mi>d</mi><mi mathvariant=\"normal\">∣</mi><mi>a</mi><mo separator=\"true\">,</mo><mi>d</mi><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mo>⇒</mo><mi>d</mi><mi mathvariant=\"normal\">∣</mi><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a|m,b|m\\Rightarrow lcm(a,b)|m;d|a,d|b\\Rightarrow d|\\gcd(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">m</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>b</mi><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">ab=\\gcd(a,b)\\times \\text{lcm}(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo separator=\"true\">,</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>∈</mo><msup><mi>N</mi><mo>+</mo></msup><mo separator=\"true\">,</mo><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>m</mi><mi>a</mi><mo separator=\"true\">,</mo><mi>m</mi><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mo>×</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">m,a,b\\in N^+,\\text{lcm}(ma,mb)=m\\times \\gcd(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.021331em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<h1 id=\"辗转相除法-欧几里得算法\">辗转相除法（欧几里得算法）</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>=</mo><mi>q</mi><mi>b</mi><mo>+</mo><mi>r</mi><mo separator=\"true\">,</mo><mn>0</mn><mo>≤</mo><mi>r</mi><mo>&lt;</mo><mi mathvariant=\"normal\">∣</mi><mi>b</mi><mi mathvariant=\"normal\">∣</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>r</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a=qb+r,0\\leq r&lt;|b|\\neq 0,\\gcd(a,b)=\\gcd(b,r)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\">b</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">ll <span class=\"title\">gcd</span><span class=\"params\">(ll a, ll b)</span> </span>&#123; <span class=\"keyword\">return</span> b == <span class=\"number\">0</span> ? a : <span class=\"built_in\">gcd</span>(b, a % b); &#125;</span><br></pre></td></tr></table></figure>\n<p><strong>扩展欧几里得</strong>：</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>x</mi><mi>a</mi><mo>+</mo><mi>y</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,b)=xa+yb</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">b</span></span></span></span> ，求解<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">x,y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 。</p>\n<p>推论：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo>⇔</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mtext>互素</mtext><mo>⇔</mo><mtext>存在</mtext><mi>x</mi><mi>a</mi><mo>+</mo><mi>b</mi><mi>y</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,b)=1\\Leftrightarrow a,b互素\\Leftrightarrow 存在xa+by=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord cjk_fallback\">互</span><span class=\"mord cjk_fallback\">素</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord cjk_fallback\">存</span><span class=\"mord cjk_fallback\">在</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<p>算法计算次数：拉梅定理（咕咕咕）</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 扩展欧几里得：ax+by=gcd(a,b)=d</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">exgcd</span><span class=\"params\">(ll a, ll b, ll &amp;d, ll &amp;x, ll &amp;y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!b)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        x = <span class=\"number\">1</span>, y = <span class=\"number\">0</span>, d = a;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">exgcd</span>(b, a % b, d, y, x);</span><br><span class=\"line\">    y -= a / b * x;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","数学"],"tags":["ACM","数论"]},{"title":"【计算机网络】应用层","url":"/posts/eca009d2/","content":"<p>计算机网络：自顶向下方法（第五版&amp;第七版）学习笔记，第二章应用层</p>\n<span id=\"more\"></span>\n<p>逻辑：原理-五种重要应用</p>\n<h1 id=\"应用层原理\">应用层原理</h1>\n<img data-src=\"/posts/eca009d2/image-20230130153957489.png\" class=\"\" title=\"image-20230130153957489\">\n<p>本节逻辑：网络应用程序结构-应用层协议简述-通信</p>\n<h2 id=\"网络应用程序结构\">网络应用程序结构</h2>\n<ul>\n<li>只运行在主机上</li>\n<li>两种主流<strong>应用程序体系结构（application architecture）</strong>：客户-服务器体系结构、P2P体系结构</li>\n</ul>\n<h3 id=\"客户-服务器体系结构-client-server-architecture\">客户-服务器体系结构（client-server architecture）</h3>\n<ul>\n<li>客户之间不直接通信</li>\n<li>客户向服务器发送请求，服务器向客户发送所请求的对象进行响应</li>\n<li>服务器地址（IP）固定、公开</li>\n<li>处理大量请求：拥有大量服务器的<strong>数据中心（data center）</strong></li>\n<li>例：Web、FTP、Telnet、电子邮件</li>\n</ul>\n<h3 id=\"p2p体系结构-p2p-architecture\">P2P体系结构（P2P architecture）</h3>\n<ul>\n<li>对服务器有极小的（甚至没有）依赖，第七版中文对极小那里翻译感觉有问题，另外，第七版中文说是位于数据中心的专用服务器，第五版英文写的是infrastructure server</li>\n<li>主机之间间断连接，直接通信，被称为对等方，一般不是服务提供商</li>\n<li><strong>自扩展性（self-scalability）</strong>：每个对等方请求产生工作负载，但分发文件增加服务能力，高度非集中式结构，有安全性、性能、可靠性问题</li>\n<li>例：文件共享、对等方协助下载加速器、因特网电话视频会议</li>\n</ul>\n<h3 id=\"混合cs和p2p的体系结构\">混合CS和P2P的体系结构</h3>\n<ul>\n<li>常见于即时讯息应用，服务器跟踪用户IP地址，主机之间的信息传递不经过服务器</li>\n</ul>\n<h2 id=\"应用层协议简述\">应用层协议简述</h2>\n<ul>\n<li>网络应用程序发送的信息：报文</li>\n<li><strong>应用层协议（application-layer protocol）</strong>：定义运行在不同端系统上的应用程序进程如何相互传递报文\n<ul>\n<li>报文类型（请求、响应）</li>\n<li>报文类型的语法（字段及其描述）</li>\n<li>字段语义</li>\n<li>何时发送、如何响应</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"通信\">通信</h2>\n<ul>\n<li>两个不同端系统上的进程跨越计算机网络交换<strong>报文（message）</strong> 相互通信</li>\n</ul>\n<h3 id=\"对象：进程\">对象：进程</h3>\n<ul>\n<li>客户&amp;服务器进程对</li>\n<li>P2P：在一个通信会话场景中，发起通信的进程标识为客户，等待联系的为服务器</li>\n</ul>\n<h3 id=\"接口：套接字-socket\">接口：套接字（socket）</h3>\n<ul>\n<li>应用程序编程接口（API）</li>\n<li>同一台主机内应用层与运输层之间的接口</li>\n<li>应用程序开发者控制套接字在应用层端的一切但不能控制运输层</li>\n<li>选择运输层协议、设定参数（如需要）</li>\n<li>发送端将报文推进socket，运输层协议接收</li>\n<li>有唯一标识符，格式决定它的类型（UDP or TCP）</li>\n</ul>\n<h3 id=\"目标：地址\">目标：地址</h3>\n<ul>\n<li>主机地址（因特网中是IP地址）</li>\n<li>目的主机中接收进程的标识符（接收套接字）（一般是目的地端口号）</li>\n</ul>\n<h3 id=\"讨论：运输服务\">讨论：运输服务</h3>\n<ul>\n<li>可靠数据传输（reliable data transfer）：确保数据能完全正确到达\n<ul>\n<li>容忍丢失的应用（loss-tolerant application），如多媒体应用</li>\n</ul>\n</li>\n<li>吞吐量：确保可用吞吐量的下限\n<ul>\n<li>带宽敏感的应用（bandwidth-sensitive application），如多媒体应用</li>\n<li>弹性应用（elastic application）</li>\n</ul>\n</li>\n<li>定时：到达接受方的速度，常见于交互式实时应用程序</li>\n<li>安全性</li>\n<li>因特网提供TCP、UDP协议，考虑安全性升级TCP为SSL\n<ul>\n<li>TCP：面向连接、可靠数据传送、拥塞控制；SSL：安全套接字层（Secure Sockets Layer），在应用层强化TCP</li>\n<li>UDP：轻量级运输协议</li>\n</ul>\n</li>\n<li>因特网无法提供吞吐量和定时的保证</li>\n</ul>\n<h1 id=\"web-http\">Web&amp;HTTP</h1>\n<p>Web应用程序和其核心协议HTTP</p>\n<h2 id=\"web应用\">Web应用</h2>\n<ul>\n<li>CS体系结构：Web浏览器&amp;Web服务器</li>\n<li>Web页面：由对象组成，多由一个HTML基本文件和引用对象组成</li>\n<li>对象通过URL引用：存放对象的服务器主机名&amp;对象的路径名\n<ul>\n<li>Uniform Resource Locator：统一资源定位器</li>\n<li>protocol：//server[:port number] /path/file</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"http\">HTTP</h2>\n<ul>\n<li><strong>HTTP（HyperText Transfer Protocol）：超文本传输协议</strong></li>\n<li>HTTP请求报文&amp;HTTP响应报文</li>\n<li>使用TCP运输协议：为了可靠</li>\n<li>HTTP是<strong>无状态协议（stateless protocol）</strong>：服务器不存储任何客户状态信息</li>\n<li>识别用户的技术：cookie，初次访问提供用户名等信息，后续不再需要只需浏览器给cookie\n<ul>\n<li>响应、请求报文中的Cookie: 首部行</li>\n<li>用户端，浏览器管理cookie文件</li>\n<li>Web站点的数据库</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"报文格式\">报文格式</h3>\n<ul>\n<li><strong>首部行（header line）</strong>：第一行后的行</li>\n<li><strong>实体体（entity body）</strong>：在最后，包含了请求对象</li>\n</ul>\n<img data-src=\"/posts/eca009d2/image-20230201171528858.png\" class=\"\" title=\"image-20230201171528858\">\n<h4 id=\"请求报文\">请求报文</h4>\n<ul>\n<li>第一行是<strong>请求行（request line）</strong>，<code>方法字段 URL字段 HTTP版本字段</code>，方法包括GET、POST、HEAD、PUT、DELETE</li>\n</ul>\n<h4 id=\"响应报文\">响应报文</h4>\n<ul>\n<li>第一行是<strong>状态行（status line）</strong>：<code>协议版本字段 状态码 响应状态信息</code></li>\n<li>状态码和响应状态信息举例：200 OK（请求成功），301 Moved Permanently（请求对象永久转移，新URL在Location: 首部行中）</li>\n</ul>\n<h4 id=\"请求与响应报文实例\">请求与响应报文实例</h4>\n<p>以<a href=\"https://www.lyroch.site/posts/867943d6/\">上一篇计网</a>为例（F12可查）：</p>\n<p>请求：</p>\n<figure class=\"highlight http\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">GET</span> <span class=\"string\">/posts/867943d6/</span> <span class=\"meta\">HTTP/1.1</span></span><br><span class=\"line\"><span class=\"attribute\">Accept</span><span class=\"punctuation\">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class=\"line\"><span class=\"attribute\">Accept-Encoding</span><span class=\"punctuation\">: </span>gzip, deflate, br</span><br><span class=\"line\"><span class=\"attribute\">Accept-Language</span><span class=\"punctuation\">: </span>zh-CN,zh;q=0.9</span><br><span class=\"line\"><span class=\"attribute\">Cache-Control</span><span class=\"punctuation\">: </span>no-cache</span><br><span class=\"line\"><span class=\"attribute\">Connection</span><span class=\"punctuation\">: </span>keep-alive</span><br><span class=\"line\"><span class=\"attribute\">Cookie</span><span class=\"punctuation\">: </span>Hm_lvt_4153420f060a95b406405cc219f4ce4d=1673612250,1673709999,1675057970,1675241333; Hm_lpvt_4153420f060a95b406405cc219f4ce4d=1675241412</span><br><span class=\"line\"><span class=\"attribute\">Host</span><span class=\"punctuation\">: </span>www.lyroch.site</span><br><span class=\"line\"><span class=\"attribute\">Pragma</span><span class=\"punctuation\">: </span>no-cache</span><br><span class=\"line\"><span class=\"attribute\">Sec-Fetch-Dest</span><span class=\"punctuation\">: </span>document</span><br><span class=\"line\"><span class=\"attribute\">Sec-Fetch-Mode</span><span class=\"punctuation\">: </span>navigate</span><br><span class=\"line\"><span class=\"attribute\">Sec-Fetch-Site</span><span class=\"punctuation\">: </span>none</span><br><span class=\"line\"><span class=\"attribute\">Sec-Fetch-User</span><span class=\"punctuation\">: </span>?1</span><br><span class=\"line\"><span class=\"attribute\">Upgrade-Insecure-Requests</span><span class=\"punctuation\">: </span>1</span><br><span class=\"line\"><span class=\"attribute\">User-Agent</span><span class=\"punctuation\">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36</span><br><span class=\"line\"><span class=\"attribute\">sec-ch-ua</span><span class=\"punctuation\">: </span>&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;</span><br><span class=\"line\"><span class=\"attribute\">sec-ch-ua-mobile</span><span class=\"punctuation\">: </span>?0</span><br><span class=\"line\"><span class=\"attribute\">sec-ch-ua-platform</span><span class=\"punctuation\">: </span>&quot;Windows&quot;</span><br></pre></td></tr></table></figure>\n<p>首部行Host: www.lyroch.site指明对象所在主机，首部行Connection: keep-alive告诉服务器使用持续连接，首部行User-Agent: 指明发送请求的浏览器类型，首部行Accept-Language: 指明浏览器想得到的语言版本，如果没有就会返回服务器默认语言</p>\n<p>响应：</p>\n<figure class=\"highlight http\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">HTTP/1.1</span> <span class=\"number\">200</span> OK</span><br><span class=\"line\"><span class=\"attribute\">Server</span><span class=\"punctuation\">: </span>nginx/1.18.0</span><br><span class=\"line\"><span class=\"attribute\">Date</span><span class=\"punctuation\">: </span>Wed, 01 Feb 2023 08:52:25 GMT</span><br><span class=\"line\"><span class=\"attribute\">Content-Type</span><span class=\"punctuation\">: </span>text/html</span><br><span class=\"line\"><span class=\"attribute\">Last-Modified</span><span class=\"punctuation\">: </span>Thu, 29 Dec 2022 15:20:29 GMT</span><br><span class=\"line\"><span class=\"attribute\">Transfer-Encoding</span><span class=\"punctuation\">: </span>chunked</span><br><span class=\"line\"><span class=\"attribute\">Connection</span><span class=\"punctuation\">: </span>keep-alive</span><br><span class=\"line\"><span class=\"attribute\">ETag</span><span class=\"punctuation\">: </span>W/&quot;63adb03d-e9a1&quot;</span><br><span class=\"line\"><span class=\"attribute\">Content-Encoding</span><span class=\"punctuation\">: </span>gzip</span><br></pre></td></tr></table></figure>\n<p>注意，Date: 是服务器检索对象插入响应报文并发送的时间，Last-Modified: 对象创建和最后修改的日期和时间</p>\n<h2 id=\"往返时间rtt-round-trip-time\">往返时间RTT（Round-Trip Time）</h2>\n<ul>\n<li>一个短分组从客户到服务器再返回客户所花时间</li>\n<li>包括分组传播时延、分组在路由器&amp;交换机的排队时延、分组处理时延</li>\n</ul>\n<h2 id=\"应用与tcp连接方式\">应用与TCP连接方式</h2>\n<p>HTTP持续连接（默认）&amp;非持续连接皆可</p>\n<h3 id=\"非持续连接-non-persistent-content\">非持续连接（non-persistent content）</h3>\n<ul>\n<li>每个TCP连接在服务器发送一个对象后关闭，即只传输一个请求报文+一个响应报文</li>\n<li>可以并行缩短响应时间</li>\n<li>过程：三次握手，第三部分（确认）向TCP连接发送请求报文，响应时间=2RTT+传输文件时间</li>\n</ul>\n<img data-src=\"/posts/eca009d2/image-20230201164346013.png\" class=\"\" title=\"image-20230201164346013\">\n<h3 id=\"持续连接-persistent-content\">持续连接（persistent content）</h3>\n<ul>\n<li>节省创建TCP的RTT</li>\n<li>同一个客户在单个持续TCP完成，超过一定时间间隔未使用就关闭TCP连接</li>\n</ul>\n<h2 id=\"web缓存\">Web缓存</h2>\n<p><strong>Web缓存器（Web cache）</strong>，<strong>代理服务器（proxy server）</strong>：代理原始Web服务器回应HTTP请求的网络实体，磁盘存储空间保存最近请求过的对象副本，浏览器配置后可以先指向缓存器</p>\n<h3 id=\"步骤\">步骤</h3>\n<ul>\n<li>浏览器创建到Web浏览器的TCP连接，发送HTTP请求</li>\n<li>Web缓存器检查是否存储副本，有则返回HTTP响应报文</li>\n<li>Web缓存器没有副本则向原始服务器建立TCP连接，发送HTTP请求，并将接收的对象在本地创建副本，向客户发送副本（因此Web缓存器既是服务器也是客户）</li>\n</ul>\n<h3 id=\"原因\">原因</h3>\n<ul>\n<li>减少对客户请求的响应时间，尤其是客户与原始服务器带宽瓶颈远小于客户与Web缓存器时</li>\n<li>降低因特网上的Web流量，所有应用都能得到改善</li>\n</ul>\n<h3 id=\"验证缓存是否是最新的：条件get-conditional-get\">验证缓存是否是最新的：条件GET（conditional GET）</h3>\n<ul>\n<li>GET方法</li>\n<li>包含If-Modified-Since: 首部行</li>\n<li>Web缓存器给服务器发送，若没修改发回304 Not Modified</li>\n</ul>\n<h1 id=\"ftp\">FTP</h1>\n<ul>\n<li>File Transfer Protocol</li>\n<li>远程传输文件，TCP</li>\n<li>有权限的用户建立control connection，端口21，浏览器查看远程目录，发送指令</li>\n<li>服务器收到指令后开启第二个TCP，data connection，传输文件，传完一个就关闭</li>\n<li>服务器保持文件目录状态、用户认证状态</li>\n</ul>\n<h1 id=\"电子邮件-smtp\">电子邮件&amp;SMTP</h1>\n<h2 id=\"电子邮件概念\">电子邮件概念</h2>\n<ul>\n<li>\n<p>**用户代理（user agent）<strong>向其</strong>邮件服务器（mail server）<strong>发送，邮件放在</strong>报文队列（message queue）<strong>中尝试发送给对方的邮件服务器，若不能发送间隔时间尝试，对方服务器收到后放在对方的</strong>邮箱（mailbox）**中，对方可通过用户代理访问邮箱</p>\n</li>\n<li>\n<p>每台服务器运行<strong>SMTP简单邮件传输协议（Simple Mail Transfer Protocol）</strong>，既是客户端也是服务器端，使用TCP可靠数据传输</p>\n</li>\n<li>\n<p>邮件报文格式</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">From: xxx@abc</span><br><span class=\"line\">To: yyy@def</span><br><span class=\"line\">Subject: aaaaaaa</span><br><span class=\"line\"></span><br><span class=\"line\">data(ASCII格式)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<pre><code class=\"highlight mermaid\">flowchart LR\n\tA的代理 -- SMTP --&gt; A的邮件服务器 -- SMTP --&gt; B的邮件服务器 -- 邮件访问协议--&gt; B的代理</code></pre>\n<h2 id=\"smtp\">SMTP</h2>\n<ul>\n<li>\n<p>一般不使用中间邮件服务器</p>\n</li>\n<li>\n<p>报文采用7比特ASCII码</p>\n</li>\n<li>\n<p>命令包括HELO、MAIL FROM、RCPT TO、DATA、QUIT</p>\n</li>\n<li>\n<p>过程</p>\n<ul>\n<li>\n<p><code>MAIL FROM: &lt;xxx@abc&gt;</code></p>\n</li>\n<li>\n<p><code>MAIL TO: &lt;yyy@def&gt;</code></p>\n</li>\n<li>\n<p><code>DATA</code></p>\n</li>\n<li>\n<p><code>...内容</code></p>\n</li>\n<li>\n<p><code>.</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p>与HTTP对比</p>\n<ul>\n<li>\n<p>HTTP是拉协议（pull protocol），SMTP是推协议（push protocol）</p>\n</li>\n<li>\n<p>HTTP对报文数据没有限制，SMTP要求必须按7比特ASCII编码</p>\n</li>\n<li>\n<p>HTTP把每个对象单独封装到报文中，SMTP所有对象都在一个报文中</p>\n</li>\n<li>\n<p>二者都有ASCII命令/响应的交互，都有状态码</p>\n</li>\n</ul>\n</li>\n<li>\n<p>MIME协议( Multipurpose Internet Mail Extensions )，通用因特网邮件扩充协议，把非ASCII码数据转换为NVT ASCII数据，之后的工作再交给SMTP完成，在接收方再将NVT ASCII数据还原成原来的数据</p>\n</li>\n</ul>\n<h2 id=\"邮件访问协议\">邮件访问协议</h2>\n<h3 id=\"pop3-post-office-protocol-version3\">POP3（Post Office Protocol—Version3）</h3>\n<ul>\n<li>用户代理向邮件服务器建立TCP链接</li>\n<li>特许（authorization）：用户代理发送明文用户名&amp;口令</li>\n<li>事务处理（transaction）：用户代理取回报文、删除报文、统计右键</li>\n<li>更新：结束POP3对话做出修改（比如删除）</li>\n</ul>\n<h3 id=\"因特网邮件访问协议imap-internet-mail-access-protocol\">因特网邮件访问协议IMAP（Internet Mail Access Protocol）</h3>\n<ul>\n<li>\n<p>解决POP3的问题：用户不能创建远程文件夹</p>\n</li>\n<li>\n<p>IMAP服务器可创建文件夹、移动报文、条件查询右键、维护用户状态信息、允许获取报文的一部分</p>\n</li>\n<li>\n<p>（如果我没记错IOS自带的邮件关联其他邮箱就需要开启IMAP）</p>\n</li>\n</ul>\n<h3 id=\"http\">HTTP</h3>\n<ul>\n<li>基于Web的电子邮件，用户代理是浏览器，通过HTTP进行</li>\n</ul>\n<h1 id=\"dns-domain-name-system\">DNS（Domain Name System）</h1>\n<ul>\n<li>主机通过主机名或IP地址识别</li>\n<li>域名系统DNS（Domain Name System）：分层（hierarchy）的DNS服务器实现的分布式数据库，主机解析域名的应用层协议</li>\n<li>被其他应用层协议使用，将用户提供的主机名解析为IP地址\n<ul>\n<li>用户运行着DNS客户端</li>\n<li>应用将主机名传给DNS客户端</li>\n<li>DNS客户端向DNS发送包含主机名的请求，并受到包含IP地址的回复，该过程使用UDP</li>\n<li>应用利用该IP地址建立TCP连接</li>\n</ul>\n</li>\n<li>提供别名服务，通过别名获取规范名和IP\n<ul>\n<li>主机别名（host aliasing），对应规范主机名（canonical hostname）</li>\n<li>邮件服务器别名（mail server aliasing）</li>\n<li>负载分配（load distribution），繁忙站点多个服务器IP映射到同一个规范主机名</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"分布式-distributed-分层次-hierarchical-数据库\">分布式（distributed）、分层次（hierarchical）数据库</h2>\n<p>不可采用集中式：单点故障、通信容量、远距离、频繁维护（更新）</p>\n<h3 id=\"分类\">分类</h3>\n<ul>\n<li>根DNS服务器：提供顶级域服务器的IP地址</li>\n<li>顶级域（Top Level Domain，TLD）服务器：提供权威DNS服务器的地址</li>\n<li>权威（authoritative）DNS服务器：IP地址</li>\n</ul>\n<pre><code class=\"highlight mermaid\">graph\n\t根DNS服务器 --- 顶级域DNS服务器 --- 权威DNS服务器</code></pre>\n<h3 id=\"查询\">查询</h3>\n<ul>\n<li>\n<p>本地DNS服务器：不属于层次结构，每个ISP都有一台，主机连接ISP时ISP向其提供本地DNS服务器的IP，这个本地DNS服务器一般距离主机不超过几台路由器</p>\n</li>\n<li>\n<p>实践中通常递归（recursive）+迭代（iterative）查询综合：</p>\n<pre><code class=\"highlight mermaid\">flowchart LR\n\t主机 -- 1 --&gt; 本地DNS服务器 -- 2 --&gt;根DNS服务器 -- 3 --&gt;本地DNS服务器\n\t本地DNS服务器 -- 4 --&gt;TLD服务器 -- 5 --&gt;本地DNS服务器\n\t本地DNS服务器 -- 6 --&gt;权威DNS服务器 -- 7 --&gt;本地DNS服务器\n\t本地DNS服务器 -- 8 --&gt; 主机</code></pre>\n</li>\n</ul>\n<h2 id=\"dns缓存-caching\">DNS缓存（caching）</h2>\n<ul>\n<li>在一段时间（通常2天）丢弃缓存信息</li>\n<li>本地DNS服务器也能缓存TLD服务器的IP，绕开根DNS服务器</li>\n</ul>\n<h2 id=\"dns资源记录-resource-record\">DNS资源记录（Resource Record）</h2>\n<ul>\n<li>RR提供主机名到IP地址的映射</li>\n<li>注：主机名通常在局域网内使用，通过hosts文件，主机名就被解析到对应IP，域名通常在INTERNET上使用，但如果本机不想使用internet上的域名解析，这时就可以更改hosts文件，加入自己的域名解析</li>\n<li>4元组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>V</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>T</mi><mi>y</mi><mi>p</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>T</mi><mi>L</mi><mi>L</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(Name,Value,Type,TLL)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\">L</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>TLL：记录的生存时间（什么时候该被从缓存中删除）</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Type</th>\n<th style=\"text-align:center\">Name</th>\n<th style=\"text-align:center\">Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">A</td>\n<td style=\"text-align:center\">主机名</td>\n<td style=\"text-align:center\">IP地址</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">NS</td>\n<td style=\"text-align:center\">域名</td>\n<td style=\"text-align:center\">能查该域名IP的权威DNS服务器主机名</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">CNAME</td>\n<td style=\"text-align:center\">别名</td>\n<td style=\"text-align:center\">规范主机名</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MX</td>\n<td style=\"text-align:center\">别名</td>\n<td style=\"text-align:center\">邮件服务器的规范主机名</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>某主机的权威服务器含有该主机名的A记录</li>\n<li>某主机的非权威服务器缓存可能含有该主机名的A记录</li>\n<li>某主机的非权威服务器含有一条NS（指向权威服务器）+一条A（指向前面对应权威服务器的IP）</li>\n</ul>\n<h2 id=\"dns报文\">DNS报文</h2>\n<p>（待补）</p>\n<img data-src=\"/posts/eca009d2/image-20230217223121948.png\" class=\"\" title=\"image-20230217223121948\">\n<h1 id=\"p2p文件分发-bittorrent\">P2P文件分发&amp;BitTorrent</h1>\n<h2 id=\"p2p文件分发时间\">P2P文件分发时间</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">符号</th>\n<th style=\"text-align:center\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mi>s</mi></msub></mrow><annotation encoding=\"application/x-tex\">u_s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></td>\n<td style=\"text-align:center\">服务器接入链路的上传速率</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">u_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></td>\n<td style=\"text-align:center\">第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 对等方接入链路的上传速率</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></td>\n<td style=\"text-align:center\">第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 对等方接入链路的下载速率</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span></td>\n<td style=\"text-align:center\">被分发的文件长度(bit)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span></td>\n<td style=\"text-align:center\">想要得到文件副本的对等方数量</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></td>\n<td style=\"text-align:center\">分发时间（distribution time）：所有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 个对等方得到该文件副本所需时间</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>对于CS体系\n<ul>\n<li>服务器总共传<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">NF</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span> 比特，下载速度最慢的构成第二项</li>\n<li>调度方法是不停上传，下载最慢的优先下载</li>\n<li>随<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 增加时间线性增长</li>\n</ul>\n</li>\n</ul>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mrow><mi>c</mi><mi>s</mi></mrow></msub><mo>=</mo><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">{</mo><mfrac><mrow><mi>N</mi><mi>F</mi></mrow><msub><mi>u</mi><mi>s</mi></msub></mfrac><mo separator=\"true\">,</mo><mfrac><mi>F</mi><msub><mi>d</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mfrac><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">D_{cs}=\\max \\{\\frac{NF}{u_s},\\frac{F}{d_{min}}\\}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">c</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.19633em;vertical-align:-0.8360000000000001em;\"></span><span class=\"mop\">max</span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">}</span></span></span></span></span></p>\n<ul>\n<li>对于P2P体系：\n<ul>\n<li>至少上传一份的速度（第一项），下载速度最慢的一项（第二项），系统总上传能力<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mi>s</mi></msub><mo>+</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msub><mi>u</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">u_s+\\sum_{i=1}^{N}u_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2809409999999999em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 上传完整<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">NF</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span> 所需时间</li>\n<li>方法是每收到一个比特就上传一个比特</li>\n<li>非线性增长，缓慢</li>\n</ul>\n</li>\n</ul>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mrow><mi>P</mi><mn>2</mn><mi>P</mi></mrow></msub><mo>=</mo><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">{</mo><mfrac><mi>F</mi><msub><mi>u</mi><mi>s</mi></msub></mfrac><mo separator=\"true\">,</mo><mfrac><mi>F</mi><msub><mi>d</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mfrac><mo separator=\"true\">,</mo><mfrac><mrow><mi>N</mi><mi>F</mi></mrow><mrow><msub><mi>u</mi><mi>s</mi></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>u</mi><mi>i</mi></msub></mrow></mfrac><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">D_{P2P}=\\max \\{\\frac{F}{u_s},\\frac{F}{d_{min}},\\frac{NF}{u_s+\\sum_{i=1}^{N}u_i}\\}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.5312710000000003em;vertical-align:-1.170941em;\"></span><span class=\"mop\">max</span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.128769em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.170941em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">}</span></span></span></span></span></p>\n<h2 id=\"bittorrent协议\">BitTorrent协议</h2>\n<ul>\n<li>洪流（torrent）：参与一个特定文件分发的所有对等方的集合，对等方彼此下载等长度的文件块（chunk）</li>\n<li>追踪器（tracker）：每个torrent具有的一个基础设施节点，对等方加入torrent时向tracker注册自己</li>\n<li>一个主机加入torrent时，tracker选取对等方子集，发送IP给主机，主机试图与这些IP创建TCP连接成为邻近对等方，主机周期性询问它们所具有的块列表并请求自己没有的</li>\n<li>请求方式是最稀缺优先（rarest first），没有的块&amp;邻近对等方中副本最少的，从而使得稀缺的块迅速分发，均衡块在torrent中的副本数量</li>\n<li>响应方法：对换算法，持续测量接受比特的速率，确定提供数据最快的前4个邻居（定期更新）（这4个叫unchoked）；每30s随机选对等方传数据</li>\n</ul>\n<h1 id=\"视频流-dash-cdn\">视频流&amp;DASH&amp;CDN</h1>\n<h2 id=\"dash\">DASH</h2>\n<ul>\n<li>经HTTP的动态适应流（Dynamic Adaptive Streaming over HTTP）：视频编码为几个版本（比特率不同），客户动态请求几秒的视频段数据块</li>\n<li>HTTP服务器提供告示文件（manifest file）说明版本</li>\n</ul>\n<h2 id=\"cdn\">CDN</h2>\n<ul>\n<li>内容分发网CDN（Content Distribution Network）：管理分布在多个地方的服务器（存储Web内容的副本）</li>\n<li>包括专用（private）CDN和第三方（third-party）CDN，第三方CDN为多个提供商分发内容</li>\n<li>安置原则\n<ul>\n<li>深入ISP的接入网，靠近端用户，减少端到CDN集群的链路和路由器数量，但由于分布式，维护困难</li>\n<li>放在IXP，端延时高但好维护管理</li>\n</ul>\n</li>\n<li>存储类似缓存，若请求的内容没有从别处请求来后创造副本</li>\n<li>CDN截获请求并确定适合的CDN服务器集群，并将请求重定向到服务器，常用DNS截获并重定向（权威DNS服务器返回CDN专用DNS的主机名，最终找到CDN的IP）</li>\n<li>集群选择策略：地理最邻近（但可能本地DNS服务器远，或地理近网络不近）、实时测量（每个CDN集群周期性向各本地DNS服务器发送探测分组）</li>\n</ul>\n","categories":["计算机网络"],"tags":["计算机网络"]},{"title":"【计算机网络】网络层","url":"/posts/a673d0c9/","content":"<p>计算机网络：自顶向下方法（第五版&amp;第七版）学习笔记，第四章网络层，本章以第五版为主。</p>\n<span id=\"more\"></span>\n<h1 id=\"概述\">概述</h1>\n<ul>\n<li>forwarding转发：move packets from router’s input（输入链路口） to appropriate router output</li>\n<li>routing路由选择：determine route taken by packets from source to destination，是网络范围的过程</li>\n<li>转发表（forwarding table）：索引查询链路，路由选择算法（routing algorithm）决定转发表里的值</li>\n<li>分组交换机（packet switch）：分组交换设备，输入链路进输出链路出\n<ul>\n<li>链路层交换机（link-layer switches）：基于链路层字段的某些值转发</li>\n<li>路由器（router）：基于网络层字段的某些值转发</li>\n</ul>\n</li>\n<li>连接建立（connection setup）：网络层数据流动前的状态建立</li>\n<li>网络层提供的服务\n<ul>\n<li>对于数据报来说：确保交付（guaranteed delivery）、具有时延上界的确保交付</li>\n<li>对于数据流来说：有序分组交付（in-order datagram delivery）、确保最小带宽（guaranteed minimum bandwidth to flow）、确保最大时延抖动、安全性服务</li>\n</ul>\n</li>\n<li>因特网：尽力而为（best-effort）</li>\n<li>三个主要组件：IP协议、路由选择协议（RIP, OSPF, BGP）、控制报文协议（ICMP）</li>\n</ul>\n<h1 id=\"虚电路和数据报网络\">虚电路和数据报网络</h1>\n<ul>\n<li>虚电路网络（Virtual Circuit，VC）：在网络层提供连接服务</li>\n<li>数据报网络（Datagram Network）：在网络层提供无连接服务</li>\n<li>主流计算机网络体系结构连接和无连接二选一，不同时提供，因特网提供无连接服务</li>\n</ul>\n<h2 id=\"虚电路网络\">虚电路网络</h2>\n<ul>\n<li>主机间的一条路径，每段链路一个VC号（每个路径上的同一链路VC号可以不同，以减少分组首部VC号长度，和简化虚电路建立），分组携带走的VC号，路由器转发表指示</li>\n<li>创建/终止虚电路，转发表增加/删除相应项</li>\n<li>为建立连接，路由器维护连接状态信息（connection state information）</li>\n<li>虚电路建立（VC setup）：从运输层获得地址，决定路径及路上的VC号，沿路上为路由器添加转发表项，这些报文叫信令报文（signaling message），交换报文的协议叫信令协议（signaling protocol）</li>\n<li>数据传送（data transfer）：数据流动</li>\n<li>虚电路拆除（VC teardown）：通知结束，删除路上路由器转发表项</li>\n</ul>\n<h2 id=\"数据报网络\">数据报网络</h2>\n<ul>\n<li>路由器用分组的目的地址转发分组，有将目的地址映射到链路接口的转发表（比如前缀匹配）</li>\n<li>转发表由路由选择算法修改，几分钟更新一次</li>\n</ul>\n<h1 id=\"路由器\">路由器</h1>\n<ul>\n<li>路由器功能：运行路由选择算法和路由选择协议、转发数据报</li>\n</ul>\n<img data-src=\"/posts/a673d0c9/image-20230213002902004.png\" class=\"\" title=\"image-20230213002902004\">\n<h2 id=\"输入端口-input-port\">输入端口（input port）</h2>\n<ul>\n<li>查找输出端口，利用输入端口的存储器中的转发表，利用硬件达到线性查找</li>\n<li>若forwarding速率小于数据包到达速率会排队：Head-Of-the-Line (HOL) blocking（线头阻塞），多个不同入口的包要进一个输出端口，后走的包如果输出链路不排队得被迫排队（queued datagram at front of queue prevents others in queue from moving forward）</li>\n<li>依次是线路端接（物理层）、数据链路处理（链路层，协议、拆封）、查找转发排队（网络层）</li>\n</ul>\n<img data-src=\"/posts/a673d0c9/image-20230213003251457.png\" class=\"\" title=\"image-20230213003251457\">\n<h2 id=\"交换结构-switching-fabrics\">交换结构（Switching fabrics）</h2>\n<ul>\n<li>从输入缓存转移到合适的输出缓存</li>\n<li>交换速率（switching rate）：包转移的速率</li>\n<li>三种类型：</li>\n</ul>\n<img data-src=\"/posts/a673d0c9/image-20230213003655512.png\" class=\"\" title=\"image-20230213003655512\">\n<h2 id=\"输出结构-output-port\">输出结构（output port）</h2>\n<ul>\n<li>缓存，交换速度大于传输速度</li>\n<li>分组调度（packet scheduler）程序</li>\n</ul>\n<img data-src=\"/posts/a673d0c9/image-20230213003745206.png\" class=\"\" title=\"image-20230213003745206\">\n<h1 id=\"网际协议-ip-internet-protocol\">网际协议（IP，Internet Protocol）</h1>\n<h2 id=\"数据报\">数据报</h2>\n<p>IPv4：</p>\n<img data-src=\"/posts/a673d0c9/image-20230213155349802.png\" class=\"\" title=\"image-20230213155349802\">\n<ul>\n<li>首部长度：标记数据开始的位置，一般20bytes</li>\n<li>服务类型（TOS）：告诉子网需要的服务类型</li>\n<li>数据报长度：首部+数据，理论最大65535字节</li>\n<li>标识（identifier）、标志（flags）、位偏移（fragmentation offset）：让目的主机判断新来的分段属于哪个分组\n<ul>\n<li>MTU(Maximum Transmission Unit，最大传输单元)：The maximum amount of data that a link layer packet can carry</li>\n<li>分片：不同链路协议的链路层帧大小不同，将数据分片，在端系统组装</li>\n<li>属于同一分组的分段包含同样的标识</li>\n<li>DF位表示不分段：命令路由器不要将数据分段，因为目的主机不能重组分段；MF位表示是否所有的分组都已到达；flag=0为最后一片，=1为其他片</li>\n<li>位偏移说明分段在当前数据报的位置，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>M</mi><mi>T</mi><mi>U</mi><mo>−</mo><mn>20</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">offset=(MTU-20)/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord\">8</span></span></span></span></li>\n</ul>\n</li>\n<li>寿命TTL：用来限制分组的生命周期的计数器，每经过一个结点都有递减，当减到0，分组就丢弃，为了避免在整个网络中分组一直传递的问题</li>\n<li>上层协议：到达目的地后这个字段指示上层协议的类型</li>\n</ul>\n<h2 id=\"ipv4编址-addressing\">IPv4编址（addressing）</h2>\n<ul>\n<li>接口（interface）：主机/路由器和物理链路的边界，路由器通常有多个接口，主机一般只有一个</li>\n<li>IP地址：32位（8+8+8+8），接口地址</li>\n</ul>\n<img data-src=\"/posts/a673d0c9/image-20230213162037580.png\" class=\"\" title=\"image-20230213162037580\">\n<h3 id=\"特殊ip地址\">特殊IP地址</h3>\n<ul>\n<li>broadcast address(广播地址)：主机号全为1，向其它网络广播，必须有一个有效的网络号</li>\n<li>limited broadcast address (有限广播)：255.255.255.255，向本网络的所有主机广播，不需要网络号</li>\n<li>“0” address(“0”地址)：0.0.0.0，本网络本主机</li>\n<li>loopback address (回送地址)：netid=127，将信息回送本机</li>\n</ul>\n<h3 id=\"子网\">子网</h3>\n<ul>\n<li>\n<p>子网（subnet）：device interfaces with same subnet part of IP address, can physically reach each other without intervening router</p>\n</li>\n<li>\n<p>子网编址（subnetting）：将hostid分为subnetid|hostid</p>\n</li>\n<li>\n<p>子网掩码（subnet mask）：如193.1.1.0/24，意味最左侧24位指示了子网地址</p>\n</li>\n<li>\n<p>地址分配：CIDR无类别域间路由选择（Classless InterDomain Routing）：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">.</mi><mi>b</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi mathvariant=\"normal\">.</mi><mi>d</mi><mi mathvariant=\"normal\">/</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">a.b.c.d/x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">b</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">c</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">d</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">x</span></span></span></span></p>\n</li>\n</ul>\n<h3 id=\"获得ip地址的方法\">获得IP地址的方法</h3>\n<ul>\n<li>系统管理员硬编码在设置文件中，这个IP是手动配置的</li>\n<li>动态主机配置协议DHCP（Dynamic Host Configuration Protocol）：主机与网络连接时从服务器动态获取IP地址\n<ul>\n<li>网络管理员可配置选择每次给主机相同IP还是临时IP（temporary IP address）</li>\n<li>主机也可以获得子网掩码、默认网关（第一跳路由器）、本地DNS服务器的IP和名称等信息，又被称即插即用协议（plug-and-play）</li>\n<li>分为DHCP discover、DHCP offer、DHCP request、DHCP ack四步\n<ul>\n<li>DHCP discover：向255.255.255.255广播，本机地址0.0.0.0，UDP 67或68端口</li>\n<li>DHCP offer：发送报文响应，提供推荐IP地址、网络掩码、IP租用期（address lease time）</li>\n<li>DHCP request：主机选择一个DHCP服务器响应</li>\n<li>DHCP ack：证实参数</li>\n</ul>\n</li>\n<li>客户DHCP每次启动都会自动广播请求原来的IP地址和配置，若没有应答但是并未过租用期就继续用</li>\n<li>租用期过半时request+ack续租，失败则租期到达87.5%的时候再次利用广播方式发送一个DHCP请求信息续租，如果失败就重新获取（4个过程）</li>\n</ul>\n</li>\n<li>用户IP从ISP那来，ISP的由ICANN（Internet Corporation for Assigned Names and Numbers）管理（还管理DNS和域名），ISP也是子网，因此同前缀的网络信息可以发往一个方向</li>\n</ul>\n<h2 id=\"网络地址转换-network-address-translation-nat\">网络地址转换（Network Address Translation，NAT）</h2>\n<ul>\n<li>如果ISP连续空间不够、外界网络不需要关心本地网络内的IP分配因此更方便分配和修改、ISP若需要更换IP不需改子网内的IP、IP暴露在外不安全</li>\n<li>NAT将要发走的数据报中的源IP和端口修改为NAT的IP和端口，收到的数据报反过来修改</li>\n<li>NAT translation table包含了修改信息</li>\n</ul>\n<h2 id=\"因特网控制报文协议icmp-internet-control-message-protocol\">因特网控制报文协议ICMP（Internet Control Message Protocol）</h2>\n<ul>\n<li>主机和路由器交流网络层信息，如差错报告（error reporting）、回显请求和回复（ping程序）</li>\n<li>Traceroute程序：通过发不可达UDP，TTL依次设为1，2，3，…根据路由返回的过期信息知道路由器信息，最后一个到达的</li>\n</ul>\n<h2 id=\"ipv6\">IPv6</h2>\n<ul>\n<li>原因：32位空间不够用，以及对IPv4进行一些优化</li>\n<li>数据报\n<ul>\n<li>流量类型又称优先级（priority）：区别数据包的类别和优先级，与IPv4的TOS类似</li>\n<li>流标签：区别在同一个流中的数据报</li>\n<li>下一个首部（next header）：上一层协议类型</li>\n<li>跳限制（hop limit）即TTL</li>\n<li>其他去除的：checksum、options（可以在下一个首部里）、分片信息</li>\n</ul>\n</li>\n</ul>\n<img data-src=\"/posts/a673d0c9/image-20230213222625963.png\" class=\"\" title=\"image-20230213222625963\">\n<ul>\n<li>ICMPv6：新版本的ICMP，有更多信息和multicast group management functions</li>\n<li>IPv4转IPv6：旧路由器可能没法更新到能处理IPv6的，通过建隧道（Tunneling），即通过IPv4群前将IPv6信息打包成IPv4</li>\n</ul>\n<h1 id=\"路由选择算法\">路由选择算法</h1>\n<ul>\n<li>找到最小代价路线</li>\n</ul>\n<h3 id=\"分类\">分类</h3>\n<ul>\n<li>全局式&amp;分散式：\n<ul>\n<li>全局式（global）路由选择算法：需要知道全局的路径费用，链路状态算法（Link State）LS</li>\n<li>分散式（decentralized）路由选择算法：迭代交换信息，距离向量（Distance-Vector）DV</li>\n</ul>\n</li>\n<li>静态&amp;动态：\n<ul>\n<li>静态：路由变化缓慢，人工调整转发表</li>\n<li>动态：网络流量负载和拓扑变化时/周期性运行</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ls算法\">LS算法</h2>\n<p>Dijkstra</p>\n<img data-src=\"/posts/a673d0c9/image-20230213224615269.png\" class=\"\" title=\"image-20230213224615269\">\n<h2 id=\"dv\">DV</h2>\n<p>Bellman-Ford，收到相邻节点给的距离向量后更新</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>←</mo><munder><mo><mi>min</mi><mo>⁡</mo></mo><mi>v</mi></munder><mrow><mo fence=\"true\">{</mo><mi>c</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>+</mo><msub><mi>D</mi><mi>v</mi></msub><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">D_x(y) \\leftarrow \\min _v\\left\\{c(x, v)+D_v(y)\\right\\}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">←</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.45em;vertical-align:-0.7em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.4em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span></span></p>\n<p>好消息（路径费用变小）传的快，坏消息传得慢，可能出现无穷计数，错误的消息不断传出去更新，解决方法是毒性逆转，如果A到B的最小费用通过C更新了（C告知的），告诉C，A到B费用为正无穷</p>\n<h2 id=\"层次路由选择-hierarchical-routing\">层次路由选择（Hierarchical Routing）</h2>\n<ul>\n<li>自治系统AS（autonomous system）组织路由器（如一个ISP内），通过网关（gateway）路由器向外通信</li>\n<li>内部要知道哪些网关路由器能到达外部指定地点</li>\n<li>热土豆算法（hot potato routing）将包发给最近的网关路由器</li>\n</ul>\n<h1 id=\"因特网路由选择\">因特网路由选择</h1>\n<h2 id=\"内部：intra-as\">内部：Intra-AS</h2>\n<p>又叫内部网关协议Interior Gateway Protocols (IGP)</p>\n<h3 id=\"rip-routing-information-protocol\">RIP: Routing Information Protocol</h3>\n<ul>\n<li>路由信息协议</li>\n<li>DV算法，跳数（hops）作为费用测度，每条链路费用为1</li>\n<li>最大费用15，RIP只能使用在直径不超15跳的AS中</li>\n<li>路由间用RIP响应报文更新信息，又叫RIP通告（advertisement），包含多达25个子网的列表</li>\n<li>180s没有收到邻居的通告则把邻居视为不可达</li>\n<li>16跳即无穷大</li>\n<li>RIP报文通过UDP发送，RIP是当作应用层进程实现的</li>\n<li>一般设在下层ISP</li>\n</ul>\n<h3 id=\"ospf-open-shortest-path-first\">OSPF: Open Shortest Path First</h3>\n<ul>\n<li>\n<p>OSPF路由协议</p>\n</li>\n<li>\n<p>LS</p>\n</li>\n<li>\n<p>在IP中传输</p>\n</li>\n<li>\n<p>周期性/变化时广播链路状态，广播给整个AS，使用flooding</p>\n</li>\n<li>\n<p>相比RIP的优点</p>\n<ul>\n<li>安全：authenticated</li>\n<li>多条相同费用的路径</li>\n<li>多播单播路由都支持</li>\n<li>链路多个成本指标</li>\n<li>hierarchical OSPF in large domains\n<ul>\n<li>主干区域（backbone）</li>\n<li>边界（area border）路由器</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"外部：inter-as\">外部：Inter-AS</h2>\n<h3 id=\"bgp-border-gateway-protocol\">BGP: Border Gateway Protocol</h3>\n<ul>\n<li>\n<p>边界网关协议</p>\n</li>\n<li>\n<p>BGP连接包括两种：</p>\n<ul>\n<li>\n<p>eBGP: obtain subnet reachability information from neighboring AS，即e是external</p>\n</li>\n<li>\n<p>iBGP: propagate reachability information to all AS-internal routers，即i是internal</p>\n</li>\n</ul>\n</li>\n<li>\n<p>BGP peers产生TCP连接称BGP session</p>\n</li>\n</ul>\n<h2 id=\"为什么区分内外部\">为什么区分内外部</h2>\n<ul>\n<li>外部要考虑policy，内部只需关注效果</li>\n<li>分层次能够减少路由转发表的大小，减少更新所需流量</li>\n</ul>\n","categories":["计算机网络"],"tags":["计算机网络"]},{"title":"【计算机网络】计算机网络概述","url":"/posts/867943d6/","content":"<p>计算机网络：自顶向下方法（第五版&amp;第七版）学习笔记，第一章计网概述。吐槽一句，这书中文翻译实在有种抽象的美（流汗.jpg）</p>\n<span id=\"more\"></span>\n<h1 id=\"因特网\">因特网</h1>\n<p>许多非计算机连入全球网络，传统理解的计算机网络（Computer Network）应为因特网（Internet），以下从结构和服务两个角度描述因特网</p>\n<h2 id=\"结构描述\">结构描述</h2>\n<ul>\n<li>连网的设备称<strong>主机（host）<strong>或</strong>端系统（end system）</strong>\n<ul>\n<li>常被进一步分类为<strong>客户（client）<strong>和</strong>服务器（server）</strong></li>\n</ul>\n</li>\n<li>主机发送的信息被分段修改，称<strong>分组（packet）</strong>（又称包），通过<strong>通信链路（communication link）<strong>到达</strong>分组交换机（packet switch）</strong></li>\n<li>分组交换机：从一条通信链路接收分组，从另一条通信链路发送分组\n<ul>\n<li>流行的分组交换机包括<strong>路由器（router）</strong>（一般用于网络核心中）和<strong>链路层交换机（link-layer switch）</strong>（一般用于接入网）</li>\n</ul>\n</li>\n<li>分组所经历的系列通信链路和分组交换机称<strong>路径（route，path）</strong></li>\n<li>主机通过<strong>因特网服务提供商（Internet Service Provider，ISP）</strong>（由分组交换机和通信链路组成的网络）接入因特网</li>\n<li>信息的接受和发送遵循<strong>协议（protocol）</strong>，因特网主要协议统称TCP/IP（<strong>TCP（Transmission Control Protocol，传输控制协议），IP（Internet Protocol，网际协议）</strong>）\n<ul>\n<li>协议定义了通信实体之间交换的信息格式（format）和顺序（order）、发送接收等系列事件的动作</li>\n</ul>\n</li>\n</ul>\n<img data-src=\"/posts/867943d6/image-20220925160432325.png\" class=\"\" title=\"image-20220925160432325\">\n<h2 id=\"服务描述\">服务描述</h2>\n<ul>\n<li><strong>分布式应用程序（distributed application）</strong>：应用程序运行在各个主机而不在分组交换机中</li>\n<li>应用程序之间的通信：主机提供<strong>套接字接口（socket interface）</strong>，规定了发送程序的规则</li>\n</ul>\n<h1 id=\"网络边缘-network-edge\">网络边缘（Network Edge）</h1>\n<p>网络边缘指前面说的主机（端系统）和其接入网络的部分，主机没什么好说的，这部分主要介绍接入网络的部分</p>\n<h2 id=\"接入网\">接入网</h2>\n<ul>\n<li>接入网：将主机物理连接到<strong>边缘路由器（edge router）</strong> 的网络</li>\n<li>边缘路由器：主机与其他任何主机联系路径上的<strong>第一台路由器</strong></li>\n</ul>\n<h3 id=\"卫星链路\">卫星链路</h3>\n<p>传统拨号接入，电话线连接到ISP，网速极慢</p>\n<img data-src=\"/posts/867943d6/image-20220925230035376.png\" class=\"\" title=\"image-20220925230035376\">\n<h3 id=\"数字用户线-digital-subscriber-line-dsl\">数字用户线（Digital Subscriber Line，DSL）</h3>\n<p>用户的本地电话公司作为ISP，电话线是双铜绞线，数据与传统电话信号频分复用（如图所示）</p>\n<p>DSLAM：复用器，数字数据（家庭传过去的）与模拟信号的转换</p>\n<p>上下行速度不一致</p>\n<img data-src=\"/posts/867943d6/image-20220925203621332.png\" class=\"\" title=\"image-20220925203621332\">\n<h3 id=\"电缆\">电缆</h3>\n<p>利用有线电视公司的有线电视基础设施</p>\n<p>使用光纤和同轴电缆，一起被称为混合光纤同轴（Hybrid Fiber Coax，HFC）</p>\n<p>CMTS：电缆调制解调器端接系统（Cable Modem Termination System），模拟信号与数字信号转换</p>\n<p>特征：共享广播媒体（即共享上下行链路，会存在实际速率慢的问题）</p>\n<img data-src=\"/posts/867943d6/image-20220925225028089.png\" class=\"\" title=\"image-20220925225028089\">\n<h3 id=\"光纤到户-fiber-to-the-home-ftth\">光纤到户（Fiber To The Home，FTTH）</h3>\n<ul>\n<li>\n<p>本地中心局连网线路径到家庭</p>\n</li>\n<li>\n<p>直接光纤（拉到家里）</p>\n</li>\n<li>\n<p>竞争性光线分布体系结构</p>\n<ul>\n<li>有源光纤网络（AON）（交换以太网，第六章）</li>\n<li>无源光纤网络（PON）\n<ul>\n<li>光纤网络端接器：ONT</li>\n<li>光纤线路端接器：OLT</li>\n<li>\n<img data-src=\"/posts/867943d6/image-20220925225428448.png\" class=\"\" title=\"image-20220925225428448\">\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"以太网-ethernet\">以太网（Ethernet）</h3>\n<ul>\n<li>局域网（LAN）的一种，常用于企业和校园</li>\n<li>双铜绞线+以太网交换机</li>\n</ul>\n<img data-src=\"/posts/867943d6/image-20220925230232702.png\" class=\"\" title=\"image-20220925230232702\">\n<h3 id=\"wifi\">WiFi</h3>\n<ul>\n<li>通过接入点（access point）发送接收包，接入点与以太网相连</li>\n<li>家庭企业都很常见</li>\n</ul>\n<h3 id=\"广域无线技术\">广域无线技术</h3>\n<p>通过蜂窝网提供商运营的基站发送接受包</p>\n<h2 id=\"物理媒体-physical-media\">物理媒体（Physical Media）</h2>\n<h3 id=\"引导型媒体-guided-media\">引导型媒体（guided media）</h3>\n<ul>\n<li>电波延固体媒体前行，相比之下成本小</li>\n<li>双铜绞线（Twisted Copper Wire）\n<ul>\n<li>电话网</li>\n<li>无屏蔽双绞线（Unshielded Twisted Pair，UTP），常用在LAN中</li>\n<li>\n<img data-src=\"/posts/867943d6/image-20220925232332580.png\" class=\"\" title=\"image-20220925232332580\">\n</li>\n</ul>\n</li>\n<li>同轴电缆（Coaxial Cable）\n<ul>\n<li>铜导体同心，电缆电视中常见，频分复用</li>\n<li>\n<img data-src=\"/posts/867943d6/image-20220925232320852.png\" class=\"\" title=\"image-20220925232320852\">\n</li>\n</ul>\n</li>\n<li>光纤（Fiber Optics）\n<ul>\n<li>引导光脉冲，不受电磁干扰，难窃听，常用作长途引导，成本高</li>\n<li>\n<img data-src=\"/posts/867943d6/image-20220925232505510.png\" class=\"\" title=\"image-20220925232505510\">\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"非引导型媒体-unguided-media\">非引导型媒体（unguided media）</h3>\n<ul>\n<li>电波在空气空间中传播</li>\n<li>无线电有引导型的；微波、LAN、WideArea、卫星</li>\n<li>陆地无线电信道（Terrestrial Radio Channels）</li>\n<li>卫星无线电信道（Satellite Radio Channels）</li>\n</ul>\n<h1 id=\"网络核心-network-core\">网络核心（Network Core）</h1>\n<p>包括电路交换（circuit switching）和分组交换（packet switching）</p>\n<h2 id=\"分组交换\">分组交换</h2>\n<ul>\n<li>分组（包），主机交换报文（message）（可能是功能或数据）</li>\n<li>源（source）将长报文划分成小数据块，即包，每个包通过分组交换机传送</li>\n</ul>\n<h3 id=\"规定：存储转发传输-store-and-forward-transmission\">规定：存储转发传输（store-and-forward transmission）</h3>\n<ul>\n<li>多数交换机必须接收到完整的包才可以向输出链路传输</li>\n<li>时延<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mtext>端到端</mtext></msub><mo>=</mo><mi>N</mi><mfrac><mi>L</mi><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">d_\\text{端到端}=N\\frac{L}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord text mtight\"><span class=\"mord cjk_fallback mtight\">端到端</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.217331em;vertical-align:-0.345em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 条速率为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> 的链路组成的路径，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span> 为信息大小</li>\n</ul>\n<h3 id=\"问题：时延-丢包-吞吐量\">问题：时延、丢包、吞吐量</h3>\n<h4 id=\"丢包\">丢包</h4>\n<p>等待某条链路其他分组传输完毕时在输出缓存/队列（output buffer/queue）中。缓存容量有限，缓存满了又来新的，路由器会丢弃（drop）这个分组，导致丢包（packet loss）（丢失的包可能会重传，后面章节的问题）</p>\n<h4 id=\"时延\">时延</h4>\n<p>节点总时延（total nodal delay）=节点处理时延（nodal processing delay）+排队时延（queuing delay）+传输时延（transmission delay）+传播时延（propagation delay）</p>\n<ul>\n<li>\n<p>节点处理时延（nodal processing delay）：检查分组首部并决定分组导向何处、检查比特级别的差错</p>\n</li>\n<li>\n<p>排队时延（queuing delay）：在链路上等待传输的时间，往往用统计量度量</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mi>k</mi><mi>t</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a(pkt/s)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">t</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span> 为分组到达队列的平均速率，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">R(bps)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span> 为推出比特的速率（链路速度），<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">L (bit)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mclose\">)</span></span></span></span> 的包，则到达队列的平均速度为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi>a</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">La(bps)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\">a</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi>L</mi><mi>a</mi></mrow><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{La}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.217331em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"mord mathdefault mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 为流量强度（traffic intensity）</li>\n<li>若流量强度大于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 则队列趋向于无限增加，排队时延趋向无穷大，因此设计系统时流量强度不能 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">&gt;1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n<li>流量强度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\rightarrow 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ：几乎没有分组到达且到达间隔时间很长，平均排队时延接近 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></li>\n<li>流量强度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\rightarrow 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ：形成队列</li>\n<li>\n<img data-src=\"/posts/867943d6/image-20220927195843760.png\" class=\"\" title=\"image-20220927195843760\">\n</li>\n</ul>\n</li>\n<li>\n<p>传输时延（transmission delay）：将分组的所有比特发射到链路所用时间，=分组长度/链路速度，与路由器之间距离无关</p>\n</li>\n<li>\n<p>传播时延（propagation delay）：推向链路后向另一个路由器传播的时间，速度取决于链路的物理媒体，与路由器之间距离有关，但与分组长度和链路传输速率无关</p>\n</li>\n</ul>\n<h4 id=\"吞吐量\">吞吐量</h4>\n<ul>\n<li>瞬时吞吐量（instantaneous throughput）：接收方主机接收文件的速率（bps）</li>\n<li>平均吞吐量（average throughput）：文件比特数/主机接收文件所用总时间（bps）</li>\n<li>瓶颈链路（bottleneck link）：端到端路径上限制端到端吞吐量的链路，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">{</mo><msub><mi>R</mi><mi>c</mi></msub><mo separator=\"true\">,</mo><msub><mi>R</mi><mi>s</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">min\\{R_c,R_s\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> ，其中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mi>c</mi></msub></mrow><annotation encoding=\"application/x-tex\">R_c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是路由器与客户的传输速率，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mi>s</mi></msub></mrow><annotation encoding=\"application/x-tex\">R_s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是服务器与路由器间的传输速率，可近似得到从服务器向客户传文件的时间为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mtext>文件大小</mtext><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">{</mo><msub><mi>R</mi><mi>c</mi></msub><mo separator=\"true\">,</mo><msub><mi>R</mi><mi>s</mi></msub><mo stretchy=\"false\">}</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\text{文件大小}}{min\\{R_c,R_s\\}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.392331em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mopen mtight\">{</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.00773em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.00773em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">}</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord cjk_fallback mtight\">文件大小</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></li>\n<li>现在的因特网中对吞吐量的限制主要是在接入网</li>\n<li>一条高速链路如果流量太大也会成为瓶颈链路</li>\n</ul>\n<h3 id=\"方法：转发表-forwarding-table\">方法：转发表（forwarding table）</h3>\n<ul>\n<li>每个端系统有自己的IP地址</li>\n<li>发送包时，源会在包的首部包含目的地的IP地址</li>\n<li>路由器检查包的目的地址的一部分，有一个转发表将其映射成输出链路，由该链路转发到相邻的某个路由器</li>\n<li>转发表的设置：路由选择协议（routing protocol）</li>\n</ul>\n<h2 id=\"电路交换\">电路交换</h2>\n<ul>\n<li>电路交换网络预留了资源（缓存、链路传输速率）（分组交换网络是不预留的）</li>\n<li>电路交换机（circuit switches）</li>\n<li>通信时创建专用端到端连接（end-to-end connection）</li>\n<li>每条链路可以有多条电路，通过频分复用（Frequency-Division Multiplexing，FDM）或时分复用（Time-Division Multiplexing，TDM）实现\n<ul>\n<li>FDM：频段的宽度称带宽（bandwidth）</li>\n<li>TDM：时间划分成固定期间的帧，帧划分成固定数量的时隙</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"分组交换-vs-电路交换\">分组交换 vs 电路交换</h2>\n<ul>\n<li>电路交换的<strong>静默期（silent period）</strong> 专用电路空闲，造成浪费</li>\n<li>分组交换不适合实时服务，因为端到端的时延可变且不可预测（因为排队时延变动）</li>\n<li>分组交换提供比电路交换更好的带宽共享</li>\n<li>分组交换更简单、成本更低</li>\n</ul>\n<h2 id=\"网络的网络-network-of-networks\">网络的网络（Network of networks）</h2>\n<ul>\n<li>第一种：单一全球传输ISP（tier-1 ISP），是提供商（provider），接入ISP（tier-2 ISP）是客户（customer）</li>\n<li>第二种：多个全球传输ISP，之间是互联的，以及接入ISP</li>\n<li>第三种：第一层ISP（tier-1 ISP）类似全球传输ISP，区域ISP（regional ISP）与之连接，区域ISP继续套娃区域ISP</li>\n<li>第四种：\n<ul>\n<li>在第三种上加入存在点（Point of Presence，PoP），存在于底层接入ISP之外的所有ISP中，是提供商网络中的一台或多带路由器群组，与其他ISP的路由器直接相连</li>\n<li>任何ISP（除了第一层）可以选择多宿（multi-home）（即与多个ISP提供商相连）</li>\n<li>为减少费用，使得同等级结构层次的邻近ISP对等（peer），这样不用向上游付费，也不向对等付费</li>\n<li>第三方公司创建因特网交换点（Internet Exchange Point，IXP），使得多个ISP在这里一起对等</li>\n</ul>\n</li>\n<li>第五种：在第四种顶部增加内容提供商网络（content provider network），内容提供商创建自己的网络，与第一层和下面的IXP、区域ISP、接入ISP直接相连，减少了向顶层ISP支付的费用</li>\n</ul>\n<img data-src=\"/posts/867943d6/image-20220927194908549.png\" class=\"\" title=\"image-20220927194908549\">\n<ul>\n<li>国内：通信子网（由具体的通信线路和结点交换机构成，主要完成信息分组的传递工作，每个通信节点具有存储转发功能）+ 资源子网（包含所有由通信子网连接的主机，向网络提供各种类型的共享资源。通信子网和资源子网可分别建设）</li>\n</ul>\n<h1 id=\"协议层次-protocol-layers-和服务模型-service-model\">协议层次（Protocol Layers）和服务模型（Service Model）</h1>\n<ul>\n<li>网络设计者分层组织协议并实现软硬件，每一层向上一层提供服务</li>\n<li>概念化、结构化</li>\n<li>协议栈（protocol stack）：各层的所有协议</li>\n</ul>\n<h2 id=\"因特网的协议栈\">因特网的协议栈</h2>\n<pre><code class=\"highlight mermaid\">graph\n\t应用层Application --- 运输层Transport --- 网络层Network --- 链路层Link --- 物理层Physical</code></pre>\n<h3 id=\"应用层\">应用层</h3>\n<ul>\n<li>网络应用程序及应用协议，分布在多个主机上</li>\n<li>分组称报文（message）</li>\n<li>例如HTTP（提供Web文档的请求和传送）、SMTP（电子邮件报文的传输）、FTP（两个端系统之间的文件传送）</li>\n</ul>\n<h3 id=\"运输层\">运输层</h3>\n<ul>\n<li>在应用程序端点之间传送应用层报文</li>\n<li>这层的分组称报文段（segment）</li>\n<li>例如：TCP（提供面向连接的服务，确保传递和流量控制，将长报文划分成短报文，提供拥塞控制机制）、UDP（提供无连接服务）</li>\n</ul>\n<h3 id=\"网络层\">网络层</h3>\n<ul>\n<li>运输层协议向网络层递交报文段和目的地址，从一台主机传到另一台主机</li>\n<li>这层的分组称数据报（datagram）</li>\n<li>例如：网际协议IP（定义数据报中各个字段及主机和路由器如何作用于这些字段）</li>\n<li>也称IP层，反映了是这层将因特网连接在一起</li>\n</ul>\n<p>注：RFC文档中将运输层UDP的分组、网络层的分组均称数据报，这本书为了区分将运输层的分组统称报文段，网络层分组称数据报</p>\n<h3 id=\"链路层\">链路层</h3>\n<ul>\n<li>链路层将网络层的数据报传给下一个链路节点，在下一个节点传给网络层，服务取决于链路的特定协议</li>\n<li>例如：以太网、WiFi、电缆接入网的DOCSIS协议</li>\n<li>分组称帧（frame）</li>\n</ul>\n<h3 id=\"物理层\">物理层</h3>\n<ul>\n<li>把帧中的一个个比特移动到下一个节点，协议不同移动方式不同</li>\n<li>例如：关于双铜绞线、同轴电缆、光纤等的协议</li>\n</ul>\n<h2 id=\"osi模型\">OSI模型</h2>\n<ul>\n<li>Open System Interconnect，开放系统互连参考模型</li>\n</ul>\n<pre><code class=\"highlight mermaid\">graph\n\t应用层Application --- 表示层Presentation --- 会话层Session --- 运输层Transport --- 网络层Network --- 链路层Link --- 物理层Physical</code></pre>\n<ul>\n<li>ISO的标准</li>\n<li>表示层：使通信的应用程序能够解释交换数据的含义，如数据压缩、加密、描述（处理内部格式不同）</li>\n<li>会话层：提供数据交换的定界和同步功能，如建立检查点和恢复方案</li>\n</ul>\n<h2 id=\"封装\">封装</h2>\n<ul>\n<li>每一层的分组：首部字段（header fields）+有效荷载字段（payload field）（来自上一层）</li>\n<li>层层封装</li>\n</ul>\n<h2 id=\"分层的原因-？\">分层的原因（？）</h2>\n<ul>\n<li>为更好的处理复杂的系统，分层后模块化也便于维护</li>\n</ul>\n","categories":["计算机网络"],"tags":["计算机网络"]},{"title":"【计算机网络】运输层","url":"/posts/fc4d3e22/","content":"<p>计算机网络：自顶向下方法（第五版&amp;第七版）学习笔记，第三章运输层</p>\n<span id=\"more\"></span>\n<p>本章逻辑：概述-三个原理-UDP和TCP原理</p>\n<h1 id=\"概述\">概述</h1>\n<ul>\n<li>\n<p>运输层为进程提供逻辑通信（logic communication），网络层为主机提供逻辑通信</p>\n</li>\n<li>\n<p>运输层协议在主机中实现，将进程的报文转化曾报文段（segment）</p>\n</li>\n<li>\n<p>网络层仅作用于运输层报文段的网络层字段而不检查，接收时网络层提取运输层报文段转交运输层</p>\n</li>\n<li>\n<p>运输层提供的服务受限于网络层提供的服务（如时延带宽等），但运输层可以提供网络层提供不了的服务（如安全、数据可靠等）</p>\n</li>\n<li>\n<p>网络层协议IP，尽力而为交付（best-effort delivery service）不保证交付，是不可靠服务（unreliable service）</p>\n</li>\n<li>\n<p>运输层协议的基本服务</p>\n<ul>\n<li>将网络层的传输服务扩展到进程间的传输，这种“扩展”叫多路复用（multiplexing）和多路分解（demultiplexing）</li>\n<li>差错检查（error checking）</li>\n</ul>\n</li>\n<li>\n<p>差错检查是一个端到端原则（end-end principle）：这种功能必须基于端到端实现，在较低级别设置这种功能无价值/冗余</p>\n</li>\n<li>\n<p>TCP还提供：可靠数据传输、拥塞控制</p>\n</li>\n</ul>\n<h1 id=\"多路复用-multiplexing-和多路分解-demultiplexing\">多路复用（multiplexing）和多路分解（demultiplexing）</h1>\n<ul>\n<li>多路分解（demultiplexing）：将运输层报文段的数据交付到正确的socket，即检查目的端口号并定向到对应socket</li>\n<li>多路复用（multiplexing）：从socket中收集数据并封装首部信息生成报文段，并传到网络层\n<ul>\n<li>socket有唯一标识符（端口号）</li>\n<li>报文段有特殊字段指示需要交付到的socket，至少包括源端口号字段（source port number field）、目的端口号字段（destination port number field）</li>\n</ul>\n</li>\n<li>分类为无连接（connectionless）（如UDP）、面向连接（connection-oriented）（如TCP），socket的标识分别为二元组（目的IP、目的端口号）、四元组（源IP，源port，目的IP，目的port）</li>\n</ul>\n<h1 id=\"可靠数据传输-reliable-data-transfer\">可靠数据传输（Reliable Data Transfer）</h1>\n<ul>\n<li>可靠数据传输协议（Reliable Data Transfer Protocol）</li>\n<li>用有限状态自动机FSM（finite state machines）说明发送方/接收方</li>\n<li>（？？？）ARQ（Automatic Repeat Request，自动重传请求协议）</li>\n</ul>\n<h2 id=\"rdt1-0：完全可靠信道\">rdt1.0：完全可靠信道</h2>\n<h3 id=\"发送方\">发送方</h3>\n<p>接收到数据后，制作package并发送</p>\n<img data-src=\"/posts/fc4d3e22/IMG_2862.JPG\" class=\"\" title=\"IMG_2862\">\n<h3 id=\"接收方\">接收方</h3>\n<p>接收到数据后，解析并发送给上层</p>\n<img data-src=\"/posts/fc4d3e22/IMG_2867-16760417322603.JPG\" class=\"\" title=\"IMG_2867\">\n<h2 id=\"rdt2-0：考虑比特受损\">rdt2.0：考虑比特受损</h2>\n<ul>\n<li>有肯定确认（positive acknowledgement）、否定确认（negative acknowledgement）</li>\n<li>又称自动重传请求（Automatic Repeat reQuest）协议，需要差错检测、接收方反馈、重传</li>\n</ul>\n<h3 id=\"发送方\">发送方</h3>\n<ul>\n<li>收到上层数据，制作package（包括检验码）并发送</li>\n<li>开始等待，若接收到数据并发现是个NAK，重新发送；否则等待上层数据</li>\n</ul>\n<img data-src=\"/posts/fc4d3e22/IMG_2863.JPG\" class=\"\" title=\"IMG_2863\">\n<h3 id=\"接收方\">接收方</h3>\n<p>接收到数据，如果损坏就发送NAK，否则把数据给上层并发送ACK</p>\n<img data-src=\"/posts/fc4d3e22/IMG_2868.JPG\" class=\"\" title=\"IMG_2868\">\n<h3 id=\"rdt2-1-2-2：考虑ack和nak损坏\">rdt2.1、2.2：考虑ACK和NAK损坏</h3>\n<ul>\n<li>\n<p>引入分组序号（sequence number），1比特</p>\n</li>\n<li>\n<p>2.2利用可能出现的冗余（duplicate）ACK代替NAK</p>\n</li>\n<li>\n<p>发送方：</p>\n<ul>\n<li>发送的序号为0或1，因此两个等待上方数据状态有01两种，等待确认信号的状态也有01两种</li>\n<li>等待确认时只有不损坏且序号正确才能转换状态去等待上层数据</li>\n<li>2.2去掉NAK后，等待确认时要确认是序号对应的ACK</li>\n</ul>\n</li>\n</ul>\n.JPG)\n<ul>\n<li>接收方：\n<ul>\n<li>接收的序号为0或1，因此两个等待下方接收数据状态有01两种</li>\n<li>2.1中如果损坏发回NAK，如果没损坏但序号不对发送上一序号的ACK</li>\n<li>上述冗余ACK引出2.2的处理，不管损坏还是序号错，都发送上一序号的ACK</li>\n<li>但是不明白为什么2.1发送的是NAK/ACK和checksum，难道不该发01嘛</li>\n</ul>\n</li>\n</ul>\n.JPG)\n<h2 id=\"rdt3-0：考虑比特受损-丢包\">rdt3.0：考虑比特受损&amp;丢包</h2>\n<ul>\n<li>引入倒计数定时器（countdown timer）</li>\n</ul>\n<h3 id=\"发送方\">发送方</h3>\n<ul>\n<li>发送数据后启动定时器</li>\n<li>等待确认时同时响应定时器终止，重新发送包并重启定时器</li>\n<li>收到正确的确认后关闭定时器，等待接收上层的下一状态数据</li>\n<li>等待上层数据时接收冗余数据分组（可能因为时延被接收方当作ACK丢包并重发），不做处理</li>\n</ul>\n.JPG)\n<h3 id=\"接收方-同rdt2-2\">接收方（同rdt2.2）</h3>\n<img data-src=\"/posts/fc4d3e22/IMG_2870.JPG\" class=\"\" title=\"IMG_2870\">\n<h2 id=\"流水线：gbn-回退n步\">流水线：GBN（回退N步）</h2>\n<ul>\n<li>\n<p>上述均为停等协议，对信道（channel）的利用率（utilization）太低，引入流水线传输，不等确认便开始下一个包的发送，需要加序号和缓存（未按序接收的）</p>\n</li>\n<li>\n<p>GBN引入窗口长度限制发送方流水线发送的分组，又称滑动窗口协议（sliding-window protocol）</p>\n<ul>\n<li><code>base</code>，基序号，是窗口最前，是最早未确认分组的序号</li>\n<li><code>N</code>，窗口长度，整个窗口为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mo>+</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[base,base+N-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span>，窗口内，要么包没确认，要么没发送</li>\n<li><code>nextseqnum</code>，下一个序号，是窗口未发送的包的开始序号，即<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>n</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>s</mi><mi>e</mi><mi>q</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[base,nextseqnum-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 这段都是未确认的，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>n</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>s</mi><mi>e</mi><mi>q</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo separator=\"true\">,</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mo>+</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[nextseqnum,base+N-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 是未发送的</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"发送方\">发送方</h3>\n<ul>\n<li>起始<code>base=nextseqnum=1</code>，发送方仅有一个状态</li>\n<li>收到上层的数据包，在窗口未满时不断发送包并更新<code>nextseqnum</code>，窗口满了则向上层拒绝数据（或缓存）\n<ul>\n<li>发送包时若是窗口最前端，启动定时器</li>\n</ul>\n</li>\n<li>定时器到期重新发送<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>n</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>s</mi><mi>e</mi><mi>q</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[base,nextseqnum-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 的所有包</li>\n<li>收到损坏数据不予理会，收到正确数据窗口移动（根据收到的ACK更新<code>base</code>），如果窗口内已经没有需要发送的包，停止定时器，否则重启定时器，这是一种累积确认（cumulative acknowledgement）</li>\n</ul>\n<img data-src=\"/posts/fc4d3e22/IMG_2874.JPG\" class=\"\" title=\"IMG_2874\">\n<h3 id=\"接收方\">接收方</h3>\n<ul>\n<li>只按序接收，只维护<code>expectedseqnum</code></li>\n<li>注意区分<code>expectedseqnum</code>和ACK的确认值</li>\n</ul>\n<img data-src=\"/posts/fc4d3e22/IMG_2875.JPG\" class=\"\" title=\"IMG_2875\">\n<h2 id=\"流水线：选择重传-sr\">流水线：选择重传（SR）</h2>\n<ul>\n<li>\n<p>Selective Repeat</p>\n</li>\n<li>\n<p>为解决GBN的大量重传，接收方引入窗口和对应缓存</p>\n</li>\n</ul>\n<h3 id=\"发送方\">发送方</h3>\n<ul>\n<li><code>base</code>改为<code>sendbase</code>，窗口不同处在于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>s</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>n</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>s</mi><mi>e</mi><mi>q</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[sendbase,nextseqnum-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 间可能有已经确认的包</li>\n<li>每个分组有自己的逻辑定时器，可用单个硬件定时器模拟多个逻辑定时器</li>\n<li>收到ACK后如果在窗口内则标记接收，如果是<code>sendbase</code>则更新<code>sendbase</code>至未确认的最小分组</li>\n<li>其他与GBN类似</li>\n</ul>\n<h3 id=\"接收方\">接收方</h3>\n<ul>\n<li>维护一个窗口</li>\n<li>接收窗口内的失序分组，缓存至前序分组都被收到，一批分组按序交给上层</li>\n<li>接收到窗口之前的分组，重新确认那个分组</li>\n<li>重新确认的存在表明接受和发送方窗口不一定是一致的，最坏情况是两个窗口完全错开，因此<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>窗口长度</mtext><mo>≤</mo><mtext>序号空间大小</mtext><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">窗口长度\\leq 序号空间大小/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"></span><span class=\"mord cjk_fallback\">窗</span><span class=\"mord cjk_fallback\">口</span><span class=\"mord cjk_fallback\">长</span><span class=\"mord cjk_fallback\">度</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord cjk_fallback\">序</span><span class=\"mord cjk_fallback\">号</span><span class=\"mord cjk_fallback\">空</span><span class=\"mord cjk_fallback\">间</span><span class=\"mord cjk_fallback\">大</span><span class=\"mord cjk_fallback\">小</span><span class=\"mord\">/</span><span class=\"mord\">2</span></span></span></span></li>\n</ul>\n<h1 id=\"拥塞控制-congestion-control\">拥塞控制（Congestion Control）</h1>\n<ul>\n<li>区分流量控制：拥塞控制侧重网络环境通过控制发送方减轻网络负担，流量控制侧重接收端控制发送方不会overflow对面的缓存</li>\n<li>表现：丢包、长时延</li>\n</ul>\n<h2 id=\"三种情况研究拥塞的影响\">三种情况研究拥塞的影响</h2>\n<h3 id=\"情况1：2v2-1无穷缓存路由器\">情况1：2v2，1无穷缓存路由器</h3>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_{in}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 发送速率，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_{out}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">u</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 接收速率，链路容量<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span></li>\n<li>分组速率接近容量时时延巨大，缓冲区再大也不能解决实质问题</li>\n</ul>\n<img data-src=\"/posts/fc4d3e22/image-20230212211149374.png\" class=\"\" title=\"image-20230212211149374\">\n<h3 id=\"情况2：2v2-1有限缓存路由器\">情况2：2v2，1有限缓存路由器</h3>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_{in}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 应用层发送速率，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>λ</mi><mrow><mi>i</mi><mi>n</mi></mrow><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">\\lambda_{in}&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.010556em;vertical-align:-0.258664em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-2.441336em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.258664em;\"><span></span></span></span></span></span></span></span></span></span> 运输层发送速率（包含重传）（又称供给载荷offered load），<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_{out}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">u</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 接收速率，链路容量<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span></li>\n</ul>\n<h4 id=\"路由器有空间才发送\">路由器有空间才发送</h4>\n<img data-src=\"/posts/fc4d3e22/image-20230212211824024.png\" class=\"\" title=\"image-20230212211824024\">\n<h4 id=\"路由器没空间丢包-仅确认丢包后重发\">路由器没空间丢包，仅确认丢包后重发</h4>\n<ul>\n<li>发送方重传补偿因缓存不足丢失的分组，加重了阻塞</li>\n<li>随<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>λ</mi><mrow><mi>i</mi><mi>n</mi></mrow><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">\\lambda_{in}&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.010556em;vertical-align:-0.258664em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-2.441336em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.258664em;\"><span></span></span></span></span></span></span></span></span></span> 增加<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_{out}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">u</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 会趋近于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">R/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">/</span><span class=\"mord\">2</span></span></span></span></li>\n</ul>\n<img data-src=\"/posts/fc4d3e22/image-20230212212906314.png\" class=\"\" title=\"image-20230212212906314\">\n<h4 id=\"实际：路由器可能重传未丢失分组\">实际：路由器可能重传未丢失分组</h4>\n<ul>\n<li>大时延带来的不必要重传会使得路由器链路转发不必要的分组副本</li>\n</ul>\n\n<h3 id=\"情况3：4主机4路由器两跳路径\">情况3：4主机4路由器两跳路径</h3>\n<img data-src=\"/posts/fc4d3e22/image-20230212214816384.png\" class=\"\" title=\"image-20230212214816384\">\n<p>一个主机（A）的速率增加会导致D到B的吞吐量趋于0</p>\n<img data-src=\"/posts/fc4d3e22/image-20230212214755349.png\" class=\"\" title=\"image-20230212214755349\">\n<ul>\n<li>丢包时上游传输的带宽努力都白费了</li>\n</ul>\n<h2 id=\"拥塞控制方法\">拥塞控制方法</h2>\n<ul>\n<li>\n<p>端到端拥塞控制（end-end）：端系统只能观察网络行为得知拥塞（丢包loss、时延delay），无明确显式信息，TCP自行判断与处理</p>\n</li>\n<li>\n<p>网络辅助（network-assisted）的拥塞控制：路由器向发送方提供显式反馈信息，比如简单就一个比特，或是复杂的指示最大主机发送速率</p>\n</li>\n</ul>\n<h1 id=\"udp\">UDP</h1>\n<ul>\n<li>用户数据报协议，User Datagram Protocol</li>\n</ul>\n<h2 id=\"报文格式\">报文格式</h2>\n<img data-src=\"/posts/fc4d3e22/image-20230203215219638.png\" class=\"\" title=\"image-20230203215219638\">\n<p>应用数据：应用层的报文</p>\n<p>长度：整个UDP报文段的字节数</p>\n<h2 id=\"原理\">原理</h2>\n<ul>\n<li>UDP将从应用得到的数据附上源和目的端口号字段、长度、检验和，并发送给网络层；将网络层得到的数据解析交付给socket</li>\n<li>无连接：指UDP发送报文段前没有跟对面运输层握手</li>\n<li>差错检验功能：检查传输过程中比特是否变化，但也只能检测，无法恢复\n<ul>\n<li>可能因链路中的干扰或者存储路由器时引入问题</li>\n<li>所有字（16bit）做循环加法，得到结果取反填入检验和</li>\n<li>检验时将所有字加起来，结果应为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mi>F</mi><mi>F</mi><msub><mi>F</mi><mrow><mo stretchy=\"false\">(</mo><mn>16</mn><mo stretchy=\"false\">)</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">FFFF_{(16)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.03853em;vertical-align:-0.3551999999999999em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34480000000000005em;\"><span style=\"top:-2.5198em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">6</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3551999999999999em;\"><span></span></span></span></span></span></span></span></span></span></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"优点\">优点</h2>\n<ul>\n<li>在应用层更精细（finer）控制数据的发送</li>\n<li>无需建立连接，也就不需维护连接状态</li>\n<li>分组首部开销小</li>\n<li>相比TCP没有拥塞控制、可靠数据传输等功能，时延小</li>\n</ul>\n<h2 id=\"缺点\">缺点</h2>\n<ul>\n<li>极端情况下，大量分组溢出，丢包率高，达不到目的地，还会使TCP（因为拥塞机制）减小速率</li>\n<li>无可靠通信（但可以在应用程序中实现）</li>\n</ul>\n<h1 id=\"tcp\">TCP</h1>\n<ul>\n<li>传输控制协议，Transmission Control Protocol</li>\n</ul>\n<h2 id=\"连接\">连接</h2>\n<ul>\n<li>面向连接的（connection-oriented）：发送数据前必须先握手，发送预备报文段（preliminary segment），双方初始化TCP连接相关的状态变量（state variables），总共三次握手（three-way handshake），其中第一次客户发送的报文段没有payload，第三次有</li>\n<li>双全工服务（full-duplex service）：连接建立后数据可双向流动（flow）</li>\n<li>点对点（point-to-point）：no multicasting，连接中只有一对主机</li>\n<li>可靠、有序、流水线数据传输</li>\n</ul>\n<img data-src=\"/posts/fc4d3e22/image-20230212190633655.png\" class=\"\" title=\"image-20230212190633655\">\n<h2 id=\"报文结构\">报文结构</h2>\n<img data-src=\"/posts/fc4d3e22/image-20230212191245966.png\" class=\"\" title=\"image-20230212191245966\">\n<ul>\n<li>序号：报文段首字节的字节流编号，字节按MSS（最大报文段长度，Maximum Segment Size）分段</li>\n<li>确认号：期望收到的对面的字节流编号，采用累积确认，是否丢弃乱序包由编程人员决定，实践中会保留</li>\n<li>接收窗口：简写rcvr window，用于流量控制，指示愿意接受的字节数</li>\n<li>注：捎带（piggybacked）确认，比如Telnet中，收到数据时不着急发送ACK，稍等一会若有数据需要发送，将ACK和这个数据一包发走</li>\n</ul>\n<h2 id=\"往返时间-round-trip-time-和超时\">往返时间（round trip time）和超时</h2>\n<ul>\n<li>超时时间必须超过RTT，太短会导致不必要的重传，太长会放大丢包的影响</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">SampleRTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span>：某个报文段发出（交给网络层）到收到ACK的时间，不考虑重传的包，然而会波动</li>\n<li>估计RTT：每获得新<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">SampleRTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 就更新，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 推荐值<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.125</mn></mrow><annotation encoding=\"application/x-tex\">0.125</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span></span></span></span> ，这是一种指数加权移动平均（exponential weighted moving average）</li>\n</ul>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy=\"false\">)</mo><mo>⋅</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mi>α</mi><mo>⋅</mo><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">EstimateRTT=(1-\\alpha)\\cdot EstimateRTT+\\alpha\\cdot SampleRTT\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></p>\n<ul>\n<li>偏差RTT：估算<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">SampleRTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 偏离<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">EstimateRTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 的程度，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05278em;\">β</span></span></span></span> 推荐值<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.25</mn></mrow><annotation encoding=\"application/x-tex\">0.25</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">2</span><span class=\"mord\">5</span></span></span></span></li>\n</ul>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy=\"false\">)</mo><mo>⋅</mo><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mi>β</mi><mo>⋅</mo><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>−</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">DevRTT=(1-\\beta)\\cdot DevRTT + \\beta\\cdot |SampleRTT-EstimateRTT|\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05278em;\">β</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span></span></span></span></p>\n<ul>\n<li>波动大时将估计RTT放大一些作为时间间隔，波动小时缩小一些，每得到新的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">EstimateRTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> 则更新公式：</li>\n</ul>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>I</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>=</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mn>4</mn><mo>×</mo><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">TimeoutInterval = EstimatedRTT + 4\\times DevRTT\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></p>\n<h2 id=\"可靠数据传输\">可靠数据传输</h2>\n<ul>\n<li>无损坏、无间隙、非冗余、按序</li>\n<li>类似SR，但只有一个定时器：\n<ul>\n<li>发送数据时没有定时器则开启</li>\n<li>重传（只会重传最小未确认报文段）后开启</li>\n<li>收到数据后如果还有没确认的报文段则开启，否则关闭</li>\n</ul>\n</li>\n<li>因为累积确认，所以可以直接用ack更新窗口开端（前面的包就算没有ack，对面也一定收到了，不需要考虑重传）</li>\n<li>简化版的发送方状态图：</li>\n</ul>\n<img data-src=\"/posts/fc4d3e22/image-20230212195817460.png\" class=\"\" title=\"image-20230212195817460\">\n<ul>\n<li>接收方的ACK，其中乱序时可能是冗余ACK也可能是填补了间隔开始部分的普通确认ACK：</li>\n</ul>\n<pre><code class=\"highlight mermaid\">flowchart TD\n\t接收方 -- 收到期望序号 --&gt; 延迟ACK等待下一个期望序号一段时间 -- 超时则确认 --&gt; 发送ACK\n\t延迟ACK等待下一个期望序号一段时间 --&gt; 收到第二个 -- 立刻确认 --&gt; 发送ACK\n\t接收方 -- 收到乱序发送期望间隔最小序号的ACK --&gt; 发送ACK</code></pre>\n<ul>\n<li>快速重传（fast transmit）：超时重发可能时间较长，收到3个冗余ACK就重传（貌似是实践经验，2次更可能是乱序，3次以上更可能丢包）</li>\n</ul>\n<h2 id=\"流量控制-flow-control\">流量控制（flow control）</h2>\n<ul>\n<li>receiver controls sender, so sender won’t overflow receiver’s buffer by transmitting too much, too fast</li>\n<li>接收方维护<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">rwnd</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span></span></span></span> 在报文段中指示缓存空间</li>\n<li>当没有缓存时发送一个字节的报文段，接收方清空缓存并包含新的rwnd</li>\n</ul>\n<h2 id=\"连接管理\">连接管理</h2>\n<ul>\n<li>客户请求建立连接，<code>SYN</code>置<code>1</code>，随机化选择初始序号</li>\n<li>服务器收到后选择自己初始序号，确认序号为客户的序号+1，<code>SYN</code>置<code>1</code>，发送SYNACK报文段</li>\n<li>客户收到SYNACK后分配缓存和变量，发送报文段（置确认序号为服务器初始序号+1），<code>SYN</code>置<code>0</code>，可以加入数据了</li>\n<li>为什么不是两次握手？各种延迟（比如传输已经关闭但数据还没到）、重传（传输完成后又建立一个）、乱序</li>\n<li>客户打算关闭时发送置<code>FIN</code>为<code>1</code>的报文段，服务器收到后回复ACK</li>\n<li>服务器打算关闭时发送<code>FIN</code>为<code>1</code>的确认报文段，客户收到后回复ACK</li>\n<li>ACK都收到时两台主机资源释放</li>\n</ul>\n<p>客户：</p>\n<pre><code class=\"highlight mermaid\">graph\n\tCLOSED -- 发送SYN尝试建立连接 --&gt; SYN_SENT -- 接受SYNACK发送ACK --&gt; ESTABLISHED -- 发送FIN等待关闭连接 --&gt; FIN_WAIT_1 -- 接收ACK --&gt;  FIN_WAIT_2 -- 接收FIN回复ACK --&gt; TIME_WAIT -- 等待30s --&gt; CLOSED</code></pre>\n<pre><code class=\"highlight mermaid\"></code></pre>\n<p>服务器：</p>\n<pre><code class=\"highlight mermaid\">graph\n\tCLOSED -- 套接字监听 --&gt; LISTEN -- 接受SYN发送SYNACK --&gt; SYN_RCVD -- 接收ACK --&gt; ESTABLISHED -- 接收FIN发送ACK --&gt; CLOSE_WAIT -- 发送FIN --&gt; LAST_ACK -- 接收ACK --&gt; CLOSED</code></pre>\n<h2 id=\"拥塞控制\">拥塞控制</h2>\n<ul>\n<li>\n<p>receiver controls sender, so sender won’t overflow receiver’s buffer by transmitting too much, too fast</p>\n</li>\n<li>\n<p>性质：加性增，乘性减，AIMD，Additive Increase Multiplicative Decrease，当TCP发送方感受到端到端路径无拥塞时就线性的增加其发送速度，当察觉到路径拥塞时就乘性减小其发送速度</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">cwnd</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span></span></span></span> ：发送方维护的拥塞窗口长度</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">ssthresh</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">h</span></span></span></span>：慢启动阈值</p>\n</li>\n<li>\n<p>发送速率<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>≈</mo><mfrac><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac><mo stretchy=\"false\">(</mo><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">rate\\approx\\frac{cwnd}{RTT}(bytes/sec)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">c</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n</ul>\n<h3 id=\"慢启动-slow-start\">慢启动（Slow Start）</h3>\n<ul>\n<li>\n<p>超时：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mn>1</mn><mi>M</mi><mi>S</mi><mi>S</mi><mo separator=\"true\">,</mo><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi><mo>=</mo><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">cwnd=1MSS,ssthresh=cwnd/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord\">/</span><span class=\"mord\">2</span></span></span></span> ，重传分组，进入慢启动状态</p>\n</li>\n<li>\n<p>ACK冗余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span>：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi><mo>=</mo><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn><mo separator=\"true\">,</mo><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi><mo>+</mo><mn>3</mn><mi>M</mi><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">ssthresh=cwnd/2,cwnd=ssthresh+3MSS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> ，进入快速恢复状态</p>\n</li>\n</ul>\n<h4 id=\"慢启动状态\">慢启动状态</h4>\n<ul>\n<li>初始<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mn>1</mn><mi>M</mi><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">cwnd=1MSS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span>，每确认一个报文段<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>+</mo><mo>=</mo><mn>1</mn><mi>M</mi><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">cwnd+=1MSS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord\">+</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span> ，即以指数增长</li>\n<li>超过<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">ssthresh</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">h</span></span></span></span>：进入拥塞避免状态</li>\n</ul>\n<h4 id=\"快速恢复状态\">快速恢复状态</h4>\n<ul>\n<li>冗余ACK：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>+</mo><mo>=</mo><mn>1</mn><mi>M</mi><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">cwnd+=1MSS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord\">+</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span></li>\n<li>得到新的ACK：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">cwnd=ssthresh</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">h</span></span></span></span></li>\n</ul>\n<h4 id=\"拥塞避免\">拥塞避免</h4>\n<p>得到新的ACK：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>+</mo><mo>=</mo><mi>M</mi><mi>S</mi><mi>S</mi><mi mathvariant=\"normal\">/</mi><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>⋅</mo><mi>M</mi><mi>S</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">cwnd+=MSS/cwnd\\cdot MSS</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord\">+</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span></p>\n\n<h3 id=\"tcp-tahoe-tcp-reno\">TCP Tahoe &amp; TCP Reno</h3>\n<p>上面给的是Reno，Tahoe不管是超时还是3个冗余都是恢复到慢启动开始指数增长，到阈值线性增长</p>\n<h3 id=\"宏观吞吐量-throughput\">宏观吞吐量（throughput）</h3>\n<p>窗口长度w</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>C</mi><mi>P</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>u</mi><mi>p</mi><mi>u</mi><msub><mi>t</mi><mrow><mi>a</mi><mi>v</mi><mi>e</mi></mrow></msub><mo>=</mo><mfrac><mn>3</mn><mn>4</mn></mfrac><mfrac><mi>W</mi><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac><mo stretchy=\"false\">(</mo><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">TCPthruput_{ave} = \\frac{3}{4}\\frac{W}{RTT}(bytes/sec)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault mtight\">e</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<img data-src=\"/posts/fc4d3e22/image-20230212224840532.png\" class=\"\" title=\"image-20230212224840532\">\n<h3 id=\"高带宽路径的平均吞吐量\">高带宽路径的平均吞吐量</h3>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>C</mi><mi>P</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>u</mi><mi>p</mi><mi>u</mi><msub><mi>t</mi><mrow><mi>a</mi><mi>v</mi><mi>e</mi></mrow></msub><mo>=</mo><mfrac><mrow><mn>1.22</mn><mo>×</mo><mi>M</mi><mi>S</mi><mi>S</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi><msqrt><mi>L</mi></msqrt></mrow></mfrac><mo stretchy=\"false\">(</mo><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">TCPthruput_{ave} = \\frac{1.22\\times MSS}{RTT\\sqrt{L}}(bytes/sec)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault mtight\">e</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.29033em;vertical-align:-0.93em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.1833349999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9266650000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathdefault\">L</span></span></span><span style=\"top:-2.886665em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.11333499999999996em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">2</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.93em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<h3 id=\"公平性\">公平性</h3>\n<p>吞吐量和应等于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> ，指数增长会使得和超过R（直线沿45°走），引起丢包，减小窗口，和减少（直线沿丢包的那个点与远点的连线走）</p>\n<img data-src=\"/posts/fc4d3e22/image-20230212225249300.png\" class=\"\" title=\"image-20230212225249300\">\n","categories":["计算机网络"],"tags":["计算机网络"]},{"title":"【计算机网络】链路层和LAN","url":"/posts/6521b1f3/","content":"<p>计算机网络：自顶向下方法（第五版&amp;第七版）学习笔记，第五章链路层和LAN</p>\n<span id=\"more\"></span>\n<h1 id=\"概述\">概述</h1>\n<ul>\n<li>运行链路层协议的设备称节点（node），通信信道称链路（link），信息称链路层帧（frame）</li>\n<li>服务\n<ul>\n<li>成帧（framing）：封装网络层数据报</li>\n<li>链路接入（link access）：媒体访问控制MAC（Medium Access Control）协议规定帧在链路上的传输规则</li>\n<li>可靠交付（Reliable delivery）：有线一般不提供，高差错线路如无线提供纠错</li>\n<li>差错检测和纠正（Error Detection &amp; Correction）：硬件实现，接收方检测并纠错</li>\n<li>流量控制：类似运输层的</li>\n<li>双全工、半全工</li>\n</ul>\n</li>\n<li>在网络适配器（network adapter），又称网络接口卡NIC（Network Interface Card），实现，接入主机总线</li>\n<li>链路类型\n<ul>\n<li>点对点链路（point-to-point link），单接收方单发送方，如点对点协议PPP（point-to-point protocol）、高级数据链路控制HDLC（high-level data link control）</li>\n<li>广播链路（broadcast link），多发送方多接收方，共享相同单一的广播信道</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"差错检测和纠正\">差错检测和纠正</h1>\n<ul>\n<li>使用差错检测和纠正比特EDC（Error Detection and Correction bits）来增强数据</li>\n</ul>\n<h2 id=\"奇偶校验-parity-checking\">奇偶校验（Parity Checking）</h2>\n<ul>\n<li>奇偶校验位（parity bit）：加校验比特使得1的个数是偶数（偶校验），检验时如果是奇数个就叫出现了奇数个比特差错（odd number of bit errors）</li>\n<li>二维奇偶校验：行+列</li>\n</ul>\n<h2 id=\"检验和-checksum\">检验和（checksum）</h2>\n<p>只在运输层用</p>\n<h2 id=\"循环冗余crc-cyclic-redundancy-check\">循环冗余CRC（Cyclic Redundancy Check）</h2>\n<p>已知<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> 比特数据<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span> ，协商过的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 比特生成多项式（generator）<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span></span></span></span> ，构造<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 比特附加数据<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> 使得：</p>\n<p class='katex-block katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;&amp;&#039; at position 1: &amp;̲G\\mid (D&lt;&lt;r \\we…'>&amp;G\\mid (D&lt;&lt;r \\wedge R)\\\\\n\\Rightarrow &amp; (D&lt;&lt;r) \\equiv R\\mod G\n</p>\n<p>（这里混用了计算机的记法和数学的记法）</p>\n<p>在竖式计算过程中，乘除法规则不变，加减法变为异或运算</p>\n<h1 id=\"多路访问协议-multiple-access-protocol\">多路访问协议（multiple access protocol）</h1>\n<ul>\n<li>\n<p>多个信息同时到达接收方会碰撞（collide）</p>\n</li>\n<li>\n<p>希望达到：</p>\n<ul>\n<li>一个节点发送时有全部吞吐量</li>\n<li>多个节点发送时具有平均的传输速率</li>\n<li>协议分散，系统更稳定不会崩溃</li>\n<li>协议简单</li>\n</ul>\n</li>\n<li>\n<p>分为三种类型的协议</p>\n</li>\n</ul>\n<h2 id=\"信道划分协议-channel-partitioning-protocol\">信道划分协议（Channel Partitioning Protocol）</h2>\n<ul>\n<li>时分多路复用（TDM）将时间划分时间帧，进一步时间帧划分时隙（slot）给每个节点，因此在一个时间帧内节点轮流发送</li>\n<li>频分多路复用同理</li>\n<li>码分多址CDMA（Code Division Multiple Access）：在上述两种复用基础上，给节点编码，编码选择</li>\n</ul>\n<h2 id=\"随机接入协议-random-access-protocol\">随机接入协议（Random Access Protocol）</h2>\n<ul>\n<li>节点全速传输</li>\n<li>碰撞时，节点等待一个随机时延后重发</li>\n</ul>\n<h3 id=\"时隙-slotted-aloha\">时隙（slotted）ALOHA</h3>\n<ul>\n<li>时间划分成传输一帧的时隙</li>\n<li>节点同步，在时隙开始时发送，时隙结束前检测碰撞</li>\n<li>碰撞后该节点以概率<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span></span></span></span> 在每个时隙重传直到发走</li>\n<li>优点：一个节点发送时有全部吞吐量，高度分散，简单</li>\n<li>缺点：碰撞及重发都浪费</li>\n<li>最大效率<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mi>e</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{e}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">e</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></li>\n</ul>\n<h3 id=\"aloha\">ALOHA</h3>\n<ul>\n<li>不同步</li>\n<li>最大效率<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>2</mn><mi>e</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{2}{e}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">e</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></li>\n</ul>\n<h3 id=\"载波侦听多路访问-csma-cd\">载波侦听多路访问（CSMA/CD）</h3>\n<ul>\n<li>载波侦听（carrier sensing）：发送前先听信道</li>\n<li>碰撞检测CD（collision detection）：传输时监听，发现有别人正在传输（收到其他适配器的信号能量）后停止并等待一个随机时间</li>\n<li>以太网采取二进制指数后退（binary exponential backoff）（见后面）</li>\n</ul>\n<h2 id=\"轮流协议-taking-turns-protocol\">轮流协议（Taking-Turns Protocol）</h2>\n<h3 id=\"轮询协议-polling-protocol\">轮询协议（polling protocol）</h3>\n<ul>\n<li>蓝牙、计算机外设</li>\n<li>主节点（master node）观察并逐一询问</li>\n<li>有轮询时延、询问非活跃节点的时延、不分散</li>\n</ul>\n<h3 id=\"令牌传递协议-token-passing-protocol\">令牌传递协议（token-passing protocol）</h3>\n<ul>\n<li>一个特殊帧：令牌（token），收到令牌有则发送，无则把令牌发给其他节点</li>\n<li>节点故障/忘记释放令牌可能会导致问题</li>\n</ul>\n<h1 id=\"链路层寻址\">链路层寻址</h1>\n<ul>\n<li>\n<p>网络适配器有链路层地址，MAC地址最常用，也叫LAN地址、物理地址，6个字节，十六进制标识</p>\n</li>\n<li>\n<p>IEEE管理，MAC地址均不相同，且是永久的</p>\n</li>\n<li>\n<p>MAC广播地址：FF-FF-FF-FF-FF-FF</p>\n</li>\n<li>\n<p>地址解析协议ARP（Address Resolution Protocol）</p>\n<ul>\n<li>发送主机给适配器提供IP和MAC，ARP用于从IP获得MAC</li>\n<li>类比DNS，但ARP只为同一子网的主机和路由器接口解析IP地址</li>\n<li>ARP表：IP、MAC、TTL</li>\n<li>主机向适配器发送ARP查询分组，指示适配器用广播地址发送，每个适配器都向上传送检查IP是否匹配，匹配的发送响应分组</li>\n<li>往子网外发MAC是解析第一条路由器IP的MAC，最后一条路由器也通过ARP找目的地的MAC</li>\n<li>协议跨链路层和网络层</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"以太网-ethernet\">以太网（Ethernet）</h1>\n<ul>\n<li>星形拓扑，古董：集线器（hub），现在：交换机（switch）（仅运行在第二层）</li>\n<li>第一个广泛部署的高速局域网</li>\n</ul>\n<img data-src=\"/posts/6521b1f3/image-20230214220348685.png\" class=\"\" title=\"image-20230214220348685\">\n<ul>\n<li>帧结构\n<ul>\n<li>前同步码（8字节）（preamble）：7个字节的10101010，最后一个字节10101011，用于唤醒接收适配器和完成适配器的时钟同步</li>\n<li>源、目的地址（6+6字节）：MAC，目的地址不匹配LAN里的会被丢弃</li>\n<li>type（2字节）：上层协议</li>\n<li>数据字段（46-1500字节）：如果小于46会被填充，网络层通过长度字段去除链路层的填充</li>\n<li>CRC（4字节）</li>\n</ul>\n</li>\n<li>以太网采取CSMA/CD，采用二进制指数后退（binary exponential backoff）算法\n<ul>\n<li>为了适应当前的流量</li>\n<li>一个经历了<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 次碰撞的帧，等待<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>512</mn><mi>b</mi><mi>i</mi><mi>t</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">512 bits</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">5</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span></span></span></span> 进入以太网所需时间的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span></span></span></span> 倍，其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">K\\in [0,2^n-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> ，即对于速度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mspace width=\"1em\"/><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">v\\quad bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span> 的以太网，等待<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi>K</mi><mo>⋅</mo><mn>512</mn><mspace width=\"1em\"/><mi>b</mi><mi>i</mi><mi>t</mi><mi>s</mi></mrow><mrow><mi>v</mi><mspace width=\"1em\"/><mi>b</mi><mi>p</mi><mi>s</mi></mrow></mfrac><mo stretchy=\"false\">(</mo><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\frac{K\\cdot512 \\quad bits}{v\\quad bps}(s)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3612159999999998em;vertical-align:-0.481108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace mtight\" style=\"margin-right:1.4285714285714286em;\"></span><span class=\"mord mathdefault mtight\">b</span><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\">s</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mbin mtight\">⋅</span><span class=\"mord mtight\">5</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span><span class=\"mspace mtight\" style=\"margin-right:1.4285714285714286em;\"></span><span class=\"mord mathdefault mtight\">b</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span> 后发送</li>\n<li>注意（老师ppt给的习题，但书上没找到更多说法，可能是书版本问题）：同时发送，传播时延的时间能检测到碰撞，然后发送拥塞信号（花了48），检测到碰撞后至少有个帧间最小间隔时间（习题里是96？）才能发送</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>T</mi><mtext>prop </mtext></msub></mrow><annotation encoding=\"application/x-tex\">T_{\\text {prop }}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">prop </span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> 为LAN中两个适配器间传播的最大时间，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>t</mi><mtext>trans </mtext></msub></mrow><annotation encoding=\"application/x-tex\">t_{\\text {trans }}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76508em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">trans </span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 为传输一个最大长度的以太网帧的时间，则有：</li>\n</ul>\n</li>\n</ul>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext> efficiency </mtext><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mn>5</mn><msub><mi>t</mi><mtext>prop </mtext></msub><mi mathvariant=\"normal\">/</mi><msub><mi>t</mi><mtext>trans </mtext></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\text { efficiency }=\\frac{1}{1+5 t_{\\text {prop }} / t_{\\text {trans }}}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\"> efficiency </span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.293548em;vertical-align:-0.972108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">5</span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">prop </span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">trans </span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.972108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<h1 id=\"链路层交换机\">链路层交换机</h1>\n<ul>\n<li>过滤（filtering）：决定帧转发还是丢弃</li>\n<li>转发（forwarding）：决定帧被导向哪个接口并移动</li>\n<li>交换机表：包含MAC、交换机接口、表项放入时间，MAC没有广播找MAC，MAC与来的方向一致就过滤掉</li>\n<li>对主机和路由器透明：它们不知道会经过交换机</li>\n<li>自学习：来一个入帧就存储，老化期（aging time）后清除</li>\n<li>即插即用</li>\n<li>比广播链路高效（不会碰撞）</li>\n<li>链路可以不同</li>\n<li>能够管理，比如适配器发送jabbering时断开这个异常适配器</li>\n</ul>\n","categories":["计算机网络"],"tags":["计算机网络"]},{"title":"【题解】Codeforces Round 758 (Div.1 + Div.2)","url":"/posts/d8c57ca7/","content":"<p>Codeforces Round #758 (Div.1 + Div. 2) A-D题解，即CF1608A-CF1608D，两道思维题，一道涉及图论的建模，一道涉及组合数学的计算</p>\n<span id=\"more\"></span>\n<h1 id=\"cf1608a\">CF1608A</h1>\n<h2 id=\"题意\">题意</h2>\n<p>多组数据，构造一个长为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的数列，数字范围 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,10^9]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> ，使得数列中除第一项的每一项都无法整除前一项</p>\n<h2 id=\"分析\">分析</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>5</mn><mo separator=\"true\">,</mo><mn>6...</mn></mrow><annotation encoding=\"application/x-tex\">2,3,4,5,6...</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">6</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span></span></span></span> 的数列</p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">        cout &lt;&lt; i + <span class=\"number\">2</span> &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    cout &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t;</span><br><span class=\"line\">    cin &gt;&gt; t;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (t--)</span><br><span class=\"line\">        <span class=\"built_in\">solve</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"cf1608b\">CF1608B</h1>\n<h2 id=\"题意\">题意</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> 组数据，输入 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">n,a,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> ，尝试构造一个 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1...</mn><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">1...n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">n</span></span></span></span> 的排列使排列中恰好有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 个极大值和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 个极小值，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo><mi>n</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">t\\in[1,10^4],n\\in[2,10^5]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65418em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span></p>\n<h2 id=\"分析\">分析</h2>\n<p>分析略复杂细心就行，但代码写起来非常恼火</p>\n<h3 id=\"极小极大值最多构造个数\">极小极大值最多构造个数</h3>\n<p>考虑最多能构造的极大极小值个数，一定是按以下排列（高矮代表数的大小），即最小-最大-次小-次大…或反过来：</p>\n<img data-src=\"/posts/d8c57ca7/a.jpg\" class=\"\" title=\"a\">\n<p>如果 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 是奇数，最多能构造 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">⌊</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo stretchy=\"false\">⌋</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">⌊</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo stretchy=\"false\">⌋</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lfloor \\frac{n}{2}\\rfloor,\\lfloor \\frac{n}{2}\\rfloor-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.095em;vertical-align:-0.345em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">⌋</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">⌋</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个极大极小值，若以最小开头则极大值比极小值多 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个，反之以最大开头极大值比极小值少</p>\n<p>如果 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 是偶数，最多能构造 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">⌊</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo stretchy=\"false\">⌋</mo></mrow><annotation encoding=\"application/x-tex\">\\lfloor \\frac{n}{2}\\rfloor</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.095em;vertical-align:-0.345em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">⌋</span></span></span></span> 个极大值和极小值</p>\n<h3 id=\"极小极大值构造个数差值\">极小极大值构造个数差值</h3>\n<p>考虑极大极小值的个数最多能差几个</p>\n<p>上面分析已经说明可以差一个了，尝试构造差两个：</p>\n<img data-src=\"/posts/d8c57ca7/b.jpg\" class=\"\" title=\"b\">\n<p>可以发现，为了出现两个极大值，中间一定会有一个极小值出现，因此极大极小值个数差不可能超过 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<h3 id=\"要求极大极小值个数没有达到上限\">要求极大极小值个数没有达到上限</h3>\n<p>考虑不能将整个排列都构造成极值连续的情况：</p>\n<p>如果极大值比极小值多 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个（选择最小开头），在最后一个需要的极大值出现之后将剩下的数字降序排列即可：</p>\n<img data-src=\"/posts/d8c57ca7/c.jpg\" class=\"\" title=\"c\">\n<p>如果极小值比极大值多 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个（选择最大开头），在最后一个需要的极小值出现之后将剩下的数字升序排列即可：</p>\n<img data-src=\"/posts/d8c57ca7/d.jpg\" class=\"\" title=\"d\">\n<p>如果极大值极小值个数相同（最大最小开头都可，这里用最小开头），在极大值极小值都出现完之后按顺序（如果最小开头就是升序，否则降序）输出剩下的数字即可：</p>\n<img data-src=\"/posts/d8c57ca7/e.jpg\" class=\"\" title=\"e\">\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, a, b;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">    <span class=\"type\">int</span> x = <span class=\"built_in\">min</span>(a, b);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">abs</span>(a - b) &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&quot;-1\\n&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((n &amp; <span class=\"number\">1</span>) &amp;&amp; ((a == b &amp;&amp; <span class=\"built_in\">min</span>(a, b) &gt; n / <span class=\"number\">2</span> - <span class=\"number\">1</span>) || (a != b &amp;&amp; <span class=\"built_in\">max</span>(a, b) &gt; n / <span class=\"number\">2</span>))) &#123;</span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&quot;-1\\n&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((!(n &amp; <span class=\"number\">1</span>) &amp;&amp; <span class=\"built_in\">max</span>(a, b) &gt; n / <span class=\"number\">2</span> - <span class=\"number\">1</span>)) &#123;</span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&quot;-1\\n&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!a &amp;&amp; !b) <span class=\"comment\">// 无极值</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">            cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a == b) <span class=\"comment\">// 同等个数</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= a; i++)</span><br><span class=\"line\">            cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span> &lt;&lt; n - i + <span class=\"number\">1</span> &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>; <span class=\"comment\">// 构造a个极大极小值组</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a + <span class=\"number\">1</span>; i &lt; (n - a + <span class=\"number\">1</span>); i++)</span><br><span class=\"line\">            cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>; <span class=\"comment\">// 剩下的升序输出</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a &gt; b) <span class=\"comment\">// 需要的极大值更多</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= b + <span class=\"number\">1</span>; i++)</span><br><span class=\"line\">            cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span> &lt;&lt; n - i + <span class=\"number\">1</span> &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>; <span class=\"comment\">// 多输出一个极大值</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = n - (b + <span class=\"number\">1</span>); i &gt; b + <span class=\"number\">1</span>; i--)</span><br><span class=\"line\">            cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= a + <span class=\"number\">1</span>; i++) <span class=\"comment\">// 多输出一个极小值</span></span><br><span class=\"line\">            cout &lt;&lt; n - i + <span class=\"number\">1</span> &lt;&lt; <span class=\"string\">&#x27; &#x27;</span> &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a + <span class=\"number\">2</span>; i &lt; (n - (a + <span class=\"number\">1</span>) + <span class=\"number\">1</span>); i++)</span><br><span class=\"line\">            cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cout &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t;</span><br><span class=\"line\">    cin &gt;&gt; t;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (t--)</span><br><span class=\"line\">        <span class=\"built_in\">solve</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"cf1608c\">CF1608C</h1>\n<h2 id=\"题意\">题意</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> 组数据。有地图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 和地图 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> ，共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个人，在两张地图上的战斗力分别为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_i,b_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，每一张图上各人的战斗力没有重复的值，战斗力高的一定能战胜战斗力低的。每比赛一场，淘汰输的一方，主办方可以随意搭配每一场的对战人员和地图。问每个人是否都能赢得最后的胜利（利用不同的对战顺序）</p>\n<h2 id=\"分析\">分析</h2>\n<p>这题要看到战斗力高的一定能战胜战斗力低的，所以能力最高的可以一路打败所有人，两张图随意挑选，要想到（我当时并没有想到）每两个人之间是一条单向边，连出来的有向图中能走遍所有点的节点一定可以取胜（同时也是对战的顺序）</p>\n<p>所以思路就是建图、缩点、重构图的同时记录入边，找到重构图中没有入边的点（原图中的强连通分量）（因为这里是一条链上继续加边，因此重构图有且仅有一个点没有入边），里面所有的人都是可以取胜的，其他人都不可以</p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\">pii a[N], b[N];</span><br><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; G[N], G2[N];</span><br><span class=\"line\">set&lt;<span class=\"type\">int</span>&gt; G2check[N];</span><br><span class=\"line\"><span class=\"type\">int</span> dfn[N], dfntot, low[N];</span><br><span class=\"line\"><span class=\"type\">int</span> st[N], top;</span><br><span class=\"line\"><span class=\"type\">bool</span> instack[N];</span><br><span class=\"line\"><span class=\"type\">int</span> scc[N], sc;</span><br><span class=\"line\"><span class=\"type\">bool</span> vst[N];</span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">        a[i].second = b[i].second = i;</span><br><span class=\"line\">        G[i].<span class=\"built_in\">clear</span>();</span><br><span class=\"line\">        dfn[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    sc = dfntot = top = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    low[rt] = dfn[rt] = ++dfntot;</span><br><span class=\"line\">    st[++top] = rt;</span><br><span class=\"line\">    instack[rt] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> v : G[rt]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!dfn[v]) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(v);</span><br><span class=\"line\">            low[rt] = <span class=\"built_in\">min</span>(low[rt], low[v]);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (instack[v])</span><br><span class=\"line\">            low[rt] = <span class=\"built_in\">min</span>(low[rt], dfn[v]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (dfn[rt] == low[rt]) &#123;</span><br><span class=\"line\">        ++sc;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (st[top] != rt) &#123;</span><br><span class=\"line\">            scc[st[top]] = sc;</span><br><span class=\"line\">            instack[st[top]] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            top--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        scc[st[top]] = sc;</span><br><span class=\"line\">        instack[st[top]] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        top--;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">rebuild</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= sc; i++) &#123;</span><br><span class=\"line\">        G2[i].<span class=\"built_in\">clear</span>();</span><br><span class=\"line\">        G2check[i].<span class=\"built_in\">clear</span>();</span><br><span class=\"line\">        vst[i] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> v : G[i])</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (scc[v] != scc[i] &amp;&amp; !G2check[scc[i]].<span class=\"built_in\">count</span>(scc[v])) &#123;</span><br><span class=\"line\">                G2[scc[i]].<span class=\"built_in\">push_back</span>(scc[v]);</span><br><span class=\"line\">                G2check[scc[i]].<span class=\"built_in\">insert</span>(scc[v]);</span><br><span class=\"line\">                vst[scc[v]] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    <span class=\"built_in\">init</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        cin &gt;&gt; a[i].first;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        cin &gt;&gt; b[i].first;</span><br><span class=\"line\">    <span class=\"built_in\">sort</span>(a + <span class=\"number\">1</span>, a + n + <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">sort</span>(b + <span class=\"number\">1</span>, b + n + <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">        G[a[i + <span class=\"number\">1</span>].second].<span class=\"built_in\">push_back</span>(a[i].second);</span><br><span class=\"line\">        G[b[i + <span class=\"number\">1</span>].second].<span class=\"built_in\">push_back</span>(b[i].second);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!dfn[i])</span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(i);</span><br><span class=\"line\">    <span class=\"built_in\">rebuild</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= sc; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!vst[i]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">                cout &lt;&lt; (scc[j] == i ? <span class=\"string\">&#x27;1&#x27;</span> : <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    cout &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ios::<span class=\"built_in\">sync_with_stdio</span>(<span class=\"literal\">false</span>);</span><br><span class=\"line\">    cin.<span class=\"built_in\">tie</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    cout.<span class=\"built_in\">tie</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> t;</span><br><span class=\"line\">    cin &gt;&gt; t;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (t--)</span><br><span class=\"line\">        <span class=\"built_in\">solve</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"cf1608d\">CF1608D</h1>\n<h2 id=\"题意\">题意</h2>\n<p>一个东西有左面右面，可以涂黑/白色，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个这些东西可以任意顺序排列，要求一个东西的右面与它右边的那个东西的左面颜色不同，第一个和最后一个以成环来处理</p>\n<p>一组数据，有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个东西，给出已经涂的颜色 <code>W</code> 、 <code>B</code> ，没有涂的用 <code>?</code> 代替，求所有合法的涂色方案数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mn>998244353</mn></mrow><annotation encoding=\"application/x-tex\">\\mod 998244353</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">8</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mord\">4</span><span class=\"mord\">3</span><span class=\"mord\">5</span><span class=\"mord\">3</span></span></span></span></p>\n<h2 id=\"分析\">分析</h2>\n<p>由前一个的右面和下一个的左面颜色不同（且整个是个环）可以知道合法的方案里黑白的个数是相等的，设黑的个数为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span></span></span></span>，白的个数为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span>，则所有的涂色方案数（只考虑个数合法）为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mi>n</mi><mo>−</mo><mi>w</mi><mo>−</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>−</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">C(2n-w-b,n-b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span>，其中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>&lt;</mo><mo>=</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">w,b&lt;=n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span></p>\n<p>每个东西的涂色共有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span> 种情况：WW, WB, BW, BB，可以发现有一个WW，个数合法方案必有一个BB（否则黑白个数不等）</p>\n<p>考虑相邻的搭配：WW和BB相邻搭配就可以合法；WB有两种合法，一种是全是WB，另一种是WB夹在BB和WW之间，没有别的情况了；BW同理</p>\n<p>所以：</p>\n<p>序列中只要有BB和WW一定是合法的，无论怎么天色，有WB和BW有就WBWB…和BWBW…顺次排好插BB和WW中间，因此设一个标志位 <code>flag</code> 记录原序列中是否有这两个中的一个，如果有答案就是上面那个组合数；</p>\n<p>序列中没有BB和WW的情况下，只有全WB和全BW的序列是合法的。原序列中的B+?和W+?被填成BW和WB的情况先全部删除，方案数是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>×</mo><mn>1</mn><mo>×</mo><mn>1...</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1\\times 1\\times 1...=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，原序列中??被填成BW和WB的方案数为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>×</mo><mn>2</mn><mo>×</mo><mn>2...</mn></mrow><annotation encoding=\"application/x-tex\">2\\times 2\\times 2...</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span></span></span></span>，二者乘起来作为容斥删除的非法方案数。容斥加回多删了的全WB和全BW序列，如果B?或?W，和W?或?B同时在原序列中出现了，那么就不可能填出全WB或全BW的合法序列，不需要容斥加回；只出现其中一类可以填出一个合法序列，容斥加回一种方案；两种都没出现则可以填出两个合法序列，容斥加回两个方案</p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">const</span> ll mod = <span class=\"number\">998244353</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> fac[N], inv[N];</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">qpow</span><span class=\"params\">(ll m, ll n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll ans = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (n &amp; <span class=\"number\">1</span>)</span><br><span class=\"line\">            ans = (ans * m) % mod;</span><br><span class=\"line\">        m = (m * m) % mod;</span><br><span class=\"line\">        n &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(<span class=\"type\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fac[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        fac[i] = <span class=\"number\">1ll</span> * fac[i - <span class=\"number\">1</span>] * i % mod;</span><br><span class=\"line\">    inv[n] = <span class=\"built_in\">qpow</span>(fac[n], mod - <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = n - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--)</span><br><span class=\"line\">        inv[i] = <span class=\"number\">1ll</span> * inv[i + <span class=\"number\">1</span>] * (i + <span class=\"number\">1</span>) % mod;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">C</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x &lt; y || y &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1ll</span> * fac[x] * inv[x - y] % mod * inv[y] % mod;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    <span class=\"built_in\">init</span>(n &lt;&lt; <span class=\"number\">1</span>);</span><br><span class=\"line\">    string s;</span><br><span class=\"line\">    <span class=\"type\">bool</span> flag = <span class=\"literal\">false</span>, bw = <span class=\"literal\">false</span>, wb = <span class=\"literal\">false</span>; <span class=\"comment\">// 原序列中是否出现了BB/WW、B?/?W、W?/?B</span></span><br><span class=\"line\">    ll qq = <span class=\"number\">0</span>, b = <span class=\"number\">0</span>, w = <span class=\"number\">0</span>; <span class=\"comment\">// 原序列中出现的??个数、b个数、w个数</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">        cin &gt;&gt; s;</span><br><span class=\"line\">        b += (s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;B&#x27;</span>) + (s[<span class=\"number\">1</span>] == <span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\">        w += (s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;W&#x27;</span>) + (s[<span class=\"number\">1</span>] == <span class=\"string\">&#x27;W&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s[<span class=\"number\">0</span>] == s[<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;?&#x27;</span>)</span><br><span class=\"line\">                qq++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            bw |= (s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;B&#x27;</span>) | (s[<span class=\"number\">1</span>] == <span class=\"string\">&#x27;W&#x27;</span>); <span class=\"comment\">// 是否出现B?/?W</span></span><br><span class=\"line\">            wb |= (s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;W&#x27;</span>) | (s[<span class=\"number\">1</span>] == <span class=\"string\">&#x27;B&#x27;</span>); <span class=\"comment\">// 是否出现W?/?B</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ll ans = <span class=\"built_in\">C</span>(<span class=\"number\">2</span> * n - w - b, n - b);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!flag) <span class=\"comment\">// 需要容斥</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ans = (ans - <span class=\"built_in\">qpow</span>(<span class=\"number\">2ll</span>, qq) + mod) % mod; <span class=\"comment\">// 容斥删除没有WW和BB的所有序列</span></span><br><span class=\"line\">        ans = (ans + (bw ^ <span class=\"number\">1</span>) + (wb ^ <span class=\"number\">1</span>)) % mod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cout &lt;&lt; ans;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","题解"],"tags":["ACM","题解","Codeforces"]},{"title":"【题解】Codeforces Round 818 (Div.2)","url":"/posts/dda4aca8/","content":"<p>Codeforces Round #818 (Div. 2) A-E题解，即CF1717A-CF1717E，主要是思维，E是数学，这场前五道题的代码是真的简洁。。。。</p>\n<span id=\"more\"></span>\n<h1 id=\"cf1717a-madoka-and-strange-thoughts\">CF1717A Madoka and Strange Thoughts</h1>\n<p><a href=\"https://codeforces.com/contest/1717/problem/A\">题目链接</a></p>\n<h2 id=\"题意\">题意</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> 组数据。给定正整数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">n\\in[1,10^8]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> ，输出符合条件的整数对 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span> 的个数，要求 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>≤</mo><mi>n</mi><mo separator=\"true\">,</mo><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>≤</mo><mn>3</mn><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">1\\leq a,b \\leq n,\\text{lcm}(a,b)\\leq 3\\gcd(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"分析\">分析</h2>\n<h3 id=\"歪解：找规律\">歪解：找规律</h3>\n<p>将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi>a</mi><mi>b</mi></mrow><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\text{lcm}(a,b)=\\frac{ab}{\\gcd(a,b)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.400108em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span><span class=\"mtight\">c</span><span class=\"mtight\">d</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathdefault mtight\">b</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 代入条件改成 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>≥</mo><mi>a</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">3\\gcd(a,b)^2\\geq ab</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">b</span></span></span></span> ，打表：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>, cnt = <span class=\"number\">0</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= i; j++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"number\">3</span> * __gcd(i, j) * __gcd(i, j) &gt;= i * j)</span><br><span class=\"line\">                cnt++;</span><br><span class=\"line\">        cout &lt;&lt; cnt &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>可以看到规律是答案依次加一个数列 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>5</mn></mrow><annotation encoding=\"application/x-tex\">{1,3,3,3,1,5}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span></span></span></span></span> ，设一个数组就行了：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> c[<span class=\"number\">10</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">7</span>, <span class=\"number\">10</span>, <span class=\"number\">11</span>, <span class=\"number\">16</span>&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    cout &lt;&lt; n / <span class=\"number\">6</span> * c[<span class=\"number\">6</span>] + c[n % <span class=\"number\">6</span>] &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"正解\">正解</h3>\n<p>根据数论知识：设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>=</mo><msup><msub><mi>ρ</mi><mn>1</mn></msub><msub><mi>r</mi><mn>1</mn></msub></msup><msup><msub><mi>ρ</mi><mn>2</mn></msub><msub><mi>r</mi><mn>2</mn></msub></msup><mo>⋯</mo><msup><msub><mi>ρ</mi><mi>k</mi></msub><msub><mi>r</mi><mi>k</mi></msub></msup><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><msup><msub><mi>ρ</mi><mn>1</mn></msub><msub><mi>s</mi><mn>1</mn></msub></msup><msup><msub><mi>ρ</mi><mn>2</mn></msub><msub><mi>s</mi><mn>2</mn></msub></msup><mo>⋯</mo><msup><msub><mi>ρ</mi><mi>k</mi></msub><msub><mi>s</mi><mi>k</mi></msub></msup></mrow><annotation encoding=\"application/x-tex\">a={\\rho_1}^{r_1}{\\rho_2}^{r_2}\\cdots {\\rho_k}^{r_k},b={\\rho_1}^{s_1}{\\rho_2}^{s_2}\\cdots {\\rho_k}^{s_k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.858832em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>，则：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><msub><mi>ρ</mi><mn>1</mn></msub><mrow><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>s</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow></msup><msup><msub><mi>ρ</mi><mn>2</mn></msub><mrow><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>s</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></msup><mo>⋯</mo><msup><msub><mi>ρ</mi><mi>k</mi></msub><mrow><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><msub><mi>s</mi><mi>k</mi></msub><mo stretchy=\"false\">)</mo></mrow></msup><mspace linebreak=\"newline\"></mspace><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><msub><mi>ρ</mi><mn>1</mn></msub><mrow><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>s</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow></msup><msup><msub><mi>ρ</mi><mn>2</mn></msub><mrow><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>s</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></msup><mo>⋯</mo><msup><msub><mi>ρ</mi><mi>k</mi></msub><mrow><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><msub><mi>s</mi><mi>k</mi></msub><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,b)={\\rho_1}^{\\min(r_1,s_1)}{\\rho_2}^{\\min(r_2,s_2)}\\cdots {\\rho_k}^{\\min(r_k,s_k)}\\\\\n\\text{lcm}(a,b)={\\rho_1}^{\\max(r_1,s_1)}{\\rho_2}^{\\max(r_2,s_2)}\\cdots {\\rho_k}^{\\max(r_k,s_k)}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.13244em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">m</span><span class=\"mtight\">i</span><span class=\"mtight\">n</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">m</span><span class=\"mtight\">i</span><span class=\"mtight\">n</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">m</span><span class=\"mtight\">i</span><span class=\"mtight\">n</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.13244em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">m</span><span class=\"mtight\">a</span><span class=\"mtight\">x</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">m</span><span class=\"mtight\">a</span><span class=\"mtight\">x</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">m</span><span class=\"mtight\">a</span><span class=\"mtight\">x</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:-0.02778em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>所以 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 的质因子 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">&gt; 3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 的次数必须相等，质因子 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">2,3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span></span></span></span> 可以存在一个次数不等，但次数只能差一个，即 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>=</mo><mn>2</mn><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a=2b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">b</span></span></span></span> 或 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>=</mo><mn>3</mn><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a=3b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\">b</span></span></span></span> ，答案是所有的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(a,a)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mclose\">)</span></span></span></span> （共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个）、所有的二倍关系数对（共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>×</mo><mo stretchy=\"false\">⌊</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo stretchy=\"false\">⌋</mo></mrow><annotation encoding=\"application/x-tex\">2\\times \\lfloor \\frac{n}{2}\\rfloor</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.095em;vertical-align:-0.345em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">⌋</span></span></span></span> 个）、所有的三倍关系数对（共 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>×</mo><mo stretchy=\"false\">⌊</mo><mfrac><mi>n</mi><mn>3</mn></mfrac><mo stretchy=\"false\">⌋</mo></mrow><annotation encoding=\"application/x-tex\">2\\times \\lfloor \\frac{n}{3}\\rfloor</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.095em;vertical-align:-0.345em;\"></span><span class=\"mopen\">⌊</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">⌋</span></span></span></span> 个）</p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin&gt;&gt;n;</span><br><span class=\"line\">    cout &lt;&lt; n + n / <span class=\"number\">2</span> * <span class=\"number\">2</span> + n / <span class=\"number\">3</span> * <span class=\"number\">2</span> &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"cf1717b-madoka-and-underground-competitions\">CF1717B Madoka and Underground Competitions</h1>\n<p><a href=\"https://codeforces.com/contest/1717/problem/B\">题目链接</a></p>\n<h2 id=\"题意\">题意</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">t</span></span></span></span> 组数据，给一个 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 的方格图，其中坐标 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>r</mi><mo separator=\"true\">,</mo><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(r,c)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span></span></span></span> 的字符是 <code>X</code> ，其余是 <code>.</code> ，要求方格中每连续 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个格子（横竖方向都满足）中必须要出现至少一个 <code>X</code>，要求给出填<code>X</code>的方案，使得<code>X</code>个数尽可能少</p>\n<h2 id=\"分析\">分析</h2>\n<p>不管已填的字符，发现必须按对角线填：</p>\n<img data-src=\"/posts/dda4aca8/a.jpg\" class=\"\" title=\"a\"> \n<p>都是每 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个填一个<code>X</code>，才能最少的情况下满足要求，那么从给定的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>r</mi><mo separator=\"true\">,</mo><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(r,c)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span></span></span></span> 坐标看，每 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个把这一行填满（溢出回头），每下一行的起始空格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">+1(\\mod k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">+</span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span>，上一行起始空格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn><mo stretchy=\"false\">(</mo><mspace></mspace><mspace width=\"0.6666666666666666em\"/><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">-1(\\mod k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mopen\">(</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.6666666666666666em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">m</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span> ，看代码更容易理解</p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> mp[N][N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, k, r, c;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; k &gt;&gt; r &gt;&gt; c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">            mp[i][j] = <span class=\"number\">0</span>;        <span class=\"comment\">// 清零</span></span><br><span class=\"line\">    <span class=\"type\">int</span> curc = c % k;            <span class=\"comment\">// 计算r行的填X起始空格数</span></span><br><span class=\"line\">    <span class=\"type\">int</span> cur = curc;              <span class=\"comment\">// 起始空格数变量，随填的行数修改</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = r; i &lt;= n; i++) <span class=\"comment\">// 往下填</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = cur; j &lt;= n; j += k)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j)</span><br><span class=\"line\">                mp[i][j] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        cur = (cur + <span class=\"number\">1</span>) % k; <span class=\"comment\">// 修改起始空格数</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cur = curc;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = r - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) <span class=\"comment\">// 往上填</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        cur = (cur - <span class=\"number\">1</span> + k) % k;    </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = cur; j &lt;= n; j += k)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j)</span><br><span class=\"line\">                mp[i][j] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">            cout &lt;&lt; (mp[i][j] ? <span class=\"string\">&#x27;X&#x27;</span> : <span class=\"string\">&#x27;.&#x27;</span>);</span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"cf1717c-madoka-and-formal-statement\">CF1717C Madoka and Formal Statement</h1>\n<p><a href=\"https://codeforces.com/contest/1717/problem/C\">题目链接</a></p>\n<h2 id=\"题意\">题意</h2>\n<p>$ t$ 组数据。给定<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_1,a_2,\\cdots, a_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>b</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_1,b_2,\\cdots, b_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，试图用操作使 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_i=b_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 。将数列首尾相连，如果数列 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 中左边的数不大于右边的数，它可以一直 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord\">1</span></span></span></span> ，输出是否可以完成变换。</p>\n<h2 id=\"分析\">分析</h2>\n<p>显然，因为没有减法操作，只要有一个 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>&gt;</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_i&gt;b_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6891em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 就一定不可能完成</p>\n<p>其他情况，这题我写的时候分析复杂了，实际上定点（$ a_i=b_i$）没出现之前，这个数列中的每个数都可以尽情上升，一旦出现定点，定点会限制其左边的数列最多呈一个递减 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 的序列。因此除非本来 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_i=b_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，否则 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 最多变换成 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">b_{i+1}+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，则要求 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub><mo>≤</mo><msub><mi>b</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">b_i\\leq b_{i+1}+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> a[N], b[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    <span class=\"type\">bool</span> flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">        cin &gt;&gt; a[i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        cin &gt;&gt; b[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b[i] &lt; a[i])</span><br><span class=\"line\">            flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n &amp;&amp; flag; i++)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b[i] &gt; a[i] &amp;&amp; b[i] &gt; b[(i + <span class=\"number\">1</span>) % n] + <span class=\"number\">1</span>)</span><br><span class=\"line\">            flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (flag)</span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&quot;YES&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&quot;NO&quot;</span>;</span><br><span class=\"line\">    cout &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"cf1717d-madoka-and-the-corruption-scheme\">CF1717D Madoka and The Corruption Scheme</h1>\n<p><a href=\"https://codeforces.com/contest/1717/problem/D\">题目链接</a></p>\n<h2 id=\"题意\">题意</h2>\n<p>给定一场比赛，有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span></span></span></span> 个参赛者每一轮两两淘汰（树形），我们可以指定每一局左边/右边的参赛者取胜，我们希望获胜的参赛者编号最小。赞助商有 $k $ 次机会可以调整某一局的结果，求不管如何调整能得到的最小的获胜者的编号，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup><mo separator=\"true\">,</mo><mn>1</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mi>n</mi><mtext>−</mtext><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">1≤n≤10^5,1≤k≤min(2n−1,10^9)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathdefault\">n</span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"分析\">分析</h2>\n<p>总共会进行 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 轮比赛，如果 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>≥</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">k\\geq n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> ，赞助商可以让编号最大的连赢 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 轮，答案是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span></span></span></span> ；否则赞助商能改变 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 次，那么如果一个人输了 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 轮（假设输了一直做修改）后，赞助商也没法改变了，就要找出所有的到赢家的路上会输 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 次以上的人，全部给大编号就行了</p>\n<p>每个人走到赢家的路上都有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 轮比赛，找出输 $[k+1,n] $ 次的节点个数</p>\n<p>证明一个结论：按题意这样的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 层二叉树，输 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 次的节点有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">C(n,i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 个（即 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个中选 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 个的情况数）</p>\n<p>假设 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 次成立，下证 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 次的节点个数有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">C(n,i+1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 个：</p>\n<p>对于到达 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 层中的每一条路，连接下面（第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 层的两个节点）的有一条路是赢一条路是输，包含这条路沿伸一个单位后的所有情况，所以成立</p>\n<p>第一层的节点连接两个节点，一个赢一个输，是一轮的所有情况，因此原结论成立</p>\n<p>所以答案就是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>C</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">2^n-\\sum_{i=k+1}^{n}C(n,i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.747722em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.162333em;vertical-align:-0.35804100000000005em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35804100000000005em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">ll <span class=\"title\">qpow</span><span class=\"params\">(ll m, ll n)</span>\t\t<span class=\"comment\">// 快速幂</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll ans = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (n &amp; <span class=\"number\">1</span>)</span><br><span class=\"line\">            ans = (ans * m) % mod;</span><br><span class=\"line\">        m = (m * m) % mod;</span><br><span class=\"line\">        n &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">(<span class=\"type\">int</span> n)</span>\t\t<span class=\"comment\">// 初始化逆元和阶乘，用于计算组合数</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fac[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        fac[i] = <span class=\"number\">1ll</span> * fac[i - <span class=\"number\">1</span>] * i % mod;</span><br><span class=\"line\">    inv[n] = <span class=\"built_in\">qpow</span>(fac[n], mod - <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = n - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--)</span><br><span class=\"line\">        inv[i] = <span class=\"number\">1ll</span> * inv[i + <span class=\"number\">1</span>] * (i + <span class=\"number\">1</span>) % mod;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">ll <span class=\"title\">C</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span>\t\t<span class=\"comment\">// 组合数计算</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x &lt; y || y &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1ll</span> * fac[x] * inv[x - y] % mod * inv[y] % mod;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ll n, k;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class=\"line\">    <span class=\"built_in\">init</span>(n);</span><br><span class=\"line\">    ll ans = <span class=\"built_in\">qpow</span>(<span class=\"number\">2</span>, n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = k + <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        ans = (ans - <span class=\"built_in\">C</span>(n, i) + mod) % mod;</span><br><span class=\"line\">    cout &lt;&lt; ans &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"cf1717e-madoka-and-the-best-university\">CF1717E Madoka and The Best University</h1>\n<p><a href=\"https://codeforces.com/contest/1717/problem/E\">题目链接</a></p>\n<h2 id=\"题意\">题意</h2>\n<p>简洁明了，对于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">n\\in[3,10^5]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> 求 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi><mo>=</mo><mi>n</mi></mrow></msub><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{a+b+c=n}\\text{lcm}(c,\\gcd(a,b))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.108041em;vertical-align:-0.35804100000000005em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.18639799999999984em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">a</span><span class=\"mbin mtight\">+</span><span class=\"mord mathdefault mtight\">b</span><span class=\"mbin mtight\">+</span><span class=\"mord mathdefault mtight\">c</span><span class=\"mrel mtight\">=</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35804100000000005em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"分析\">分析</h2>\n<p>枚举两个数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 肯定不行，从式子来说尝试枚举 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>=</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">a+b=i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ，则原式<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>=</mo><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">=\\text{lcm}(n-i,\\gcd(a,b))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span> ，需要在不到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> 的复杂度情况下找到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span> 的所有可能情况和其对应的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span> 个数</p>\n<p>设 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">\\gcd(a,b)=j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> ，则 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>=</mo><mi>x</mi><mi>j</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><mi>y</mi><mi>j</mi><mo separator=\"true\">,</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mi>j</mi><mo>=</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">a=xj,b=yj,\\gcd(x,y)=1,(x+y)j=i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> ，所以如果反过来枚举 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> ， <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 就只需枚举 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 的倍数，枚举的角度可以把时间复杂度降到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mfrac><mi>i</mi><mi>j</mi></mfrac><mo>−</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo>=</mo><mi>gcd</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mfrac><mi>i</mi><mi>j</mi></mfrac><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\gcd(x,y)=\\gcd(x,\\frac{i}{j}-x)=1=\\gcd(x,\\frac{i}{j})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3367719999999998em;vertical-align:-0.481108em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.855664em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3367719999999998em;vertical-align:-0.481108em;\"></span><span class=\"mop\"><span style=\"margin-right:0.01389em;\">g</span>cd</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.855664em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span></span> ，所以 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 的可能取值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>i</mi><mi>j</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{i}{j}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3367719999999998em;vertical-align:-0.481108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.855664em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 的所有质因子，共有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>φ</mi><mo stretchy=\"false\">(</mo><mfrac><mi>i</mi><mi>j</mi></mfrac><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\varphi(\\frac{i}{j})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3367719999999998em;vertical-align:-0.481108em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.855664em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span></span> 个，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(i,j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span> 的情况下获得的结果是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>lcm</mtext><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">)</mo><mo>∗</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mfrac><mi>i</mi><mi>j</mi></mfrac><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\text{lcm}(n-i,j)*\\varphi(\\frac{i}{j})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3367719999999998em;vertical-align:-0.481108em;\"></span><span class=\"mord mathdefault\">φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.855664em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span></span> 个</p>\n<p>将上述所有枚举的情况加起来就可以了，枚举的复杂度已经说过，每次要求一个最小公倍数，复杂度粗略记为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，线性筛预处理欧拉函数的复杂度为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span> ，则算法的总复杂度为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><msup><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msup><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\log^2 n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.148448em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8984479999999999em;\"><span style=\"top:-3.1473400000000002em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"代码\">代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> check[N + <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> phi[N + <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> prime[N + <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> tot; <span class=\"comment\">//素数的个数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">phi_and_prime_table</span><span class=\"params\">(<span class=\"type\">int</span> N)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(check, <span class=\"literal\">false</span>, <span class=\"built_in\">sizeof</span>(check));</span><br><span class=\"line\">    phi[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    tot = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= N; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!check[i])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            prime[tot++] = i;</span><br><span class=\"line\">            phi[i] = i - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; tot; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i * prime[j] &gt; N)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            check[i * prime[j]] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i % prime[j] == <span class=\"number\">0</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                phi[i * prime[j]] = phi[i] * prime[j]; <span class=\"comment\">// 利用性质</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                phi[i * prime[j]] = phi[i] * (prime[j] - <span class=\"number\">1</span>); <span class=\"comment\">// 积性函数</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">solve</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    <span class=\"built_in\">phi_and_prime_table</span>(n);</span><br><span class=\"line\">    ll ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ll j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (ll i = j + j; i &lt;= n; i += j)</span><br><span class=\"line\">            ans = (ans + (n - i) * j / __gcd(n - i, j) * phi[i / j] % mod) % mod;</span><br><span class=\"line\">    cout &lt;&lt; ans &lt;&lt; <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","题解"],"tags":["ACM","题解","Codeforces"]},{"title":"【题解】力扣1363形成三的最大倍数","url":"/posts/a2b03413/","content":"<p>一道数学有关的贪心题</p>\n<span id=\"more\"></span>\n<h1 id=\"题意\">题意</h1>\n<p>给一个数组，任意连接其中的数，使得这个数是三的倍数且最大，以字符串输出最大的数，如果有前导<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 需要去掉</p>\n<h1 id=\"数据范围\">数据范围</h1>\n<p>数组长度<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi>e</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">1e4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">4</span></span></span></span> ，数组里的数都是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>9</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0,9]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">9</span><span class=\"mclose\">]</span></span></span></span></p>\n<h1 id=\"分析\">分析</h1>\n<p>这题我上来就想反了，先说说错误的而且反了的贪心思路。</p>\n<h2 id=\"错误思路\">错误思路</h2>\n<p>三的倍数显然每位数的和是三的倍数，所以每个能被三整除的数都可以直接放入序列，于是需要合理选择<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>3</mn><mi>k</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">3k+1,3k+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 的数，最后字符串排个序就好了。</p>\n<p>合理选择的话，直接贪了余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 尽可能匹配，剩下的三个一组，模拟很好写，成功WA了，反例<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1,1,1,2]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">]</span></span></span></span> 。</p>\n<p>于是考虑剩下的数里，余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> 个，余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 个，不妨设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>&lt;</mo><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">x&lt;y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span> ，那么如果<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>x</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mi>y</mi><mo>−</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>3</mn><mo>∗</mo><mn>3</mn><mo>&gt;</mo><mi>x</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn><mo>∗</mo><mn>3</mn><mo>+</mo><mi>y</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn><mo>∗</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">2x+(y-x)/3*3&gt;x/3*3+y/3*3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mord\">/</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\">/</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span>  就按之前的思路，否则就直接将剩下的全部<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 个一组匹配，代码也很好写。</p>\n<p>这个时候突然意识到，如果两组数合理的构造一下，很有可能出现两种情况的构造长度相同但都不是最大的数，可能是在某一个特定位置开始二者自己匹配，但反正之前的代码都是复制粘贴就没管，果然被数据卡了。</p>\n<h2 id=\"正确思路\">正确思路</h2>\n<p>看到解析说删除而不是构造，恍然大悟。</p>\n<p>因为在构造过程中很难判定“最大”，而删除的工作量要小的多。</p>\n<p>如果原数组和本身就是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 的倍数，显然排序去<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 就结束了；</p>\n<p>考虑原数组和模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，那么解决方法最好的显然是删除<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">3k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ；如果没有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">3k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，说明一定可以删<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">3k+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> （一定有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">3n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">3k+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 才能形成模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，删更多不值）。</p>\n<p>考虑原数组和模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> ，那么解决方法最好的显然是删除<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">3k+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> ；如果没有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">3k+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> ，说明一定可以删<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> 个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">3k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> （一定有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">3n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">3k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 才能形成模<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span> 余<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span> ，删更多不值）。</p>\n<h1 id=\"代码\">代码</h1>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">string <span class=\"title\">largestMultipleOfThree</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt;&amp; digits)</span> </span>&#123;</span><br><span class=\"line\">        string ans;</span><br><span class=\"line\">        <span class=\"type\">int</span> cnt[<span class=\"number\">10</span>]=&#123;<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>&#125;; <span class=\"comment\">// 计数[0,9]的出现次数</span></span><br><span class=\"line\">        <span class=\"type\">int</span> sum=<span class=\"number\">0</span>;\t<span class=\"comment\">// 每位求和</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> it:digits)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            sum+=it;</span><br><span class=\"line\">            cnt[it]++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sum%<span class=\"number\">3</span>==<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"type\">bool</span> flag=<span class=\"literal\">false</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;<span class=\"number\">9</span>;i+=<span class=\"number\">3</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(cnt[i]) &#123;</span><br><span class=\"line\">                    flag=<span class=\"literal\">true</span>;</span><br><span class=\"line\">                    cnt[i]--;\t<span class=\"comment\">// 删除一个3k+1</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!flag) &#123; <span class=\"comment\">// 如果没有删除掉3k+1，需要删两个3k+2</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">2</span>;i&lt;<span class=\"number\">9</span>;i+=<span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(cnt[i])\t<span class=\"comment\">// 这里写的有点抽象</span></span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(--cnt[i]&amp;&amp;!flag) &#123; </span><br><span class=\"line\">                        <span class=\"comment\">// 有数一定先删掉，如果能删第二个/需要删第二个，就去删</span></span><br><span class=\"line\">                            --cnt[i];</span><br><span class=\"line\">                            flag=<span class=\"literal\">true</span>; <span class=\"comment\">// 标记已经删掉两个了</span></span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(flag)\t<span class=\"comment\">// 如果已经删掉两个了就退出</span></span><br><span class=\"line\">                            <span class=\"keyword\">break</span>; </span><br><span class=\"line\">                        flag=<span class=\"literal\">true</span>;\t</span><br><span class=\"line\">                        <span class=\"comment\">// 下一轮一定会删掉一个（if那里），相当于已经删掉了，只要别再进一次if就行，所以把flag置1</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sum%<span class=\"number\">3</span>==<span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            <span class=\"type\">bool</span> flag=<span class=\"literal\">false</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">2</span>;i&lt;<span class=\"number\">9</span>;i+=<span class=\"number\">3</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(cnt[i]) &#123;</span><br><span class=\"line\">                    flag=<span class=\"literal\">true</span>;</span><br><span class=\"line\">                    cnt[i]--;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!flag) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;<span class=\"number\">9</span>;i+=<span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(cnt[i])</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(--cnt[i]&amp;&amp;!flag) &#123;</span><br><span class=\"line\">                            --cnt[i];</span><br><span class=\"line\">                            flag=<span class=\"literal\">true</span>;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(flag)</span><br><span class=\"line\">                            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                        flag=<span class=\"literal\">true</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">9</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(cnt[i]--)</span><br><span class=\"line\">                ans+=i+<span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(ans.<span class=\"built_in\">length</span>()&amp;&amp;ans[<span class=\"number\">0</span>]==<span class=\"string\">&#x27;0&#x27;</span>)</span><br><span class=\"line\">            ans=<span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","题解"],"tags":["ACM","贪心"]},{"title":"【题解】力扣1626无矛盾的最佳球队","url":"/posts/d0602b40/","content":"<p>被一道力扣dp题卡了，复健之路太痛苦了</p>\n<span id=\"more\"></span>\n<h1 id=\"题意\">题意</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个二元组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p(i)=(a_i,b_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> ，求<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>max</mi><mo>⁡</mo><msub><mo>∑</mo><mrow><mi>i</mi><mo>∈</mo><mi>A</mi></mrow></msub><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\max \\sum_{i\\in A} a_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.07708em;vertical-align:-0.32708000000000004em;\"></span><span class=\"mop\">max</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17862099999999992em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathdefault mtight\">A</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32708000000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>∈</mo><mi>A</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∀</mi><mi>j</mi><mo>∈</mo><mi>A</mi><mo separator=\"true\">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo>&lt;</mo><msub><mi>b</mi><mi>j</mi></msub><mo>⇒</mo><msub><mi>a</mi><mi>i</mi></msub><mo>&gt;</mo><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\forall i\\in A,\\forall j\\in A,b_i&lt;b_j\\Rightarrow a_i&gt;a_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6891em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></p>\n<h1 id=\"数据范围\">数据范围</h1>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>1</mn><mi>e</mi><mn>3</mn><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><mn>1</mn><mi>e</mi><mn>6</mn><mo separator=\"true\">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo>≤</mo><mn>1</mn><mi>e</mi><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">n\\leq 1e3,a_i\\leq 1e6,b_i\\leq 1e3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">6</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">3</span></span></span></span></p>\n<h1 id=\"分析\">分析</h1>\n<p>一开始按两个不等式来的，写了记忆化搜索，T飞了；尝试剪枝，发现两个不等号维护记忆化搜索太有问题了，看题解是DP，尝试推DP方程。</p>\n<p>考虑取二元组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 时，状态可以从何转移来。</p>\n<p>这个状态必须满足，每一个二元组要么<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub><mo>≥</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_j\\geq b_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，要么<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_j\\leq a_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.922078em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 。</p>\n<p>如果二元组按<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 大到小排序，那么考虑取<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 时，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">j\\in [1,i-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> 的二元组<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p(j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span> ，只能取<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub><mo>≥</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_j\\geq b_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，但如果前面有和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">a_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 相等的，不需要满足<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 的条件也可以取，所以我们补充一个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> 大到小排序，则条件只剩<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub><mo>≥</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_j\\geq b_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 一个。</p>\n<p>那么DP方程就来了，先将二元组按<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> 大到小排序，设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dp(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span></span></span></span> 为考虑前<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 个二元组，取到第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> 个时的和最大值，有转移方程：</p>\n<p class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">{</mo><mi>d</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>j</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">}</mo><mo>+</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><mi>j</mi><mo>&lt;</mo><mi>i</mi><mo separator=\"true\">,</mo><msub><mi>b</mi><mi>j</mi></msub><mo>≥</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">dp(i)=\\max\\{dp(j)\\}+a_i,j&lt;i,b_j\\geq b_i\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">max</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span><span class=\"mclose\">}</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p>这题就这么简单秒杀了…上来就写记忆化搜索的我真是脑抽了…</p>\n<h1 id=\"代码\">代码</h1>\n<p>注：scores就是a，ages就是b</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">bestTeamScore</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt;&amp; scores, vector&lt;<span class=\"type\">int</span>&gt;&amp; ages)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> n=scores.<span class=\"built_in\">size</span>();</span><br><span class=\"line\">        vector&lt;pair&lt;<span class=\"type\">int</span>,<span class=\"type\">int</span>&gt;&gt; p;</span><br><span class=\"line\">        <span class=\"type\">int</span> dp[<span class=\"number\">1005</span>];</span><br><span class=\"line\">        <span class=\"built_in\">memset</span>(dp,<span class=\"number\">0</span>,<span class=\"built_in\">sizeof</span>(dp));</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;n;i++) </span><br><span class=\"line\">            p.<span class=\"built_in\">push_back</span>(&#123;scores[i],ages[i]&#125;);</span><br><span class=\"line\">        <span class=\"built_in\">sort</span>(p.<span class=\"built_in\">begin</span>(),p.<span class=\"built_in\">end</span>(),greater&lt;pair&lt;<span class=\"type\">int</span>,<span class=\"type\">int</span>&gt;&gt;());</span><br><span class=\"line\">        <span class=\"type\">int</span> ans=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;n;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> j=<span class=\"number\">0</span>;j&lt;i;j++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(p[i].second&lt;=p[j].second)</span><br><span class=\"line\">                    dp[i]=<span class=\"built_in\">max</span>(dp[i],dp[j]);</span><br><span class=\"line\">            dp[i]+=p[i].first;</span><br><span class=\"line\">            ans=<span class=\"built_in\">max</span>(ans,dp[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","categories":["ACM","题解"],"tags":["ACM","DP"]},{"title":"万恶之源","url":"/posts/addf0f56/","content":"<p>万恶之源（bushi）</p>\n<p>一时兴起花了大半天搭起来了博客，虽然高中就该干这事了2333333</p>\n<p>随缘更ACM/OI算法模板和题解</p>\n","categories":["杂项"]},{"title":"信息检索汇总","url":"/posts/23983a4d/","content":"<p>信息检索的方法汇总</p>\n<span id=\"more\"></span>\n<h1 id=\"网站汇总\">网站汇总</h1>\n<h2 id=\"商业信息\">商业信息</h2>\n<p><a href=\"http://www.gsxt.gov.cn/index.html\">国家企业信用信息公示系统</a><br>\n<a href=\"https://aiqicha.baidu.com\">爱企查</a><br>\n<a href=\"https://www.tianyancha.com/\">天眼查</a><br>\n<a href=\"http://www.miitbeian.gov.cn/publish/query/indexFirst.action\">网站备案信息</a><br>\n<a href=\"https://www.icris.sr.gov.hk/csci/\">香港企业合法性查询</a></p>\n<p>美国企业合法性查询：州务卿网站，搜索“州名+secretary”</p>\n<p><a href=\"https://www.bbb.org/search/\">北美企业信用信息BBB</a></p>\n<p><a href=\"https://www.gov.uk/government/organisations/companies-house\">英国公司注朋查询中心</a></p>\n<p><a href=\"http://wck2.companieshouse.gov.uk//wcframe?name=accessCompanyInfo\">英国公司查询WebCHeck</a></p>\n<p><a href=\"https://abnbusiness.gov.au\">澳洲公司查询ABNLookup</a></p>\n<h2 id=\"法律信息\">法律信息</h2>\n<p><a href=\"http://wenshu.court.gov.cn/\">中国裁判文书网</a><br>\n<a href=\"http://zhixing.court.gov.cn/search/\">全国法院被执行人信息查询</a><br>\n<a href=\"http://zxgk.court.gov.cn/indexjsp\">中国执行信息公开网</a><br>\n<a href=\"http://jszx.court.gov.cn/front/zxxxjspx\">失信被执行人公布</a><br>\n<a href=\"http://www.acfic.org.cn/shixin/new/index.html\">失信被执行人信息查询系统</a><br>\n<a href=\"https://www.creditchina.gov.cn/gerenxinyong/?navPage=10\">个人信用信息查询</a></p>\n<h2 id=\"身份信息\">身份信息</h2>\n<p><a href=\"https://www.chsi.com.cn\">学信网</a></p>\n<p><a href=\"http://www.chinadegrees.com.cn\">中国学位与研究生教育信息网</a></p>\n<p><a href=\"http://zscx.neea.edu.cn\">中国教育考试网</a></p>\n<p><a href=\"https://press.nppa.gov.cn/\">中国记者网</a></p>\n<h2 id=\"导师信息\">导师信息</h2>\n<p><a href=\"https://www.cnki.net/\">中国知网</a></p>\n<p><a href=\"https://www.webofscience.com/wos\">Web of Science</a></p>\n<p><a href=\"http://fz.people.com.cn/skygb/sk/\">国家社科基金项目数据库</a></p>\n<p><a href=\"https://isisn.nsfc.gov.cn/egrantindex/funcindex/prjsearch-list\">科学基金网络信息系统</a></p>\n<h2 id=\"合格信息\">合格信息</h2>\n<p><a href=\"https://www.nmpa.gov.cn/\">国家药品监督管理局</a></p>\n<h1 id=\"检索方法\">检索方法</h1>\n<h2 id=\"中文检索\">中文检索</h2>\n<ul>\n<li>从课题字面和内涵中选词</li>\n<li>实词，不选虚词，不带年代</li>\n<li>最小词汇，不选复合词汇</li>\n<li>不能叠加</li>\n<li>挖掘限定词</li>\n<li>充分选择同义词，立足标准词</li>\n<li>精确搜索：加“”</li>\n</ul>\n<h2 id=\"英文检索\">英文检索</h2>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo lspace=\"0em\" rspace=\"0em\">∗</mo></mrow><annotation encoding=\"application/x-tex\">{*}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46528em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">∗</span></span></span></span></span>：前后中截断</li>\n<li>？：限定位数</li>\n<li>单个？/*是无限的</li>\n<li>$：是0个或1个</li>\n</ul>\n<h1 id=\"论文\">论文</h1>\n<h2 id=\"文摘数据库\">文摘数据库</h2>\n<ul>\n<li>Web of science 核心合集</li>\n<li>Ei Compendex gong’che 美国工程索引</li>\n<li>Inspec 科学文摘数据库</li>\n<li>PQDT(ProQuest Dissertations and Theses) 学位论文库</li>\n<li>JCR(Journal Citation Reports) 期刊引证报告数据库（可查影响因子）</li>\n<li>CSA ( Cambridge Scientific Abstracts )剑桥科学文摘</li>\n<li>OCLC Firstsearch</li>\n<li>SciFinder Scholar （CA网络版）化学文摘</li>\n<li>Embase 生物医学和药理学文摘数据库</li>\n<li>德温特专利数据库</li>\n</ul>\n<h2 id=\"全文数据库\">全文数据库</h2>\n<h3 id=\"出版社\">出版社</h3>\n<ul>\n<li>Elsevier</li>\n<li>Springer</li>\n<li>Wiley</li>\n<li>SAGE,</li>\n<li>Emerald</li>\n<li>Oxford Journals</li>\n<li>World Scientific</li>\n</ul>\n<h3 id=\"数据库商\">数据库商</h3>\n<ul>\n<li>\n<p>EBSCO</p>\n</li>\n<li>\n<p>ProQuest</p>\n</li>\n<li>\n<p>JSTOR</p>\n</li>\n</ul>\n<h3 id=\"学术性学会协会\">学术性学会协会</h3>\n<ul>\n<li>\n<p>ACM</p>\n</li>\n<li>\n<p>ACS</p>\n</li>\n<li>\n<p>ASCE</p>\n</li>\n<li>\n<p>ASME</p>\n</li>\n<li>\n<p>AIP/APS</p>\n</li>\n<li>\n<p>IEEE</p>\n</li>\n<li>\n<p>IOP</p>\n</li>\n<li>\n<p>RSC</p>\n</li>\n</ul>\n<h2 id=\"检索\">检索</h2>\n<ul>\n<li>\n<p>sci需要双引号精确检索，主题=cnki篇关摘，SAME检索词同一句子</p>\n</li>\n<li>\n<p>核心合集，精炼结果</p>\n</li>\n</ul>\n<h2 id=\"论文管理工具\">论文管理工具</h2>\n<ul>\n<li>Endnote</li>\n<li>Notepress</li>\n<li>mendeley</li>\n<li>Zotero</li>\n</ul>\n","categories":["工具"],"tags":["工具"]},{"title":"加密文章测试","url":"/posts/7e709353/","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"密码错误\" data-whm=\"校验错误\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"28ea712add947e581c894e75f352400d88d4940401002c92b546e2bf1ebca436\">5808c6cbf3ac08533f2dffaad5e129c1fe104b3a919ffdc73ea3dc471f0b0c685627f8caa3f5756a138d3961226bb1d426be9eac1c9ed49b6d591a2aa8be9c5396ace9ff90200d1254facc53d3cf4879f0954c4c4872e3cd5ed554d5f0a839c1bee43dd56c02fe090941d670b7045e8c94e3e35a1b0bfe5b02563a5d93b7daa9ca98058d944f54c46a3c61adb110505e4b3c6b3b67d8d313e9148f75184dcf1bcbec362aa6df6e1f44415d2f4d0573dbce643fead23c61fdc4b17fa767a571a14161dc9141a0fd099c8267c91ced163006d374ba2a836a32ce97c67afb619dea5c9b6f504f2338695a630ac65dc87287a943da1ecee9370883b6ac0e8fc1a2a5ea1168878c4ec09e6197d57b3bad0bac5e20e28e080608848b83a8a534681a4aa5b3da182c66745fe1f4815f8899e66e5271af459e3c3d118ca58b35a188efead889d5ee10479f305091335fad814d09a97ef1d3dc3c1c1ea444c9480c22e0e74a67ce5e45bb7c1f661639f805bb09250bc87c7f2de2b49be45e400a6af7591a4ca7d1dd6da3d06a69b3ee02461372618bd61c3cefb9f3be43aabe9bfc616891107dc16c11e0fd794abc2dd57e3c21bade318d50f3c76555008bd56595cba5a5752656f306e85a29773ec52238a2158958e57efb7e68e88d12ac1eeb0215fa5b0e96b6b02eaaf82023356ad24c2b37d3c7fdabab9ce24d56c9197d5bb5476f102d2502b1a346f43baf09e18f2797aac7078e92a3dee2c2e8161667dde9fc28828816e59730417aa3ebbbd5d2635e76766d1ecf87dcbfb3baabba81138d423a8ef6bd39ec69fdd3d0972e71d389d871604f7411d60ddefb85e01bd82dc2852b68a1b070a4ab2259043780ed89a178c30e9ccc50170e14e59272502c498f6c60eb770fca009fc74ee3ba37b9d21c0bcc9d50a38da8f0d7f46ffe7ae268c98b40854ee70aef19bdef3ae2795c46f2e170645735dca30837893074237d4cc1ff171e8c8916f89113eee24f15387edc602b3db47dac5bb3c2894c829b0c8bfb1ab0bd9f13c2866cf7fa78529d7275030931041dbddcb1dad56419d9151d76801f28c8c10d90140231f382a3e55a2fc1789c967fd4e626d5812194123a6a6298a5b89f0060c502526d69fda13e5f2877b44bbffbb383dd5d27a2cc470011c2969485bfc8930bfc3770f05c0d075b0ee0c0f459f5107e69639cad800861e3ab5afb2e086ef5cb00e4f4d8c8a5aa1ed68025a38926f7e0f5dffce10783c89743c7fde55144ad9fb25549989bb9d1a15f4dcfede3951ad858961b30dfd8484927a5f5e2165595723636be1a0e5bcf505fafb63c561c62b628db4505e5e75e4d3c0f7c830d194e06c3be99b9bbc49d8a027da4cc99eb84588caba2dfafa8f0e0555e9bf306d15131669751a21dc590dc87d5ce89108bb6bd698bf2e0e8ca847ed64c1d95c44b8068f55500dbb0deeaa2498b5c6747e1b19ffb77cacab35af2e2f26a3fa3b463c0d3a5094ccfb2ee5b5a216e9514e103a0219d12d9e8eaf4b6985e1c92814965b4e1c7d78d0ce5986c9f4811695d65160b0348df968b716187076b543964d4606b0d60c061aa640df25f20cc5eacb12f7a738f4c7d94eb424961527995eb90856b435b0c365eabb539f72a2bfeb1773e8451ced1b796825a1311c28347454b6b5c5bcf45157c5e4531406dfe193e1fa226ec005ae1399a5e811a0ba106f8b120e4e89b59a93d72513d7ea3a05bb270b05eefe2f5e4d402adf02d28a4c768db1c0c2ed481a269d90bbd3d14a53ba067192e52fbdb59c7b099db0116bbcdf3d146e16d6f97c37fcfd4fa50cde13e4181a44d41e2dd17a50f584390cf806ea294e94e057efba9eb51c2a22ab0cf1e7313c3f76231e1d0efa03dba3a225f8d975692d0700be8f55275a0e511bc079880a0d6d7a8542cdfaa786ec06e42fa209a78b87f6950968c6285f825cecd78d5984a516c5cc7765f7b536b9feaf5eb464ceac0a2e9462648f5891c2b36c86ef4f28d7122aa8dc6f05ce4b7024cfa913d3ed7323d6514078baf53d21ebf04106b8915bc333d51e0d83beb04d65c2427ea19507562a9ca79f093c8640bd4e0ee968abc5acfa13f3477d5aadbcc59bbb42f4f1299f98758a97a572eeaf26690b7c33f79ee5158871b848c4f7551c447471c8fd36e117ae5395f02c6ff0c87ba04d120372d16c2d942c05a059f4ba0ca923b9752b0c5e03f020309143c16158e0b0aa05c</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-blink\">\n      <input class=\"hbe hbe-input-field hbe-input-field-blink\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-blink\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-blink\" data-content=\"请输入密码.\">请输入密码.</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","categories":["博客搭建"],"tags":["加密文章"]},{"title":"图像分割常用指标","url":"/posts/70fa35a7/","content":"<p>介绍图像分割常用的评价指标</p>\n<span id=\"more\"></span>\n<h1 id=\"前置内容\">前置内容</h1>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">判定/事实</th>\n<th style=\"text-align:center\">正</th>\n<th style=\"text-align:center\">负</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">正</td>\n<td style=\"text-align:center\">TP</td>\n<td style=\"text-align:center\">FP</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">负</td>\n<td style=\"text-align:center\">FN</td>\n<td style=\"text-align:center\">TN</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"dice相似系数\">Dice相似系数</h1>\n<ul>\n<li>\n<p>Dice Similariy Coefficient, DSC</p>\n</li>\n<li>\n<p>集合相似度度量指标，计算两个样本的相似度，范围0（最坏）~1（最好）</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi><mi>i</mi><mi>c</mi><mi>e</mi><mo>=</mo><mfrac><mrow><mn>2</mn><mi>T</mi><mi>P</mi></mrow><mrow><mi>F</mi><mi>P</mi><mo>+</mo><mn>2</mn><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">Dice=\\frac{2TP}{FP+2TP+FN}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.275662em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"mbin mtight\">+</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n</li>\n<li>\n<p>pytorch代码：</p>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">dice_coef</span>(<span class=\"params\">output, target</span>):    <span class=\"comment\">#output为预测结果 target为真实结果</span></span><br><span class=\"line\">    smooth = <span class=\"number\">1e-5</span>                 <span class=\"comment\">#防止0除</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> torch.is_tensor(output):</span><br><span class=\"line\">        output = torch.sigmoid(output).data.cpu().numpy()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> torch.is_tensor(target):</span><br><span class=\"line\">        target = target.data.cpu().numpy()</span><br><span class=\"line\">    intersection = (output * target).<span class=\"built_in\">sum</span>()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"number\">2.</span> * intersection + smooth) / \\</span><br><span class=\"line\">        (output.<span class=\"built_in\">sum</span>() + target.<span class=\"built_in\">sum</span>() + smooth)</span><br></pre></td></tr></table></figure>\n<h1 id=\"iou\">IOU</h1>\n<ul>\n<li>\n<p>交并比</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>o</mi><mi>U</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>F</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">IoU=\\frac{TP}{FP+TP+FN}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.275662em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"mbin mtight\">+</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"mbin mtight\">+</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n</li>\n<li>\n<p>pytorch代码：</p>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">iou_score</span>(<span class=\"params\">output, target</span>):</span><br><span class=\"line\">    smooth = <span class=\"number\">1e-5</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> torch.is_tensor(output):</span><br><span class=\"line\">        output = torch.sigmoid(output).data.cpu().numpy()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> torch.is_tensor(target):</span><br><span class=\"line\">        target = target.data.cpu().numpy()</span><br><span class=\"line\">    output_ = output &gt; <span class=\"number\">0.5</span></span><br><span class=\"line\">    target_ = target &gt; <span class=\"number\">0.5</span></span><br><span class=\"line\">    intersection = (output_ &amp; target_).<span class=\"built_in\">sum</span>()</span><br><span class=\"line\">    union = (output_ | target_).<span class=\"built_in\">sum</span>()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (intersection + smooth) / (union + smooth)</span><br></pre></td></tr></table></figure>\n<h1 id=\"参考文章\">参考文章</h1>\n<p><a href=\"https://zhuanlan.zhihu.com/p/117435908\">分割常用评价指标Dice、Hausdorff_95、IOU、PPV等(打马)</a></p>\n","categories":["计算机视觉","理论知识"],"tags":["图像分割","CV"]},{"title":"软工小队专属","url":"/posts/4c04a56a/","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"密码错误\" data-whm=\"/\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"eccd2026bc063efaad4812708099aa73f3ea060deb0425d95f9977319e8a73f6\">aad7d4f96890c34344f6ef977421647362bb741762c3bc6b05e222be9990e0b4fd54f65dabfef958db94717c5e4cfcf9cc3f581d7575edc828ef47f65f241447ee4018e20d0ecb359612cb0a99cc8438f61ea614f77b1dada05583a606cc1c9efaad4c88185bb3a3360dddaddecd17f5bd369b17c903f7e8b160174404e67a0d6d826d9f4f18fe508d048f141fec1957a871c1c073375c348c35fa609beb274440c5410259545736d08bc592879d41885f10045b2e1ad0e591b763e1f32b799f37c0eaee7b5deb2326a80cc8c2b567db5769c3ae4cc2ebe0cc78a1630118f6fe9d582969c4c8e309b4bd6ae6eae22ffbd5a8c7096c5b9ca303797c9574140a9579180da6d2fb30273f22fc71b32b4ebcd89cfd79fd3c297135bfa127c491e03c347bf4b7b8ffbe0e109653f66dbdd8138be4c9b6076a0d432ce0dc988f00b1ccadb030572e7aa4beb585f18209baa62f4e4449517c29feffd4ad207fee433281230b213bb37cf308158205c75d85c40197db3de9db3345da5f0d111336727177277cdb099d6263bc80eb92a38b842075958642fcaac469855e9053ed83b2373a73bbf5e695027c68e55075084584b3eafacf50d867e24cc1d99c695f0492474d37895964b8b2e5e268be6c75454d36e0cb2729fdcd67b3f9371fd9aa27600ed666ae46f48301e135355bb5502ae51752635acca368d0c013ba4eb2667b6d68badf8f8d24bdf7c0b98a512f972596cbbcec20663280966f266f69e2b73897c75fbef0e9ca3bf1221ff7c6b08c4443856a1e8c50a0dca0121fe430ec9795be0eba457d83799407858da1d691bbe25d3411f44c0b5191a787bef65fc0f61863bb8533056b309f987f9faf986e62eaa684b8ccae3a805b4d311a44d1b6ee8d77607835383e2d7e6696e2a3c2766c8b30139bf46f42d1c386d1dbe77de2a44c507eb09c00e8092bad89e1aa65495f0b77aa224a459028c14bb8c4a2df311a8e9239c3de5afce94c9d116c50fe1c12cf5a674e8162e66632e14eec6c2f3cebec75756c54d84318a6c8300ae27833bf2b1dfb3f8108404fb0367c7717a67e2a3e9b7a560c4f8e57da9190f1e2cf76c1e4ac497def497db7911160b76fcf2aa63852e31d85f433d33a9d47808bd3ef02bbecc5e57f698f2c362e7c6031c4238fc42247ac14b7fdbc8a7fa1b0620e838f1ea3140ece9ad19c49f6915a5df5b4f606a329510abd1b1d727568bf5dc54f78762f87a12d8829343754b8a7b2c93b07c2e994bb78575f09bf179ffcf95e7e18e6d331be3bc8b49de8c1db49baca1d29a68707b67ef9109a7eb3f877c366fe4eb9927c4a2e37c51aafabe08e02c504ac004a59eb88bec2a861d463e0fecd07019d3507b9a048893eed7359ec8a07cfab5fba97d68de02aea1266caa82abfbd185c0090c76b0444c8dda9aaa4c9985c24518fcd604bc803e84d0407534a40f97c6ca8e30b2d5d288948531046ab94393cb4d0340d1e28db44f7c53143ec0f7da505539bab0b33d76ca6d2c5f69b1b6f209844c6cfd3848cd266d4c63bedb196473addf8c672889dcda8b35dc83edc664180aa073066306c19e5056246fc0c81f333d45743fe1b54f23043bfb9a80ab0a8f0a31417e52557ef7b70819d9115a503ad64a39cc93aa3b7c147198b6b762f8f615637ee27e91125b99be0a9a554f80f30bad814aca8d945868a600aefac23667b16da9b7271f25c770c384d22b2ceb6cdaae18899bc11eb94e44090def169e7edd94ff0e14bbb28b03559ea82a433dc373951435809173c2e03e5507321f3193ac7e1c6e0e5ad1391416f9caf32eb4970751e3a6cba51ebe6de5c057db9ea65570d7ab078d61e3feeec89c7d204ac3d1126716bf2b70fb62cb9f3156b71722714c1ee84061c3240564556d3f8bc9336b642d020734f2a0033bd855b6a8fee49a4562038b5901125b4f437047c8a619048137703d27e07ab5225d2556e8f868b15e7b8594e411ee7cb62d06b17c9f9f932daa47fe026ed2e5659427bc908a3a40034b851b43b3211c2170575547895c082ec46d8944b2d99b50950756ca6ec1fd0188ae205831f0545e1195ed53330d407482fe1c3d40ef96fbbee320205faa48a5d3ede285237cf27fe7d961337c78b3887ed09c7e9f674a6459797042eb6d8f2bd668aa99ddaac888ea020d35d4b96581c31015ac69821e503aa7037850bcf9d6f60791217b7ca5a87f44b0ad5bb0bf4430d87a94b68194c45fc33c56686110a839a1c25a990ae4afe3c9af6a1d9f483cf6c0d1e34971d7b7fdfbaf45796c07fa03a3386ebc910d68d39d17b943010fd99e15cd53fd10dce38834e3a2538a9b42bf260615eef6b59d2b083bfec9eb2d48d24c4915e1db16bbf0cc8fffe21be77f56a35931d11eec572eec7a50a01fb190c15a6fa47a84719310c5ac84fa1728a15fb1dc8083b1d4063dea7a92901a72c5ceccb1744488134a964b520cc8addca0628a7edb7cbeb9387ee5de5f945f34f01f208b0bd9785c8c1a61f0135edbb61584af85bf6ebcef12d596359eee42a87681d636a3d8624826640387847a10e360751381d8047256ffe0b56323b2a261b4f32f4160325132fecc05e341d98ead8febc30fbdfca5bfc0b4631460e1d14ab360c7c8b23c07a3ffd585c1b26c2fe0ebf65f06833e033fbb3f579cacbc091265e49773ceb9f4a38b303abf9460d87b47584c41e6606eccb2e3d05016420f71250d714f242975b676555620d6aa7546d1b84f561b1086d0b57fa33a0744e7662bd656cc09eb3f5e42985279028773e348e42ef4b23b75535cfb3a8f5ff352386335cb770869af49b6e6384d50f52430ce0aa5fd25404ae32ea975f239980f633419ec945bd629694aebbfb7c62261d04f4ff34da835cce49feeab3cbf2b596b954a0607f031464001b27b16bf6e45e17a775263c03dc531baab052d312025e0549e8e3f5e0565295470c2863ea5c17c02c7d5c93a6f7faace3d50896f7e0e96296b65d16ae774dec3f9083869ccc60715eaeba8a5b76c5775737247001fd3d523d12a9823aef87b74233c0147326fdb7539a2b6d740839cac6751b58e72b92d5dcf997cf5ee00ba3e0c2841c09d6e583bcb53a21550f7273546c0ae798ffdf37701824420d542ce61425eccf061dfb4f7b198ce3eca383d7612f1147bfb4f6c3d5ceef0acce1ae89312d584ad52b2100bf16149ea6e23b10cdbe25ea316fd1deb0c30c9a8b15ed7195468ee2431d3fed95f804ad0736d5904e3b7a0e36dd0808fc1fbcba744e93e5af12191ec233b540f3a5a522e64768a7ddffdb2eeca70bc0f23107d9db1fcd908c5ff01d8fd83411c85c580421719d24ee54130266da6adec15683d14b6580b17b0b37ea6ff1058a3649e3cdf5b6df5a22173d0bcec98a8578b153d3d0bc02756897447dc69c7f44bd6e0fee65235d9725e930d528e9f8c5bebe7514a3d048dd1add3f2cc5ad9e10d149f34b8ae6bdedd0145ace5900863798ac1f680b2d50034b60e911337e5b9c58063694d9c02bd0585353d82013b7421f41f01bffd1b551505fa74fa4ec22501a7cf598b5d12e45ed64c48d0021091feeff48cce867d27b21036a4d8bf5fc4ef1d7387a31d2f76a891f1a1bd47b6159cbfc239ea8732b67de7e360af4fd0b6108b5860201c9d2a86f49ac1d7a29de904636fe93a1985e13325f3ba424f513bbfe9f4662b668b66f684fafbafc91c040817bc41666a2c28bf52284b413771cfdef758089993cef7203a420d765f7993cbcc3972d91a77e4c9dd5b26ffeeed8b647b4f23cc111a81c538bdfcb6aa11f4aa8c88813e223a3a179c5245982e29c74ffd90e8a2692138385c92026784bc8fa3bf38c4dfb443a97574a58f3bfe608185934e9b6d4458aad3fed6ac076b7a49d69b3bba20b757f76b47eb075e8b2ff50ccc0a0fb0d2b8d8993eb48017c6b207672a2ba25dc724794923f304852f36b3188d44858e77cdac73508df606238d58cf09b51563a84afce9ef1e034f2ec188aa6baf26554beb1a22af4a8ad1ba541b0fe84591a854c3e41b23b95cd17e1caaa67d5bb06170dc03dea7a5e000e5ca57f8b62983e7eff81e32548e09f2718fa5064eea5e5c936bd44d98c54174116cbedb16eb227504fc1ecb0378855eca2b70c373b96194bc114f48aa27ad16e7b94070c77056b1e052a7268a0723ff100eae857ecd5bb68a66464bdd44c358882ef26c4af30ad599494617431048b448afe7a13fd593a111d6310b97c532b7546e7696e8b9ec59bcace215c481b1a0f1f680d115c5656984bfa02ac19b21a57711a9a7866bdb852cf24349bd0ff975a4a95fe0ffeebd676af4e394a0ab5fffd4028d0c2671695185f8416e2b919363e27974ac454d7642fb203f38b8aba2801c0ca789540b6f40a5582565890a62db4ac97bb7c25d9c8f4af0fdbc06fb8f24d309f95c66b0825992ffe1e09e9884ace7026afdc7ee4fbb18dd4475346728c6f3556e1356c074c574b5155a7f0e691e10db90e45c805220bc342e20fdcdeb43b422fd7fccf5e099da5eac48980715d6bd37913ecced1493d37fa69d32b8f10b0d4cdf39ecba86df7039db05b7a4100fbbdcaf3c3041f9b1a9f73bbb6a335dcd39a796684b4acb8e5a59a7efc0f572508feec51aae389adbe2765ec066c792e3aa3dd24c618201a97891e6956c4f8aeab90a466a8c2013bae12b8ad9865f7cf381db2ce2a21f2eda80ff4819e8971dc73671ff11e007efd71ba54cefeadcfd13e4db55ef4ba086450c66412ad21d59551d82e8e6873fe660168610877efb3f588e8ab521ccbea0f7d290e379fefaf43920f6e877ae8ff2a412f4d9ad859451da3ebc55355ebacbc7d4a98efe3e1baf7e47eaa76822dbfd02fa91fd356403c2365837b9181b701b5f698354299b80123cee8c41282fbbb5b57871c52eb9653863f534389c61f97facce9a2935e9927559263b91c0abcca654adb93e6989bf15e31868c72bbc27ed3412f57ed28d81eb05485dcf11069aa837b9843a9107e2186ec0f5c9a2f437d1c3e6aa4f518349f1c040fde409652f43ffbba11957153be7e1c7ca1c34571c2ddc74ff6a65b52ef174f7a26b0365f157ad4f5a610f94528d8cb615544c668b7549faf1dbf322f0708771c4e5acf12eead0c3b85f12819c6a30b66d8f9eb49f7a31d983db13e79917ca0de191d57bb4995a8f72ad97c13c0f5c0ff9eeb541fe558b38068ac0c0dee38ee232353b9d788cceb9c37aa2949aeb1ee17e37c521bc6fc2c713415eec00a65a697a2c23a6e1df71ea6af07a1b6164c591bc215ab76bb53c53942fed288d8f92634480033b91ff30ebae1135fbf754f1891919676cee74f41f205c1161537e17b2fba7dbcf5909cc31593ec557ad37b63620cfc339018f6de0a8f07dd53328669a1478a5586127e439917b87a18b626748a0aec622b3ebe9219909b9a7f4b4d88dfe249da84440017038668a45318d19eb438c195dfefe14e6e1a73854bcda287bcb9877a32c88bec9296979bd33fb50da4e67d9b25c890414cbb5ecfa4e53df4a2b7d1d7a92d6e95e3c8676762276fcc8f45cb9b32561dc7fa81d86f06bccc2539679a1adff8d09d19c5a216501090e37373aaff5963c632b66af181c02b3187e37446e5d654261dd6ac5bbb9b6c4aca5091f9ac1d2b6064ae24c7af6357d16b30f0bb5590483c83b530543e366a49429a85d016c41cdc7664f233fdf21e7abef6ad6ab800753ca941944f114fb2bf46059f18c9d00d235d4b672aca92102775e881cbde6d347b74cf001c3c5a37a22bc78340465d4e3743f1173198bd7f957080b766223391e93824dbe345d6ac9ad5e3a3d5b6dea0c2c8ffb8f55b8125612f1bfb623a6af6e08c6faaf7143f51d4b5fa6e1ff668a90395cea7334f0d97dfa19861db332e1a73c0914d3f925eee66b237faf76486dd2e73e7f89cecce98a85744922acc1612b63954ee2f9718a4ae9dc2df0d1512d10121b53036d2c31f0ee61a833fa71042b04a469fbf5d2f8b9442a29470194a9c1c23ee516406a7116ed47ae02ca06361bd76b9a93e052b5e3a892638a033f524ac6a231e402e9a3510937de657140914259da1de61561ffa1c12d89d360eeadfac5b86801c0d8576849e4f82ab8957cc5690c04aa7f88852c64db3c813f994262ce227155a84760322b5cd4f3a9af3000bb0197e2fda781c448a17602700c71f7eae3668084b563781fb8cf585a2dc1685531f31e9b5d2e1706ca126fcbb63ad15468883a5b9867172d5c51f9f91d5db2ac738a85973ac0818df2b1e5046d7a6547dd67eace35c49b800c2f368a366240560cad38fccf45fefe400f4a23c215522aa29123afbec6bca510ad8385d2c876a756337c9bc8e8648e1ba904713ebb471432a1c8600623d8b7c4d589ded554465be8bb679582a1e96d1b82a88bcfe23d14020ad05c5cbf0c6866e377f8a4fe80907f132659c8e053cd89a4088917d32391ebb72239a6922d3ca59a9d2cf029e623e6302e429db4d2c7eaae4510d263f2bf9878d9387a6d5b681a17708f4ce24aee14ad626246bd4971c1a19c1c9ab6baa3619d9655077934fc731cb8994ac2a4fc7ae8c634ccdac522c786a0610bed993124e440755340cbe348939847ee97f6627b657b972af0e9c03caee6d792426db11b90d9428653f53840c7751fee96dc18db29bf816f36c4e178d130468efaaf4b35893f9cf37d90a7b7a914572a9cb273ab9031100a50ccd86679e1c1b77a47bc4d3481820d26d8644dcb2447477950943c149713732bccf58382c1ce4f9a49cb5bb8087cf0ed835fec2728b0c00ea6dcc400305e5c5fada10928e04a8460166d3156acae751aaf3de76b22650fa87546ea08d80618206bcdb00689a8fc9e10d8a584e09880c73317ba721f2eeae2acd165b8ffa9f34a5f488d269e1f2c143f9cb23c4e8785a0dff426937fcf5c6b351800e4319d9d26878a999c0d9c12aaf73310c18f8bb25afc4354f503b4e6a025563cf42fce63319578c906f7868fe4bd7a912f406210bc60aca63c1ca226453c16619606c52648e0c8f455751fb3f0576245e3ea8b9f21fc1dd4cfa630bdf04846b7fbd228f01da0448d30790b311dcc08c74e082e0b6877c53097a8638e16144dc87a1c1e082c6889092aeef4c34c26420de41b2f96c25b745ff24e6549f7e10488846259abc8a944d19d8f01b8980377675be486c0cc72d02eed5f069ae7763ae6513c61a5300488bc2ce87be88b08a7ef972c8d0f8e669ede89c4c7fd678d1df827537205dd3e7617415069315a98f04a1abe4a715441a65ec73caddf1ff5af7adb6104f574b4ab556fd809e5172c62b0f43f8fd31893938705db703505146e24ca6a846be83802ff20e862e92bdc3be8c389e178fefa911a70ec3806b57458094d5156a8280113fca013f804fa0162cbdde95e36f1cdf99e994f7a004ada5256732daeca0099b87944886e97b1c26a4750a936ca473ecfbecaec9ae656ec91d36d18825ba79dc1fd18e2a9beb56466ffc8534a5f023c468edaaab9ddd5ceb9bf0d17132b247bcf8b961cd9315b4da744429f8a41bde26ca5b87a313dda781cc7efbec0324aad44b9749894c2074b58c4d82c070ec1d6519a5cdbf2d21ac13687fbca1bf724be1035990a00b05e0e55f7db6e09af3b66384d4a5320f7878e7167c71465225ac5f4a6f6ebfcdf36346def8c2e83c2b89f079b4f528bae946dca7a4540f9ce68ee67036b328c3c78f19b09dd482506c4b119c8ec913be1db94a8925f69d02567d944a2ee80b3e6e05ce32355e1b6aa9b60731dcec85ff396588596010cce3a10ba1a6305482535ea3e597e8d662df7715fea95803650f55455f910ea73b43c8a30b29c1430ed1945965032e61f618ab93ff523ffb87550daa3a887244736cc9b6da200bfdc2dc0cd423f259f6aaee3a2e7f4e81d2478499a76f65537e7662146f92718c156ce1c36a5d316c4139fd902063cbb748719282dc1390882ac92ab429f34a8a0ed84e138e41971435b851e022b6e6b9b060c7f716e102672d9e67887d0121503a6f2acb30c76019484f0f23644f09543b206a5c9799103f0ec904296d7de226ceaa117c8a3b1fa3fe49d022c95f3c44be56752b85f9cc75d63d004fc681ead99eb93d0bc1434bba15f8d65347d0d6f2e4a2c83f9948d035a7adb148165555d938bc6308175dbc463297c8fd54c1857b7433bdd7dba63fd818b80305d4b6c34ca70076266de28215229a5863b72773ff3d1383acacd28e48317e1bcad1060f7d25ee561495d40ef3d72eb327dbd93f409f82dbbca4850cd89dca7d26a4ba7254db5ca45085f6cd2c3682d9d80b04c772eb030b28a51ed7890db499cad70159e8941baa0fe3115ed943806e4b64912b55905693bcf47f2abafefb02b5197d09cd613dfe87d05d72a62eeb226860353bf1bea6cf749b47926fd302ced371cd20e642934924cb566431e2854067229ca30e5dc9753ba46c4bf26162434f5048ad9e8f8daa5fa542bd0babb46e87a18e66b12910b4f352aed9e18c85d32845eb11db3043d78052afe14b94b12c76463e12e2dd1923ba19f013060140b2da73a5d3670550631c6e73cdb18b6c4f0686c34dbd73b502f7c6a2fbc2a09db8d53d3d41f7d020b022f2a6bf1a13afeaa19995a68e7177655b799bbdc062b019204001f56c237c860a404f6adb174913599bb9c57b7e95e7d922f05f4301b55722f8f8e0f44ab720ce11225cc57968d9c9dbd44acac9d5b98cfba49ce2be4e15a71fc6c7a8b3836e75686761745e62922f793bc0643b7a5f384608f8b87a2f912054600c6831d8cd1bee4a48997e3fe8fd10f7d2377595705d26b2d3bca8f2be71b1e7e56be7b71926151664320ac0ccdc1f15bb210af1ba03bd62c23e773746f58ea75a3e447948dc7c6f37d847f9614c0dbeeffc59f990c15de24bebc8a17042ab39ec11c060383305c1a38f8b976dac1db029e764b0cdae900b5400a608b43d717d3b68f0ab769f114d43124ac14a3e05ac595f3052bba559e89458a76a0942e2f66b99e7f476fe23ca2a9f0aa84c7f7c26ae516282cb8144d11e114f6d0b55f706c5033e0fd701baf70cfca8b4c0477227e504221f18b77bbb44fded231dceece1198513dfa387a40036e3bd8d4c3c6bc63b455f73ab458649ae44da154c4973fbc404b1c25d65449261c72339881b83aa68c2a8f8925ca55f5e00357f12033484379a48d65c294cf5e6f4d9b66dd035cc9e6b8d8bdd7282c0e6cf9ecb90caccefbb5742679bbb01b2a64a12ea581abff859d9d004b04689d777eba4c4c5465f223eb85bd96ec40117792abf64358d8dda9449f7f393f57831f5c1714dc656883343a1d56545d932ed973e6431f6139e3058dd2cc547f6dcc023c0e51c83818494902e0fb1e460f4e541be6cf0ff69f413d6f57448d4d50a24fcd547aac8649b9b298c61b96a273841cc4cd9aa548f78c840c7aa66706cc7e178b910968abf99e3282960b0295cc5ee279e901ae35d859481afc488096124e08873d89910b48e21124312d18a1a271cef655b9b093562fa070e5b0275596f2c14caed1b257c1ca7e05da09ab4948eae7cdc471ea4a39acec300b145193bc5d146b202355e6b2635ded86ed2a520758358044ac761408c3976e062f2a1ff314b8d4bfbddebb6a7f3555168ad971c9fc11115201900b90046326fbe3dff8709e5d2dc5bb30780625d1646c97b0c115de32334104e9e929de7e1061fb9d68fe14d1f6397a6d3999ec862961cfdae1de0e8a509fe555cdadf41528a958cd17a425280b81b7c41a01dd80a58b638ad2c59f3d8a05f5d918a3cf910656c9e0d18639d55d4f87a2e5822db8e56e29fc6f0d0130f5d97dfe480a6b97f6ca299930e7cb70bea762ad5f29a7483a28d088b50b9e670d51c44b6b839d5860c1a670e134f4736e5ea53fa135095eea3081201f08cb80085c87db1087ef6f6efb3da40f6016181e3569ccec1ad65ff32dd5dbdfe26661f10a3e6e6b955a0edc835bf8297784fc4f54d3878e19bbe8b11943a5c5db8b9cf7cc7b155ab27143d700f6325e8b277b6f07a7b7df97581dc2d593751908e6e078df4dccc6798705cc4cd41bd671c7259b66e3fcb0d65235b1242a9dcf2fb67abdd27b8e63f6470d944faa44bb4017df9fe7799355affee46a664bf2ef37c753aaa0bc7d06059bcecba067d08c1764aa3afbdc9277f24a006b0740167e10d62cff38497f27ce9df1054251fbe347093260c782507829d6da94ba07a8d9995af277148179ccd387dd48baa63d3b1cd89a953c3c0a32dee16aab227f8688154baeb89e5c21010b81654d62d5a27c5ea6baaaad3434e0689ac3cdf628650af0bcfb8451112ee8a2ce5e7a227c3f8658ee519cf2428a46897066a8f0a274cfcf2adfbf5dedc85a5784e3b8f9cbb9105a5930aa6d0e8982b79a9202d4b90f4cbcc8a4eff29a06b00da84004ab314b555723e39ceccd8ba085bdee328047d02ae63e2289d1ae658e5d94a8a3142a37461bdfdca4c52a4feb7971704be141ec817c82eece268229ee1a07dcefc7870ff5ccd27cba20b2fe36b0e5d21c39b2aabfad387bcb989ee6e9e9db5b58bdca223970d9be58f99171187afc2df42e30a0bd0d2f45ed451ea78a5bf0ce62eb0e2129d53f4f37b999a413cbd436939c888d4371320d4904cacfc4ea2f7300d4d1690f5209e22ef825e406b0c119655b59c93861d03fd5588736847973ed837a9912e5c7f427e6256d99fdb09b8168f6aa368e5b3b1d0ef9abe66b2f81e7623a60bb370b7f6e886176452ef098606be430cda919cd98e103b5babf7dbc5f868796ebfc932892c72f28569a4ce59ee3f417cef1db370e6f5072336e0b03c74c5e929c4fc8743641c129e4cb31a26b7d7b54e20c345798ddc171691f7e07138a884176c5dd980733b48d8a8bcf483f9cf80a4f22c5f497cc0177629214ab5aa8cc6aaf1d34021bfb203a0628714ba7083c3fbfd1d82790c374651bde61c3447fdc3b139cb725a38295fb3c450d3e2c4e90bb00ee109a362669f2ef8512df2a52883d8fea89f00dcb7313652548427b26daa48415ca8a3e26de6014116a7fa61b25297278d188f335845b5abdbb418f88e60c48abf4a8525eca20b7f35f35d027efbaa9f3f8726e5166be99eaeaecdaf2818aae4e465a3d7f711d034467f56ddd4622a2ac3e5155562db78ca97b91276c1948c726ac4d074e7ba82d3c68bb70ccc2c9e655508d6629c54a13fa7a3ac794f7ea51006f14b8fb0b440a7ebf6c7653e00ca026aee52733ad7622b2ad6546655291b0eb3c2f06051a3cc842c5e4fd8c030794793aa90b71f9f325325316f2b515a9f058007d84b9669e705a98378023f4f49240d83ff113a25f7b7686704a01b7df5e266f5b090bac110550954d4fd18da6f4b19627b1b7082065eb027b5594cff5d75422d72166a37e5f49750cfc133e91a17ee17c84ecf6fd800b1caa8fa44609b3010d8c7e3b1428251889e92964776dec72d21492ddad40a0142299e0c02a15e30efd44db58b6f37d25bb400ccd71aca2fac694f068e7bef93393a056e9c5df97cc09d2ee4193ca5b7624ec36a650604cce1d3486f256975365b525ca5ac7a1b7b36c42555b8545ba00f54ccf9a5b9d2a3d5955fe44b2fcdb986e2e798d0da3afe5a0648eb9c42adfcd8201463d907d7192230e3352c19cdb32a7e995d6119b9a8973237a7efd53946179039f3cd1e9633a8544210fd8c71a67aa2494d842c6b82a63d35923a5d6cf16f6740ffb37364891589e616ff43792a87ce3402857c70e726a0bc1f45d8669cb04b2eab6e0989a9ba18d7a1c222efa61c2836c72fd8092a1a7800936bd783319159fad1aaed46ab1b09d83025e9b97e9212df246e724d31c5a53d45b9c1dadbe01a733fd589502bb2c29d5bdf1b3399228d5754e6db11821e0e1e288303b3102e6f916b7bc50089b9683c4633e7198e41f8d40aeec4604f6c03633145622aa95c05d85c0b528a4a820bee59335d7a6cb26cac1a59d2355aaca04b949c524d6adbd1237a9871f19092136a03e215c6453daf2bffc242493bf2352625d37fa753ab6a468c2749a0f4735779976b9aab3e0e7b88723cf985250d23ce928de095299dcd6a909a6428456d418133794b71c6cee920d6fdee2093f7f9d61730359bcf78a18b842e16cdda2652ce192d6e43c132f8749f2517d7506f81c285ccf6d05e5fb73211f78d369b8203dcd550cbe1466aa21bb128c1180a1bac13e15811afc25313d4deb4f6efed21f75205df529453e4a75be12cb99c816b97c12d78cfce2bf60be68d8b37882fd364854427fdd4bc4130fc9493d00cf7789fb5327c0921a4b5b4f260c41786d293619a8aa18afe7819d2215ddc4e06471c0e62ddfe862bd80232074142818e9690c89b0d585ea581b399382cca3ab4704454449c8c13a658082ee27460bcfd22b521faa05c82670a459f02f778e9540e4a9e7ccb394905af3f4ae70c7ef770a91060eaeabb45eb1fde74658857dfef15007973e36b2c668b43c49bf434ff3d4a8b0652dc370d8c847a1d808c81fd235404877d655422abea2514bb1bc14b7b09089325f7cea7556251e7a16b7c378d7129077360908e0739fead85e2cb0297c386e1eb13d2eda2344c9205fe9b6750ed453a11753e4a9ed773d92e45e105e32f1fec5fdfd50604300054b74e7b5e5d42981248ef8235853c3a789fa57fb91d0a311ea8e8d6fb3e8fe93885afbd4cba550312fa91edca4dab6a7b3785994482d86c753cbb8dedf70c4ad1712bfcc655d1c451fc29507327b1e9878bd3cea6ce8d966f6813f310d98901981ec22ed35b61d0cd7f2dba64ba1286693f56d343b3cdd62c6b91c9fa9a0e9f750aa8efca8ad2ad1efd78a50400a14e8f0a35b2b9db70710038d9d16d436d610c9044a24716c768d0f16c7f20e7ba99c215363bb895654747df07d019dc7819a4a9adda7ceb96788a6795376ff18c22c22749bca154ea52533e21cc66bf788df5435a9fbc2ae206d7b64d63d3079e990bcce093782acaf223dc0abdb38382312aeb65153c77b3b20b1e51c37b9e6390851970608c560db89fe0d66568c6989ed7c9375829241e978ff4a89c0c92d2aff05faaec9f3a365692d93fb4904f3a2c9e0258b907f524fbf17f1e88aea9d02016121ec2dfdc042905188344782d3ad480f711a3596b9c04d9889deafb4d07cefb08cdc86db0af67fb8ab4fff8a3d495358a437c6facaf152433e54719505a32a3d752702cbff792e75759f049f57d14923db442371287455a831bc2bfe65c34a93d2f2f9644c570d59530547802b234a0216be4ab3d799e1eb79fc3f05e46d1eb87c93e61db428064281a6ea3bdaa68d9f08c1e52d44a6a3f6f88c8bd6359cca62d79291ae4398ebd1295d5472a9ea55e289b805797523437e23b7e4466dc87ffb9ba91e03b318f64d0402274952b72c1b35e30040e6d615592d01c171c0cc2c7b097012b6517529bb4a768dcdbb87c7ec00443232031bd5552ce5057061f9923231edabd2e44447b7942523e049d3df35d86cb1f28e42eb050695ef355ede9704a6587922240a66b3c3e3628635d934dfce45847ebd6714c0e19a3d59680af78f84a13b84e842ecce4d15d3358fc5f2496ac3131655fb9859ec4e1a2ca4bcdde8ca76965861316e101baef2935b0bcdd2d1190aaeb57642947dcc83e46a8d1819b87dd6bf850acf4c8e4871603a56edcbe9fb96814cc59d23e597b27994efe8d18674b1c8e837f0642163d550390e05a3b371164d49a83618106fc3c6732aa2ef4daab6ccb75203e1d3fc5feff71c3272b7d202376a4302a1143db70faeffdfb836999b95b57a3ee7fcb8b2131f6538f440e7b7dc8274c8e0a0937a0ec1ca0c0c576b7062b5bf3d1698dadeda937ac20b29843fa9225d303aba06106a437790d5b32e4c3c2a73e20fcefcd10b878864b59485e9b061ebfff82e69fd181a0c019743e676c9f9f852b27ecbe0bbf4af9f1d5528868efbd3bfd2b2b74ce2e97c9a881676a2f48271d16d337930ac0ace00da80ede75665b64ed08b93b8499e35fa4606a449ec89a6671b512b8108f363720c4a125a8fa96aafceabb03f8d7a4ab1d4ebdfeee73b06b926744399bc97722ac41d90235e44392c120e65349a6b38ac7b94e86a04d4c1238b570361dc2165584177521eaef452aa5317315f9d5bd945d0e7a6e3841bb1c769fddf26c49b11c431dc9dc2774e595c613de0297b502ce9b7c10b256b82b99cbce318c56d3e2e1ec8d493643f41aaa21aef5a66388d3e5f935ebb38d8cebc047430199638408d85fb40456c32705a60bd5dfa579fc7d6b16c76051a0abfe31c45df724ed4c3f2354d9450b13ede3e37569a9d06c1e7f278da76ba261be1da5b3cf255e2534cce9e651e68d0c781eda2e224a8985f94c278f8fb47b350bbd9953fbfa48e488f7f6ac379d222ef0866fd7c2a4223f9fde9c94ff3569688fb6c281703e39be5bf17f11712698ddd1e6b723155f9a4649fb20ed2c88c40ba95d9abf1c82ae1a7742e64d7e1131a92066d10b41c7f24613c37669d6a8c81e618ab2c58afd707e0fd6695df3dbc15786f524dcc35587ce3f2cd119cfb0ce9a4eb9e62aa378aa71dd484bbf3962f004a9dab0e40f8ac4e1684b2efaec13397498cb967ff98f0e40cb895ef55e1ac5075ba368015d21e0765cfd76faa8dd8c8ec3ba2b576cec809508f470cf8d22c12358659b9ac9b555c0295dcf00ba7618fef23b54791cc5bc31ee9ae7395cbd21e72b4ae119ee4a6e8320aae608d461aa270c88a45abf293dfe0f0156bc2ae6307ca60c2eb7044a206dcdf7ce67b3b7877f3ad0f30e8d57b6b16058b043f96f7bc6d243121edc0778061d5d9cf7d0b8c82a9e3d0b3b2679b64dc95c01e5e1b48178bab7463acaf61f3db5e989c17cf17add23cbb4b9cf4bdb72a15c723ee5591434234bfc3d6c4dba60bac02a78a3a0e2d63daf64da97eef15bc61146df082e866180c715dc20d91baa66ed5235ca5d8f36f3c6a9dd0edd2b01a5d14a92035782657c916cb38fd8e72518ac9ca71806acdb16ba8edb50073e1f7ae80520fc0e3daa67be3a53cca54640f91ed12dea7f7e6f73eca3868ef903a2753ebe34408eb58253f54b51562ff7f2ab8c138a9e289f258ac3c5aac432df01c84c15918133fe57c47e6d5a0c72254ca8f8f33e8bdf10c3d46b670f65121853f3f47233f23e2aceefbf7c76a3b38b15303490868b5d25d17e264b8e181dde9982e3fb03a02f282fb78bb64cf9d2c9d27e9ca011678099b5063ad15efa1d42a90bffb35abc8e0e97ebceac4ade9e903450b2c7ab1e7642d1a1216f806fefeda68d64b5f66ade659a2a5cc11c134ae98a2d458cfac3acac4c1111a77370c50c7bbba6948cdf491b8ef5e5ccbe8a73d3616a68eed9794641acb7d1c4a8b63501926998c69106bf77b48806eb921cb42725ddabaee7ee2f50ef7a91d093c259e477ae00977e46acefff0faa1c33447e6080e7e0ee974f2c097478af1a6af30dc138ba3120b64c1bfe121534118e7274cd121d301c7b8250b600f91c956654b981f7694be54a8f8cb66f7787ba3d8f39b56bf152d5036d674e4c58ef2cb63187625592d614d3843e199d589c45a03f30592d50c72dd35643180b7dea1b517fad8a3f43ec32f770275e8009674be0fa66e9ec1aa9dd03f8ef4554db7857d1bf215047bd8824530fa539079e3461f9a0296d52260b44a59644ffbbe2acd8a265f2a1badf82f35f068f69353e187ea041b676c3a1663701a773e3b03c3c7966981f52331db7dd8dbe691884c7d40133e052f49dc39a72ce1af19e129d607fc8d7f74ad90d655c91a4a650d904a37b015ef724acdec20ea2ede52b93c08bec84ca76044b20b3a355db7eaf51d831f822a41a2cabf6bb73eb58629e2c870d7df371b19127d2cbf6deead1a4d2622cb76ed5faeee7b6caa3119490d7ccc8fc411d7af2489908497a274ad7490eee62122994efc326a33bc255683b5d123bb21a99ba1a0c570806740c59f415dd130bcaed20298dd4a47fda50575fc3ccb3ac4d102cb02865b75c8b135d9f5ab2336e0458f1740dc8c9756c8952f6cc9462db8c884e6ce3a3f060eec90ebcd0cea1ffee938393dd1a312eb650d1298462fe335a756084f3902b4cd5df48709b30cfecfabadf2049ef3b73c3fdc5a2592cc9585f8641477b3e9a5c108381382c6836fc55d7b86a786957a16f937056b299aade1c9e3d8ffe65f10155bcf9a74d29a85f39a0b000b78da206a6d44058edc54c8c96226b4ca271e5fecafac09681d937aafd3971797de14d9adfde07e08500732c8436dc699dba7d305c5bbceabe41922646cbbb2d422c5a924cdaeb86bc94b84437c6</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-blink\">\n      <input class=\"hbe hbe-input-field hbe-input-field-blink\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-blink\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-blink\" data-content=\"请输入密码\">请输入密码</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","categories":["工具"]},{"title":"研开小队专属","url":"/posts/4413894/","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"密码错误\" data-whm=\"/\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"cc54f44cb79055331e92ad852fcda296fd956e238420fe43c33757aaa1e78fab\">37c4a6b99b94871726545fa6a9acf0cde6d9eb23b6911dd6e2787f441e95c0aba03ed3b1bffb04fa881308ac66cd95a377b8e5a3981e40d8b6ed7bbfe17e2e3b467868a19bc4aa265dfa648c19d73bc19116625ad62f6dcb300aa55760abd8d347422cfd76324816db379e994fb9288eb0e8dcd4c980ea6806973fabc6a739dcc00d38a1c39b24b1dab36f1992aef0e8436b23825d1b36e1ad80ee2b8c62baa1a283751664eeb43d9c8d0fffc93efb1e378ceba0f20b792a79a34ce762ac4de2ed0520c6d5548204e90973e5dc37270fc7081e5c9617257b5165616a69ec96092fb8e296df20a83cb5688f8e2e0739e75fedef08671dee2b64cb7357a55f818cda401a51272218ff64a63c8c5efe5ae89aa82dca752b513dcd07c0b9a1511236d57581958b1e42cf70a87ba04f5640672d5ec8e9fb136fb495ad04ecb68a54caf3b9b81ecc1bff75557c595ebb4acc2ccbbea74e3222a65889a05e1b6630627258273b79fb6b6bde9b4ad47618556a173402f630f64fbb81692e24a235586aa341aa55cffa09da78188146547c8e0302db9e7dce2055fe11537d049e0b0edb0c3853eaef3f3ac48aa86f96f38c5bc4a3cfe8bf3a4486bb2048ad61da7d345c16d722b90a5b5923de67d107463eba0104694eeab6f876f593cd5bb5a895deb49fc1efba4df9fdac3ed4d887b8b6515ffc7bf23b8dc5281306c464721ed4c657704ead5ca2ae9775da7ef80315ee3e5ed5dca1cc682c8abc04ad457f04afe2abf28c9c424f267076369b1d474d85c4c7022e3fdbcecbcecdec55c0025622a83007f70524216702c7eb99d72281de349c26eecbef98074fc9024bbde090e2c325399696e317010bad8df534c36a21ea276d02f726a054c4e8fffdc017f1904de79098d8975a6c874af720848ec5d94cb83debad6e754fcbcb7455e62ad1828123238482d5067aa3d33f22da007d534eacb183aa0971b8baae345075b7ea13f0540f67eb7af764b15e97b69b35938640a4cb8a0a356452ea7b309df65299d5f1d3e6cf56d9c16c3f640fe9b639f81b7d86f2ccf2c332fb6bfb92c7d2fde5a737fe121f11ac088d9b45a82e962e53872edbf104f77ba00e2677937ffdc22876f49c694d94a7b8f8b7baa359765d01e52a375f300b1e02b94449d4ed87644828c85ebc47cdcd1000e535eca6949e71b3bf2b450ae86632a942424015dbe21a4f34ffae92251e9c8136db3302ca17de7cea775777e7a36f4df3fec7cb60ce65efdcf7355647204a54645372b67ed4ae58cbf03f2557d7ac80cbbd71f60d4a0f015dc44eb41d4d113d71217f1da12862dbfc0f7bac70c77c5f3abd960fe276a53fce4595667291c5305e99a79be4a674abef2699f2cd4d1ad531a7be606ac64f9f3b7988d2566b651d0ce96f3d70648679d7238cb818fb29bcc8d899b10486d2c2818d7560d10ce930c1e0bafdfba74f6578f170a69075757c96fe61d7a6e4852b5e47dececf5a1dde4d9866632e845ab346bb1b4e8f928fc9c52b17f15da44a55d7a8c7e4fd3bdf241a77158e7f96fd0846848990cc514ccbc26821c4d149a8ae5f52042a74da54e162443a9ea2112026506be2dad02300a3ce91eb2c0678c600265023ceb4caabc533bfcfc05c7c9287d84e3bcd2cd6f3d54bfe598c547e94f359d2c5988a31036eb415952d3fe8fee9d49a2ff7a3aa9ad25718b3c8664bb795b26fb47a67bfd74ea05167e76cb9e5dc79690a0302716a3c798db6bb9a5ebb8bcbb6121caa236e2c6f14cfce3590567fefb76c82de4a99587a3ac02867c836c6fa4843705e2712f08a87e209a2599ab94fec71027caf40a15b336828ccb64f8d409b9c0104cda7a684d6e214b2a1c7d15dbffab19e57da97773ced54534e9415e457bdeab5d7e2750295e90defb5581043c275285aa46c0640a5796e5e5220488f47594b647a64bf051333e4dead03b65a14f2c4510baf982a089b857f05e26b11ee342e9fc34c06d0ff3a4a8d3244a38efaaabf48c805a1e65d71d3bd2bf3563b124340852d2b7c4a82ceb4a2e636d406fd49d6648df20d1ad7b5a92f03164f8e0178e001b2a454ff4645ee98aaa91fec5cc233bcb92075c3e57f50defdb7348f5a752393aa1829f3fab06cdbd2255eced43d178ba54f2fc23fdedff16e13fb0a99bcc87313f190f67708e89a4a901297fa8ed35402ee20cc2194e4a3df356fa3848e4c7e176a5fd3c9b9d2eed78614b05a32319581eb3b1fb94baa9df1176f55851e42f1ed3c94f1ca9aaeb0906525979e6fb794147065a5509c47e6365cbab0ab0aee6470e329d5d81f36bd0257a916b6baf14459efd1ff44bab7d85b231d31bfdf6417010f800d390cca92fa3c2c845fb66743f2a641d4925d618a6995e35b7de428c84cc7c3fc452a614afd326474149362d7bd2331d65f9b74ae59ab6e326e04d3f213ad433457a2973afdc40dbdf7cc294d3f768b45ec9610ae7ca50b984ed41ccba6fa62ec439a2a6a48e2c605e5feae1a5f83729c29c2948632ac15b05b700c5b71f480422e551ab10cd238fd44dcbc3f3a1e111f1e83ce3f8d5814ea8630777c331e063e0653bbaa387e1c56c54e1585e4829734835466255d3c1f1aac6eded11c9bd4ae979d8c003ec83d5444b4b4dad2271491b3f70cd8f174827413a74d594fafdbb148abb7a8905892a6fe3ff4bc98242d483c9211a7089a848c581494e07eea8c7818187aeeeeb28391bbd3f679c166b181749ce3e606782b8449f3b3161ad923cc4650cba704a31d6b8ff37d2b30c140e0ceec678f7c926ac2eaf5f9030bdb0dfa0675fa54180baeb4aeeb5228cc96e041418a044a86ee7f94758c4cc4866e6f17c3ccd53b4cb6cff64e2253bf54c664d48d5e80880cef5d61c4d989bf28572ee1ff557e5792f9011ecd89d404a3b9476aa7de2c91b0a074e4884db32484a80aa4d51ac3429bb32bccfe28e7cd009685cec5cbb59805949546338736a082ad0d5480945281e2bf28a59dc5695c5a8da3647e37c219d4a7aa36e7b138ceced34eca78ca12dc39b077b5353f153f931ca9c435b8811b9fb60d93966c17fcd94c52a1a24679417b32fbc8bfe098280f5946e5660eac3dd852371ff5c56696b5f01a08d421a31c4baaf0052571e595740e40a9dbcd3330e2c84475a1d4876a7f03f800d9e98e6228d6b6f8e00fad7991332dba1b89fb125ab2e1aa7ba1210887fd14035fb11e39380195fb21df78c9d36f620c8c1c002993677ad8bcfe4caa508384170e500c82f8a1c56cdb52f8184042a6e7020d2c86b4b516ab6877810f87fad1ca27420dd79dd2ef262a894fdf2136947dba03a0fac4f5e8d41e9bd0d7b0eeec9d5f13a76012c401fdd457672db76870fcfa9bf38ba44e1bfa19d630c713b631f8b6827cb212998da4c76cceb59e4097987b38342cd4a3329b3049410d6eb519e07176e5b98259ef22b3a20c63aac6eb77c360572621a3d8fb65e332dc8fcef519dd3e433608a89422301cf5a1186e3807f95d7bdfa4f883803da7546c127d4b067d57f291253e90681130d2223870cce09131520d2afc557e1c250e48fc7c171433677c62245b2f96aa73eb7d8b4e762c5b006b52c511db2737219b170a1bc6de5f654fed2bdad1902f93e7c0033081145a824c7397d35b4de42ba13d10f76190351910c11a370a0510f834469873128dbf451fd3254455bb9ebba1f554146083726d3b509cec6a27b6f47b37ae4b85ea98bcf3d3034feb779a22d3c72798a53ca5e89e4507a13cdcb98dfa53e6541cbd96783e422c1e4839df73afdd4411811ffba2efa46491d1081316c42ea6f44b4c7f5ba59bd27b2e03279869208a40882663785e9740c43a7dc4091fb87b2640faa045da2d0b570478b733fb7e58a21d97beb34f8736b79a6ec1168e3dee444eb4a3bb5236158e867c59daa03bb50e9a2175ab72fe89ebaa9ae4a7ec8d11f7c288f14a0de923dab1f4ab4fe71c8f908c0dacbd560463adc3c9e7ae10e905872435a0094580a553de54ad2e36d17e01b5afaa837cad231c6ecd01b3aa0e0a8bf74495c220d34bf848f3eb91052a2c40bef3b05f19dc92c7849becdd94072d7b9ca0af1626730aecebe8f0c4a8d5779c5dad227f9496dcc8cbd993bf0adfdeb39b5ac681bd43a7538854378748a1f50f4804d98b38dd13cda6a478cdc56da12da33a0cc87e489db78e33e6a50f8dbe5fbdaa329da28e071fcb262139eb2da9251c8847f60a75c2963a462f6ac8b9f50e7fafddafb4b03a63da607225f6a017fb6a020cfea7fa3417ee2521d6f435370561222de21cde721b8edb3463a33af9e376ac31d71aade1bdc5629c4a74f3ecc7ae08de01a1a8896742e156908147927273d32029228bf40d76d0253788ff3a1dfeed97c151c0b7cff44e420d15d9ed69e33e72d4e36e9946052151858e19500a348cc1006897750c47b0f1db0d5c7245afc959bea521675c4d40d33f12d3cfc3812033955fcfae73d1defd1bd23a52cd610ce24742e383527fea72ce5ce302c919e84a1fbbbdbd5c2b238112de62d368ffe72abb83043b2b6bf13fdd6f765b36ea1079189a4b5172be5b0036be1c44569e8891ca221b90333068508eaa8ffbe785f428b2ee83794d11e28377ee4f7bb01be0f16d4042c787c0c8f2a4e6b22cebd4a7881dbf87aae31a6534ab058b8321f1f8085c8403c03d6f9f1c9430a987775793614fbf33855be7ce1e0751b668dee1f27aa6f3032de2ce5ade13563b525c070a2d4664146fe89404fe8d34831d9c93ddbd8c6123752d0fa87a00ddad33be5bb91f8731f4c9f38981f10c44ac8eac50b09eef9cd24cbe4d40867545d96b882fe9ecade7007d74a2b8f9fbe3e940bdaf8a08f928fdb6407ebb1482505a6a0969f4c60bef51518d7962f2076499b85d2adbacff48755e9fdd926a956087532633db8bd7c1eecb870c9dca778341f13e48d872d240eca547acfb9cb8ca14fa6b87c2bdb916e46926e20bf42a4d8fd5c4184b9737df975096ebd3181a2a3ed4182151f8e62cb4ab6e90b97c0a0efee12bb574c8bbaea443b0c505bb087dd7a1bc838e3554e5742c25872c98dfa3b44c03e91f3f7ea715f3d78aa18a0f98c9482ad1f2befb3466680298833d907de1572e98ec311091abe353ac892eccf864887d5513557c0bdedda0d552dd3773f509a3f269a7b5fa0393644ad5a8331c0adb1c4391aa11e0959d770c71197326c78fbd8cf286cf4680a30ac7c51a31aa53d66f060b09feee8146d8ef23d982da9d5f971ec584ad064dd882fa16e4483bb57b65df15f19a8547f0874d90f65875557e00b919a4b977290daa488f523127604a5598f05a5ac97a73268d8162a77940fe2fec60ddac63e01d6667d14d7422fff8b43f856c590c028617c8a7253f78d58894d1f49dfa7a5307b71a879d0bc0664a312aebe51f8e2c5bc9a0985621dc4610ce9908f979460309441c45cfb45165af07bc3050920b430fa7534c205deb9a57ce195012f87c1f6f83b07cfdbd1fc29d73bcfedb99531a2364701e8e3ef0047381e6177d5d3d48a52b5212a79f6d98a4d2fe91d84c428458deff8d6dc7fb8677059e3563d444a39554e7db7c51bb82b6d6e4aad640196dc100937ca21a0d72ee6c114f7b3ac9d1ec97f6d5a6965ce5db72d943d4aa3705c03835f01a7e2771050559bde0a8d3d1304007c3e40ec50adf8543c88800361c18d9e461460ca68434bb72d48d89dc5d4e67b462b838ba56b43373d85b6c71c76eff773cb2859aa8d838bf462f14669f16f00d20389a8418df31265cad4099fbb50f5727ae20bc3106493a352faffd615a50d8f567c4b77602559ce9eb546860e7e6ac67cb424150e7357c1d125c0555ad83aa2e88e6f732ee5eb837b778d5c1a8883e8ba2e3c9c045cb4f5f704fb158446f4fb727facb55029f64c3f8d37e6a931058de0816e7c12b4c26313ab43165b74e763ff9c9ef98881b2a23eeb4fbf2d0168e635fd549c99eb59b16afb2575be90817011abe2917ddd7832f36d8a02870ab4f6a0316c5c34781a24d8fbb5e1ecc083a367c6120ebef4c5a113d1dcd3e762a9397c7a24a9b6dd9a6efb52bf7bdab36c1af7c7d3ecfe7f7fcaee29e6eb4d8c8ebddc9751865772b24806f9de2be3570efe138464671809a024ebff93ff7fe5de664282906bde3da003512d122755d9bd009a3e8483911f3e2afd2796bed1cf49bf8f239ec09db30fe05619ab7edf3088100f31005dd44854c88c2a6a3f7a95af3fdc788479b73c4c859f6768dca1ef329b1baadaa2c654029a93d616578ae16f0f27d8389100080ee60c8a5e386ecf3444eee421e73c0e4cc9f686cddcc74b145e423e3af7d1d1ce7b8b50bd6e0d6e2aa03068dda1178dc78ec739678c7878bfdeabb171eda8161b77ae2a472d79576b3bc8389487930039868bd7134b67ac340f1bf2b5161328d55285a4ac1a0b9449cd9e875f21d3b4f1589ad6c2989c8a77ca4b56a6b7ae51925c35991340a3c65a1e40945304251278e48b74c0155ccd0d9dfeeb0e5e8f9cb0b351cd0fd5c22ad94ed661240f50def74be9e5d6a66ec80efd4ec43660090d180e9367cbb8e03ee3fbda2aa5da398c5b84436a8baf971d95a814ed01defb409a692f214441cb6d07fcca207bf03ece27e4a526afd99dd530faeae3b9e0d93ba1bcdf87700e258c6e7e0604318d6f842a1ae4ad7b057573ed95c28a80c3aa25678ffb817af2dabc3611bb4780a8d5948c3f0d17b73442420676ac9256e4b2739d9eb5dbd11b575d6336216ce2e97591feb97d6ea369f0f52c212e03bf8e7bc93f4358c98ea4da7de8acb2ffc02b45fb9e05c712a1dea98aeea9b1b5d1aba78164b3084b296eeef7c461039340659ca860dd2b100d6feaf28c5e6f9a87fd6d8bbc6e3e74e124d677a79d9bfac3407ea93fe52fc25ce29baaa44ae841d48024b2e8284113cfb2cb5c2d953ded0d92396f42ec557765e8a960c242f8ea8ee480a9423afb4031a529a03ba8d2d71676ac93d37bc7632b0d09e4cb96b41592c2243a617b9a0bce31abfcbec44ec09eb483bb1c35c5817bdedaadf94bc486ed41de3ebb47b7b7a589c13773d7debb34181969d69264acd4774ded27898bcb375f1f72dcf85698c697af7c4a08f8f7edfd3e07411f0d1565e0594e8eb35d316706ddb59e7908d565370d1f5c9893f17c2d2d856af28b52ec26df4b0bdb15b1019699694e8fb7758b51d958bbdcb432175d97dd03ef48a4c6ffd42a62b6341a6065b4bd11cfd4d76ba84b9983e652d73cee4983a3d7589d8a3c588bcdde3af0f6384b487991c6b6d54b4063ecb26f58926de96645545a9a69f049907a4f8bd0b9d01167d4aa37e40c6c43cbb80c2f010002db33fca811ffa84fdc685956fda86a7c0dfc87db95f3d26874399146fa952d078eff406e2ee169515f9a26dfb0a538a64698f4e59646aeddc9d5dc46f1f4bc51d7baae69d4bf56fb0fe4907fa92f8710682cd840a0bb8d3aa4d247bd7a172a3d318deae007db0905480c19bfe11448f59ed03f65bf960c232cf956e05841dcf69f64ba28cf064aadc3721aba6dc34b67215bdc32a44fc911fdba295e344ff67cbbfa855d726d3da260716ffb0f1413672726243e8c2c0be41872538f9cc1321ee668682aee47ef9b91d108f38586937b16041bc7aad3e085e8c02ebf42c4c9f016a624f5b0d32dcbab46e656116138202ec6770176986cabf92eabab3ac4639ceb35e0aec9b600ddec80124e66481bc8ea8f45064357d32eea7b8396746c05ba65f6f62f0eb896fee0f28ea05fbf7524a6efcf9cbbcea2c70a1b88c69d7d3592cb7e56afbec619dd5d9b5b4d24898248f7a686947ed5796c06050d207c7d81a63fb4d4b32c68f0f76801b8eaf06e55e3c78d247bcd18a819890f2f502856f0c0f20f8da8b660bfd2e95b60d0b519eb71c10262a9fb3338ca9f95af4b64da74c42a2c8064ce028e8fef73e1100c0fe9d4bfda82bfe370d2d1b91370c3b5fa6880cae56e5bf8f856e232b2c2555bf84f9dea2a40e942a57e78e888fae9ae8da7165fa4c1ee5f34f8fb7cbd6230d24545e3f7a48d7a255f52131cfbc44e979fce0f8f79d033d941e17bfd85eff5c84f8a08845e1809e402ed8dac13b21f63d379c48b9495fedfe54d6b123cdfa0e8cf709017c0d3b9aa4bf545462a149b72cd82072e600c24c77155efc523872f3b2448adbea281643a1a98784ebbe34b955b13646a2c791384145f895665af60ad13f373ae70eb3829044e8ca8753c17e0892aaf6db24f8e1aa1095fa6f167dca28b524f3bc9bfedc6178a2f3a03f44d95269b30fd658859152a6e72fad91f5784bcfa1ab9e1df2c37618559beafc3730081983591df6d5d03d3e583ec3dc609d2298ccfefbff84d95fdc84e7e8070ccb970ec2c11ca5f42b212b37b716ee2605e43e9cf413e7c1e02d2c3e9a040414f610686d9e1a599eb8b06816a0c9ccc36b52b29ff0b144a970d43ef58d7dc1eb8a608375972ddbd22bb9ca9cba7326404d8bbb4b1cefae79867987b273a4013e0ca94377c062d2f9d328153f7a6de9ef14a2cdd32dc4e5002b350dae8296b38822e6fbd2b63f2df6c06ccc903894fb4fac58a81ebfbf7b50f7c4aa743e73cc969cb4be8fa557ce99898aef1d291fd72d1dd3118f597ff6ab2736fa3ad1fa17a567047a659d1276b54bcf22ffd0a1b1a9dc3593273d49e42ce3e637b5117857cb438e7abaf34781898f784a139233dbe4dc66c34661f0a8c2c5b0062f94f8af739677078e8b9f03a7d291416f1016c3ba639f535ee36659dab5df750f7654734ffdc207e28a955967fc76cdcd83a403500d775fcd8225bdd0cd119d6aa3abd3ce8cae2887fec834b40b7f56b695a22f04ad40cd392d72e9be0602bedee8825204b3a9ea65c4ac7e76c84e62a04a7b60a258da997a6e0ce62e88edac6d61ad5a47b6dd8744fde01d9dd2b0cd80b523bf8de8967e75d38913c8f587fc1ba34ba3378cf5d3907c844cd05efdc04b8f3aaac2242e03f804beedb4829b0b27cc439e3ced60adb67e767a57333eb8510e370827115c544e191f7b8372d9dac950fd85c763aba7d115f204bdc87143486f6c5e4d55e3be455c1ddbbbf349b1aee2ad7cf70c1fa75c116ed7f759a2edc435f2696b543097e5367999f9937675885c3f8ba262e1a7f5c23a2bb2a8bd30650777eb6e62d38897c7a4c7048f2930212904f256dd8831b46d56084b5fbc860a92d341ee82f70f9ab5be253eb3d2395faa270aa092748db709625ca95c91a06506a44823109147747f044cc4a732763126e83b693801847e1c2a4971383596f2e760e0fbe6de9ebac5d2f3be4e3cbc66481c6dcd59d8b6986dc01a5b567a175f06adce9df06a3700b248f20eff064089876fbb729e417e2b8d17b9a64e31b45cccd544a06e20090b6fb31ceaf451521c098b9a1ac96d6d21b1bb378d7e5f6ec0ff89d949110e7ccf18e3304648fcaa4b799461b3a8e2f45e1576403fb4ad0dc82e947f7e0f77dd2bd5d66889f1a4a589010bf976c124630a7db5265b359a94b4c79360fe5d733d181138f8b98b9e665904aa55b77d6ff0a02afa7130ab816c231a38d713e67ea979c15fea03997d1b39dc31d3d83f91afd2d32919256ffb060c0484e3c020e1b291aadc2a66c91ced83d75d44ec04ecaf4d293d807b821967f2260f744829dc638633c6d7d039518bc836539777576afc41265d99cbc8cbfd2f2f5cf5677e564c676094de650eff8bbbba7193e7dda10fce2630b729b93eb8551b54dbcd2f27e6b55299553029788eeefc374dd05b361417bb6dd07cbecb7bf046a59c63d3eb025cc1f6da6460c42cfcaeb120f5c99be7587005da52da3fde09ff2660473d276053b705e35a2ca8c5e534472527f28901e23fcef934649837da0b27afc5be2ee9114689747e135886b202c7927d88b5252caa1109fa0b4cb419c495b26c9991c2bfac907d39d7d4936bae82c16f696a5fe82231273e4433c4869f2f7506be63c8f1b4181b7e937cf439c90eb860443196fad32987af1fdc73fa582f225913936d5b71886d34d8cda5ad476c400c8bd1ad56179f31e59fc405fb04fa7084603e5acadf4af6e94ea1a44cdb54372eed2e484c6a88d1a3c0730f91600a42ddd75995c0f3bd1c4de3da37e4142ef3906e5e307f10c9896bc5cb9401bf3470de6118c8919cef3b433c63abf932927979bdd1a12fbb94233fd4a075be201e0fe46508a03aa7390d597dc30026a7764bbcddb40e1ce1fd2f0be3ba2537b46d750dc316dace72a74311ca32e0236473481d6903436060baf994e83b2c1c077ce786f85e68512032e814862cf3a01c48ea97df80b7273a638abed7c17addb06455eeb35e1a509cc230822ac2b08900373605280c1b5dbe9317c1965dae2e0fb502e65468f668953258c2b618a3775fdf131658c395b4bcfecae21381c0948eb7387a64d4495846f9487db55c08e23e79ff3d20003db7ed4754238574e1860b3e999f6a64f0003a08edbf5f7e31465bb0e8ea6a8469327dd72358983a6caa2aad551621a7e32bc17ed6125f7b7aa767f2297632346d80885686c1b443d393cf5a5cc97fa16bea54ba968aa7952152a3b7111d73e8e10866cc645b4d4460345c9a4d09badc729f448a680f6aa39a187c0fbb52301cd0029bbdf7a58a639246c3628851df59ba5cbfd769fbee0dcf29e62f42606c08be325199e4ae86380de9e39548c789eebcdfdc7268bc6f12521d4a38b36b9112ec691e83ea8f9b352fc6af637e7f11898cd83414d69d8b9a65bbcb8a068ed7c0928d40e5ebad194b0ab6169a37164c74208362cbee22b0e72bfea26ed3794cdd61b1c162d90e3d591c4b93b698b5123fb34c0f4d25463c06a2e0aff63c9a1ac68814aa20159bb703bbd5098deb1793aba112c39f19840343ee9d1928f930d4d11c78e6ed68b27b3e5f81d0ff449f5e0c3a43f017de0198f1b78a4e587aea734c7ba2468f76aca4670dc565ade95868bd654f28810788ebb59eadbcecef751e5c5efbb4dd2247bea0f2a59a4b86bc314200e9349de59109ee3022bb3e27ee5b11a548e35bdd925d1354d2d9dc67be596f67f117204154c15b996a6335b23bcebbb264ec046ced6f18b8b401565667f5b1f47e7aff0cba6ec892eac3ba0c8e29dd981ea4504914ff6d9c8ea9da318ab4b7f20c3700fe7c4aaf2192644ffa22a2057adaaae514219eb46e39a5454eb7a632160316bac8a1ce15738810bce571f80a8312023bc0ce55e4f652ad0dd86d2fc133b164f9a0a5301a9f62045eb363398a040f3888df07f15c6fb2251cb37967386356697dd047f8ec2d200cd58f3634bab8923ecbe977e12dbc47ac0db38839fc96a7ee79c40d75d613c18176c74daabf278810cf5fda61cf7524b3f1be4c323eb29e2e5714085665eadb7d7f9e8df224278de8c07692e5dc22c614ce252ab0b1b75cec266b547cc8f134147e29ed1d6a2614b27e482d72e93af1c05d4ff81e947b00b60366eefb548abc14beaf6983757310e20f0e7ff8a8ec5aaf6fa697c1d2794941b5277af9599b81a6ac3683444eabbb344046d9965c1937829eac7a9626efdaa1a82e1d37a9e2a1fa41a5a627ee5b8e222fd83404a0334c79646b487a84ad84959f0e37a2da4d58ea24be9d46a095189e2a529d7a01f053227ef70e525364067d0f01dad77224cf18480d29f0ef89a73bef27154012a8097200645c0a78b0699723cdc476a9d88fc2a8e9d2befa4b5d86c83996804bfe0ce62a2f2920790af34356c04bf41e5619c74a9a204315708fa4d5f346e7402ec4b9dea0ed6f3771bdc37802bc70af69ecfb14c75f8ab5c9a033914589727e814995f8f62fc7e63ce3313c79cbd339330d26284f91ce78122c9834e064e7acfce55170485212f753b9b135f4c942ea01044d9cf21fb3fe8f1031be40191a789b4f568bb26883b845ccc74522f6703d31192c85bd4fcc65a27c9a48c5ada997b9a71281f44ecb4ff48dbacae43a2dd7e3e3bfe9f81f5b73a34b56b2dce96f864876fc6b2980e9481638f273b645e190015744c15b4509bed50731827328045395f98b5d5da1b5e8539ea0912baae0f52260099ece3f75085af909e738ab9b70bd648e4af71063bf9fe5d619463e85f572cdbdf9ab08fea88f38a317167a5a90c2772d7135cc25a1ddf88b2b9381f60abd6ca65338148ad06373004439b6681f179dafb8497be92439119789ed1dde6d697e7622510c09904f4433e7580bbbc718f3ffc2c85fd5906dd1ff6e225590ac1070529da6d56733bd47d9b870f3ce1732459790db1f9d23d40d71386196161a22544e1b48efaefd5c75451736275d9b32f279731af4e908ad9cb8e7753602d9bb83b95913661f3ce6235bde66e9e45ad036bc094f7fab44cc3f62604332c8507e8a3ccb1341cedb97e30c9488a102db66a72bd5a0f9e31b758e28220f3bc8065b0ecb9834e845ad1af1c9394194958e2baa3b0fd81077a34bd05241c7fce41affc6785ba7a0703b6fafa75c4072871eb316965793b5f12e2724a3ffe6cd1d1970563b5530bcd925d97acb1d8fa2ea2e79b5bcf306d6f507a98c964d7a62482e8ad3e690ac0a0010b93efd38f883565dbfff5481a624063f9d514344da9e23b7c85d5059c6b4666d748ea26a74dc0bcc118cae37f2a9d0ea1eab66d0602bbc1e49e3958c44a0c708815e74c517182196afe5045e8e0122882adf9804dd8ddea7a1af7c8c99327b033804540cbc8e450f3487de919524a53e484147d0dcf02607d67e04e822de2cc1433f097731669c56a8b3f4fecd8e1b9b66bdbdb9c885a5b1bcfe862a45dab6f04ccde3cf534d6db894f62e44e1b5c566a0881b3417951c1984d65cda9e6e8e5836d7e0cbb1badefdea2057e1fe42edf48a9b9caa5c364ffbb497759502b6630796aff3d89c2d5ea2a9fff598ef2458303b6df92be6cffe9bc5f9a4e893994263d0fe1c487b759941a9ef38583e5fec437ba44d57dcd0ec759b0cf7618fe637a10548fee07fdba09c639b88f2d69363f76275f7077ee6868eae39f2e670ad6e139cb19387d495e020cdd4bb7e4f8f07d8f3c6eb3d9355b93adb8adbed5eb4c34e546d3f2a01f3983f3b20793a337acfdbed8649806b616c51f0ec618a02cb5ef3bb99ee812008d636716186a716484e8f20ce0786e63ca1e7430b044ede5b5a787736e540e7b2145c91a454c371bc8cecb85ac80ebfe5eeebd86286f35c9664e3c7132818a0a6f93cfbbdf1bca7c94301101bccd30b54a200e1ae1230c8f2e76fa0063febde3f7bd02e92cdff0d3523accbbaad2e1d3e44e7d7935e71204cd3eea089d109122f37b445e5e499663002efea232c6f1ef1feff44a97c619cce1a623af0e16182df5458c59b7772bda9a84b91c2b1249da3f3f605e363c9ae0c2e3feb70be9aa20643878c5675c661a4a108045a7c80649d81d866f890f894eb3784e85c687d857afb32fb5247cbfdc4849bfb35d3dc2fc437d005bb0532d55a7b1304fcd2a805ac29e1fe4099d8086b94b610b3b7e5b55da27f7ca70318825df0a1ac27bfcb91afe7fc72bc70194363c3eb32d99d6c68e80fc8bf78dee0c15dde73f1875e819090d61f72ef192631d9d598c3c7fe618f210cf2752309cf1b88abc9c913f072e1f80a798e560e4e5b5b2b51a474950518d174bf1412233f71064b9f1ef5dac935cbeb585369fa9d09c408fdae48020a989870e14887d45ba3f38397865c6f6af120a1482f67dc1d835d795e7f3481c4d66ccb76b580a2e1800974a384e5983be98bc8ac38053f78cea20f3a8b28d0c857d2aaae9412c1f3bdc085b6946a2a12012fb67bf847a1771f6db65a893c229332bdf7c01ca2d44a8174ae86009f3de65975d995a0d2b39f09bbf85db61829bf93c92c15968e5b2bc1d30b51664c18d1f9a795389834d421cc7225e47251f42922eae0b39b379fd96167702e921c1f8585a7d41833e90c10ab785d0b0bfc73ba120681cb41dcdb07d113ba1b84aaabe8a940d684bd18e5e82b4e150028bf3e974c98a5a6fdd9a1129d6a6637badc413224fe1397a179f220f57d81c3174ae67d994c138d1034ae3e281b01424bef575c228446a44ce931817b798cfe9c8b95a492b4b9d8d0a873afb496d505989a6a33f2f6e42000a5350391e89836154feda7be163e955083e8254e83b6e59f097a6829d7028327bcdeed2d9d805e3c08603e293f542d350897b20348637927b4f1910ad287a77b59226dc6e9675af48e1fcbd05d1a4d66ea2c9c7678ed5bb47f2b017308f1726043c93252c44cf27f82b1c7ee9c85b7c0e438ab9ec25e14a07a6260ef929258d18715f4b88d8d32baceaf093023f84e89d07111541b5ee4e30ea480e9a065ec27d7447070dc3e5053b075a2d5a3c1ef0e09e78fa3cdcfce2aa05e830e52d8aeeb94f0cd085a94970625414c69c796f755016f944ab7bbd8c53b2c7881d76f510e77a00a33b1febfcd5e0acf9593a8349956f6611358120535f6b1236b9f7e1085aa4d8ce1bb91b10d288804408af84b5d287014c286da5553f52ea1e65f4848e7024f3e6319828fffe15d16bd8c42626877932ed33efafd5070efec7498ded918cadc3c4f4f398b3f15f21f553e813901ff96c18f1a579b455f1341700f0893f0763dce582ee4b6fcd59c1f00c35c46f9ac8d05ccfed34cf989ae80394d3b2a5c2170cfcceb786964d63cdd1afcae1ae167135692789b2fd2940dbf2c179acd0abf5d3e295e0fd4de49bcf7582ff6b63a20263b9be08939b273042ba54823c0d67634f0f010e83af9a1ba2f69db2b3a0b1451e96b01294e3181f3a6e02f7fb3d888fd6f7b9b7bcd54a8778482be46aa3a169d8e2f01201982e239e8c63b3eec6815e40565f5d888be77e2518708d4ba7754d726b7d711afdcf2b9113b6a9e09618e09970a7ee2876cdc045b05735b8183b908be3d373e77b0b3233e01940eace55f510da7a04a62a568a4b8ac855ccc4f5fd1d4d93db79feb796c07a23b5ac49508e432069cd22fa01556d490c08fe6bb623ae0599dd0bdc6e8512768abd714f96004ead58a214bbb6111c4fc8f67e9c009ef920a13e087e16d9e44379bfbd3b7a49003f6398659540bfa20d7ea62c3d74cb795bb308fc998009abcfe876927d3e0f255cdbf78d67d6ca14379914faa057e6b752b2a8404e72eb7521c687d3dc208a75e4812751905bfce9d998e2f242c950878b77670b3b1109c652cacfe161201115da3b876fab75b2e7b9daf4094af9e779eca2407067d81d5096fe6f0f090ab557910f330dca8cdc066c90ac4843c994811eac46a978d2f9c993c40f2a8d230cdc100b558736b342073305346fcc63a5669c04cd5dd6d5e9d1e909cf06899aad56229d6947dfd584594153c805349cbac438eeef7a6fdfe2f97eb1500aad58d071cdfcb5d35c9b8ea71888377eb9942bcb5c385f91228d7ce48aa0918cc966cc715536ac3f3cfdbeceba064bc1f2aa15356f0bf23a373b4fb0932b34978bab05edd0abf5065988043f161670c4815a8a014eaabbb756c30792f54b074701b57c20899531129e0474d7cdf7072e4661e755601624d5987f353385057d47c0f995ac4bd98df05d9fce6c1c0290d8e6c692146761cda35072c57d8a000bd8e4465dcea74960848d6b8246ec989b8f1c7f7253fc04d4bc4171ccdbf9055496a5738337de3eadd11ddcaad11e414c33805e156d82542f5c3ff4bf3ca3b88bbd90b4c7207b7a340fe6ce92604f7bd9a4f5a34d43e4065352ed450ccc64be325e1ea76c50961247d50e332287af62a2b6ebb32f6c164542fd66fd08ea25fd086f769b34c74d3ac537051c868f07ccfeb50bffdeaaf890ddba8f10906905f9a660c86e7ff9e4d7a891e91659c57f228b39dba21ff776f4c61521fe324f005c59a02ce636d75b5e74146583dc3157b6b477085308bcbc03d310e8aa31cc3cf63f534c2ee29bdc8f0706e3f053076b3e3af8e2dc1d6932aae6d242c4a13cd5fb69f5e91d3e7eb97f13ee99775682b2666c5c401cbfc6e47b9d0ec721594b025c8d527dc59b73008918fd46776c028f8abc39c431c24c1abf9a6a026671550ff3bf18ffc201016eec10f20ed5d3b48095a35e783a8a413404c221a61484dc8522922d9be3e208dd7b6314f85a9c38c40f999765b9e7d1db3d58c6a0d30540ba746c4e077b25d423ff0e2cef0abb92c320af913e9a1c0b230c6dc864ec980fac1fc74c371447520a0a6983eafc4b6022b631c5f819b3fc4577e5e163c53bdc7d99ef57cfcad6da3cb8a6e73540ed61cb9ad868138b78a4f5072baf2fa91aa5cc38a6f22a052dcf0ef0e528692a658ec839d3fbaef2c4732d56d29d9d3e69614e07b35abac04249cd03e2358a74f7fbb2144477e5ded2dff1b245b242b1e2748847d354437956e13f7d146d910e93e7a1586760cda09f2b80cee7647bc3d084b017633ff0e10569a5a7cf1684e1f7fd37badc3a1c8f36fd9d3cf6157fa98ff6322ec692c007d73937b3236aff827849f83dc90c8fadc9d7705d16c63a7989e202be33daab16c02dd23ad1ffef500845ad0bd284effb09be10a69d8c23d5c118e609cefca4ccbbdd55c69bf69bea08eb45a835c45b04add33e3bd8d2c0deec8432782101238976165c9b57edd37c95288ea9ba8be2cf88d4fe3b07a1995dcbe9510000370711bbce4607ed4c60422bd0a6c8066f2a7aa0daa084ff906494f943fcbfa8777b496badeecb6ea4d708f1673f42da7213a88c187db600c48bdb78a9d82262cf2da704ca8ac72ddcede5c435229da5aae802126ce0cac0e797228bed5dfab9d4ea82889d34c4269af84e18b4a21ea5949268623e439278ad55729ad9f77b3998ff20e428a4c6bc36c02db5cbf960ac523aa10bcec15cbfe15803eb9feaa141ff43e897bb1f2776ecc1dd9bee88298d65d1c0335b390c8b8f497cf975d0d76324540800a0bc04b8142d30d3377fa13f2cd8e4888945e87b234042fe751e2fe04edd54b26476f4fbd52a68a99ec8493057e12448648051fdccd617c662af4b78e66207d1997087f58c5673561e75419be70f07f39c29c9de12f5e659ea4a99de2d2c0f521210c35fd53808e91421f16a849eb9720b2684a012ec63ec61f3b2d270c66d715cdc137eea7cecdc1e4215e5ce0c015941f573b2f5d7f7e6734381ef7d8c4971995098f629fb72ada80e92082fc40db15a11eb740296d465acf73db318d92978308648363be48</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-blink\">\n      <input class=\"hbe hbe-input-field hbe-input-field-blink\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-blink\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-blink\" data-content=\"请输入密码\">请输入密码</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","categories":["工具"],"tags":["Github","Git"]},{"title":"zotero常用功能","url":"/posts/22083ba6/","content":"<p>zotero论文整理工具</p>\n<span id=\"more\"></span>\n<p>中文文档：<a href=\"https://zotero-chinese.github.io/\">Zotero 中文小组 | Zotero 中文小组 (zotero-chinese.github.io)</a></p>\n<h1 id=\"使用技巧\">使用技巧</h1>\n<ul>\n<li>文献属于的分类：选中文献条目后，按住 Ctrl，文献所属的（分类）文件夹就会黄色高亮显示。</li>\n<li>复制条目到新分类：直接拖动</li>\n<li>剪切条目到新分类：shift+拖动</li>\n<li>移除条目（不删除）：delete</li>\n<li>导出带批注的pdf：点击条目，<code>文件-导出pdf</code></li>\n</ul>\n<h1 id=\"插件安装\">插件安装</h1>\n<p>下载<code>.xpi</code> 文件，zotero里<code>工具-附加组件</code>：</p>\n<img data-src=\"/posts/undefined/image-20231205223310384.png\" class=\"\" title=\"image-20231205223310384\">\n<p>找到设置标志，点<code>Install Add-on From File</code>，选择下载过的文件就可以了。</p>\n<img data-src=\"/posts/undefined/image-20231205223404923.png\" class=\"\" title=\"image-20231205223404923\">\n<h1 id=\"插件大全\">插件大全</h1>\n<h2 id=\"浏览器\">浏览器</h2>\n<h3 id=\"安装\">安装</h3>\n<p>直接在软件中会跳转安装：</p>\n<img data-src=\"/posts/undefined/image-20231205222659376.png\" class=\"\" title=\"image-20231205222659376\">\n<img data-src=\"/posts/undefined/image-20231205222628357.png\" class=\"\" title=\"image-20231205222628357\">\n<h3 id=\"效果\">效果</h3>\n<p>文件夹：可保存论文</p>\n<img data-src=\"/posts/undefined/image-20231205223742485.png\" class=\"\" title=\"image-20231205223742485\">\n<p>web of science：设定筛选条件后导出纯文本</p>\n<img data-src=\"/posts/undefined/image-20231205225008337.png\" class=\"\" title=\"image-20231205225008337\">\n<p>纯文本复制后zotero中从剪贴板导入：</p>\n<img data-src=\"/posts/undefined/image-20231205225228645.png\" class=\"\" title=\"image-20231205225228645\">\n<p>导入后可以右键条目获取pdf：</p>\n<img data-src=\"/posts/undefined/image-20231205231325370.png\" class=\"\" title=\"image-20231205231325370\">\n<p>知网可能拉取不到pdf：见下一个茉莉花插件</p>\n<h2 id=\"茉莉花\">茉莉花</h2>\n<h3 id=\"拉取知网pdf\">拉取知网pdf</h3>\n<p><a href=\"https://github.com/l0o0/jasminum\">l0o0/jasminum: A Zotero add-on to retrive CNKI meta data. 一个简单的Zotero 插件，用于识别中文元数据 (github.com)</a></p>\n<p>安装后，在<code>编辑-首选项</code>中找到茉莉花插件，下载pdftk-server</p>\n<img data-src=\"/posts/undefined/image-20231205230503428.png\" class=\"\" title=\"image-20231205230503428\">\n<p>并更新翻译器</p>\n<img data-src=\"/posts/undefined/image-20231205230519656.png\" class=\"\" title=\"image-20231205230519656\">\n<p>右键打开zotero的浏览器插件：</p>\n<img data-src=\"/posts/undefined/image-20231205230551084.png\" class=\"\" title=\"image-20231205230551084\">\n<p>在advanced中更新翻译器：</p>\n<img data-src=\"/posts/undefined/image-20231205230617144.png\" class=\"\" title=\"image-20231205230617144\">\n<p>更新后知网就会显示full text了！</p>\n<img data-src=\"/posts/undefined/image-20231205230642317.png\" class=\"\" title=\"image-20231205230642317\">\n<h3 id=\"中文功能\">中文功能</h3>\n<p>可以看官方文档</p>\n<h2 id=\"zotero-gpt\">zotero-gpt</h2>\n","categories":["工具"],"tags":["工具","zotero","论文"]}]